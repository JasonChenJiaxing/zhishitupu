{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/1.%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B.html","text":"\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u9879\u76ee\u80cc\u666f\u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3\u9879\u76ee\u7684\u5f00\u53d1\u80cc\u666f. \u4e86\u89e3\u77e5\u8bc6\u56fe\u8c31\u7684\u76f8\u5173\u57fa\u7840\u6982\u5ff5. 1 \u9879\u76ee\u80cc\u666f \u00b6 \u77e5\u8bc6\u56fe\u8c31\uff08Knowledge Graph\uff09\u662f\u4eba\u5de5\u667a\u80fd\u7684\u91cd\u8981\u5206\u652f\u6280\u672f\uff0c\u5b83\u57282012\u5e74\u7531\u8c37\u6b4c\u63d0\u51fa\uff0c\u6210\u4e3a\u5efa\u7acb\u5927\u89c4\u6a21\u77e5\u8bc6\u7684\u6740\u624b\u950f\u5e94\u7528\uff0c\u5728\u641c\u7d22\u3001\u81ea\u7136\u8bed\u8a00\u5904\u7406\u3001\u667a\u80fd\u52a9\u624b\u3001\u7535\u5b50\u5546\u52a1\u7b49\u9886\u57df\u53d1\u6325\u7740\u91cd\u8981\u4f5c\u7528\u3002\u77e5\u8bc6\u56fe\u8c31\u4e0e\u5927\u6570\u636e\u3001\u6df1\u5ea6\u5b66\u4e60\uff0c\u8fd9\u4e09\u5927\u201c\u79d8\u5bc6\u6b66\u5668\u201d\u5df2\u7ecf\u6210\u4e3a\u63a8\u52a8\u4e92\u8054\u7f51\u548c\u4eba\u5de5\u667a\u80fd\u53d1\u5c55\u7684\u6838\u5fc3\u9a71\u52a8\u529b\u4e4b\u4e00\u3002 \u4f20\u667a\u6559\u80b2\u7684AI\u5f15\u9886IT\u6559\u80b2\u524d\u6cbf, \u7279\u6b64\u63a8\u51fa\u5173\u4e8e\u533b\u7597\u65b9\u9762\u7684\u77e5\u8bc6\u56fe\u8c31\u9879\u76ee, \u5e26\u7740\u540c\u5b66\u4eec\u5b8c\u6574\u7684\u5b66\u4e60\u77e5\u8bc6\u56fe\u8c31\u76f8\u5173\u6280\u672f, \u5e76\u624e\u5b9e\u7684\u638c\u63e1\u6838\u5fc3\u5185\u5bb9\u548c\u4ee3\u7801\u80fd\u529b. \u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u610f\u4e49\uff1a\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u4e0d\u4ec5\u80fd\u591f\u6574\u5408\u548c\u8868\u793a\u533b\u5b66\u9886\u57df\u7684\u5927\u91cf\u77e5\u8bc6\uff0c\u8fd8\u80fd\u591f\u4e3a\u533b\u7597\u51b3\u7b56\u652f\u6301\u7cfb\u7edf\u3001\u75be\u75c5\u8bca\u65ad\u3001\u836f\u7269\u7814\u53d1\u7b49\u9886\u57df\u63d0\u4f9b\u6709\u529b\u7684\u652f\u6301\uff0c\u5bf9\u77e5\u8bc6\u56fe\u8c31\u7684\u7814\u7a76\u4ee5\u53ca\u5728\u533b\u7597\u9886\u57df\u7684\u5e94\u7528\u5177\u6709\u91cd\u8981\u7684\u73b0\u5b9e\u610f\u4e49\u548c\u5e7f\u6cdb\u7684\u5e94\u7528\u573a\u666f\u3002 \u672c\u9879\u76ee\u56fe\u8c31\u7ed3\u679c\u5c55\u793a\uff1a 2 \u4ec0\u4e48\u662f\u77e5\u8bc6\u56fe\u8c31 \u00b6 \u4ec0\u4e48\u662f\u77e5\u8bc6\u56fe\u8c31\u5462\uff1f \u5728\u8fd9\u91cc\u6211\u4eec\u5206\u5f00\u8ba8\u8bba\u4e00\u4e0b\u4ec0\u4e48\u662f\u77e5\u8bc6\uff0c\u4ec0\u4e48\u662f\u56fe\u8c31. \u4ec0\u4e48\u662f\u77e5\u8bc6\uff1f \u77e5\u8bc6\u662f\u4eba\u7c7b\u5728\u5b9e\u8df5\u4e2d\u8ba4\u8bc6\u5ba2\u89c2\u4e16\u754c\u7684\u6210\u679c\uff0c\u5b83\u5305\u62ec\u4e8b\u5b9e\u3001\u4fe1\u606f\u3001\u63cf\u8ff0\u4ee5\u53ca\u5728\u6559\u80b2\u548c\u5b9e\u8df5\u4e2d\u83b7\u5f97\u7684\u6280\u80fd. \u77e5\u8bc6\u662f\u4eba\u7c7b\u4ece\u5404\u4e2a\u9014\u5f84\u4e2d\u83b7\u5f97\u7684\u7ecf\u8fc7\u63d0\u5347\u3001\u603b\u7ed3\u4e0e\u51dd\u70bc\u7684\u7cfb\u7edf\u7684\u8ba4\u8bc6. \u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50: 226.1\u5398\u7c73\uff0c229\u5398\u7c73\uff0c\u90fd\u662f\u5ba2\u89c2\u5b58\u5728\u7684\u5355\u72ec\u6570\u636e. \u6b64\u65f6\uff0c\u6570\u636e\u4e0d\u5177\u6709\u4efb\u4f55\u610f\u4e49\uff0c\u4ec5\u8868\u8fbe\u4e00\u4e2a\u5ba2\u89c2\u8868\u8fbe\u4e8b\u5b9e. \u800c\u5982\u679c\u6211\u4eec\u8bf4\"\u59da\u660e\u7684\u81c2\u5c55\u4e3a226.1\u5398\u7c73\"\u3001\"\u59da\u660e\u7684\u8eab\u9ad8\u662f229\u5398\u7c73\"\u5219\u79f0\u4e3a\u662f\u4e8b\u5b9e\u578b\u7684\u9648\u8ff0\uff0c\u5c5e\u4e8e\u4fe1\u606f\u7684\u8303\u7574. \u90a3\u4e48\u6240\u8c13\u77e5\u8bc6\uff0c\u5c31\u662f\u5bf9\u4fe1\u606f\u5c42\u9762\u7684\u62bd\u8c61\u548c\u5f52\u7eb3\uff0c\u5982\u679c\u6211\u4eec\u628a\u59da\u660e\u7684\u8eab\u9ad8\u3001\u81c2\u5c55\uff0c\u53ca\u5176\u4ed6\u5c5e\u6027\u6574\u5408\u8d77\u6765, \u5c31\u5f97\u5230\u4e86\u5bf9\u4e8e\u59da\u660e\u7684\u4e00\u4e2a\u8ba4\u77e5, \u8fdb\u4e00\u6b65\u53ef\u4ee5\u4e86\u89e3\u5230\u59da\u660e\u7684\u8eab\u9ad8\u6bd4\u666e\u901a\u4eba\u8981\u9ad8. \u4ec0\u4e48\u662f\u56fe\u8c31 \u56fe\u8c31\u7684\u82f1\u6587\u662fGraph\uff0c\u76f4\u8bd1\u8fc7\u6765\u5c31\u662f\u201c\u56fe\u201d\u7684\u610f\u601d. \u5728\u56fe\u8bba\uff08\u6570\u5b66\u7684\u4e00\u4e2a\u7814\u7a76\u5206\u652f\uff09\u4e2d\uff0c\u56fe\u8868\u793a\u4e00\u4e9b\u4e8b\u7269\u4e0e\u53e6\u4e00\u4e9b\u4e8b\u7269\u4e4b\u95f4\u76f8\u4e92\u8fde\u63a5\u7684\u7ed3\u6784. \u56fe\u901a\u5e38\u7531\u8282\u70b9\uff08Vertex\uff09\u548c\u8fb9\uff08Edge\uff09\u6765\u6784\u6210\uff0c\u591a\u5173\u7cfb\u56fe\u4e00\u822c\u5305\u542b\u591a\u79cd\u7c7b\u578b\u7684\u8282\u70b9\u548c\u591a\u79cd\u7c7b\u578b\u7684\u8fb9. \u5b9e\u4f53\uff08\u8282\u70b9\uff09\u6307\u7684\u662f\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u4e8b\u7269\u6bd4\u5982\u4eba\u3001\u5730\u540d\u3001\u516c\u53f8\u7b49\uff0c\u5173\u7cfb\uff08\u8fb9\uff09\u5219\u7528\u6765\u8868\u8fbe\u4e0d\u540c\u5b9e\u4f53\u4e4b\u95f4\u7684\u67d0\u79cd\u8054\u7cfb\uff0c\u6bd4\u5982\u5f20\u4e09-\u201c\u51fa\u751f\u4e8e\u201d-\u4e0a\u6d77\u3001\u5c0f\u660e\u548c\u5c0f\u7ea2\u662f\u201c\u670b\u53cb\u201d\u7b49\u7b49. \u4e0b\u9762\u662f\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u56fe\uff0c\u5b83\u75314\u4e2a\u8282\u70b9\u548c5\u6761\u8fb9\u7ec4\u6210. \u4ece\u5b57\u9762\u4e0a\u770b\uff0c\u77e5\u8bc6\u56fe\u8c31\u5c31\u662f\u7528\u56fe\u7684\u5f62\u5f0f\u5c06\u77e5\u8bc6\u8868\u793a\u51fa\u6765. \u56fe\u4e2d\u7684\u7ed3\u70b9\u4ee3\u8868\u8bed\u4e49\u5b9e\u4f53\u6216\u6982\u5ff5\uff0c\u8fb9\u4ee3\u8868\u7ed3\u70b9\u95f4\u7684\u5404\u79cd\u8bed\u4e49\u5173\u7cfb. \u5982\u679c\u6211\u4eec\u5c06\u4e0a\u8ff0\u59da\u660e\u7684\u4e00\u4e9b\u57fa\u672c\u4fe1\u606f\u7528\u8ba1\u7b97\u673a\u6240\u80fd\u7406\u89e3\u7684\u8bed\u8a00\u8868\u793a\u51fa\u6765\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u77e5\u8bc6\u56fe\u8c31\u6765\u5b9e\u73b0. \u6bd4\u5982\uff0c<\u59da\u660e\uff0c\u804c\u4e1a\uff0c\u7bee\u7403\u8fd0\u52a8\u5458>\u8868\u793a\u59da\u660e\u7684\u804c\u4e1a\u662f\u7bee\u7403\u8fd0\u52a8\u5458\uff0c\u5176\u4e2d\u201c\u59da\u660e\u201d\u548c\u201c\u7bee\u7403\u8fd0\u52a8\u5458\u201d\u662f\u4e24\u4e2a\u8282\u70b9 (\u5373\u5b9e\u4f53)\uff0c\u800c\u8282\u70b9\u95f4\u8fb9(\u5373\u5173\u7cfb)\u662f\u201c\u804c\u4e1a\u201d. \u8fd9\u662f\u4e00\u79cd\u5e38\u7528\u7684\u57fa\u4e8e\u7b26\u53f7\u7684\u77e5\u8bc6\u8868\u793a\u65b9\u5f0f\u2014\u2014\u8d44\u6e90\u63cf\u8ff0\u6846\u67b6\uff08Resource Description Framework\uff0cRDF\uff09\uff0c\u5b83\u628a\u77e5\u8bc6\u8868\u793a\u4e3a\u4e00\u4e2a\u5305\u542b\u4e3b\u8bed\uff08Subject\uff09\u3001\u8c13\u8bed\uff08Predicate\uff09\u548c\u5bbe\u8bed\uff08Object\uff09\u7684\u4e09\u5143\u7ec4 . \u4ece\u4e0a\u8ff0\u5185\u5bb9\u63cf\u8ff0\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\uff0c\u77e5\u8bc6\u56fe\u8c31\uff08Knowledge Graph\uff09\u4ee5\u7ed3\u6784\u5316\u7684\u5f62\u5f0f\u63cf\u8ff0\u5ba2\u89c2\u4e16\u754c\u4e2d\u6982\u5ff5\u3001\u5b9e\u4f53\u53ca\u5176\u5173\u7cfb\uff0c\u5c06\u4e92\u8054\u7f51\u7684\u4fe1\u606f\u8868\u8fbe\u6210\u66f4\u63a5\u8fd1\u4eba\u7c7b\u8ba4\u77e5\u4e16\u754c\u7684\u5f62\u5f0f\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u597d\u5730\u7ec4\u7ec7\u3001\u7ba1\u7406\u548c\u7406\u89e3\u4e92\u8054\u7f51\u6d77\u91cf\u4fe1\u606f\u7684\u80fd\u529b\u3002 3 \u77e5\u8bc6\u56fe\u8c31\u7684\u5178\u578b\u5e94\u7528 \u00b6 \u77e5\u8bc6\u56fe\u8c31\u6280\u672f\u5df2\u53d1\u5c55\u591a\u5e74\uff0c\u76f8\u5173\u4ea7\u4e1a\u4e5f\u65e5\u8d8b\u6210\u719f\uff0c\u4e0b\u9762\u662f\u51e0\u79cd\u5178\u578b\u7684\u77e5\u8bc6\u56fe\u8c31\u5e94\u7528\u5f62\u5f0f\uff1a \u5546\u4e1a\u77e5\u8bc6\u56fe\u8c31\uff1a \u4e0b\u56fe\u4e3a\uff1a**\u516c\u53f8\u5229\u7528\u5168\u91cf\u5de5\u5546\u80a1\u6743\u6570\u636e\uff0c\u62bd\u53d6\u4f01\u4e1a\u95f4\u7684\u80a1\u6743\u6295\u8d44\u5173\u7cfb\uff0c\u642d\u5efa\u77e5\u8bc6\u56fe\u8c31\u3002\u57fa\u4e8e\u56fe\u8c31\u5206\u6790\u6709\u52a9\u4e8e\u4f01\u4e1a\u8bc6\u522b\u6f5c\u5728\u7684\u5546\u4e1a\u673a\u4f1a\u548c\u98ce\u9669\uff0c\u5bf9\u4e8e\u63d0\u9ad8\u51b3\u7b56\u7684\u79d1\u5b66\u6027\u548c\u9488\u5bf9\u6027\u5177\u6709\u91cd\u8981\u610f\u4e49\u3002 \u6559\u80b2\u77e5\u8bc6\u56fe\u8c31\uff1a \u4e0b\u56fe\u662f**\u516c\u53f8\u6839\u636e\u5b66\u751f\u7684\u6559\u6750\u3001\u6559\u5e08\u7b14\u8bb0\u7b49\u6570\u636e\uff0c\u6784\u5efa\u6559\u80b2\u65b9\u9762\u7684\u77e5\u8bc6\u56fe\u8c31\uff0c\u5e2e\u52a9\u5e08\u751f\u4ece\u5927\u91cf\u7684\u6559\u5b66\u8d44\u6e90\u548c\u77e5\u8bc6\u70b9\u4e2d\u63d0\u53d6\u51fa\u6838\u5fc3\u5185\u5bb9\uff0c\u5b9e\u73b0\u77e5\u8bc6\u7684\u6709\u6548\u7ba1\u7406\u4e0e\u7ec4\u7ec7\uff0c\u5e76\u4e14\u8be5\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u4f5c\u4e3a\u6559\u80b2\u9886\u57df\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u7684\u57fa\u7840\uff0c\u901a\u8fc7\u5bf9\u77e5\u8bc6\u70b9\u4e4b\u95f4\u5173\u7cfb\u7684\u7406\u89e3\uff0c\u5b9e\u73b0\u66f4\u52a0\u51c6\u786e\u548c\u9ad8\u6548\u7684\u81ea\u52a8\u5316\u7b54\u7591\u548c\u6559\u5b66\u8f85\u52a9\uff0c\u51cf\u8f7b\u6559\u5e08\u7684\u5de5\u4f5c\u91cf\u3002 \u653f\u52a1\u4fe1\u606f\u56fe\u8c31\uff1a \u4e0b\u56fe\u662f***\u516c\u53f8\u548c\u653f\u5e9c\u5408\u4f5c\uff0c\u7ed3\u5408\u653f\u5e9c\u673a\u5173\u63d0\u4f9b\u7684\u65e5\u5e38\u5de5\u4f5c\u548c\u751f\u4ea7\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u5404\u79cd\u6570\u636e\uff08\u53bb\u654f\uff09\uff0c\u6784\u5efa\u4e86\u653f\u52a1\u77e5\u8bc6\u56fe\u8c31\uff0c\u4e00\u65b9\u9762\u5b9e\u73b0\u6d77\u91cf\u653f\u52a1\u6570\u636e\u81ea\u52a8\u5316\u5206\u6790\u76d1\u6d4b\u7684\u624b\u6bb5\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u63d0\u9ad8\u653f\u52a1\u4eba\u5458\u5de5\u4f5c\u7684\u6548\u7387. \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u9879\u76ee\u80cc\u666f\uff0c\u68b3\u7406\u77e5\u8bc6\u56fe\u8c31\u7684\u76f8\u5173\u6982\u5ff5\uff0c\u4e86\u89e3\u56fe\u8c31\u5728\u4f01\u4e1a\u91cc\u7684\u771f\u5b9e\u7684\u7528\u573a\u666f. \u77e5\u8bc6\u56fe\u8c31\u9886\u57df\u5e7f\u6cdb, \u6d89\u53ca\u5230\u7684\u7ec6\u5206\u65b9\u5411\u548c\u77e5\u8bc6\u70b9\u975e\u5e38\u591a, \u5728\u540e\u7eed\u8bfe\u7a0b\u5b66\u4e60\u4e2d\u6211\u4eec\u4f1a\u5e26\u7740\u540c\u5b66\u4eec\u4e00\u6b65\u6b65\u638c\u63e1.","title":"1.1 \u9879\u76ee\u80cc\u666f\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/1.%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B.html#_1","text":"","title":"\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u9879\u76ee\u80cc\u666f\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/1.%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B.html#_2","text":"\u4e86\u89e3\u9879\u76ee\u7684\u5f00\u53d1\u80cc\u666f. \u4e86\u89e3\u77e5\u8bc6\u56fe\u8c31\u7684\u76f8\u5173\u57fa\u7840\u6982\u5ff5.","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/1.%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B.html#1","text":"\u77e5\u8bc6\u56fe\u8c31\uff08Knowledge Graph\uff09\u662f\u4eba\u5de5\u667a\u80fd\u7684\u91cd\u8981\u5206\u652f\u6280\u672f\uff0c\u5b83\u57282012\u5e74\u7531\u8c37\u6b4c\u63d0\u51fa\uff0c\u6210\u4e3a\u5efa\u7acb\u5927\u89c4\u6a21\u77e5\u8bc6\u7684\u6740\u624b\u950f\u5e94\u7528\uff0c\u5728\u641c\u7d22\u3001\u81ea\u7136\u8bed\u8a00\u5904\u7406\u3001\u667a\u80fd\u52a9\u624b\u3001\u7535\u5b50\u5546\u52a1\u7b49\u9886\u57df\u53d1\u6325\u7740\u91cd\u8981\u4f5c\u7528\u3002\u77e5\u8bc6\u56fe\u8c31\u4e0e\u5927\u6570\u636e\u3001\u6df1\u5ea6\u5b66\u4e60\uff0c\u8fd9\u4e09\u5927\u201c\u79d8\u5bc6\u6b66\u5668\u201d\u5df2\u7ecf\u6210\u4e3a\u63a8\u52a8\u4e92\u8054\u7f51\u548c\u4eba\u5de5\u667a\u80fd\u53d1\u5c55\u7684\u6838\u5fc3\u9a71\u52a8\u529b\u4e4b\u4e00\u3002 \u4f20\u667a\u6559\u80b2\u7684AI\u5f15\u9886IT\u6559\u80b2\u524d\u6cbf, \u7279\u6b64\u63a8\u51fa\u5173\u4e8e\u533b\u7597\u65b9\u9762\u7684\u77e5\u8bc6\u56fe\u8c31\u9879\u76ee, \u5e26\u7740\u540c\u5b66\u4eec\u5b8c\u6574\u7684\u5b66\u4e60\u77e5\u8bc6\u56fe\u8c31\u76f8\u5173\u6280\u672f, \u5e76\u624e\u5b9e\u7684\u638c\u63e1\u6838\u5fc3\u5185\u5bb9\u548c\u4ee3\u7801\u80fd\u529b. \u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u610f\u4e49\uff1a\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u4e0d\u4ec5\u80fd\u591f\u6574\u5408\u548c\u8868\u793a\u533b\u5b66\u9886\u57df\u7684\u5927\u91cf\u77e5\u8bc6\uff0c\u8fd8\u80fd\u591f\u4e3a\u533b\u7597\u51b3\u7b56\u652f\u6301\u7cfb\u7edf\u3001\u75be\u75c5\u8bca\u65ad\u3001\u836f\u7269\u7814\u53d1\u7b49\u9886\u57df\u63d0\u4f9b\u6709\u529b\u7684\u652f\u6301\uff0c\u5bf9\u77e5\u8bc6\u56fe\u8c31\u7684\u7814\u7a76\u4ee5\u53ca\u5728\u533b\u7597\u9886\u57df\u7684\u5e94\u7528\u5177\u6709\u91cd\u8981\u7684\u73b0\u5b9e\u610f\u4e49\u548c\u5e7f\u6cdb\u7684\u5e94\u7528\u573a\u666f\u3002 \u672c\u9879\u76ee\u56fe\u8c31\u7ed3\u679c\u5c55\u793a\uff1a","title":"1 \u9879\u76ee\u80cc\u666f"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/1.%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B.html#2","text":"\u4ec0\u4e48\u662f\u77e5\u8bc6\u56fe\u8c31\u5462\uff1f \u5728\u8fd9\u91cc\u6211\u4eec\u5206\u5f00\u8ba8\u8bba\u4e00\u4e0b\u4ec0\u4e48\u662f\u77e5\u8bc6\uff0c\u4ec0\u4e48\u662f\u56fe\u8c31. \u4ec0\u4e48\u662f\u77e5\u8bc6\uff1f \u77e5\u8bc6\u662f\u4eba\u7c7b\u5728\u5b9e\u8df5\u4e2d\u8ba4\u8bc6\u5ba2\u89c2\u4e16\u754c\u7684\u6210\u679c\uff0c\u5b83\u5305\u62ec\u4e8b\u5b9e\u3001\u4fe1\u606f\u3001\u63cf\u8ff0\u4ee5\u53ca\u5728\u6559\u80b2\u548c\u5b9e\u8df5\u4e2d\u83b7\u5f97\u7684\u6280\u80fd. \u77e5\u8bc6\u662f\u4eba\u7c7b\u4ece\u5404\u4e2a\u9014\u5f84\u4e2d\u83b7\u5f97\u7684\u7ecf\u8fc7\u63d0\u5347\u3001\u603b\u7ed3\u4e0e\u51dd\u70bc\u7684\u7cfb\u7edf\u7684\u8ba4\u8bc6. \u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50: 226.1\u5398\u7c73\uff0c229\u5398\u7c73\uff0c\u90fd\u662f\u5ba2\u89c2\u5b58\u5728\u7684\u5355\u72ec\u6570\u636e. \u6b64\u65f6\uff0c\u6570\u636e\u4e0d\u5177\u6709\u4efb\u4f55\u610f\u4e49\uff0c\u4ec5\u8868\u8fbe\u4e00\u4e2a\u5ba2\u89c2\u8868\u8fbe\u4e8b\u5b9e. \u800c\u5982\u679c\u6211\u4eec\u8bf4\"\u59da\u660e\u7684\u81c2\u5c55\u4e3a226.1\u5398\u7c73\"\u3001\"\u59da\u660e\u7684\u8eab\u9ad8\u662f229\u5398\u7c73\"\u5219\u79f0\u4e3a\u662f\u4e8b\u5b9e\u578b\u7684\u9648\u8ff0\uff0c\u5c5e\u4e8e\u4fe1\u606f\u7684\u8303\u7574. \u90a3\u4e48\u6240\u8c13\u77e5\u8bc6\uff0c\u5c31\u662f\u5bf9\u4fe1\u606f\u5c42\u9762\u7684\u62bd\u8c61\u548c\u5f52\u7eb3\uff0c\u5982\u679c\u6211\u4eec\u628a\u59da\u660e\u7684\u8eab\u9ad8\u3001\u81c2\u5c55\uff0c\u53ca\u5176\u4ed6\u5c5e\u6027\u6574\u5408\u8d77\u6765, \u5c31\u5f97\u5230\u4e86\u5bf9\u4e8e\u59da\u660e\u7684\u4e00\u4e2a\u8ba4\u77e5, \u8fdb\u4e00\u6b65\u53ef\u4ee5\u4e86\u89e3\u5230\u59da\u660e\u7684\u8eab\u9ad8\u6bd4\u666e\u901a\u4eba\u8981\u9ad8. \u4ec0\u4e48\u662f\u56fe\u8c31 \u56fe\u8c31\u7684\u82f1\u6587\u662fGraph\uff0c\u76f4\u8bd1\u8fc7\u6765\u5c31\u662f\u201c\u56fe\u201d\u7684\u610f\u601d. \u5728\u56fe\u8bba\uff08\u6570\u5b66\u7684\u4e00\u4e2a\u7814\u7a76\u5206\u652f\uff09\u4e2d\uff0c\u56fe\u8868\u793a\u4e00\u4e9b\u4e8b\u7269\u4e0e\u53e6\u4e00\u4e9b\u4e8b\u7269\u4e4b\u95f4\u76f8\u4e92\u8fde\u63a5\u7684\u7ed3\u6784. \u56fe\u901a\u5e38\u7531\u8282\u70b9\uff08Vertex\uff09\u548c\u8fb9\uff08Edge\uff09\u6765\u6784\u6210\uff0c\u591a\u5173\u7cfb\u56fe\u4e00\u822c\u5305\u542b\u591a\u79cd\u7c7b\u578b\u7684\u8282\u70b9\u548c\u591a\u79cd\u7c7b\u578b\u7684\u8fb9. \u5b9e\u4f53\uff08\u8282\u70b9\uff09\u6307\u7684\u662f\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u4e8b\u7269\u6bd4\u5982\u4eba\u3001\u5730\u540d\u3001\u516c\u53f8\u7b49\uff0c\u5173\u7cfb\uff08\u8fb9\uff09\u5219\u7528\u6765\u8868\u8fbe\u4e0d\u540c\u5b9e\u4f53\u4e4b\u95f4\u7684\u67d0\u79cd\u8054\u7cfb\uff0c\u6bd4\u5982\u5f20\u4e09-\u201c\u51fa\u751f\u4e8e\u201d-\u4e0a\u6d77\u3001\u5c0f\u660e\u548c\u5c0f\u7ea2\u662f\u201c\u670b\u53cb\u201d\u7b49\u7b49. \u4e0b\u9762\u662f\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u56fe\uff0c\u5b83\u75314\u4e2a\u8282\u70b9\u548c5\u6761\u8fb9\u7ec4\u6210. \u4ece\u5b57\u9762\u4e0a\u770b\uff0c\u77e5\u8bc6\u56fe\u8c31\u5c31\u662f\u7528\u56fe\u7684\u5f62\u5f0f\u5c06\u77e5\u8bc6\u8868\u793a\u51fa\u6765. \u56fe\u4e2d\u7684\u7ed3\u70b9\u4ee3\u8868\u8bed\u4e49\u5b9e\u4f53\u6216\u6982\u5ff5\uff0c\u8fb9\u4ee3\u8868\u7ed3\u70b9\u95f4\u7684\u5404\u79cd\u8bed\u4e49\u5173\u7cfb. \u5982\u679c\u6211\u4eec\u5c06\u4e0a\u8ff0\u59da\u660e\u7684\u4e00\u4e9b\u57fa\u672c\u4fe1\u606f\u7528\u8ba1\u7b97\u673a\u6240\u80fd\u7406\u89e3\u7684\u8bed\u8a00\u8868\u793a\u51fa\u6765\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u77e5\u8bc6\u56fe\u8c31\u6765\u5b9e\u73b0. \u6bd4\u5982\uff0c<\u59da\u660e\uff0c\u804c\u4e1a\uff0c\u7bee\u7403\u8fd0\u52a8\u5458>\u8868\u793a\u59da\u660e\u7684\u804c\u4e1a\u662f\u7bee\u7403\u8fd0\u52a8\u5458\uff0c\u5176\u4e2d\u201c\u59da\u660e\u201d\u548c\u201c\u7bee\u7403\u8fd0\u52a8\u5458\u201d\u662f\u4e24\u4e2a\u8282\u70b9 (\u5373\u5b9e\u4f53)\uff0c\u800c\u8282\u70b9\u95f4\u8fb9(\u5373\u5173\u7cfb)\u662f\u201c\u804c\u4e1a\u201d. \u8fd9\u662f\u4e00\u79cd\u5e38\u7528\u7684\u57fa\u4e8e\u7b26\u53f7\u7684\u77e5\u8bc6\u8868\u793a\u65b9\u5f0f\u2014\u2014\u8d44\u6e90\u63cf\u8ff0\u6846\u67b6\uff08Resource Description Framework\uff0cRDF\uff09\uff0c\u5b83\u628a\u77e5\u8bc6\u8868\u793a\u4e3a\u4e00\u4e2a\u5305\u542b\u4e3b\u8bed\uff08Subject\uff09\u3001\u8c13\u8bed\uff08Predicate\uff09\u548c\u5bbe\u8bed\uff08Object\uff09\u7684\u4e09\u5143\u7ec4 . \u4ece\u4e0a\u8ff0\u5185\u5bb9\u63cf\u8ff0\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\uff0c\u77e5\u8bc6\u56fe\u8c31\uff08Knowledge Graph\uff09\u4ee5\u7ed3\u6784\u5316\u7684\u5f62\u5f0f\u63cf\u8ff0\u5ba2\u89c2\u4e16\u754c\u4e2d\u6982\u5ff5\u3001\u5b9e\u4f53\u53ca\u5176\u5173\u7cfb\uff0c\u5c06\u4e92\u8054\u7f51\u7684\u4fe1\u606f\u8868\u8fbe\u6210\u66f4\u63a5\u8fd1\u4eba\u7c7b\u8ba4\u77e5\u4e16\u754c\u7684\u5f62\u5f0f\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u597d\u5730\u7ec4\u7ec7\u3001\u7ba1\u7406\u548c\u7406\u89e3\u4e92\u8054\u7f51\u6d77\u91cf\u4fe1\u606f\u7684\u80fd\u529b\u3002","title":"2 \u4ec0\u4e48\u662f\u77e5\u8bc6\u56fe\u8c31"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/1.%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B.html#3","text":"\u77e5\u8bc6\u56fe\u8c31\u6280\u672f\u5df2\u53d1\u5c55\u591a\u5e74\uff0c\u76f8\u5173\u4ea7\u4e1a\u4e5f\u65e5\u8d8b\u6210\u719f\uff0c\u4e0b\u9762\u662f\u51e0\u79cd\u5178\u578b\u7684\u77e5\u8bc6\u56fe\u8c31\u5e94\u7528\u5f62\u5f0f\uff1a \u5546\u4e1a\u77e5\u8bc6\u56fe\u8c31\uff1a \u4e0b\u56fe\u4e3a\uff1a**\u516c\u53f8\u5229\u7528\u5168\u91cf\u5de5\u5546\u80a1\u6743\u6570\u636e\uff0c\u62bd\u53d6\u4f01\u4e1a\u95f4\u7684\u80a1\u6743\u6295\u8d44\u5173\u7cfb\uff0c\u642d\u5efa\u77e5\u8bc6\u56fe\u8c31\u3002\u57fa\u4e8e\u56fe\u8c31\u5206\u6790\u6709\u52a9\u4e8e\u4f01\u4e1a\u8bc6\u522b\u6f5c\u5728\u7684\u5546\u4e1a\u673a\u4f1a\u548c\u98ce\u9669\uff0c\u5bf9\u4e8e\u63d0\u9ad8\u51b3\u7b56\u7684\u79d1\u5b66\u6027\u548c\u9488\u5bf9\u6027\u5177\u6709\u91cd\u8981\u610f\u4e49\u3002 \u6559\u80b2\u77e5\u8bc6\u56fe\u8c31\uff1a \u4e0b\u56fe\u662f**\u516c\u53f8\u6839\u636e\u5b66\u751f\u7684\u6559\u6750\u3001\u6559\u5e08\u7b14\u8bb0\u7b49\u6570\u636e\uff0c\u6784\u5efa\u6559\u80b2\u65b9\u9762\u7684\u77e5\u8bc6\u56fe\u8c31\uff0c\u5e2e\u52a9\u5e08\u751f\u4ece\u5927\u91cf\u7684\u6559\u5b66\u8d44\u6e90\u548c\u77e5\u8bc6\u70b9\u4e2d\u63d0\u53d6\u51fa\u6838\u5fc3\u5185\u5bb9\uff0c\u5b9e\u73b0\u77e5\u8bc6\u7684\u6709\u6548\u7ba1\u7406\u4e0e\u7ec4\u7ec7\uff0c\u5e76\u4e14\u8be5\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u4f5c\u4e3a\u6559\u80b2\u9886\u57df\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u7684\u57fa\u7840\uff0c\u901a\u8fc7\u5bf9\u77e5\u8bc6\u70b9\u4e4b\u95f4\u5173\u7cfb\u7684\u7406\u89e3\uff0c\u5b9e\u73b0\u66f4\u52a0\u51c6\u786e\u548c\u9ad8\u6548\u7684\u81ea\u52a8\u5316\u7b54\u7591\u548c\u6559\u5b66\u8f85\u52a9\uff0c\u51cf\u8f7b\u6559\u5e08\u7684\u5de5\u4f5c\u91cf\u3002 \u653f\u52a1\u4fe1\u606f\u56fe\u8c31\uff1a \u4e0b\u56fe\u662f***\u516c\u53f8\u548c\u653f\u5e9c\u5408\u4f5c\uff0c\u7ed3\u5408\u653f\u5e9c\u673a\u5173\u63d0\u4f9b\u7684\u65e5\u5e38\u5de5\u4f5c\u548c\u751f\u4ea7\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u5404\u79cd\u6570\u636e\uff08\u53bb\u654f\uff09\uff0c\u6784\u5efa\u4e86\u653f\u52a1\u77e5\u8bc6\u56fe\u8c31\uff0c\u4e00\u65b9\u9762\u5b9e\u73b0\u6d77\u91cf\u653f\u52a1\u6570\u636e\u81ea\u52a8\u5316\u5206\u6790\u76d1\u6d4b\u7684\u624b\u6bb5\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u63d0\u9ad8\u653f\u52a1\u4eba\u5458\u5de5\u4f5c\u7684\u6548\u7387.","title":"3 \u77e5\u8bc6\u56fe\u8c31\u7684\u5178\u578b\u5e94\u7528"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/1.%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B.html#_3","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u9879\u76ee\u80cc\u666f\uff0c\u68b3\u7406\u77e5\u8bc6\u56fe\u8c31\u7684\u76f8\u5173\u6982\u5ff5\uff0c\u4e86\u89e3\u56fe\u8c31\u5728\u4f01\u4e1a\u91cc\u7684\u771f\u5b9e\u7684\u7528\u573a\u666f. \u77e5\u8bc6\u56fe\u8c31\u9886\u57df\u5e7f\u6cdb, \u6d89\u53ca\u5230\u7684\u7ec6\u5206\u65b9\u5411\u548c\u77e5\u8bc6\u70b9\u975e\u5e38\u591a, \u5728\u540e\u7eed\u8bfe\u7a0b\u5b66\u4e60\u4e2d\u6211\u4eec\u4f1a\u5e26\u7740\u540c\u5b66\u4eec\u4e00\u6b65\u6b65\u638c\u63e1.","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html","text":"\u77e5\u8bc6\u56fe\u8c31\u6982\u8ff0 \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u638c\u63e1\u77e5\u8bc6\u56fe\u8c31\u7684\u57fa\u672c\u6982\u5ff5. \u4e86\u89e3\u77e5\u8bc6\u56fe\u8c31\u7684\u6280\u672f\u67b6\u6784. \u4e86\u89e3\u77e5\u8bc6\u56fe\u8c31\u7684\u5e94\u7528\u573a\u666f 1 \u57fa\u672c\u6982\u5ff5 \u00b6 \u77e5\u8bc6\u56fe\u8c31\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u8bed\u4e49\u7f51\u7edc\uff0c\u7528\u56fe\u7684\u5f62\u5f0f\u63cf\u8ff0\u5ba2\u89c2\u4e8b\u7269\uff0c\u8fd9\u91cc\u7684\u56fe\u6307\u7684\u662f\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u56fe\uff0c\u4e5f\u5c31\u662f\u7531\u8282\u70b9\u548c\u8fb9\u7ec4\u6210\u7684\uff0c\u8fd9\u4e5f\u662f\u77e5\u8bc6\u56fe\u8c31\uff08Knowledge Graph\uff09\u7684\u771f\u5b9e\u542b\u4e49\u3002 \u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u8282\u70b9\u8868\u793a\u6982\u5ff5\u548c\u5b9e\u4f53\uff0c\u6982\u5ff5\u662f\u62bd\u8c61\u51fa\u6765\u7684\u4e8b\u7269\uff0c\u5b9e\u4f53\u662f\u5177\u4f53\u7684\u4e8b\u7269\uff1b\u8fb9\u8868\u793a\u4e8b\u7269\u7684\u5173\u7cfb\u548c\u5c5e\u6027\uff0c\u4e8b\u7269\u7684\u5185\u90e8\u7279\u5f81\u7528\u5c5e\u6027\u6765\u8868\u793a\uff0c\u5916\u90e8\u8054\u7cfb\u7528\u5173\u7cfb\u6765\u8868\u793a\u3002\u5f88\u591a\u65f6\u5019\uff0c\u4eba\u4eec\u7b80\u5316\u4e86\u5bf9\u77e5\u8bc6\u56fe\u8c31\u7684\u63cf\u8ff0\uff0c\u5c06\u5b9e\u4f53\u548c\u6982\u5ff5\u7edf\u79f0\u4e3a\u5b9e\u4f53\uff0c\u5c06\u5173\u7cfb\u548c\u5c5e\u6027\u7edf\u79f0\u4e3a\u5173\u7cfb\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u8bf4\u77e5\u8bc6\u56fe\u8c31\u5c31\u662f\u63cf\u8ff0\u5b9e\u4f53\u4ee5\u53ca\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u5b9e\u4f53\u53ef\u4ee5\u662f\u4eba\uff0c\u5730\u65b9\uff0c\u7ec4\u7ec7\u673a\u6784\uff0c\u6982\u5ff5\u7b49\u7b49\uff0c\u5173\u7cfb\u7684\u79cd\u7c7b\u66f4\u591a\uff0c\u53ef\u4ee5\u662f\u4eba\u4e0e\u4eba\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4eba\u4e0e\u7ec4\u7ec7\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u6982\u5ff5\u4e0e\u67d0\u4e2a\u7269\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u7b49\u7b49\u3002 \u4f8b\u5982\u4e0b\u56fe: \u5b9e\u4f53\uff08\u70b9\uff09\u53ef\u4ee5\u662f\u54fa\u4e73\u52a8\u7269, \u718a, \u810a\u690e, \u9c7c, \u6c34\u7b49; \u5173\u7cfb\uff08\u7ebf\uff09\u53ef\u4ee5\u8868\u660e\u662f, \u6709, \u4f4f\u5728\u7b49\u5173\u7cfb. 2 \u5206\u5c42\u67b6\u6784 \u00b6 \u77e5\u8bc6\u56fe\u8c31\u7531\u6570\u636e\u5c42\uff08data layer\uff09\u548c\u6a21\u5f0f\u5c42\uff08schema layer\uff09\u6784\u6210\u3002 \u6a21\u5f0f\u5c42\u662f\u77e5\u8bc6\u56fe\u8c31\u7684\u6982\u5ff5\u6a21\u578b\u548c\u903b\u8f91\u57fa\u7840\uff0c\u5bf9\u6570\u636e\u5c42\u8fdb\u884c\u89c4\u8303\u7ea6\u675f. \u591a\u91c7\u7528\u672c\u4f53\u4f5c\u4e3a\u77e5\u8bc6\u56fe\u8c31\u7684\u6a21\u5f0f\u5c42\uff0c\u501f\u52a9\u672c\u4f53\u5b9a\u4e49\u7684\u89c4\u5219\u548c\u516c\u7406\u7ea6\u675f\u77e5\u8bc6\u56fe\u8c31\u7684\u6570\u636e\u5c42\u3002\u4e5f\u53ef\u5c06\u77e5\u8bc6\u56fe\u8c31\u89c6\u4e3a\u5b9e\u4f8b\u5316\u4e86\u7684\u672c\u4f53\uff0c\u77e5\u8bc6\u56fe\u8c31\u7684\u6570\u636e\u5c42\u662f\u672c\u4f53\u7684\u5b9e\u4f8b\u3002\u5982\u679c\u4e0d\u9700\u652f\u6301\u63a8\u7406, \u5219\u77e5\u8bc6\u56fe\u8c31(\u5927\u591a\u662f\u81ea\u5e95\u5411\u4e0a\u6784\u5efa\u7684) \u53ef\u4ee5\u53ea\u6709\u6570\u636e\u5c42\u800c\u6ca1\u6709\u6a21\u5f0f\u5c42\u3002\u5728\u77e5\u8bc6\u56fe\u8c31\u7684\u6a21\u5f0f\u5c42\uff0c\u8282\u70b9\u8868\u793a\u672c\u4f53\u6982\u5ff5\uff0c\u8fb9\u8868\u793a\u6982\u5ff5\u95f4\u7684\u5173\u7cfb\u3002 schema \u56fe\u793a\u4f8b\uff1a \u5728\u6570\u636e\u5c42, \u4e8b\u5b9e\u4ee5\u201c\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53\u201d\u6216\u201c\u5b9e\u4f53-\u5c5e\u6027-\u5c5e\u6027\u503c\u201d\u7684\u4e09\u5143\u7ec4\u5b58\u50a8\uff0c\u5f62\u6210\u4e00\u4e2a\u56fe\u72b6\u77e5\u8bc6\u5e93. \u5176\u4e2d\uff0c\u5b9e\u4f53\u662f\u77e5\u8bc6\u56fe\u8c31\u7684\u57fa\u672c\u5143\u7d20\uff0c\u6307\u5177\u4f53\u7684\u4eba\u540d\u3001\u7ec4\u7ec7\u673a\u6784\u540d\u3001\u5730\u540d\u3001\u65e5\u671f\u3001\u65f6\u95f4\u7b49\u3002\u5173\u7cfb\u662f\u4e24\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u8bed\u4e49\u5173\u7cfb\uff0c\u662f\u6a21\u5f0f\u5c42\u6240\u5b9a\u4e49\u5173\u7cfb\u7684\u5b9e\u4f8b\u3002\u5c5e\u6027\u662f\u5bf9\u5b9e\u4f53\u7684\u8bf4\u660e\uff0c\u662f\u5b9e\u4f53\u4e0e\u5c5e\u6027\u503c\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\u5c5e\u6027\u53ef\u89c6\u4e3a\u5b9e\u4f53\u4e0e\u5c5e\u6027\u503c\u4e4b\u95f4\u7684 hasValue \u5173\u7cfb\uff0c\u4ece\u800c\u4e5f\u8f6c\u5316\u4e3a\u4ee5\u201c\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53\u201d\u7684\u4e09\u5143\u7ec4\u5b58\u50a8\u3002\u5728\u77e5\u8bc6\u56fe\u8c31\u7684\u6570\u636e\u5c42\uff0c\u8282\u70b9\u8868\u793a\u5b9e\u4f53\uff0c\u8fb9\u8868\u793a\u5b9e\u4f53\u95f4\u5173\u7cfb\u6216\u5b9e\u4f53\u7684\u5c5e\u6027\u3002 3 \u6280\u672f\u67b6\u6784 \u00b6 \u77e5\u8bc6\u56fe\u8c31\u6280\u672f\u67b6\u6784\u56fe\u5982\u4e0b\u6240\u793a\uff1a 3.1 \u6570\u636e\u83b7\u53d6 \u00b6 \u76ee\u524d\uff0c\u77e5\u8bc6\u56fe\u8c31\u6570\u636e\u6e90\u6309\u6765\u6e90\u6e20\u9053\u7684\u4e0d\u540c\u53ef\u5206\u4e3a\u4e24\u79cd\uff1a \u4e00\u79cd\u662f\u4e1a\u52a1\u672c\u8eab\u7684\u6570\u636e\uff0c\u8fd9\u90e8\u5206\u6570\u636e\u901a\u5e38\u5305\u542b\u5728\u884c\u4e1a\u5185\u90e8\u6570\u636e\u5e93\u8868\u5e76\u4ee5\u7ed3\u6784\u5316\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u662f\u4e00\u79cd\u975e\u516c\u5f00\u6216\u534a\u516c\u5f00\u7684\u6570\u636e\uff1b \u53e6\u4e00\u79cd\u662f\u7f51\u7edc\u4e0a\u516c\u5f00\u3001\u6293\u53d6\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u662f\u4ee5\u7f51\u9875\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u662f\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e\u3002 \u6309\u6570\u636e\u7ed3\u6784\u7684\u4e0d\u540c\uff0c\u53ef\u5206\u4e3a\u4e09\u79cd\uff1a\u7ed3\u6784\u5316\u6570\u636e\u3001\u534a\u7ed3\u6784\u5316\u6570\u636e\u548c\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u6839\u636e\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6211\u4eec\u91c7\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\u3002 3.2 \u4fe1\u606f\u62bd\u53d6\uff08Information Extraction\uff09\u3010\u6838\u5fc3\u3011 \u00b6 \u4fe1\u606f\u62bd\u53d6\u7684\u5173\u952e\u95ee\u9898\u662f\u5982\u4f55\u4ece\u5f02\u6784\u6570\u636e\u6e90\u4e2d\u81ea\u52a8\u62bd\u53d6\u4fe1\u606f\u5f97\u5230\u5019\u9009\u77e5\u8bc6\u5355\u5143\u3002\u5982\u524d\u6587\u6240\u8bf4\uff0c\u77e5\u8bc6\u83b7\u53d6\u6709\u4e24\u79cd\u6e20\u9053\uff0c\u524d\u8005\u53ea\u9700\u8981\u7b80\u5355\u9884\u5904\u7406\u5373\u53ef\u4ee5\u4f5c\u4e3a\u540e\u7eedAI\u7cfb\u7edf\u7684\u8f93\u5165\uff0c\u4f46\u540e\u8005\u4e00\u822c\u9700\u8981\u501f\u52a9\u4e8e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7b49\u6280\u672f\u6765\u63d0\u53d6\u51fa\u7ed3\u6784\u5316\u4fe1\u606f\uff0c\u8fd9\u6b63\u662f\u4fe1\u606f\u62bd\u53d6\u7684\u96be\u70b9\u95ee\u9898\uff0c\u6d89\u53ca\u7684\u5173\u952e\u6280\u672f\u5305\u62ec\u5b9e\u4f53\u62bd\u53d6\u3001\u5173\u7cfb\u62bd\u53d6\u548c\u5c5e\u6027\u62bd\u53d6\u3002 \u5b9e\u4f53\u62bd\u53d6\uff08Entity Extraction\uff09 \u5b9a\u4e49\uff1a\u5b9e\u4f53\u62bd\u53d6\u662f\u4ece\u6587\u672c\u4e2d\u8bc6\u522b\u548c\u63d0\u53d6\u5177\u6709\u7279\u5b9a\u610f\u4e49\u7684\u547d\u540d\u5b9e\u4f53\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u5b9e\u4f53\u53ef\u4ee5\u662f\u4eba\u7269\u3001\u5730\u70b9\u3001\u7ec4\u7ec7\u3001\u65e5\u671f\u3001\u8d27\u5e01\u7b49\u3002 \u65b9\u6cd5\uff1a \u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08NLP\uff09\u6280\u672f\uff0c\u5982\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff08NER\uff09\uff0c\u91c7\u7528\u89c4\u5219\u3001\u7edf\u8ba1\u6a21\u578b\u6216\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u4ee5\u8bc6\u522b\u5e76\u6807\u6ce8\u6587\u672c\u4e2d\u7684\u5b9e\u4f53\u3002 \u5173\u7cfb\u62bd\u53d6\uff08Relation Extraction\uff09 \u5b9a\u4e49\uff1a \u5173\u7cfb\u62bd\u53d6\u662f\u4ece\u6587\u672c\u4e2d\u8bc6\u522b\u548c\u63d0\u53d6\u4e0d\u540c\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u5173\u7cfb\u53ef\u4ee5\u662f\u4f5c\u8005\u5173\u7cfb\u3001\u5de5\u4f5c\u5173\u7cfb\u3001\u4eb2\u5c5e\u5173\u7cfb\u7b49\u3002 \u65b9\u6cd5\uff1a \u5229\u7528\u76d1\u7763\u5b66\u4e60\uff0c\u4f7f\u7528\u6709\u6807\u7b7e\u7684\u6570\u636e\u8fdb\u884c\u8bad\u7ec3\uff0c\u91c7\u7528\u7edf\u8ba1\u65b9\u6cd5\u6216\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u4ee5\u8bc6\u522b\u6587\u672c\u4e2d\u7684\u5173\u7cfb\u3002 \u5c5e\u6027\u62bd\u53d6\uff08Attribute Extraction\uff09 \u5b9a\u4e49\uff1a\u5c5e\u6027\u62bd\u53d6\u662f\u4ece\u6587\u672c\u4e2d\u8bc6\u522b\u548c\u63d0\u53d6\u4e0e\u5b9e\u4f53\u76f8\u5173\u7684\u7279\u5b9a\u5c5e\u6027\u6216\u7279\u5f81\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u5c5e\u6027\u53ef\u4ee5\u662f\u5b9e\u4f53\u7684\u5c5e\u6027\uff0c\u5982\u4eba\u7269\u7684\u804c\u4e1a\u3001\u5730\u70b9\u7684\u7ecf\u7eac\u5ea6\u7b49\u3002 \u65b9\u6cd5\uff1a\u91c7\u7528\u89c4\u5219\u5339\u914d\u3001\u57fa\u4e8e\u7edf\u8ba1\u7684\u65b9\u6cd5\uff0c\u6216\u8005\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u4ee5\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\u51fa\u4e0e\u5b9e\u4f53\u76f8\u5173\u7684\u5c5e\u6027\u4fe1\u606f\u3002 \u6ce8\u610f\uff1a\u5c5e\u6027\u4e3b\u8981\u662f\u9488\u5bf9\u5b9e\u4f53\u800c\u8a00\u7684\uff0c\u5bf9\u5f53\u524d\u5b9e\u4f53\u7684\u5b8c\u6574\u63cf\u8ff0\u3002\u7531\u4e8e\u53ef\u4ee5\u628a\u5b9e\u4f53\u7684\u5c5e\u6027\u770b\u4f5c\u5b9e\u4f53\u4e0e\u5c5e\u6027\u503c\u4e4b\u95f4\u7684\u4e00\u79cd\u540d\u8bcd\u6027\u5173\u7cfb\uff0c\u56e0\u6b64\u5c5e\u6027\u62bd\u53d6\u4efb\u52a1\u5c31\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u3002 3.3 \u77e5\u8bc6\u878d\u5408\uff08Knowledge Fusion\uff09 \u00b6 \u77e5\u8bc6\u878d\u5408\uff0c\u7b80\u5355\u7406\u89e3\u662f\u5c06\u6765\u81ea\u4e0d\u540c\u6765\u6e90\u3001\u683c\u5f0f\u3001\u7ed3\u6784\u7684\u5f02\u6784\u6570\u636e\u7edf\u4e00\u6574\u5408\u5230\u4e00\u4e2a\u4e00\u81f4\u7684\u77e5\u8bc6\u56fe\u8c31\u4e2d\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u8981\u89e3\u51b3\u4ee5\u4e0b\u95ee\u9898\uff1a \u6d88\u9664\u5197\u4f59\uff1a\u591a\u4e2a\u6765\u6e90\u53ef\u80fd\u63cf\u8ff0\u76f8\u540c\u7684\u5b9e\u4f53\u6216\u5173\u7cfb\uff0c\u77e5\u8bc6\u878d\u5408\u8981\u6d88\u9664\u91cd\u590d\u9879\uff0c\u5e76\u786e\u4fdd\u56fe\u8c31\u7684\u7cbe\u7b80\u6027\u3002 \u7edf\u4e00\u8868\u8fbe\uff1a\u4e0d\u540c\u6765\u6e90\u4e2d\u7684\u5b9e\u4f53\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\u3001\u683c\u5f0f\u6216\u7ed3\u6784\u8868\u793a\u76f8\u540c\u7684\u6982\u5ff5\u6216\u5173\u7cfb\uff0c\u878d\u5408\u9700\u8981\u5c06\u5b83\u4eec\u7edf\u4e00\u4e3a\u4e00\u81f4\u7684\u8868\u793a\u65b9\u5f0f\u3002 \u89e3\u51b3\u51b2\u7a81\uff1a\u4e0d\u540c\u6570\u636e\u6e90\u5bf9\u540c\u4e00\u4e2a\u5b9e\u4f53\u6216\u5173\u7cfb\u7684\u63cf\u8ff0\u53ef\u80fd\u5b58\u5728\u51b2\u7a81\uff0c\u77e5\u8bc6\u878d\u5408\u9700\u8981\u5728\u8fd9\u4e9b\u51b2\u7a81\u4e2d\u627e\u5230\u4e00\u81f4\u6027\uff0c\u6216\u901a\u8fc7\u53ef\u4fe1\u5ea6\u8bc4\u4f30\u51b3\u5b9a\u4fdd\u7559\u54ea\u4e2a\u7248\u672c\u3002 \u77e5\u8bc6\u6269\u5c55\uff1a\u878d\u5408\u8fc7\u7a0b\u53ef\u4ee5\u4ece\u591a\u4e2a\u6765\u6e90\u4e2d\u6316\u6398\u65b0\u77e5\u8bc6\uff0c\u4e30\u5bcc\u77e5\u8bc6\u56fe\u8c31\u7684\u5185\u5bb9\uff0c\u63d0\u5347\u77e5\u8bc6\u7684\u5168\u9762\u6027\u548c\u5b8c\u6574\u6027\u3002 \u77e5\u8bc6\u878d\u5408\u4e2d\u5173\u952e\u7684\u6280\u672f\uff1a\u6307\u4ee3\u6d88\u89e3\u3001\u5b9e\u4f53\u6d88\u6b67\uff08\u5b9e\u4f53\u94fe\u63a5\uff09\u3001\u5b9e\u4f53\u7edf\u4e00\uff08\u5b9e\u4f53\u5bf9\u9f50\uff09\u3001\u5173\u7cfb\u5bf9\u9f50\u7b49\uff08\u540e\u7eed\u7ae0\u8282\u6211\u4eec\u4f1a\u8be6\u7ec6\u5206\u6790\uff09\u3002 3.4 \u77e5\u8bc6\u52a0\u5de5\uff08Knowledge Processing\uff09 \u00b6 \u6d77\u91cf\u6570\u636e\u5728\u7ecf\u4fe1\u606f\u62bd\u53d6\u3001\u77e5\u8bc6\u878d\u5408\u4e4b\u540e\u5f97\u5230\u4e00\u7cfb\u5217\u57fa\u672c\u7684\u4e8b\u5b9e\u8868\u8fbe\uff0c\u4f46\u8fd9\u5e76\u4e0d\u7b49\u540c\u4e8e\u77e5\u8bc6\uff0c\u8981\u60f3\u83b7\u5f97\u7ed3\u6784\u5316\uff0c\u7f51\u7edc\u5316\u7684\u77e5\u8bc6\u4f53\u7cfb\uff0c\u8fd8\u9700\u8981\u7ecf\u8fc7\u8d28\u91cf\u8bc4\u4f30\u4e4b\u540e\uff08\u90e8\u5206\u9700\u8981\u4eba\u5de5\u53c2\u4e0e\u7504\u522b\uff09\uff0c\u624d\u80fd\u5c06\u5408\u683c\u7684\u90e8\u5206\u7eb3\u5165\u77e5\u8bc6\u4f53\u7cfb\u4e2d\u4ee5\u786e\u4fdd\u77e5\u8bc6\u5e93\u7684\u8d28\u91cf\uff0c\u8fd9\u5c31\u662f\u77e5\u8bc6\u52a0\u5de5\u7684\u8fc7\u7a0b\u3002 4 \u5e94\u7528\u573a\u666f \u00b6 \u77e5\u8bc6\u56fe\u8c31\u7684\u5e94\u7528\u9886\u57df\u975e\u5e38\u5e7f\u6cdb\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u4ee5\u4e0b\u65b9\u9762\uff1a \u641c\u7d22\u5f15\u64ce\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u63d0\u4f9b\u66f4\u52a0\u667a\u80fd\u7684\u641c\u7d22\u7ed3\u679c\uff0c\u901a\u8fc7\u8bed\u4e49\u7406\u89e3\u548c\u5b9e\u4f53\u5173\u8054\uff0c\u5e2e\u52a9\u7528\u6237\u66f4\u51c6\u786e\u5730\u627e\u5230\u6240\u9700\u7684\u4fe1\u606f\u3002 \u667a\u80fd\u52a9\u624b\u548c\u865a\u62df\u52a9\u624b\uff1a\u77e5\u8bc6\u56fe\u8c31\u80fd\u591f\u63d0\u4f9b\u66f4\u667a\u80fd\u7684\u8bed\u97f3\u4ea4\u4e92\u548c\u95ee\u7b54\u7cfb\u7edf\uff0c\u901a\u8fc7\u81ea\u7136\u8bed\u8a00\u5904\u7406\u548c\u8bed\u4e49\u7406\u89e3\uff0c\u5b9e\u73b0\u66f4\u52a0\u667a\u80fd\u7684\u8bed\u97f3\u4ea4\u4e92\u3002 \u91d1\u878d\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u98ce\u9669\u8bc4\u4f30\u3001\u4fe1\u7528\u8bc4\u7ea7\u3001\u6b3a\u8bc8\u68c0\u6d4b\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u5206\u6790\u91d1\u878d\u6570\u636e\u548c\u5b9e\u4f53\u5173\u7cfb\uff0c\u63d0\u9ad8\u91d1\u878d\u884c\u4e1a\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u533b\u7597\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u533b\u5b66\u77e5\u8bc6\u5e93\u7684\u6784\u5efa\u3001\u75be\u75c5\u8bca\u65ad\u3001\u836f\u7269\u7814\u53d1\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u533b\u5b66\u77e5\u8bc6\u7684\u8bed\u4e49\u5173\u8054\u548c\u6574\u5408\uff0c\u63d0\u9ad8\u533b\u7597\u670d\u52a1\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u6559\u80b2\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u6559\u80b2\u8d44\u6e90\u7684\u6574\u5408\u3001\u4e2a\u6027\u5316\u5b66\u4e60\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u77e5\u8bc6\u5173\u8054\u548c\u5b66\u4e60\u5206\u6790\uff0c\u63d0\u9ad8\u6559\u80b2\u6559\u5b66\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u7535\u5546\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u5546\u54c1\u63a8\u8350\u3001\u7528\u6237\u753b\u50cf\u5206\u6790\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u7528\u6237\u884c\u4e3a\u548c\u5174\u8da3\u7684\u5206\u6790\uff0c\u63d0\u9ad8\u7535\u5546\u5e73\u53f0\u7684\u4e2a\u6027\u5316\u63a8\u8350\u80fd\u529b\u3002 \u793e\u4ea4\u7f51\u7edc\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u793e\u4ea4\u7f51\u7edc\u7684\u8bed\u4e49\u7406\u89e3\u548c\u5173\u7cfb\u6316\u6398\uff0c\u901a\u8fc7\u7528\u6237\u884c\u4e3a\u7684\u76d1\u6d4b\u548c\u5206\u6790\uff0c\u63d0\u9ad8\u793e\u4ea4\u7f51\u7edc\u7684\u670d\u52a1\u8d28\u91cf\u548c\u7528\u6237\u4f53\u9a8c\u3002 \u7269\u8054\u7f51\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u667a\u80fd\u5bb6\u5c45\u3001\u667a\u80fd\u4ea4\u901a\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u6570\u636e\u878d\u5408\u548c\u667a\u80fd\u5316\u5904\u7406\uff0c\u63d0\u9ad8\u7269\u8054\u7f51\u5e94\u7528\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u7efc\u4e0a\u6240\u8ff0\uff0c\u77e5\u8bc6\u56fe\u8c31\u7684\u5e94\u7528\u9886\u57df\u975e\u5e38\u5e7f\u6cdb\uff0c\u51e0\u4e4e\u6db5\u76d6\u4e86\u73b0\u4ee3\u793e\u4f1a\u7684\u5404\u4e2a\u9886\u57df\uff0c\u4e3a\u5404\u884c\u5404\u4e1a\u63d0\u4f9b\u4e86\u66f4\u52a0\u667a\u80fd\u5316\u3001\u9ad8\u6548\u5316\u7684\u89e3\u51b3\u65b9\u6848\u3002 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u5c0f\u8282\u6211\u4eec\u5b66\u4e60\u4e86\u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u57fa\u672c\u6982\u5ff5, \u91cd\u70b9\u8bb2\u89e3\u4e86\u77e5\u8bc6\u56fe\u8c31\u7684\u6280\u672f\u67b6\u6784, \u540e\u7eed\u6211\u4eec\u4f1a\u5bf9\u6280\u672f\u67b6\u6784\u4e2d\u7684\uff1a\u5b9e\u4f53\u8bc6\u522b\u3001\u5173\u7cfb\u62bd\u53d6\u3001\u5b9e\u4f53\u6d88\u5c90\u7b49\u77e5\u8bc6\u6a21\u5757\u91cd\u70b9\u8bb2\u89e3\uff0c\u5176\u4ed6\u6280\u672f\u70b9\u4e86\u89e3\u5373\u53ef\u3002","title":"1.2 \u77e5\u8bc6\u56fe\u8c31\u6280\u672f\u6982\u62ec"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#_1","text":"","title":"\u77e5\u8bc6\u56fe\u8c31\u6982\u8ff0"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#_2","text":"\u638c\u63e1\u77e5\u8bc6\u56fe\u8c31\u7684\u57fa\u672c\u6982\u5ff5. \u4e86\u89e3\u77e5\u8bc6\u56fe\u8c31\u7684\u6280\u672f\u67b6\u6784. \u4e86\u89e3\u77e5\u8bc6\u56fe\u8c31\u7684\u5e94\u7528\u573a\u666f","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#1","text":"\u77e5\u8bc6\u56fe\u8c31\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u8bed\u4e49\u7f51\u7edc\uff0c\u7528\u56fe\u7684\u5f62\u5f0f\u63cf\u8ff0\u5ba2\u89c2\u4e8b\u7269\uff0c\u8fd9\u91cc\u7684\u56fe\u6307\u7684\u662f\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u56fe\uff0c\u4e5f\u5c31\u662f\u7531\u8282\u70b9\u548c\u8fb9\u7ec4\u6210\u7684\uff0c\u8fd9\u4e5f\u662f\u77e5\u8bc6\u56fe\u8c31\uff08Knowledge Graph\uff09\u7684\u771f\u5b9e\u542b\u4e49\u3002 \u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u8282\u70b9\u8868\u793a\u6982\u5ff5\u548c\u5b9e\u4f53\uff0c\u6982\u5ff5\u662f\u62bd\u8c61\u51fa\u6765\u7684\u4e8b\u7269\uff0c\u5b9e\u4f53\u662f\u5177\u4f53\u7684\u4e8b\u7269\uff1b\u8fb9\u8868\u793a\u4e8b\u7269\u7684\u5173\u7cfb\u548c\u5c5e\u6027\uff0c\u4e8b\u7269\u7684\u5185\u90e8\u7279\u5f81\u7528\u5c5e\u6027\u6765\u8868\u793a\uff0c\u5916\u90e8\u8054\u7cfb\u7528\u5173\u7cfb\u6765\u8868\u793a\u3002\u5f88\u591a\u65f6\u5019\uff0c\u4eba\u4eec\u7b80\u5316\u4e86\u5bf9\u77e5\u8bc6\u56fe\u8c31\u7684\u63cf\u8ff0\uff0c\u5c06\u5b9e\u4f53\u548c\u6982\u5ff5\u7edf\u79f0\u4e3a\u5b9e\u4f53\uff0c\u5c06\u5173\u7cfb\u548c\u5c5e\u6027\u7edf\u79f0\u4e3a\u5173\u7cfb\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u8bf4\u77e5\u8bc6\u56fe\u8c31\u5c31\u662f\u63cf\u8ff0\u5b9e\u4f53\u4ee5\u53ca\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u5b9e\u4f53\u53ef\u4ee5\u662f\u4eba\uff0c\u5730\u65b9\uff0c\u7ec4\u7ec7\u673a\u6784\uff0c\u6982\u5ff5\u7b49\u7b49\uff0c\u5173\u7cfb\u7684\u79cd\u7c7b\u66f4\u591a\uff0c\u53ef\u4ee5\u662f\u4eba\u4e0e\u4eba\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4eba\u4e0e\u7ec4\u7ec7\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u6982\u5ff5\u4e0e\u67d0\u4e2a\u7269\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u7b49\u7b49\u3002 \u4f8b\u5982\u4e0b\u56fe: \u5b9e\u4f53\uff08\u70b9\uff09\u53ef\u4ee5\u662f\u54fa\u4e73\u52a8\u7269, \u718a, \u810a\u690e, \u9c7c, \u6c34\u7b49; \u5173\u7cfb\uff08\u7ebf\uff09\u53ef\u4ee5\u8868\u660e\u662f, \u6709, \u4f4f\u5728\u7b49\u5173\u7cfb.","title":"1 \u57fa\u672c\u6982\u5ff5"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#2","text":"\u77e5\u8bc6\u56fe\u8c31\u7531\u6570\u636e\u5c42\uff08data layer\uff09\u548c\u6a21\u5f0f\u5c42\uff08schema layer\uff09\u6784\u6210\u3002 \u6a21\u5f0f\u5c42\u662f\u77e5\u8bc6\u56fe\u8c31\u7684\u6982\u5ff5\u6a21\u578b\u548c\u903b\u8f91\u57fa\u7840\uff0c\u5bf9\u6570\u636e\u5c42\u8fdb\u884c\u89c4\u8303\u7ea6\u675f. \u591a\u91c7\u7528\u672c\u4f53\u4f5c\u4e3a\u77e5\u8bc6\u56fe\u8c31\u7684\u6a21\u5f0f\u5c42\uff0c\u501f\u52a9\u672c\u4f53\u5b9a\u4e49\u7684\u89c4\u5219\u548c\u516c\u7406\u7ea6\u675f\u77e5\u8bc6\u56fe\u8c31\u7684\u6570\u636e\u5c42\u3002\u4e5f\u53ef\u5c06\u77e5\u8bc6\u56fe\u8c31\u89c6\u4e3a\u5b9e\u4f8b\u5316\u4e86\u7684\u672c\u4f53\uff0c\u77e5\u8bc6\u56fe\u8c31\u7684\u6570\u636e\u5c42\u662f\u672c\u4f53\u7684\u5b9e\u4f8b\u3002\u5982\u679c\u4e0d\u9700\u652f\u6301\u63a8\u7406, \u5219\u77e5\u8bc6\u56fe\u8c31(\u5927\u591a\u662f\u81ea\u5e95\u5411\u4e0a\u6784\u5efa\u7684) \u53ef\u4ee5\u53ea\u6709\u6570\u636e\u5c42\u800c\u6ca1\u6709\u6a21\u5f0f\u5c42\u3002\u5728\u77e5\u8bc6\u56fe\u8c31\u7684\u6a21\u5f0f\u5c42\uff0c\u8282\u70b9\u8868\u793a\u672c\u4f53\u6982\u5ff5\uff0c\u8fb9\u8868\u793a\u6982\u5ff5\u95f4\u7684\u5173\u7cfb\u3002 schema \u56fe\u793a\u4f8b\uff1a \u5728\u6570\u636e\u5c42, \u4e8b\u5b9e\u4ee5\u201c\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53\u201d\u6216\u201c\u5b9e\u4f53-\u5c5e\u6027-\u5c5e\u6027\u503c\u201d\u7684\u4e09\u5143\u7ec4\u5b58\u50a8\uff0c\u5f62\u6210\u4e00\u4e2a\u56fe\u72b6\u77e5\u8bc6\u5e93. \u5176\u4e2d\uff0c\u5b9e\u4f53\u662f\u77e5\u8bc6\u56fe\u8c31\u7684\u57fa\u672c\u5143\u7d20\uff0c\u6307\u5177\u4f53\u7684\u4eba\u540d\u3001\u7ec4\u7ec7\u673a\u6784\u540d\u3001\u5730\u540d\u3001\u65e5\u671f\u3001\u65f6\u95f4\u7b49\u3002\u5173\u7cfb\u662f\u4e24\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u8bed\u4e49\u5173\u7cfb\uff0c\u662f\u6a21\u5f0f\u5c42\u6240\u5b9a\u4e49\u5173\u7cfb\u7684\u5b9e\u4f8b\u3002\u5c5e\u6027\u662f\u5bf9\u5b9e\u4f53\u7684\u8bf4\u660e\uff0c\u662f\u5b9e\u4f53\u4e0e\u5c5e\u6027\u503c\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\u5c5e\u6027\u53ef\u89c6\u4e3a\u5b9e\u4f53\u4e0e\u5c5e\u6027\u503c\u4e4b\u95f4\u7684 hasValue \u5173\u7cfb\uff0c\u4ece\u800c\u4e5f\u8f6c\u5316\u4e3a\u4ee5\u201c\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53\u201d\u7684\u4e09\u5143\u7ec4\u5b58\u50a8\u3002\u5728\u77e5\u8bc6\u56fe\u8c31\u7684\u6570\u636e\u5c42\uff0c\u8282\u70b9\u8868\u793a\u5b9e\u4f53\uff0c\u8fb9\u8868\u793a\u5b9e\u4f53\u95f4\u5173\u7cfb\u6216\u5b9e\u4f53\u7684\u5c5e\u6027\u3002","title":"2 \u5206\u5c42\u67b6\u6784"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#3","text":"\u77e5\u8bc6\u56fe\u8c31\u6280\u672f\u67b6\u6784\u56fe\u5982\u4e0b\u6240\u793a\uff1a","title":"3 \u6280\u672f\u67b6\u6784"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#31","text":"\u76ee\u524d\uff0c\u77e5\u8bc6\u56fe\u8c31\u6570\u636e\u6e90\u6309\u6765\u6e90\u6e20\u9053\u7684\u4e0d\u540c\u53ef\u5206\u4e3a\u4e24\u79cd\uff1a \u4e00\u79cd\u662f\u4e1a\u52a1\u672c\u8eab\u7684\u6570\u636e\uff0c\u8fd9\u90e8\u5206\u6570\u636e\u901a\u5e38\u5305\u542b\u5728\u884c\u4e1a\u5185\u90e8\u6570\u636e\u5e93\u8868\u5e76\u4ee5\u7ed3\u6784\u5316\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u662f\u4e00\u79cd\u975e\u516c\u5f00\u6216\u534a\u516c\u5f00\u7684\u6570\u636e\uff1b \u53e6\u4e00\u79cd\u662f\u7f51\u7edc\u4e0a\u516c\u5f00\u3001\u6293\u53d6\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u901a\u5e38\u662f\u4ee5\u7f51\u9875\u7684\u5f62\u5f0f\u5b58\u5728\uff0c\u662f\u975e\u7ed3\u6784\u5316\u7684\u6570\u636e\u3002 \u6309\u6570\u636e\u7ed3\u6784\u7684\u4e0d\u540c\uff0c\u53ef\u5206\u4e3a\u4e09\u79cd\uff1a\u7ed3\u6784\u5316\u6570\u636e\u3001\u534a\u7ed3\u6784\u5316\u6570\u636e\u548c\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u6839\u636e\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6211\u4eec\u91c7\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\u8fdb\u884c\u5904\u7406\u3002","title":"3.1 \u6570\u636e\u83b7\u53d6"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#32-information-extraction","text":"\u4fe1\u606f\u62bd\u53d6\u7684\u5173\u952e\u95ee\u9898\u662f\u5982\u4f55\u4ece\u5f02\u6784\u6570\u636e\u6e90\u4e2d\u81ea\u52a8\u62bd\u53d6\u4fe1\u606f\u5f97\u5230\u5019\u9009\u77e5\u8bc6\u5355\u5143\u3002\u5982\u524d\u6587\u6240\u8bf4\uff0c\u77e5\u8bc6\u83b7\u53d6\u6709\u4e24\u79cd\u6e20\u9053\uff0c\u524d\u8005\u53ea\u9700\u8981\u7b80\u5355\u9884\u5904\u7406\u5373\u53ef\u4ee5\u4f5c\u4e3a\u540e\u7eedAI\u7cfb\u7edf\u7684\u8f93\u5165\uff0c\u4f46\u540e\u8005\u4e00\u822c\u9700\u8981\u501f\u52a9\u4e8e\u81ea\u7136\u8bed\u8a00\u5904\u7406\u7b49\u6280\u672f\u6765\u63d0\u53d6\u51fa\u7ed3\u6784\u5316\u4fe1\u606f\uff0c\u8fd9\u6b63\u662f\u4fe1\u606f\u62bd\u53d6\u7684\u96be\u70b9\u95ee\u9898\uff0c\u6d89\u53ca\u7684\u5173\u952e\u6280\u672f\u5305\u62ec\u5b9e\u4f53\u62bd\u53d6\u3001\u5173\u7cfb\u62bd\u53d6\u548c\u5c5e\u6027\u62bd\u53d6\u3002 \u5b9e\u4f53\u62bd\u53d6\uff08Entity Extraction\uff09 \u5b9a\u4e49\uff1a\u5b9e\u4f53\u62bd\u53d6\u662f\u4ece\u6587\u672c\u4e2d\u8bc6\u522b\u548c\u63d0\u53d6\u5177\u6709\u7279\u5b9a\u610f\u4e49\u7684\u547d\u540d\u5b9e\u4f53\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u5b9e\u4f53\u53ef\u4ee5\u662f\u4eba\u7269\u3001\u5730\u70b9\u3001\u7ec4\u7ec7\u3001\u65e5\u671f\u3001\u8d27\u5e01\u7b49\u3002 \u65b9\u6cd5\uff1a \u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u5904\u7406\uff08NLP\uff09\u6280\u672f\uff0c\u5982\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff08NER\uff09\uff0c\u91c7\u7528\u89c4\u5219\u3001\u7edf\u8ba1\u6a21\u578b\u6216\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u4ee5\u8bc6\u522b\u5e76\u6807\u6ce8\u6587\u672c\u4e2d\u7684\u5b9e\u4f53\u3002 \u5173\u7cfb\u62bd\u53d6\uff08Relation Extraction\uff09 \u5b9a\u4e49\uff1a \u5173\u7cfb\u62bd\u53d6\u662f\u4ece\u6587\u672c\u4e2d\u8bc6\u522b\u548c\u63d0\u53d6\u4e0d\u540c\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u5173\u7cfb\u53ef\u4ee5\u662f\u4f5c\u8005\u5173\u7cfb\u3001\u5de5\u4f5c\u5173\u7cfb\u3001\u4eb2\u5c5e\u5173\u7cfb\u7b49\u3002 \u65b9\u6cd5\uff1a \u5229\u7528\u76d1\u7763\u5b66\u4e60\uff0c\u4f7f\u7528\u6709\u6807\u7b7e\u7684\u6570\u636e\u8fdb\u884c\u8bad\u7ec3\uff0c\u91c7\u7528\u7edf\u8ba1\u65b9\u6cd5\u6216\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u4ee5\u8bc6\u522b\u6587\u672c\u4e2d\u7684\u5173\u7cfb\u3002 \u5c5e\u6027\u62bd\u53d6\uff08Attribute Extraction\uff09 \u5b9a\u4e49\uff1a\u5c5e\u6027\u62bd\u53d6\u662f\u4ece\u6587\u672c\u4e2d\u8bc6\u522b\u548c\u63d0\u53d6\u4e0e\u5b9e\u4f53\u76f8\u5173\u7684\u7279\u5b9a\u5c5e\u6027\u6216\u7279\u5f81\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u5c5e\u6027\u53ef\u4ee5\u662f\u5b9e\u4f53\u7684\u5c5e\u6027\uff0c\u5982\u4eba\u7269\u7684\u804c\u4e1a\u3001\u5730\u70b9\u7684\u7ecf\u7eac\u5ea6\u7b49\u3002 \u65b9\u6cd5\uff1a\u91c7\u7528\u89c4\u5219\u5339\u914d\u3001\u57fa\u4e8e\u7edf\u8ba1\u7684\u65b9\u6cd5\uff0c\u6216\u8005\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\uff0c\u4ee5\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\u51fa\u4e0e\u5b9e\u4f53\u76f8\u5173\u7684\u5c5e\u6027\u4fe1\u606f\u3002 \u6ce8\u610f\uff1a\u5c5e\u6027\u4e3b\u8981\u662f\u9488\u5bf9\u5b9e\u4f53\u800c\u8a00\u7684\uff0c\u5bf9\u5f53\u524d\u5b9e\u4f53\u7684\u5b8c\u6574\u63cf\u8ff0\u3002\u7531\u4e8e\u53ef\u4ee5\u628a\u5b9e\u4f53\u7684\u5c5e\u6027\u770b\u4f5c\u5b9e\u4f53\u4e0e\u5c5e\u6027\u503c\u4e4b\u95f4\u7684\u4e00\u79cd\u540d\u8bcd\u6027\u5173\u7cfb\uff0c\u56e0\u6b64\u5c5e\u6027\u62bd\u53d6\u4efb\u52a1\u5c31\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u3002","title":"3.2 \u4fe1\u606f\u62bd\u53d6\uff08Information Extraction\uff09\u3010\u6838\u5fc3\u3011"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#33-knowledge-fusion","text":"\u77e5\u8bc6\u878d\u5408\uff0c\u7b80\u5355\u7406\u89e3\u662f\u5c06\u6765\u81ea\u4e0d\u540c\u6765\u6e90\u3001\u683c\u5f0f\u3001\u7ed3\u6784\u7684\u5f02\u6784\u6570\u636e\u7edf\u4e00\u6574\u5408\u5230\u4e00\u4e2a\u4e00\u81f4\u7684\u77e5\u8bc6\u56fe\u8c31\u4e2d\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u8981\u89e3\u51b3\u4ee5\u4e0b\u95ee\u9898\uff1a \u6d88\u9664\u5197\u4f59\uff1a\u591a\u4e2a\u6765\u6e90\u53ef\u80fd\u63cf\u8ff0\u76f8\u540c\u7684\u5b9e\u4f53\u6216\u5173\u7cfb\uff0c\u77e5\u8bc6\u878d\u5408\u8981\u6d88\u9664\u91cd\u590d\u9879\uff0c\u5e76\u786e\u4fdd\u56fe\u8c31\u7684\u7cbe\u7b80\u6027\u3002 \u7edf\u4e00\u8868\u8fbe\uff1a\u4e0d\u540c\u6765\u6e90\u4e2d\u7684\u5b9e\u4f53\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\u3001\u683c\u5f0f\u6216\u7ed3\u6784\u8868\u793a\u76f8\u540c\u7684\u6982\u5ff5\u6216\u5173\u7cfb\uff0c\u878d\u5408\u9700\u8981\u5c06\u5b83\u4eec\u7edf\u4e00\u4e3a\u4e00\u81f4\u7684\u8868\u793a\u65b9\u5f0f\u3002 \u89e3\u51b3\u51b2\u7a81\uff1a\u4e0d\u540c\u6570\u636e\u6e90\u5bf9\u540c\u4e00\u4e2a\u5b9e\u4f53\u6216\u5173\u7cfb\u7684\u63cf\u8ff0\u53ef\u80fd\u5b58\u5728\u51b2\u7a81\uff0c\u77e5\u8bc6\u878d\u5408\u9700\u8981\u5728\u8fd9\u4e9b\u51b2\u7a81\u4e2d\u627e\u5230\u4e00\u81f4\u6027\uff0c\u6216\u901a\u8fc7\u53ef\u4fe1\u5ea6\u8bc4\u4f30\u51b3\u5b9a\u4fdd\u7559\u54ea\u4e2a\u7248\u672c\u3002 \u77e5\u8bc6\u6269\u5c55\uff1a\u878d\u5408\u8fc7\u7a0b\u53ef\u4ee5\u4ece\u591a\u4e2a\u6765\u6e90\u4e2d\u6316\u6398\u65b0\u77e5\u8bc6\uff0c\u4e30\u5bcc\u77e5\u8bc6\u56fe\u8c31\u7684\u5185\u5bb9\uff0c\u63d0\u5347\u77e5\u8bc6\u7684\u5168\u9762\u6027\u548c\u5b8c\u6574\u6027\u3002 \u77e5\u8bc6\u878d\u5408\u4e2d\u5173\u952e\u7684\u6280\u672f\uff1a\u6307\u4ee3\u6d88\u89e3\u3001\u5b9e\u4f53\u6d88\u6b67\uff08\u5b9e\u4f53\u94fe\u63a5\uff09\u3001\u5b9e\u4f53\u7edf\u4e00\uff08\u5b9e\u4f53\u5bf9\u9f50\uff09\u3001\u5173\u7cfb\u5bf9\u9f50\u7b49\uff08\u540e\u7eed\u7ae0\u8282\u6211\u4eec\u4f1a\u8be6\u7ec6\u5206\u6790\uff09\u3002","title":"3.3 \u77e5\u8bc6\u878d\u5408\uff08Knowledge Fusion\uff09"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#34-knowledge-processing","text":"\u6d77\u91cf\u6570\u636e\u5728\u7ecf\u4fe1\u606f\u62bd\u53d6\u3001\u77e5\u8bc6\u878d\u5408\u4e4b\u540e\u5f97\u5230\u4e00\u7cfb\u5217\u57fa\u672c\u7684\u4e8b\u5b9e\u8868\u8fbe\uff0c\u4f46\u8fd9\u5e76\u4e0d\u7b49\u540c\u4e8e\u77e5\u8bc6\uff0c\u8981\u60f3\u83b7\u5f97\u7ed3\u6784\u5316\uff0c\u7f51\u7edc\u5316\u7684\u77e5\u8bc6\u4f53\u7cfb\uff0c\u8fd8\u9700\u8981\u7ecf\u8fc7\u8d28\u91cf\u8bc4\u4f30\u4e4b\u540e\uff08\u90e8\u5206\u9700\u8981\u4eba\u5de5\u53c2\u4e0e\u7504\u522b\uff09\uff0c\u624d\u80fd\u5c06\u5408\u683c\u7684\u90e8\u5206\u7eb3\u5165\u77e5\u8bc6\u4f53\u7cfb\u4e2d\u4ee5\u786e\u4fdd\u77e5\u8bc6\u5e93\u7684\u8d28\u91cf\uff0c\u8fd9\u5c31\u662f\u77e5\u8bc6\u52a0\u5de5\u7684\u8fc7\u7a0b\u3002","title":"3.4 \u77e5\u8bc6\u52a0\u5de5\uff08Knowledge Processing\uff09"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#4","text":"\u77e5\u8bc6\u56fe\u8c31\u7684\u5e94\u7528\u9886\u57df\u975e\u5e38\u5e7f\u6cdb\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u4ee5\u4e0b\u65b9\u9762\uff1a \u641c\u7d22\u5f15\u64ce\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u63d0\u4f9b\u66f4\u52a0\u667a\u80fd\u7684\u641c\u7d22\u7ed3\u679c\uff0c\u901a\u8fc7\u8bed\u4e49\u7406\u89e3\u548c\u5b9e\u4f53\u5173\u8054\uff0c\u5e2e\u52a9\u7528\u6237\u66f4\u51c6\u786e\u5730\u627e\u5230\u6240\u9700\u7684\u4fe1\u606f\u3002 \u667a\u80fd\u52a9\u624b\u548c\u865a\u62df\u52a9\u624b\uff1a\u77e5\u8bc6\u56fe\u8c31\u80fd\u591f\u63d0\u4f9b\u66f4\u667a\u80fd\u7684\u8bed\u97f3\u4ea4\u4e92\u548c\u95ee\u7b54\u7cfb\u7edf\uff0c\u901a\u8fc7\u81ea\u7136\u8bed\u8a00\u5904\u7406\u548c\u8bed\u4e49\u7406\u89e3\uff0c\u5b9e\u73b0\u66f4\u52a0\u667a\u80fd\u7684\u8bed\u97f3\u4ea4\u4e92\u3002 \u91d1\u878d\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u98ce\u9669\u8bc4\u4f30\u3001\u4fe1\u7528\u8bc4\u7ea7\u3001\u6b3a\u8bc8\u68c0\u6d4b\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u5206\u6790\u91d1\u878d\u6570\u636e\u548c\u5b9e\u4f53\u5173\u7cfb\uff0c\u63d0\u9ad8\u91d1\u878d\u884c\u4e1a\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u533b\u7597\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u533b\u5b66\u77e5\u8bc6\u5e93\u7684\u6784\u5efa\u3001\u75be\u75c5\u8bca\u65ad\u3001\u836f\u7269\u7814\u53d1\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u533b\u5b66\u77e5\u8bc6\u7684\u8bed\u4e49\u5173\u8054\u548c\u6574\u5408\uff0c\u63d0\u9ad8\u533b\u7597\u670d\u52a1\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u6559\u80b2\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u6559\u80b2\u8d44\u6e90\u7684\u6574\u5408\u3001\u4e2a\u6027\u5316\u5b66\u4e60\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u77e5\u8bc6\u5173\u8054\u548c\u5b66\u4e60\u5206\u6790\uff0c\u63d0\u9ad8\u6559\u80b2\u6559\u5b66\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u7535\u5546\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u5546\u54c1\u63a8\u8350\u3001\u7528\u6237\u753b\u50cf\u5206\u6790\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u7528\u6237\u884c\u4e3a\u548c\u5174\u8da3\u7684\u5206\u6790\uff0c\u63d0\u9ad8\u7535\u5546\u5e73\u53f0\u7684\u4e2a\u6027\u5316\u63a8\u8350\u80fd\u529b\u3002 \u793e\u4ea4\u7f51\u7edc\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u793e\u4ea4\u7f51\u7edc\u7684\u8bed\u4e49\u7406\u89e3\u548c\u5173\u7cfb\u6316\u6398\uff0c\u901a\u8fc7\u7528\u6237\u884c\u4e3a\u7684\u76d1\u6d4b\u548c\u5206\u6790\uff0c\u63d0\u9ad8\u793e\u4ea4\u7f51\u7edc\u7684\u670d\u52a1\u8d28\u91cf\u548c\u7528\u6237\u4f53\u9a8c\u3002 \u7269\u8054\u7f51\u9886\u57df\uff1a\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u7528\u4e8e\u667a\u80fd\u5bb6\u5c45\u3001\u667a\u80fd\u4ea4\u901a\u7b49\u65b9\u9762\uff0c\u901a\u8fc7\u6570\u636e\u878d\u5408\u548c\u667a\u80fd\u5316\u5904\u7406\uff0c\u63d0\u9ad8\u7269\u8054\u7f51\u5e94\u7528\u7684\u667a\u80fd\u5316\u6c34\u5e73\u3002 \u7efc\u4e0a\u6240\u8ff0\uff0c\u77e5\u8bc6\u56fe\u8c31\u7684\u5e94\u7528\u9886\u57df\u975e\u5e38\u5e7f\u6cdb\uff0c\u51e0\u4e4e\u6db5\u76d6\u4e86\u73b0\u4ee3\u793e\u4f1a\u7684\u5404\u4e2a\u9886\u57df\uff0c\u4e3a\u5404\u884c\u5404\u4e1a\u63d0\u4f9b\u4e86\u66f4\u52a0\u667a\u80fd\u5316\u3001\u9ad8\u6548\u5316\u7684\u89e3\u51b3\u65b9\u6848\u3002","title":"4 \u5e94\u7528\u573a\u666f"},{"location":"%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF/2.%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%8A%80%E6%9C%AF%E6%A6%82%E6%8B%AC.html#_3","text":"\u672c\u5c0f\u8282\u6211\u4eec\u5b66\u4e60\u4e86\u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u57fa\u672c\u6982\u5ff5, \u91cd\u70b9\u8bb2\u89e3\u4e86\u77e5\u8bc6\u56fe\u8c31\u7684\u6280\u672f\u67b6\u6784, \u540e\u7eed\u6211\u4eec\u4f1a\u5bf9\u6280\u672f\u67b6\u6784\u4e2d\u7684\uff1a\u5b9e\u4f53\u8bc6\u522b\u3001\u5173\u7cfb\u62bd\u53d6\u3001\u5b9e\u4f53\u6d88\u5c90\u7b49\u77e5\u8bc6\u6a21\u5757\u91cd\u70b9\u8bb2\u89e3\uff0c\u5176\u4ed6\u6280\u672f\u70b9\u4e86\u89e3\u5373\u53ef\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/01-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html","text":"\u95ee\u7b54\u7cfb\u7edf\u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3\u4ec0\u4e48\u662f\u95ee\u7b54\u7cfb\u7edf \u4e86\u89e3\u95ee\u7b54\u7cfb\u7edf\u7684\u57fa\u672c\u6846\u67b6 \u4e86\u89e3\u95ee\u7b54\u7cfb\u7edf\u7684\u4e3b\u8981\u7c7b\u578b \u4ec0\u4e48\u662f\u95ee\u7b54\u7cfb\u7edf \u00b6 \u95ee\u7b54\u7cfb\u7edf(Question Answering System, QA)\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u9886\u57df\u7684\u4e00\u4e2a\u91cd\u8981\u5e94\u7528\uff0c\u4f5c\u4e3a\u4fe1\u606f\u68c0\u7d22\u7cfb\u7edf\u7684\u9ad8\u7ea7\u5f62\u5f0f\uff0c\u80fd\u591f\u51c6\u786e\u3001\u6e05\u6670\u5730\u56de\u7b54\u7528\u6237\u7528\u81ea\u7136\u8bed\u8a00\u63d0\u51fa\u7684\u95ee\u9898\u3002 \u95ee\u7b54\u7cfb\u7edf\u5728\u5927\u5bb6\u7684\u65e5\u5e38\u751f\u6d3b\u4e2d\u968f\u5904\u53ef\u89c1\uff0c2014\u5e74\u5fae\u8f6f\u7387\u5148\u63a8\u51fa\u4e86\u5c0f\u51b0\u667a\u80fd\u804a\u5929\u673a\u5668\u4eba\uff0c\u76f4\u81f3\u73b0\u5728\u8d8a\u6765\u8d8a\u591a\u5982siri\u79fb\u52a8\u751f\u6d3b\u52a9\u624b\u548c\u667a\u80fd\u97f3\u7bb1\u7b49\u7684\u9762\u5e02\uff0c\u95ee\u7b54\u4f5c\u4e3a\u4e00\u79cd\u4fe1\u606f\u83b7\u53d6\u65b9\u5f0f\u6108\u53d1\u53d7\u5230\u5927\u4f17\u548c\u5382\u5546\u7684\u5173\u6ce8\u548c\u6295\u5165\u3002 \u95ee\u7b54\u7cfb\u7edf\u6846\u67b6 \u00b6 \u95ee\u7b54\u7cfb\u7edf\u901a\u5e38\u5305\u62ec\u4e09\u4e2a\u73af\u8282\uff0cNLU\uff08\u81ea\u7136\u8bed\u8a00\u7406\u89e3\uff09\uff0cDM\uff08\u5bf9\u8bdd\u7ba1\u7406\uff09\uff0cNLG\uff08\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\u3002 \u5176\u4e2dNLU\u4e3b\u8981\u662f\u5bf9\u7528\u6237\u95ee\u9898\u7684\u89e3\u6790\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u628a\u7528\u6237\u95ee\u9898\u8f6c\u5316\u4e3a\u673a\u5668\u80fd\u7406\u89e3\u7684\u8bed\u8a00\u3002\u5bf9\u8bdd\u72b6\u6001\u8ddf\u8e2a\u4e3b\u8981\u662f\u83b7\u5f97\u5f53\u524d\u7684\u72b6\u6001\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u673a\u5668\u4eba\u6240\u7406\u89e3\u7684\u7528\u6237\u95ee\u9898\u7684\u6240\u5904\u7684\u72b6\u6001\uff0c\u7b56\u7565\u5b66\u4e60\u4e3b\u8981\u662f\u6839\u636e\u5f53\u524d\u7cfb\u7edf\u7684\u72b6\u6001\u91c7\u53d6\u7684\u7b56\u7565\uff08\u4f8b\u5982\u7528\u6237\u5728\u8fd9\u91cc\u53ef\u80fd\u662f\u8981\u8be2\u95ee\u5730\u5740\uff0c\u90a3\u4e48\u5c31\u8fd4\u56de\u7684\u7b56\u7565\u5c31\u662f\u8ddf\u8be2\u95ee\u5730\u5740\u76f8\u5173\u7684\uff09\uff0cNLG\u662f\u5bf9\u7528\u6237\u7684\u95ee\u9898\u7684\u56de\u590d\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u7528\u6237\u6700\u7ec8\u4f1a\u770b\u5230\u7684\u673a\u5668\u4eba\u8fd4\u56de\u7684\u7ed3\u679c\u3002 \u95ee\u7b54\u7cfb\u7edf\u7c7b\u578b \u00b6 \u57fa\u4e8e\u4efb\u52a1\u7c7b\u578b\uff1a 1.\u4efb\u52a1\u578b\u673a\u5668\u4eba \u7528\u4e8e\u5b8c\u6210\u7528\u6237\u7279\u5b9a\u4efb\u52a1\uff0c\u673a\u5668\u4eba\u5229\u7528\u8bed\u4e49\u53bb\u6267\u884c\u540e\u53f0\u5df2\u5bf9\u63a5\u7684\u80fd\u529b\uff0c\u5e2e\u7528\u6237\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u3002\u4f8b\u5982\u9884\u8ba2\u9152\u5e97\uff0c\u9500\u552e\u4ea7\u54c1\u7b49\u3002 \u7279\u70b9\uff1a\u667a\u80fd\u51b3\u7b56\uff0c\u72b6\u6001\u8f6c\u79fb\uff0c\u69fd\u4f4d\u586b\u5145\uff0c\u591a\u8f6e\u95ee\u7b54\u3002 2.\u89e3\u7b54\u578b\u673a\u5668\u4eba \u7528\u4e8e\u89e3\u7b54\u7528\u6237\u7684\u95ee\u9898\uff0c\u673a\u5668\u4eba\u7684\u56de\u590d\u6765\u6e90\u4e8e\u7279\u5b9a\u77e5\u8bc6\u5e93\uff0c\u4ee5\u7279\u5b9a\u56de\u590d\u56de\u7b54\u7528\u6237\u3002\u4f8b\u5982\u8ddf[\u767e\u79d1\u95ee\u7b54]\u76f8\u5173\u7684\u673a\u5668\u4eba\u6216\u8005\u4ea7\u54c1\u5ba2\u670d\u673a\u5668\u4eba\u3002 \u7279\u70b9\uff1a\u95ee\u7b54\u6a21\u578b\uff0c\u4fe1\u606f\u68c0\u7d22\uff0c\u5355\u8f6e\u4e3a\u4e3b\u3002 3.\u95f2\u804a\u578b\u673a\u5668\u4eba \u8ddf\u7528\u6237\u7684\u65e0\u76ee\u7684\u95f2\u804a\uff0c\u673a\u5668\u4eba\u56de\u590d\u4e0d\u9650\u5236\uff0c\u591a\u4ee5\u8da3\u5473\u6027\u8ddf\u4e2a\u6027\u5316\u56de\u590d\u4e3a\u4e3b\u3002 \u57fa\u4e8e\u89e3\u51b3\u65b9\u6848\uff1a \u57fa\u4e8e\u68c0\u7d22\u7684\u95ee\u7b54\u7cfb\u7edf\uff1a\u901a\u8fc7\u641c\u7d22\u5f15\u64ce\u627e\u5230\u76f8\u5173\u7684\u6587\u6863\u6216\u6bb5\u843d\uff0c\u4ece\u4e2d\u63d0\u53d6\u7b54\u6848\u3002 \u57fa\u4e8e\u77e5\u8bc6\u7684\u95ee\u7b54\u7cfb\u7edf\uff1a\u5229\u7528\u9884\u5b9a\u4e49\u7684\u77e5\u8bc6\u5e93\uff08\u5982\u6570\u636e\u5e93\u3001\u77e5\u8bc6\u56fe\u8c31\uff09\u76f4\u63a5\u751f\u6210\u7b54\u6848\u3002 \u57fa\u4e8e\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u95ee\u7b54\u7cfb\u7edf\uff1a\u8ba9\u6a21\u578b\u7406\u89e3\u6587\u672c\u5185\u5bb9\uff0c\u5e76\u57fa\u4e8e\u6587\u672c\u5185\u5bb9\u76f4\u63a5\u751f\u6210\u7b54\u6848\u3002 \u968f\u7740\u77e5\u8bc6\u56fe\u8c31\u7684\u4e0d\u65ad\u5b8c\u5584\uff0c\u8fd1\u5e74\u6765\u8d8a\u6765\u8d8a\u591a\u5b66\u8005\u5c06\u77e5\u8bc6\u56fe\u8c31\u5e94\u7528\u4e8e\u6784\u5efa\u533b\u7597\u95ee\u7b54\u7cfb\u7edf\uff0c\u5b9e\u73b0\u9ad8\u6548\u5730\u4f7f \u7528\u548c\u53d1\u6398\u77e5\u8bc6\u56fe\u8c31\u65b0\u7684\u4ef7\u503c\uff0c\u56e0\u6b64\uff0c\u57fa\u4e8e\u77e5\u8bc6\u56fe\u8c31\u7684\u95ee\u7b54\u7cfb\u7edf\u5df2\u7ecf\u6210\u4e3a\u533b\u7597\u9886\u57df\u7684\u91cd\u8981\u65b9\u5411\u3002 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4ecb\u7ecd\u4e86\u95ee\u7b54\u7cfb\u7edf\u7684\u5b9a\u4e49\u3001\u5e94\u7528\u3001\u57fa\u672c\u6846\u67b6\uff08\u5305\u62ec\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u3001\u5bf9\u8bdd\u7ba1\u7406\u548c\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\uff0c\u4ee5\u53ca\u5176\u7c7b\u578b\uff08\u4efb\u52a1\u578b\u3001\u89e3\u7b54\u578b\u3001\u95f2\u804a\u578b\uff09\u548c\u89e3\u51b3\u65b9\u6848\uff08\u57fa\u4e8e\u68c0\u7d22\u3001\u77e5\u8bc6\u548c\u673a\u5668\u9605\u8bfb\u7406\u89e3\uff09\uff0c\u5e2e\u52a9\u5b66\u4e60\u8005\u7406\u89e3\u95ee\u7b54\u7cfb\u7edf\u7684\u6838\u5fc3\u6982\u5ff5\u4e0e\u8fd0\u4f5c\u65b9\u5f0f\u3002","title":"7.1 \u95ee\u7b54\u7cfb\u7edf\u57fa\u7840\u77e5\u8bc6"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/01-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html#_1","text":"","title":"\u95ee\u7b54\u7cfb\u7edf\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/01-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html#_2","text":"\u4e86\u89e3\u4ec0\u4e48\u662f\u95ee\u7b54\u7cfb\u7edf \u4e86\u89e3\u95ee\u7b54\u7cfb\u7edf\u7684\u57fa\u672c\u6846\u67b6 \u4e86\u89e3\u95ee\u7b54\u7cfb\u7edf\u7684\u4e3b\u8981\u7c7b\u578b","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/01-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html#_3","text":"\u95ee\u7b54\u7cfb\u7edf(Question Answering System, QA)\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u9886\u57df\u7684\u4e00\u4e2a\u91cd\u8981\u5e94\u7528\uff0c\u4f5c\u4e3a\u4fe1\u606f\u68c0\u7d22\u7cfb\u7edf\u7684\u9ad8\u7ea7\u5f62\u5f0f\uff0c\u80fd\u591f\u51c6\u786e\u3001\u6e05\u6670\u5730\u56de\u7b54\u7528\u6237\u7528\u81ea\u7136\u8bed\u8a00\u63d0\u51fa\u7684\u95ee\u9898\u3002 \u95ee\u7b54\u7cfb\u7edf\u5728\u5927\u5bb6\u7684\u65e5\u5e38\u751f\u6d3b\u4e2d\u968f\u5904\u53ef\u89c1\uff0c2014\u5e74\u5fae\u8f6f\u7387\u5148\u63a8\u51fa\u4e86\u5c0f\u51b0\u667a\u80fd\u804a\u5929\u673a\u5668\u4eba\uff0c\u76f4\u81f3\u73b0\u5728\u8d8a\u6765\u8d8a\u591a\u5982siri\u79fb\u52a8\u751f\u6d3b\u52a9\u624b\u548c\u667a\u80fd\u97f3\u7bb1\u7b49\u7684\u9762\u5e02\uff0c\u95ee\u7b54\u4f5c\u4e3a\u4e00\u79cd\u4fe1\u606f\u83b7\u53d6\u65b9\u5f0f\u6108\u53d1\u53d7\u5230\u5927\u4f17\u548c\u5382\u5546\u7684\u5173\u6ce8\u548c\u6295\u5165\u3002","title":"\u4ec0\u4e48\u662f\u95ee\u7b54\u7cfb\u7edf"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/01-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html#_4","text":"\u95ee\u7b54\u7cfb\u7edf\u901a\u5e38\u5305\u62ec\u4e09\u4e2a\u73af\u8282\uff0cNLU\uff08\u81ea\u7136\u8bed\u8a00\u7406\u89e3\uff09\uff0cDM\uff08\u5bf9\u8bdd\u7ba1\u7406\uff09\uff0cNLG\uff08\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\u3002 \u5176\u4e2dNLU\u4e3b\u8981\u662f\u5bf9\u7528\u6237\u95ee\u9898\u7684\u89e3\u6790\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u628a\u7528\u6237\u95ee\u9898\u8f6c\u5316\u4e3a\u673a\u5668\u80fd\u7406\u89e3\u7684\u8bed\u8a00\u3002\u5bf9\u8bdd\u72b6\u6001\u8ddf\u8e2a\u4e3b\u8981\u662f\u83b7\u5f97\u5f53\u524d\u7684\u72b6\u6001\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u673a\u5668\u4eba\u6240\u7406\u89e3\u7684\u7528\u6237\u95ee\u9898\u7684\u6240\u5904\u7684\u72b6\u6001\uff0c\u7b56\u7565\u5b66\u4e60\u4e3b\u8981\u662f\u6839\u636e\u5f53\u524d\u7cfb\u7edf\u7684\u72b6\u6001\u91c7\u53d6\u7684\u7b56\u7565\uff08\u4f8b\u5982\u7528\u6237\u5728\u8fd9\u91cc\u53ef\u80fd\u662f\u8981\u8be2\u95ee\u5730\u5740\uff0c\u90a3\u4e48\u5c31\u8fd4\u56de\u7684\u7b56\u7565\u5c31\u662f\u8ddf\u8be2\u95ee\u5730\u5740\u76f8\u5173\u7684\uff09\uff0cNLG\u662f\u5bf9\u7528\u6237\u7684\u95ee\u9898\u7684\u56de\u590d\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u7528\u6237\u6700\u7ec8\u4f1a\u770b\u5230\u7684\u673a\u5668\u4eba\u8fd4\u56de\u7684\u7ed3\u679c\u3002","title":"\u95ee\u7b54\u7cfb\u7edf\u6846\u67b6"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/01-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html#_5","text":"\u57fa\u4e8e\u4efb\u52a1\u7c7b\u578b\uff1a 1.\u4efb\u52a1\u578b\u673a\u5668\u4eba \u7528\u4e8e\u5b8c\u6210\u7528\u6237\u7279\u5b9a\u4efb\u52a1\uff0c\u673a\u5668\u4eba\u5229\u7528\u8bed\u4e49\u53bb\u6267\u884c\u540e\u53f0\u5df2\u5bf9\u63a5\u7684\u80fd\u529b\uff0c\u5e2e\u7528\u6237\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\u3002\u4f8b\u5982\u9884\u8ba2\u9152\u5e97\uff0c\u9500\u552e\u4ea7\u54c1\u7b49\u3002 \u7279\u70b9\uff1a\u667a\u80fd\u51b3\u7b56\uff0c\u72b6\u6001\u8f6c\u79fb\uff0c\u69fd\u4f4d\u586b\u5145\uff0c\u591a\u8f6e\u95ee\u7b54\u3002 2.\u89e3\u7b54\u578b\u673a\u5668\u4eba \u7528\u4e8e\u89e3\u7b54\u7528\u6237\u7684\u95ee\u9898\uff0c\u673a\u5668\u4eba\u7684\u56de\u590d\u6765\u6e90\u4e8e\u7279\u5b9a\u77e5\u8bc6\u5e93\uff0c\u4ee5\u7279\u5b9a\u56de\u590d\u56de\u7b54\u7528\u6237\u3002\u4f8b\u5982\u8ddf[\u767e\u79d1\u95ee\u7b54]\u76f8\u5173\u7684\u673a\u5668\u4eba\u6216\u8005\u4ea7\u54c1\u5ba2\u670d\u673a\u5668\u4eba\u3002 \u7279\u70b9\uff1a\u95ee\u7b54\u6a21\u578b\uff0c\u4fe1\u606f\u68c0\u7d22\uff0c\u5355\u8f6e\u4e3a\u4e3b\u3002 3.\u95f2\u804a\u578b\u673a\u5668\u4eba \u8ddf\u7528\u6237\u7684\u65e0\u76ee\u7684\u95f2\u804a\uff0c\u673a\u5668\u4eba\u56de\u590d\u4e0d\u9650\u5236\uff0c\u591a\u4ee5\u8da3\u5473\u6027\u8ddf\u4e2a\u6027\u5316\u56de\u590d\u4e3a\u4e3b\u3002 \u57fa\u4e8e\u89e3\u51b3\u65b9\u6848\uff1a \u57fa\u4e8e\u68c0\u7d22\u7684\u95ee\u7b54\u7cfb\u7edf\uff1a\u901a\u8fc7\u641c\u7d22\u5f15\u64ce\u627e\u5230\u76f8\u5173\u7684\u6587\u6863\u6216\u6bb5\u843d\uff0c\u4ece\u4e2d\u63d0\u53d6\u7b54\u6848\u3002 \u57fa\u4e8e\u77e5\u8bc6\u7684\u95ee\u7b54\u7cfb\u7edf\uff1a\u5229\u7528\u9884\u5b9a\u4e49\u7684\u77e5\u8bc6\u5e93\uff08\u5982\u6570\u636e\u5e93\u3001\u77e5\u8bc6\u56fe\u8c31\uff09\u76f4\u63a5\u751f\u6210\u7b54\u6848\u3002 \u57fa\u4e8e\u673a\u5668\u9605\u8bfb\u7406\u89e3\u7684\u95ee\u7b54\u7cfb\u7edf\uff1a\u8ba9\u6a21\u578b\u7406\u89e3\u6587\u672c\u5185\u5bb9\uff0c\u5e76\u57fa\u4e8e\u6587\u672c\u5185\u5bb9\u76f4\u63a5\u751f\u6210\u7b54\u6848\u3002 \u968f\u7740\u77e5\u8bc6\u56fe\u8c31\u7684\u4e0d\u65ad\u5b8c\u5584\uff0c\u8fd1\u5e74\u6765\u8d8a\u6765\u8d8a\u591a\u5b66\u8005\u5c06\u77e5\u8bc6\u56fe\u8c31\u5e94\u7528\u4e8e\u6784\u5efa\u533b\u7597\u95ee\u7b54\u7cfb\u7edf\uff0c\u5b9e\u73b0\u9ad8\u6548\u5730\u4f7f \u7528\u548c\u53d1\u6398\u77e5\u8bc6\u56fe\u8c31\u65b0\u7684\u4ef7\u503c\uff0c\u56e0\u6b64\uff0c\u57fa\u4e8e\u77e5\u8bc6\u56fe\u8c31\u7684\u95ee\u7b54\u7cfb\u7edf\u5df2\u7ecf\u6210\u4e3a\u533b\u7597\u9886\u57df\u7684\u91cd\u8981\u65b9\u5411\u3002","title":"\u95ee\u7b54\u7cfb\u7edf\u7c7b\u578b"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/01-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html#_6","text":"\u672c\u7ae0\u8282\u4ecb\u7ecd\u4e86\u95ee\u7b54\u7cfb\u7edf\u7684\u5b9a\u4e49\u3001\u5e94\u7528\u3001\u57fa\u672c\u6846\u67b6\uff08\u5305\u62ec\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u3001\u5bf9\u8bdd\u7ba1\u7406\u548c\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\uff0c\u4ee5\u53ca\u5176\u7c7b\u578b\uff08\u4efb\u52a1\u578b\u3001\u89e3\u7b54\u578b\u3001\u95f2\u804a\u578b\uff09\u548c\u89e3\u51b3\u65b9\u6848\uff08\u57fa\u4e8e\u68c0\u7d22\u3001\u77e5\u8bc6\u548c\u673a\u5668\u9605\u8bfb\u7406\u89e3\uff09\uff0c\u5e2e\u52a9\u5b66\u4e60\u8005\u7406\u89e3\u95ee\u7b54\u7cfb\u7edf\u7684\u6838\u5fc3\u6982\u5ff5\u4e0e\u8fd0\u4f5c\u65b9\u5f0f\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html","text":"\u81ea\u7136\u8bed\u8a00\u7406\u89e3NLU \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3\u4ec0\u4e48\u662f\u610f\u56fe\u8bc6\u522b \u7406\u89e3\u4ec0\u4e48\u662f\u69fd\u4f4d\u586b\u5145\u586b\u5145 \u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u95ee\u7b54\u7cfb\u7edf\u4e2d\u7684\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u90e8\u5206\uff0c\u95ee\u7b54\u673a\u5668\u4eba\u8981\u80fd\u51c6\u786e\u7684\u5229\u7528\u77e5\u8bc6\u5e93\u56de\u7b54\u7528\u6237\u7684\u95ee\u9898\uff0c\u524d\u63d0\u662f\u673a\u5668\u4eba\u80fd\u591f\u51c6\u786e\u7406\u89e3\u7528\u6237\u7684\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u80fd\u591f\u5bf9\u7528\u6237\u8f93\u5165\u7684\u6587\u672c\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u3002\u5b83\u4e3b\u8981\u5305\u62ec\uff1a\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u3002 1 \u4ec0\u4e48\u662f\u610f\u56fe\u8bc6\u522b \u00b6 \u610f\u56fe\u8bc6\u522b\u662f\u5224\u65ad\u7528\u6237\u610f\u56fe\u7684\u8fc7\u7a0b\uff0c\u4f8b\u5982\u5728\u804a\u5929\u673a\u5668\u4eba\u4e2d\uff0c\u7528\u6237\u63d0\u51fa\u95ee\u9898\u65f6\uff0c\u7cfb\u7edf\u9700\u8981\u786e\u5b9a\u7528\u6237\u662f\u5728\u8be2\u95ee\u5929\u6c14\u3001\u54a8\u8be2\u65c5\u6e38\u6216\u8fd8\u662f\u95ee\u67d0\u90e8\u7535\u5f71\u4fe1\u606f\u7b49\u3002 \u610f\u56fe\u8bc6\u522b\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u95ee\u9898\uff0c\u56e0\u6b64\u9700\u8981\u9884\u5148\u5b9a\u4e49\u610f\u56fe\u7c7b\u522b\u3002\u4e0e\u60c5\u611f\u5206\u7c7b\u4e0d\u540c\uff0c\u4e0d\u7ba1\u4ec0\u4e48\u573a\u666f\uff0c\u90fd\u80fd\u5212\u5206\u6210\u79ef\u6781\u3001\u6d88\u6781\u548c\u4e2d\u7acb\u60c5\u611f\u4e09\u5206\u7c7b\u3002\u800c\u610f\u56fe\u5206\u7c7b\u9700\u6839\u636e\u7279\u5b9a\u573a\u666f\u8fdb\u884c\u5b9a\u4e49\uff0c\u4e0d\u540c\u5e94\u7528\u6709\u4e0d\u540c\u7684\u610f\u56fe\u7c7b\u522b\u3002\u6bd4\u5982\u5728\u7f8e\u56e2APP\u4e0a\uff0c\u5b83\u628a\u7528\u6237\u7684\u641c\u7d22\u610f\u56fe\u5206\u4e3a\u8ba2\u5916\u5356\u3001\u8ba2\u9152\u5e97\u3001\u8ba2\u65c5\u6e38\u95e8\u7968\u3001\u8ba2\u7535\u5f71\u7968\u3001\u8ba2\u673a\u7968\u7b49\u7c7b\u522b\u3002 2 \u4ec0\u4e48\u662f\u69fd\u4f4d\u586b\u5145 \u00b6 \u8bc6\u522b\u7528\u6237\u610f\u56fe\u540e\u6709\u4ec0\u4e48\u7528\u5462\uff1f\u6bd4\u5982\u7528\u6237\u8f93\u5165\u201c\u8ba2\u4e00\u5f20\u4eca\u5929\u4e0b\u5348\u573a\u6b21\u7684\u6218\u72fc\u7535\u5f71\u7968\u201d\uff0c\u7cfb\u7edf\u8bc6\u522b\u51fa\u201c\u8ba2\u7535\u5f71\u7968\u201d\u7684\u610f\u56fe\uff0c\u4e8e\u662f\u7cfb\u7edf\u5f00\u59cb\u64cd\u4f5c\u8ba2\u7535\u5f71\u7968\u7684\u4e8b\u4e86\uff0c\u4f46\u662f\u7cfb\u7edf\u72af\u8ff7\u7cca\u4e86\uff0c\u662f\u7ed9\u7528\u6237\u8ba2\u6218\u72fc1\u8fd8\u662f\u6218\u72fc2\u5462\uff1f\u8ba2\u54ea\u4e2a\u7535\u5f71\u9662\u7684\u5462\uff1f\u7cfb\u7edf\u67e5\u4e86\u4e00\u4e0b\u6700\u8fd1\u4e0a\u6620\u7684\u7535\u5f71\uff0c\u53d1\u73b0\u5f53\u524d\u53ea\u6709\u6218\u72fc2\u5728\u91cd\u6620\uff1b\u7cfb\u7edf\u53c8\u67e5\u4e86\u4e00\u4e0b\u79bb\u7528\u6237\u5f53\u524d\u6240\u5728\u4f4d\u7f6e\u6700\u8fd1\u7684\u7535\u5f71\u9662\u662f\u4e00\u5bb6\u53ebXX\u5f71\u57ce\u7684\u7535\u5f71\u9662\uff1b\u7cfb\u7edf\u53c8\u8ba1\u7b97\u4e86\u4e00\u4e0b\u65f6\u95f4\uff0c\u73b0\u5728\u662f\u4e0b\u53481\u70b9\uff0cXX\u5f71\u57ce\u6218\u72fc2\u5728\u4e0b\u5348\u4e00\u70b9\u534a\u6709\u4e00\u4e2a\u573a\u6b21\uff0c\u800c\u7a0d\u8fdc\u4e00\u70b9\u7684YY\u5f71\u57ce\u5728\u4e0b\u5348\u4e24\u70b9\u534a\u6709\u4e00\u4e2a\u573a\u6b21\uff1b\u4e8e\u662f\u7cfb\u7edf\u548c\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u4e92\u52a8\uff1a \u201c\u60a8\u597d\uff0c\u6218\u72fc2\u5728XX\u5f71\u57ce\u4e8e\u4e0b\u5348\u4e00\u70b9\u534a\u4e0a\u6620\uff0cYY\u5f71\u57ce\u5c06\u5728\u4e0b\u5348\u4e24\u70b9\u534a\u4e0a\u6620\uff1b\u4f60\u9700\u8981\u53bb\u54ea\u4e2a\u7535\u5f71\u9662\u5462\uff1f\u201d \u201c\u53bbYY\u5f71\u57ce\u201d \u201c\u60a8\u597d\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u7535\u5f71\u7968\u5f20\u6570\u548c\u5ea7\u4f4d\u53f7\u5b8c\u6210\u9884\u5b9a\u201d \u4e3a\u4ec0\u4e48\u7cfb\u7edf\u4f1a\u50cf\u4eba\u4e00\u6837\u601d\u8003\u5e76\u4e14\u548c\u7528\u6237\u4e92\u52a8\uff1f\u5176\u5b9e\u7cfb\u7edf\u4f1a\u6709\u9488\u5bf9\u6027\u7684\u201c\u601d\u8003\u201d\u662f\u5168\u9760\u69fd\u4f4d\u586b\u5145\u6765\u5b9e\u73b0\u7684\uff0c\u5f53\u7cfb\u7edf\u8bc6\u522b\u51fa\u4f60\u7684\u201c\u8ba2\u7535\u5f71\u7968\u201d\u610f\u56fe\u4e4b\u540e\uff0c\u5b83\u638f\u51fa\u4e86\u8be5\u610f\u56fe\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\u6765\u505a\u201c\u586b\u7a7a\u201d\uff0c\u8bed\u4e49\u69fd\u683c\u5f0f\u5982\u4e0b\u6240\u793a\uff1a \"\u8ba2\u7535\u5f71\u7968\": { \"\u7535\u5f71\u540d\":__________, \"\u7535\u5f71\u9662\u540d\u79f0\":__________, \"\u65f6\u95f4\":__________, \"\u6570\u91cf\":__________, \"\u5ea7\u4f4d\u4f4d\u7f6e\":__________, } \u9700\u8981\u586b\u7684\u7a7a\u5305\u542b\u4e86\u7535\u5f71\u540d\u3001\u5f71\u9662\u540d\u79f0\u3001\u65f6\u95f4\u3001\u6570\u91cf\u3001\u5ea7\u4f4d\u4f4d\u7f6e\u7b49\u4fe1\u606f\uff0c\u7cfb\u7edf\u901a\u8fc7\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u548c\u69fd\u4f4d\u9884\u6d4b\u6765\u586b\u7a7a\u3002\u8fc7\u7a0b\u5982\u4e0b\uff1a \u9996\u5148\u5bf9\u7528\u6237\u7684\u8f93\u5165\"\u8ba2\u4e00\u5f20\u4eca\u5929\u4e0b\u5348\u573a\u6b21\u7684\u6218\u72fc\u7535\u5f71\u7968\"\u8bc6\u522b\u51fa\u7535\u5f71\u540d\u662f\u201c\u6218\u72fc\u201d\uff0c\u65f6\u95f4\u662f\u201c\u4eca\u5929\u4e0b\u5348\u201d\uff1b\u6ca1\u6709\u8bc6\u522b\u5230\u5f71\u9662\u540d\u79f0\uff0c\u7cfb\u7edf\u6839\u636e\u7528\u6237\u5f53\u524d\u7684\u4f4d\u7f6e\uff0c\u5c06\u5176\u9884\u6d4b\u4e3aXX\u5f71\u9662\u6216YY\u5f71\u9662\uff0c\u6570\u91cf\u548c\u5ea7\u4f4d\u4f4d\u7f6e\u65e0\u6cd5\u9884\u6d4b\u3002\u9488\u5bf9\u65e0\u6cd5\u9884\u6d4b\u7684\u69fd\u4f4d\uff0c\u7cfb\u7edf\u5411\u7528\u6237\u53d1\u95ee\u6216\u8005\u63d0\u4f9b\u9009\u62e9\u6765\u786e\u8ba4 \u60a8\u53ef\u4ee5\u9009\u62e9\u7535\u5f71\u7968\u5f20\u6570\u548c\u5ea7\u4f4d\u53f7\u5b8c\u6210\u9884\u5b9a \uff1b\u5bf9\u4e8e\u9884\u6d4b\u5230\u69fd\u4f4d\u503c\u4e0d\u552f\u4e00\u7684\u60c5\u51b5\uff0c\u6bd4\u5982XX\u5f71\u9662\u6216YY\u5f71\u9662\uff0c\u7cfb\u7edf\u8ba9\u7528\u6237\u81ea\u5df1\u8fdb\u884c\u4e8c\u9009\u4e00\uff1b\u5bf9\u4e8e\u8bc6\u522b\u5230\u7684\u69fd\u4f4d\u5b58\u5728\u6b67\u4e49\u7684\u95ee\u9898\uff0c\u7cfb\u7edf\u4f1a\u8fdb\u884c\u201c\u6f84\u6e05\u201d\uff0c\u6bd4\u5982\u6218\u72fc\u5b9e\u4f53\u4e0d\u662f\u5f88\u660e\u786e\uff0c\u9700\u8981\u6f84\u6e05\u662f\u6218\u72fc1\u8fd8\u662f\u6218\u72fc2\uff0c\u7cfb\u7edf\u6839\u636e\u73b0\u5728\u6b63\u4e0a\u6620\u7684\u662f\u6218\u72fc2\u8fd9\u4e00\u60c5\u51b5\u6765\u8fdb\u884c\u81ea\u52a8\u6f84\u6e05\uff0c\u4f46\u5982\u679c\u6b64\u65f6\u4e24\u90e8\u7535\u5f71\u90fd\u5728\u4e0a\u6620\u7684\u8bdd\uff0c\u7cfb\u7edf\u5c31\u5f97\u5411\u7528\u6237\u53d1\u95ee\u6f84\u6e05\u4e86\uff0c\u6bd4\u5982\u95ee \u60a8\u662f\u60f3\u8981\u770b\u6218\u72fc1\u8fd8\u662f\u6218\u72fc2\uff1f \u3002 \u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u7684\u601d\u8003\u8fc7\u7a0b\u5b8c\u5168\u662f\u6309\u7167\u8bed\u4e49\u69fd\u6765\u8fdb\u884c\u7684\uff0c\u6709\u4ec0\u4e48\u69fd\u4f4d\u5b83\u5c31\u601d\u8003\u4ec0\u4e48\u3002\u5f53\u8bed\u4e49\u69fd\u5b8c\u5168\u586b\u5145\u4e14\u6d88\u9664\u4e86\u6b67\u4e49\u4e4b\u540e\uff0c\u4e5f\u5c31\u5b8c\u6210\u4e86\u6574\u4e2a\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u4efb\u52a1\uff0c\u5f00\u59cb\u5229\u7528\u77e5\u8bc6\u5e93\u56de\u7b54\u7528\u6237\u95ee\u9898\u6216\u8005\u5b8c\u6210\u67d0\u79cd\u64cd\u4f5c\u3002\u4f46\u662f\u8bed\u4e49\u69fd\u5230\u5e95\u662f\u600e\u4e48\u6765\u7684\u5462\uff1f\u5b83\u662f\u5982\u4f55\u548c\u7528\u6237\u8fdb\u884c\u201c\u53d1\u95ee\u201d\u4ea4\u4e92\u7684\u5462\uff1f 2.1 \u8bed\u4e49\u69fd\u7684\u8bbe\u8ba1 \u00b6 \u4e0a\u6587\u4e2d\u63d0\u5230\u610f\u56fe\u8bc6\u522b\u7684\u7c7b\u522b\u662f\u9884\u5b9a\u4e49\u597d\u7684\uff0c\u5176\u5b9e\u6211\u4eec\u4e5f\u4f1a\u9884\u5b9a\u4e49\u597d\u610f\u56fe\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\uff0c\u4e5f\u5c31\u662f\u4f60\u7684\u5e94\u7528\u573a\u666f\u6709\u591a\u5c11\u4e2a\u610f\u56fe\uff0c\u90a3\u4e48\u4f60\u5c31\u9700\u8981\u4e8b\u5148\u5b9a\u4e49\u597d\u591a\u5c11\u4e2a\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\u3002\u5728\u4e0a\u6587\u7684\u4f8b\u5b50\u4e2d\u6211\u628a\u201c\u8ba2\u7535\u5f71\u7968\u201d\u610f\u56fe\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\u5b9a\u4e49\u7684\u5f62\u5f0f\uff0c\u4f3c\u4e4e\u6709\u70b9\u7b80\u5355\uff0c\u5e76\u6ca1\u6709\u4f53\u73b0\u51fa\u7cfb\u7edf\u662f\u4f9d\u9760\u4ec0\u4e48\u6280\u80fd\u6765\u548c\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u7684\uff0c\u5176\u5b9e\u53ea\u8981\u5728\u8bed\u4e49\u69fd\u7684\u6bcf\u4e2a\u69fd\u4f4d\u52a0\u4e0a\u76f8\u5bf9\u5e94\u7684\u201c\u8bdd\u672f\u201d\u5c31\u884c\u4e86\uff0c\u7cfb\u7edf\u53d1\u73b0\u54ea\u4e2a\u69fd\u4f4d\u6ca1\u586b\u5145\u6216\u8005\u6709\u6b67\u4e49\u5c31\u4f7f\u7528\u8be5\u69fd\u4f4d\u4e8b\u5148\u9884\u5b9a\u4e49\u597d\u7684\u8bdd\u672f\u53bb\u201c\u53d1\u95ee\u201d\u5c31\u597d\u4e86\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u8ff0\u201c\u8ba2\u7535\u5f71\u7968\u201d\u7684\u8bed\u4e49\u69fd\u6539\u4e3a\u5982\u4e0b\u6240\u793a\uff1a \"\u8ba2\u7535\u5f71\u7968\": { \"\u7535\u5f71\u540d\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u9700\u8981\u770b\u90a3\u90e8\u7535\u5f71\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u770bXX\u8fd8\u662fYYY\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_movie_name/\" } \"\u7535\u5f71\u9662\u540d\u79f0\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u8981\u53bb\u7684\u7535\u5f71\u9662\u662f\u54ea\u4e2a\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u770bXX\u5f71\u9662\u8fd8\u662fYY\u5f71\u9662\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_cinema/\" } \"\u65f6\u95f4\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u8981\u4ec0\u4e48\u65f6\u5019\u53bb\u770b\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3X\u70b9\u53bb\u8fd8\u662fY\u70b9\u53bb\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_time/\" } \"\u6570\u91cf\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u9700\u8981\u9884\u8ba2\u51e0\u5f20\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u8ba2X\u5f20\u8fd8\u662fY\u5f20\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_number/\" } \"\u5ea7\u4f4d\u4f4d\u7f6e\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u60a8\u9009\u62e9\u5ea7\u4f4d\u53f7\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u8ba2X\u53f7\u8fd8\u662fY\u53f7\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_seat/\" } } \u4e0a\u8ff0\u8bed\u4e49\u69fd\u7684\u8bbe\u8ba1\u5e76\u4e0d\u662f\u6700\u597d\u6216\u8005\u6700\u5408\u9002\u7684\uff0c\u6b64\u5904\u53ea\u662f\u968f\u4fbf\u8bbe\u8ba1\u4e3e\u4e2a\u4f8b\u5b50\u800c\u5df2\uff0c\u5b9e\u9645\u4e1a\u52a1\u4e2d\u7684\u8bed\u4e49\u69fd\u66f4\u4e3a\u590d\u6742\uff1b\u901a\u8fc7\u4e0a\u8ff0\u4f8b\u5b50\u4f60\u5df2\u7ecf\u5b8c\u5168\u660e\u767d\u4e86\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u4ee5\u53ca\u7406\u89e3\u4e86\u4e3a\u4ec0\u4e48\u8981\u505a\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u3002\u90a3\u4e48\u5982\u4f55\u53bb\u505a\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u5462\uff1f 3 \u610f\u56fe\u8bc6\u522b\u7684\u65b9\u6cd5 \u00b6 3.1 \u89c4\u5219\u6a21\u677f \u00b6 \u901a\u8fc7\u4eba\u5de5\u5206\u6790\u6bcf\u4e2a\u610f\u56fe\u4e0b\u7684\u6709\u4ee3\u8868\u6027\u7684\u4f8b\u53e5\u603b\u7ed3\u51fa\u89c4\u5219\u6a21\u677f\uff0c\u7136\u540e\u5c06\u7528\u6237\u7684\u8f93\u5165\u8bed\u53e5\u8fdb\u884c\u5206\u8bcd\u3001\u8bcd\u6027\u6807\u6ce8\u3001\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u3001\u4f9d\u5b58\u53e5\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u7b49\u64cd\u4f5c\u540e\u5957\u7528\u5df2\u6709\u7684\u6a21\u677f\uff0c\u5f53\u4e0e\u4e4b\u5339\u5bf9\u7684\u67d0\u4e2a\u610f\u56fe\u6a21\u677f\u8fbe\u5230\u4e00\u5b9a\u7684\u9608\u503c\u4e4b\u540e\u5c31\u8ba4\u4e3a\u8be5\u8f93\u5165\u5c31\u5c5e\u4e8e\u8be5\u610f\u56fe\u7c7b\u522b\u3002\u4ee5\u8ba2\u673a\u7968\u610f\u56fe\u4e3a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u4e8b\u5148\u6536\u96c6\u4e00\u4e9b\u7528\u6237\u7684\u76f8\u5173query\uff0c\u7136\u540e\u518d\u8fdb\u884c\u603b\u7ed3\u5f52\u7eb3\u5236\u5b9a\u6a21\u677f\u3002 \u4ece\u5e7f\u5dde\u5230\u8d35\u9633\u5e02\u7684\u822a\u73ed \u4e1c\u8425\u5230\u6d4e\u5357\u7684\u822a\u73ed \u6d4e\u5357\u53bb\u5927\u8fde\u7684\u822a\u73ed \u67e5\u8be2\u5927\u5927\u540e\u5929\u5e7f\u5dde\u5230\u6b66\u6c49\u7684\u822a\u73ed \u5341\u6708\u56db\u53f7\u4ece\u5e7f\u5dde\u5230\u5317\u4eac\u7684\u98de\u673a\u7968\u591a\u5c11\u94b1 \u67e5\u8be2\u4e0a\u6d77\u5230\u4e3d\u6c5f\u98de\u673a\u7968\u7684\u4ef7\u683c \u660e\u5929\u4ece\u6842\u6797\u98de\u5f80\u676d\u5dde\u7684\u822a\u73ed \u6b66\u6c49\u5230\u5317\u4eac\u7684\u98de\u673a\u7968 \u6839\u636e\u4ee5\u4e0a\u7684\u793a\u4f8b\uff0c\u53ef\u4ee5\u603b\u7ed3\u5f52\u7eb3\u51fa\u4ee5\u4e0b\u6a21\u677f\uff1a .*?[\u5730\u540d]{\u5230|\u53bb|\u98de|\u98de\u5f80}[\u5730\u540d].*?{\u673a\u7968|\u98de\u673a\u7968|\u822a\u73ed}.*? ? \u8868\u793a\u4efb\u610f\u5b57\u7b26\uff0c[]\u8868\u793a\u5b9e\u4f53\u7c7b\u578b\u6216\u8bcd\u6027\uff0c{}\u8868\u793a\u5173\u952e\u8bcd\uff0c|\u8868\u793a\u6216\u3002 \u5f53\u7528\u6237\u8f93\u5165\u201c\u67e5\u8be2\u540e\u5929\u5e7f\u5dde\u5230\u4e0a\u6d77\u7684\u822a\u73ed\u201d\uff0c\u6211\u4eec\u5bf9query\u8fdb\u884c\u5206\u8bcd\u548c\u8bcd\u6027\u6807\u6ce8\uff0c\u5339\u914d\u5230\u5730\u540d\u201c\u5e7f\u5dde\u201d\u3001\u201c\u4e0a\u6d77\u201d\uff0c\u5173\u952e\u8bcd\u201c\u5230\u201d\u3001\u201c\u822a\u73ed\u201d\uff0c\u4ed6\u4eec\u7684\u7ec4\u5408\u548c\u9884\u5b9a\u4e49\u597d\u7684\u6a21\u677f\u9ad8\u5ea6\u5339\u914d\uff0c\u4e8e\u662f\u6211\u4eec\u786e\u8ba4\u8be5query\u662f\u201c\u8ba2\u673a\u7968\u201d\u610f\u56fe\uff1b\u53e6\u5916\u5bf9\u4e8e\u201c\u6709\u6ca1\u6709\u4e0b\u5468\u4e8c\u5230\u8d35\u9633\u7684\u822a\u73ed\u201d\u53ea\u80fd\u5339\u914d\u5230\u4e00\u4e2a\u5730\u540d\u548c\u5173\u952e\u8bcd\u201c\u822a\u73ed\u201d\uff0c\u4e5f\u7b97\u662f\u548c\u6a21\u677f\u6bd4\u8f83\u5339\u914d\u4e86\uff0c\u800c\u4e14\u5982\u679c\u8fd9\u4e2a\u5339\u914d\u5ea6\u548c\u5176\u4e0e\u5176\u4ed6\u610f\u56fe\u7684\u6a21\u677f\u7684\u5339\u914d\u5ea6\u76f8\u6bd4\u66f4\u9ad8\u7684\u8bdd\uff0c\u90a3\u4e5f\u53ef\u4ee5\u5927\u80c6\u7684\u8ba4\u4e3a\u8be5query\u662f\u201c\u8ba2\u673a\u7968\u201d\u610f\u56fe\u3002 \u4f7f\u7528\u89c4\u5219\u6a21\u677f\u505a\u610f\u56fe\u8bc6\u522b\u7cbe\u786e\u7387\u8f83\u9ad8\uff0c\u4f46\u662f\u53ec\u56de\u7387\u8f83\u4f4e\uff0c\u7279\u522b\u662f\u5bf9\u957f\u5c3equery\uff1b\u53e6\u5916\u8be5\u65b9\u6cd5\u9700\u8981\u5927\u91cf\u4eba\u5de5\u53c2\u4e0e\u5236\u5b9a\u89c4\u5219\u6a21\u677f\uff0c\u4e0d\u6613\u81ea\u52a8\u5316\uff0c\u66f4\u96be\u4ee5\u5c06\u5176\u79fb\u690d\u3002 3.2 \u7edf\u8ba1\u673a\u5668\u5b66\u4e60 \u00b6 \u4f7f\u7528\u7edf\u8ba1\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u505a\u6587\u672c\u5206\u7c7b\uff0c\u9700\u8981\u4eba\u5de5\u63d0\u53d6\u6587\u672c\u7279\u5f81\uff0c\u6bd4\u5982ngram\u3001\u8bcd\u6027\u7279\u5f81\u3001\u5b9e\u4f53\u7c7b\u578b\u7279\u5f81\uff1b\u63d0\u5b8c\u7279\u5f81\u540e\u8fdb\u884ctf-idf\u5411\u91cf\u5316\u8868\u793a\uff0c\u7136\u540e\u4f7f\u7528\u652f\u6301\u5411\u91cf\u673a\u3001\u903b\u8f91\u56de\u5f52\u3001\u968f\u673a\u68ee\u6797\u7b49\u7b97\u6cd5\u8fdb\u884c\u8bad\u7ec3\u3002\u8be5\u65b9\u6cd5\u663e\u7136\u4e5f\u9700\u8981\u5927\u91cf\u4eba\u5de5\u64cd\u4f5c\u8bbe\u8ba1\u9886\u57df\u76f8\u5173\u7684\u7279\u5f81\uff0c\u4e14\u7528\u7edf\u8ba1\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u505a\u6587\u672c\u5206\u7c7b\u6548\u679c\u662f\u4e0d\u600e\u4e48\u7406\u60f3\u7684\u3002 3.3 \u6df1\u5ea6\u5b66\u4e60 \u00b6 \u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u6765\u5efa\u6a21\u505a\u6587\u672c\u5206\u7c7b\uff0c\u5b83\u7701\u7565\u4e86\u4eba\u5de5\u8bbe\u8ba1\u7279\u5f81\u3001\u63d0\u53d6\u7279\u5f81\u7684\u8fc7\u7a0b\uff0c\u8fd8\u80fd\u501f\u52a9\u9884\u8bad\u7ec3\u597d\u7684\u5177\u6709\u8bed\u4e49\u77e5\u8bc6\u7684\u8bcd\u5411\u91cf\u8fdb\u884c\u8bad\u7ec3\uff1b\u4f46\u662f\u8be5\u65b9\u6cd5\u9700\u8981\u5f88\u591a\u8bad\u7ec3\u6570\u636e\uff0c\u8fd9\u5c31\u9700\u8981\u4f9d\u8d56\u5f88\u591a\u4eba\u5de5\u6807\u6ce8\u6570\u636e\u4e86\uff0c\u76f8\u6bd4\u4e4b\u4e0b\u89c4\u5219\u6a21\u677f\u65b9\u6cd5\u5219\u4e0d\u9700\u8981\u6807\u6ce8\u6570\u636e\u3002 \u610f\u56fe\u8bc6\u522b\u7684\u96be\u70b9 \u8f93\u5165\u4e0d\u89c4\u8303\uff1a\u9519\u522b\u5b57\u3001\u5806\u780c\u5173\u952e\u8bcd\u3001\u975e\u6807\u51c6\u81ea\u7136\u8bed\u8a00 \u591a\u610f\u56fe\uff1a\u8f93\u5165\u7684\u8bed\u53e5\u4fe1\u606f\u91cf\u592a\u5c11\u9020\u6210\u610f\u56fe\u4e0d\u660e\u786e\uff0c\u4e14\u6709\u6b67\u4e49\u3002\u6bd4\u5982\u8f93\u5165\u4ed9\u5251\u5947\u4fa0\u4f20\uff0c\u90a3\u4e48\u662f\u60f3\u83b7\u5f97\u6e38\u620f\u4e0b\u8f7d\u3001\u7535\u89c6\u5267\u3001\u7535\u5f71\u3001\u97f3\u4e50\u8fd8\u662f\u5c0f\u8bf4\u4e0b\u8f7d \u610f\u56fe\u5f3a\u5ea6\uff1a\u8f93\u5165\u7684\u8bed\u53e5\u597d\u50cf\u5373\u5c5e\u4e8eA\u610f\u56fe\uff0c\u53c8\u5c5e\u4e8eB\u610f\u56fe\uff0c\u6bcf\u4e2a\u610f\u56fe\u7684\u7684\u5f97\u5206\u90fd\u4e0d\u9ad8 \u65f6\u6548\u6027\uff1a\u7528\u6237\u7684\u610f\u56fe\u662f\u6709\u8f83\u5f3a\u65f6\u6548\u6027\u7684\uff0c\u7528\u6237\u5728\u4e0d\u540c\u65f6\u95f4\u8282\u70b9\u7684\u76f8\u540c\u7684query\u53ef\u80fd\u662f\u5c5e\u4e8e\u4e0d\u540c\u610f\u56fe\u7684\uff0c\u6bd4\u5982query\u4e3a\u201c\u6218\u72fc\u201d\uff0c\u5728\u5f53\u524d\u65f6\u95f4\u8282\u70b9\u53ef\u80fd\u662f\u60f3\u5728\u7ebf\u89c2\u770b\u6218\u72fc1\u6216\u8005\u6218\u72fc2\uff0c\u800c\u5982\u679c\u662f\u5728\u6218\u72fc3\u5f00\u62cd\u7684\u65f6\u95f4\u8282\u70b9\u641c\u7684\u8bdd\uff0c\u53ef\u80fd\u5f88\u5927\u6982\u7387\u662f\u60f3\u4e86\u89e3\u6218\u72fc3\u7684\u4e00\u4e9b\u76f8\u5173\u65b0\u95fb\u4e86 4 \u69fd\u4f4d\u586b\u5145\u7684\u65b9\u6cd5 \u00b6 \u69fd\u4f4d\u586b\u5145\u5305\u62ec\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u548c\u69fd\u4f4d\u9884\u6d4b\uff0c\u5176\u5b9e\u8bf4\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u662f\u4e0d\u4e25\u8c28\u7684\uff0c\u6bd4\u5982\u5728\u201c\u8ba2\u673a\u7968\u201d\u610f\u56fe\u4e0b\u7684\u8bed\u4e49\u69fd\u4e2d\uff0c\u5e94\u8be5\u6709\u201c\u51fa\u53d1\u5730\u201d\u548c\u201c\u76ee\u7684\u5730\u201d\uff0c\u867d\u7136\u4ed6\u4eec\u90fd\u662f\u5730\u540d\uff0c\u4f46\u662f\u6709\u533a\u522b\uff0c\u4ed6\u4eec\u7684\u987a\u5e8f\u4e0d\u80fd\u53d8\uff0c\u4e5f\u5c31\u662f\u4e0d\u80fd\u7528\u201c\u5730\u540d\u201d\u6765\u7edf\u4e00\u4ee3\u66ff\uff0c\u800c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u505a\u6cd5\u5c31\u662f\u5c06\u4ed6\u4eec\u90fd\u5f53\u505a\u201c\u5730\u540d\u201d\u4e86\u3002\u6211\u4eec\u53ea\u80fd\u79f0\u69fd\u4f4d\u586b\u5145\u662f\u4e00\u4e2a\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\uff0c\u4f46\u7edd\u4e0d\u80fd\u8bf4\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u5c31\u662f\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0c\u4e14\u6211\u4eec\u5728\u6807\u6ce8\u6570\u636e\u7684\u65f6\u5019\u4e5f\u4e0d\u80fd\u4e00\u6837\u6807\u6ce8\u3002\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4e0e\u69fd\u4f4d\u586b\u5145\u6807\u6ce8\u7684\u533a\u522b\u5982\u4e0b\uff1a \u53ef\u4ee5\u770b\u5230\u69fd\u4f4d\u586b\u5145\u6807\u6ce8\u4e2d\uff0c\u9488\u5bf9\u8ba2\u673a\u7968\u610f\u56fe\u7684\u57ce\u5e02\u5b9e\u4f53\u7684\u6807\u6ce8\uff0c\u6211\u4eec\u4f7f\u7528dept\u548carr\u6765\u533a\u5206\u51fa\u53d1\u5730\u548c\u76ee\u7684\u5730\u5b9e\u4f53\uff0c\u6240\u4ee5\u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u4e0a\u56fe\u4e2d\u7b2c\u4e8c\u79cd\u6807\u6ce8\u65b9\u5f0f\u6765\u6807\u6ce8\u6570\u636e\uff0c\u7136\u540e\u8bad\u7ec3\u5e8f\u5217\u6807\u6ce8\u6a21\u578b\uff0c\u6700\u540e\u7528\u8be5\u6a21\u578b\u53bb\u505a\u69fd\u4f4d\u503c\u8bc6\u522b\u3002 \u69fd\u4f4d\u9884\u6d4b\u662f\u6307\u5f53\u5728\u7528\u6237\u7684query\u4e2d\u8bc6\u522b\u4e0d\u5230\u67d0\u4e9b\u69fd\u4f4d\u503c\u65f6\uff0c\u7cfb\u7edf\u9996\u5148\u9700\u8981\u53bb\u505a\u4e00\u4e2a\u8f83\u4e3a\u9760\u8c31\u7684\u9884\u6d4b\uff0c\u800c\u4e0d\u662f\u51e1\u4e8b\u90fd\u53bb\u8ddf\u7528\u6237\u4e92\u52a8\u6765\u83b7\u53d6\u8fd9\u4e9b\u69fd\u4f4d\u503c\u3002 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u4e2d\u7684\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u4e24\u5927\u6838\u5fc3\u6280\u672f\u6a21\u5757\uff0c\u8be6\u7ec6\u8bb2\u89e3\u4e86\u4e0d\u540c\u6a21\u5757\u7684\u5b9a\u4e49\u4ee5\u53ca\u5b9e\u73b0\u65b9\u6cd5\uff0c\u65b9\u4fbf\u540e\u7eed\u8fdb\u884c\u77e5\u8bc6\u56fe\u8c31\u95ee\u7b54\u7cfb\u7edf\u7684\u642d\u5efa\u3002","title":"7.2 \u95ee\u7b54\u7cfb\u7edf\u5173\u952e\u6280\u672f"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#nlu","text":"","title":"\u81ea\u7136\u8bed\u8a00\u7406\u89e3NLU"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#_1","text":"\u7406\u89e3\u4ec0\u4e48\u662f\u610f\u56fe\u8bc6\u522b \u7406\u89e3\u4ec0\u4e48\u662f\u69fd\u4f4d\u586b\u5145\u586b\u5145 \u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u95ee\u7b54\u7cfb\u7edf\u4e2d\u7684\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u90e8\u5206\uff0c\u95ee\u7b54\u673a\u5668\u4eba\u8981\u80fd\u51c6\u786e\u7684\u5229\u7528\u77e5\u8bc6\u5e93\u56de\u7b54\u7528\u6237\u7684\u95ee\u9898\uff0c\u524d\u63d0\u662f\u673a\u5668\u4eba\u80fd\u591f\u51c6\u786e\u7406\u89e3\u7528\u6237\u7684\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u80fd\u591f\u5bf9\u7528\u6237\u8f93\u5165\u7684\u6587\u672c\u8fdb\u884c\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u3002\u5b83\u4e3b\u8981\u5305\u62ec\uff1a\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u3002","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#1","text":"\u610f\u56fe\u8bc6\u522b\u662f\u5224\u65ad\u7528\u6237\u610f\u56fe\u7684\u8fc7\u7a0b\uff0c\u4f8b\u5982\u5728\u804a\u5929\u673a\u5668\u4eba\u4e2d\uff0c\u7528\u6237\u63d0\u51fa\u95ee\u9898\u65f6\uff0c\u7cfb\u7edf\u9700\u8981\u786e\u5b9a\u7528\u6237\u662f\u5728\u8be2\u95ee\u5929\u6c14\u3001\u54a8\u8be2\u65c5\u6e38\u6216\u8fd8\u662f\u95ee\u67d0\u90e8\u7535\u5f71\u4fe1\u606f\u7b49\u3002 \u610f\u56fe\u8bc6\u522b\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u95ee\u9898\uff0c\u56e0\u6b64\u9700\u8981\u9884\u5148\u5b9a\u4e49\u610f\u56fe\u7c7b\u522b\u3002\u4e0e\u60c5\u611f\u5206\u7c7b\u4e0d\u540c\uff0c\u4e0d\u7ba1\u4ec0\u4e48\u573a\u666f\uff0c\u90fd\u80fd\u5212\u5206\u6210\u79ef\u6781\u3001\u6d88\u6781\u548c\u4e2d\u7acb\u60c5\u611f\u4e09\u5206\u7c7b\u3002\u800c\u610f\u56fe\u5206\u7c7b\u9700\u6839\u636e\u7279\u5b9a\u573a\u666f\u8fdb\u884c\u5b9a\u4e49\uff0c\u4e0d\u540c\u5e94\u7528\u6709\u4e0d\u540c\u7684\u610f\u56fe\u7c7b\u522b\u3002\u6bd4\u5982\u5728\u7f8e\u56e2APP\u4e0a\uff0c\u5b83\u628a\u7528\u6237\u7684\u641c\u7d22\u610f\u56fe\u5206\u4e3a\u8ba2\u5916\u5356\u3001\u8ba2\u9152\u5e97\u3001\u8ba2\u65c5\u6e38\u95e8\u7968\u3001\u8ba2\u7535\u5f71\u7968\u3001\u8ba2\u673a\u7968\u7b49\u7c7b\u522b\u3002","title":"1 \u4ec0\u4e48\u662f\u610f\u56fe\u8bc6\u522b"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#2","text":"\u8bc6\u522b\u7528\u6237\u610f\u56fe\u540e\u6709\u4ec0\u4e48\u7528\u5462\uff1f\u6bd4\u5982\u7528\u6237\u8f93\u5165\u201c\u8ba2\u4e00\u5f20\u4eca\u5929\u4e0b\u5348\u573a\u6b21\u7684\u6218\u72fc\u7535\u5f71\u7968\u201d\uff0c\u7cfb\u7edf\u8bc6\u522b\u51fa\u201c\u8ba2\u7535\u5f71\u7968\u201d\u7684\u610f\u56fe\uff0c\u4e8e\u662f\u7cfb\u7edf\u5f00\u59cb\u64cd\u4f5c\u8ba2\u7535\u5f71\u7968\u7684\u4e8b\u4e86\uff0c\u4f46\u662f\u7cfb\u7edf\u72af\u8ff7\u7cca\u4e86\uff0c\u662f\u7ed9\u7528\u6237\u8ba2\u6218\u72fc1\u8fd8\u662f\u6218\u72fc2\u5462\uff1f\u8ba2\u54ea\u4e2a\u7535\u5f71\u9662\u7684\u5462\uff1f\u7cfb\u7edf\u67e5\u4e86\u4e00\u4e0b\u6700\u8fd1\u4e0a\u6620\u7684\u7535\u5f71\uff0c\u53d1\u73b0\u5f53\u524d\u53ea\u6709\u6218\u72fc2\u5728\u91cd\u6620\uff1b\u7cfb\u7edf\u53c8\u67e5\u4e86\u4e00\u4e0b\u79bb\u7528\u6237\u5f53\u524d\u6240\u5728\u4f4d\u7f6e\u6700\u8fd1\u7684\u7535\u5f71\u9662\u662f\u4e00\u5bb6\u53ebXX\u5f71\u57ce\u7684\u7535\u5f71\u9662\uff1b\u7cfb\u7edf\u53c8\u8ba1\u7b97\u4e86\u4e00\u4e0b\u65f6\u95f4\uff0c\u73b0\u5728\u662f\u4e0b\u53481\u70b9\uff0cXX\u5f71\u57ce\u6218\u72fc2\u5728\u4e0b\u5348\u4e00\u70b9\u534a\u6709\u4e00\u4e2a\u573a\u6b21\uff0c\u800c\u7a0d\u8fdc\u4e00\u70b9\u7684YY\u5f71\u57ce\u5728\u4e0b\u5348\u4e24\u70b9\u534a\u6709\u4e00\u4e2a\u573a\u6b21\uff1b\u4e8e\u662f\u7cfb\u7edf\u548c\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u4e92\u52a8\uff1a \u201c\u60a8\u597d\uff0c\u6218\u72fc2\u5728XX\u5f71\u57ce\u4e8e\u4e0b\u5348\u4e00\u70b9\u534a\u4e0a\u6620\uff0cYY\u5f71\u57ce\u5c06\u5728\u4e0b\u5348\u4e24\u70b9\u534a\u4e0a\u6620\uff1b\u4f60\u9700\u8981\u53bb\u54ea\u4e2a\u7535\u5f71\u9662\u5462\uff1f\u201d \u201c\u53bbYY\u5f71\u57ce\u201d \u201c\u60a8\u597d\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9\u7535\u5f71\u7968\u5f20\u6570\u548c\u5ea7\u4f4d\u53f7\u5b8c\u6210\u9884\u5b9a\u201d \u4e3a\u4ec0\u4e48\u7cfb\u7edf\u4f1a\u50cf\u4eba\u4e00\u6837\u601d\u8003\u5e76\u4e14\u548c\u7528\u6237\u4e92\u52a8\uff1f\u5176\u5b9e\u7cfb\u7edf\u4f1a\u6709\u9488\u5bf9\u6027\u7684\u201c\u601d\u8003\u201d\u662f\u5168\u9760\u69fd\u4f4d\u586b\u5145\u6765\u5b9e\u73b0\u7684\uff0c\u5f53\u7cfb\u7edf\u8bc6\u522b\u51fa\u4f60\u7684\u201c\u8ba2\u7535\u5f71\u7968\u201d\u610f\u56fe\u4e4b\u540e\uff0c\u5b83\u638f\u51fa\u4e86\u8be5\u610f\u56fe\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\u6765\u505a\u201c\u586b\u7a7a\u201d\uff0c\u8bed\u4e49\u69fd\u683c\u5f0f\u5982\u4e0b\u6240\u793a\uff1a \"\u8ba2\u7535\u5f71\u7968\": { \"\u7535\u5f71\u540d\":__________, \"\u7535\u5f71\u9662\u540d\u79f0\":__________, \"\u65f6\u95f4\":__________, \"\u6570\u91cf\":__________, \"\u5ea7\u4f4d\u4f4d\u7f6e\":__________, } \u9700\u8981\u586b\u7684\u7a7a\u5305\u542b\u4e86\u7535\u5f71\u540d\u3001\u5f71\u9662\u540d\u79f0\u3001\u65f6\u95f4\u3001\u6570\u91cf\u3001\u5ea7\u4f4d\u4f4d\u7f6e\u7b49\u4fe1\u606f\uff0c\u7cfb\u7edf\u901a\u8fc7\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u548c\u69fd\u4f4d\u9884\u6d4b\u6765\u586b\u7a7a\u3002\u8fc7\u7a0b\u5982\u4e0b\uff1a \u9996\u5148\u5bf9\u7528\u6237\u7684\u8f93\u5165\"\u8ba2\u4e00\u5f20\u4eca\u5929\u4e0b\u5348\u573a\u6b21\u7684\u6218\u72fc\u7535\u5f71\u7968\"\u8bc6\u522b\u51fa\u7535\u5f71\u540d\u662f\u201c\u6218\u72fc\u201d\uff0c\u65f6\u95f4\u662f\u201c\u4eca\u5929\u4e0b\u5348\u201d\uff1b\u6ca1\u6709\u8bc6\u522b\u5230\u5f71\u9662\u540d\u79f0\uff0c\u7cfb\u7edf\u6839\u636e\u7528\u6237\u5f53\u524d\u7684\u4f4d\u7f6e\uff0c\u5c06\u5176\u9884\u6d4b\u4e3aXX\u5f71\u9662\u6216YY\u5f71\u9662\uff0c\u6570\u91cf\u548c\u5ea7\u4f4d\u4f4d\u7f6e\u65e0\u6cd5\u9884\u6d4b\u3002\u9488\u5bf9\u65e0\u6cd5\u9884\u6d4b\u7684\u69fd\u4f4d\uff0c\u7cfb\u7edf\u5411\u7528\u6237\u53d1\u95ee\u6216\u8005\u63d0\u4f9b\u9009\u62e9\u6765\u786e\u8ba4 \u60a8\u53ef\u4ee5\u9009\u62e9\u7535\u5f71\u7968\u5f20\u6570\u548c\u5ea7\u4f4d\u53f7\u5b8c\u6210\u9884\u5b9a \uff1b\u5bf9\u4e8e\u9884\u6d4b\u5230\u69fd\u4f4d\u503c\u4e0d\u552f\u4e00\u7684\u60c5\u51b5\uff0c\u6bd4\u5982XX\u5f71\u9662\u6216YY\u5f71\u9662\uff0c\u7cfb\u7edf\u8ba9\u7528\u6237\u81ea\u5df1\u8fdb\u884c\u4e8c\u9009\u4e00\uff1b\u5bf9\u4e8e\u8bc6\u522b\u5230\u7684\u69fd\u4f4d\u5b58\u5728\u6b67\u4e49\u7684\u95ee\u9898\uff0c\u7cfb\u7edf\u4f1a\u8fdb\u884c\u201c\u6f84\u6e05\u201d\uff0c\u6bd4\u5982\u6218\u72fc\u5b9e\u4f53\u4e0d\u662f\u5f88\u660e\u786e\uff0c\u9700\u8981\u6f84\u6e05\u662f\u6218\u72fc1\u8fd8\u662f\u6218\u72fc2\uff0c\u7cfb\u7edf\u6839\u636e\u73b0\u5728\u6b63\u4e0a\u6620\u7684\u662f\u6218\u72fc2\u8fd9\u4e00\u60c5\u51b5\u6765\u8fdb\u884c\u81ea\u52a8\u6f84\u6e05\uff0c\u4f46\u5982\u679c\u6b64\u65f6\u4e24\u90e8\u7535\u5f71\u90fd\u5728\u4e0a\u6620\u7684\u8bdd\uff0c\u7cfb\u7edf\u5c31\u5f97\u5411\u7528\u6237\u53d1\u95ee\u6f84\u6e05\u4e86\uff0c\u6bd4\u5982\u95ee \u60a8\u662f\u60f3\u8981\u770b\u6218\u72fc1\u8fd8\u662f\u6218\u72fc2\uff1f \u3002 \u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u7684\u601d\u8003\u8fc7\u7a0b\u5b8c\u5168\u662f\u6309\u7167\u8bed\u4e49\u69fd\u6765\u8fdb\u884c\u7684\uff0c\u6709\u4ec0\u4e48\u69fd\u4f4d\u5b83\u5c31\u601d\u8003\u4ec0\u4e48\u3002\u5f53\u8bed\u4e49\u69fd\u5b8c\u5168\u586b\u5145\u4e14\u6d88\u9664\u4e86\u6b67\u4e49\u4e4b\u540e\uff0c\u4e5f\u5c31\u5b8c\u6210\u4e86\u6574\u4e2a\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u4efb\u52a1\uff0c\u5f00\u59cb\u5229\u7528\u77e5\u8bc6\u5e93\u56de\u7b54\u7528\u6237\u95ee\u9898\u6216\u8005\u5b8c\u6210\u67d0\u79cd\u64cd\u4f5c\u3002\u4f46\u662f\u8bed\u4e49\u69fd\u5230\u5e95\u662f\u600e\u4e48\u6765\u7684\u5462\uff1f\u5b83\u662f\u5982\u4f55\u548c\u7528\u6237\u8fdb\u884c\u201c\u53d1\u95ee\u201d\u4ea4\u4e92\u7684\u5462\uff1f","title":"2 \u4ec0\u4e48\u662f\u69fd\u4f4d\u586b\u5145"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#21","text":"\u4e0a\u6587\u4e2d\u63d0\u5230\u610f\u56fe\u8bc6\u522b\u7684\u7c7b\u522b\u662f\u9884\u5b9a\u4e49\u597d\u7684\uff0c\u5176\u5b9e\u6211\u4eec\u4e5f\u4f1a\u9884\u5b9a\u4e49\u597d\u610f\u56fe\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\uff0c\u4e5f\u5c31\u662f\u4f60\u7684\u5e94\u7528\u573a\u666f\u6709\u591a\u5c11\u4e2a\u610f\u56fe\uff0c\u90a3\u4e48\u4f60\u5c31\u9700\u8981\u4e8b\u5148\u5b9a\u4e49\u597d\u591a\u5c11\u4e2a\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\u3002\u5728\u4e0a\u6587\u7684\u4f8b\u5b50\u4e2d\u6211\u628a\u201c\u8ba2\u7535\u5f71\u7968\u201d\u610f\u56fe\u6240\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd\u5b9a\u4e49\u7684\u5f62\u5f0f\uff0c\u4f3c\u4e4e\u6709\u70b9\u7b80\u5355\uff0c\u5e76\u6ca1\u6709\u4f53\u73b0\u51fa\u7cfb\u7edf\u662f\u4f9d\u9760\u4ec0\u4e48\u6280\u80fd\u6765\u548c\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u7684\uff0c\u5176\u5b9e\u53ea\u8981\u5728\u8bed\u4e49\u69fd\u7684\u6bcf\u4e2a\u69fd\u4f4d\u52a0\u4e0a\u76f8\u5bf9\u5e94\u7684\u201c\u8bdd\u672f\u201d\u5c31\u884c\u4e86\uff0c\u7cfb\u7edf\u53d1\u73b0\u54ea\u4e2a\u69fd\u4f4d\u6ca1\u586b\u5145\u6216\u8005\u6709\u6b67\u4e49\u5c31\u4f7f\u7528\u8be5\u69fd\u4f4d\u4e8b\u5148\u9884\u5b9a\u4e49\u597d\u7684\u8bdd\u672f\u53bb\u201c\u53d1\u95ee\u201d\u5c31\u597d\u4e86\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u8ff0\u201c\u8ba2\u7535\u5f71\u7968\u201d\u7684\u8bed\u4e49\u69fd\u6539\u4e3a\u5982\u4e0b\u6240\u793a\uff1a \"\u8ba2\u7535\u5f71\u7968\": { \"\u7535\u5f71\u540d\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u9700\u8981\u770b\u90a3\u90e8\u7535\u5f71\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u770bXX\u8fd8\u662fYYY\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_movie_name/\" } \"\u7535\u5f71\u9662\u540d\u79f0\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u8981\u53bb\u7684\u7535\u5f71\u9662\u662f\u54ea\u4e2a\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u770bXX\u5f71\u9662\u8fd8\u662fYY\u5f71\u9662\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_cinema/\" } \"\u65f6\u95f4\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u8981\u4ec0\u4e48\u65f6\u5019\u53bb\u770b\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3X\u70b9\u53bb\u8fd8\u662fY\u70b9\u53bb\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_time/\" } \"\u6570\u91cf\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u95ee\u60a8\u9700\u8981\u9884\u8ba2\u51e0\u5f20\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u8ba2X\u5f20\u8fd8\u662fY\u5f20\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_number/\" } \"\u5ea7\u4f4d\u4f4d\u7f6e\":, { \"\u69fd\u4f4d\u503c\":___, \"\u8ffd\u95ee\u8bdd\u672f\":\"\u8bf7\u60a8\u9009\u62e9\u5ea7\u4f4d\u53f7\uff1f\", \"\u6b67\u4e49\u6f84\u6e05\u8bdd\u672f\":\"\u4f60\u60f3\u8ba2X\u53f7\u8fd8\u662fY\u53f7\uff1f\", \"\u69fd\u4f4d\u9884\u6d4b\":\"/api/predict_seat/\" } } \u4e0a\u8ff0\u8bed\u4e49\u69fd\u7684\u8bbe\u8ba1\u5e76\u4e0d\u662f\u6700\u597d\u6216\u8005\u6700\u5408\u9002\u7684\uff0c\u6b64\u5904\u53ea\u662f\u968f\u4fbf\u8bbe\u8ba1\u4e3e\u4e2a\u4f8b\u5b50\u800c\u5df2\uff0c\u5b9e\u9645\u4e1a\u52a1\u4e2d\u7684\u8bed\u4e49\u69fd\u66f4\u4e3a\u590d\u6742\uff1b\u901a\u8fc7\u4e0a\u8ff0\u4f8b\u5b50\u4f60\u5df2\u7ecf\u5b8c\u5168\u660e\u767d\u4e86\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u4ee5\u53ca\u7406\u89e3\u4e86\u4e3a\u4ec0\u4e48\u8981\u505a\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u3002\u90a3\u4e48\u5982\u4f55\u53bb\u505a\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u5462\uff1f","title":"2.1 \u8bed\u4e49\u69fd\u7684\u8bbe\u8ba1"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#3","text":"","title":"3 \u610f\u56fe\u8bc6\u522b\u7684\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#31","text":"\u901a\u8fc7\u4eba\u5de5\u5206\u6790\u6bcf\u4e2a\u610f\u56fe\u4e0b\u7684\u6709\u4ee3\u8868\u6027\u7684\u4f8b\u53e5\u603b\u7ed3\u51fa\u89c4\u5219\u6a21\u677f\uff0c\u7136\u540e\u5c06\u7528\u6237\u7684\u8f93\u5165\u8bed\u53e5\u8fdb\u884c\u5206\u8bcd\u3001\u8bcd\u6027\u6807\u6ce8\u3001\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u3001\u4f9d\u5b58\u53e5\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u5206\u6790\u7b49\u64cd\u4f5c\u540e\u5957\u7528\u5df2\u6709\u7684\u6a21\u677f\uff0c\u5f53\u4e0e\u4e4b\u5339\u5bf9\u7684\u67d0\u4e2a\u610f\u56fe\u6a21\u677f\u8fbe\u5230\u4e00\u5b9a\u7684\u9608\u503c\u4e4b\u540e\u5c31\u8ba4\u4e3a\u8be5\u8f93\u5165\u5c31\u5c5e\u4e8e\u8be5\u610f\u56fe\u7c7b\u522b\u3002\u4ee5\u8ba2\u673a\u7968\u610f\u56fe\u4e3a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u4e8b\u5148\u6536\u96c6\u4e00\u4e9b\u7528\u6237\u7684\u76f8\u5173query\uff0c\u7136\u540e\u518d\u8fdb\u884c\u603b\u7ed3\u5f52\u7eb3\u5236\u5b9a\u6a21\u677f\u3002 \u4ece\u5e7f\u5dde\u5230\u8d35\u9633\u5e02\u7684\u822a\u73ed \u4e1c\u8425\u5230\u6d4e\u5357\u7684\u822a\u73ed \u6d4e\u5357\u53bb\u5927\u8fde\u7684\u822a\u73ed \u67e5\u8be2\u5927\u5927\u540e\u5929\u5e7f\u5dde\u5230\u6b66\u6c49\u7684\u822a\u73ed \u5341\u6708\u56db\u53f7\u4ece\u5e7f\u5dde\u5230\u5317\u4eac\u7684\u98de\u673a\u7968\u591a\u5c11\u94b1 \u67e5\u8be2\u4e0a\u6d77\u5230\u4e3d\u6c5f\u98de\u673a\u7968\u7684\u4ef7\u683c \u660e\u5929\u4ece\u6842\u6797\u98de\u5f80\u676d\u5dde\u7684\u822a\u73ed \u6b66\u6c49\u5230\u5317\u4eac\u7684\u98de\u673a\u7968 \u6839\u636e\u4ee5\u4e0a\u7684\u793a\u4f8b\uff0c\u53ef\u4ee5\u603b\u7ed3\u5f52\u7eb3\u51fa\u4ee5\u4e0b\u6a21\u677f\uff1a .*?[\u5730\u540d]{\u5230|\u53bb|\u98de|\u98de\u5f80}[\u5730\u540d].*?{\u673a\u7968|\u98de\u673a\u7968|\u822a\u73ed}.*? ? \u8868\u793a\u4efb\u610f\u5b57\u7b26\uff0c[]\u8868\u793a\u5b9e\u4f53\u7c7b\u578b\u6216\u8bcd\u6027\uff0c{}\u8868\u793a\u5173\u952e\u8bcd\uff0c|\u8868\u793a\u6216\u3002 \u5f53\u7528\u6237\u8f93\u5165\u201c\u67e5\u8be2\u540e\u5929\u5e7f\u5dde\u5230\u4e0a\u6d77\u7684\u822a\u73ed\u201d\uff0c\u6211\u4eec\u5bf9query\u8fdb\u884c\u5206\u8bcd\u548c\u8bcd\u6027\u6807\u6ce8\uff0c\u5339\u914d\u5230\u5730\u540d\u201c\u5e7f\u5dde\u201d\u3001\u201c\u4e0a\u6d77\u201d\uff0c\u5173\u952e\u8bcd\u201c\u5230\u201d\u3001\u201c\u822a\u73ed\u201d\uff0c\u4ed6\u4eec\u7684\u7ec4\u5408\u548c\u9884\u5b9a\u4e49\u597d\u7684\u6a21\u677f\u9ad8\u5ea6\u5339\u914d\uff0c\u4e8e\u662f\u6211\u4eec\u786e\u8ba4\u8be5query\u662f\u201c\u8ba2\u673a\u7968\u201d\u610f\u56fe\uff1b\u53e6\u5916\u5bf9\u4e8e\u201c\u6709\u6ca1\u6709\u4e0b\u5468\u4e8c\u5230\u8d35\u9633\u7684\u822a\u73ed\u201d\u53ea\u80fd\u5339\u914d\u5230\u4e00\u4e2a\u5730\u540d\u548c\u5173\u952e\u8bcd\u201c\u822a\u73ed\u201d\uff0c\u4e5f\u7b97\u662f\u548c\u6a21\u677f\u6bd4\u8f83\u5339\u914d\u4e86\uff0c\u800c\u4e14\u5982\u679c\u8fd9\u4e2a\u5339\u914d\u5ea6\u548c\u5176\u4e0e\u5176\u4ed6\u610f\u56fe\u7684\u6a21\u677f\u7684\u5339\u914d\u5ea6\u76f8\u6bd4\u66f4\u9ad8\u7684\u8bdd\uff0c\u90a3\u4e5f\u53ef\u4ee5\u5927\u80c6\u7684\u8ba4\u4e3a\u8be5query\u662f\u201c\u8ba2\u673a\u7968\u201d\u610f\u56fe\u3002 \u4f7f\u7528\u89c4\u5219\u6a21\u677f\u505a\u610f\u56fe\u8bc6\u522b\u7cbe\u786e\u7387\u8f83\u9ad8\uff0c\u4f46\u662f\u53ec\u56de\u7387\u8f83\u4f4e\uff0c\u7279\u522b\u662f\u5bf9\u957f\u5c3equery\uff1b\u53e6\u5916\u8be5\u65b9\u6cd5\u9700\u8981\u5927\u91cf\u4eba\u5de5\u53c2\u4e0e\u5236\u5b9a\u89c4\u5219\u6a21\u677f\uff0c\u4e0d\u6613\u81ea\u52a8\u5316\uff0c\u66f4\u96be\u4ee5\u5c06\u5176\u79fb\u690d\u3002","title":"3.1 \u89c4\u5219\u6a21\u677f"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#32","text":"\u4f7f\u7528\u7edf\u8ba1\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u505a\u6587\u672c\u5206\u7c7b\uff0c\u9700\u8981\u4eba\u5de5\u63d0\u53d6\u6587\u672c\u7279\u5f81\uff0c\u6bd4\u5982ngram\u3001\u8bcd\u6027\u7279\u5f81\u3001\u5b9e\u4f53\u7c7b\u578b\u7279\u5f81\uff1b\u63d0\u5b8c\u7279\u5f81\u540e\u8fdb\u884ctf-idf\u5411\u91cf\u5316\u8868\u793a\uff0c\u7136\u540e\u4f7f\u7528\u652f\u6301\u5411\u91cf\u673a\u3001\u903b\u8f91\u56de\u5f52\u3001\u968f\u673a\u68ee\u6797\u7b49\u7b97\u6cd5\u8fdb\u884c\u8bad\u7ec3\u3002\u8be5\u65b9\u6cd5\u663e\u7136\u4e5f\u9700\u8981\u5927\u91cf\u4eba\u5de5\u64cd\u4f5c\u8bbe\u8ba1\u9886\u57df\u76f8\u5173\u7684\u7279\u5f81\uff0c\u4e14\u7528\u7edf\u8ba1\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u505a\u6587\u672c\u5206\u7c7b\u6548\u679c\u662f\u4e0d\u600e\u4e48\u7406\u60f3\u7684\u3002","title":"3.2 \u7edf\u8ba1\u673a\u5668\u5b66\u4e60"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#33","text":"\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u6765\u5efa\u6a21\u505a\u6587\u672c\u5206\u7c7b\uff0c\u5b83\u7701\u7565\u4e86\u4eba\u5de5\u8bbe\u8ba1\u7279\u5f81\u3001\u63d0\u53d6\u7279\u5f81\u7684\u8fc7\u7a0b\uff0c\u8fd8\u80fd\u501f\u52a9\u9884\u8bad\u7ec3\u597d\u7684\u5177\u6709\u8bed\u4e49\u77e5\u8bc6\u7684\u8bcd\u5411\u91cf\u8fdb\u884c\u8bad\u7ec3\uff1b\u4f46\u662f\u8be5\u65b9\u6cd5\u9700\u8981\u5f88\u591a\u8bad\u7ec3\u6570\u636e\uff0c\u8fd9\u5c31\u9700\u8981\u4f9d\u8d56\u5f88\u591a\u4eba\u5de5\u6807\u6ce8\u6570\u636e\u4e86\uff0c\u76f8\u6bd4\u4e4b\u4e0b\u89c4\u5219\u6a21\u677f\u65b9\u6cd5\u5219\u4e0d\u9700\u8981\u6807\u6ce8\u6570\u636e\u3002 \u610f\u56fe\u8bc6\u522b\u7684\u96be\u70b9 \u8f93\u5165\u4e0d\u89c4\u8303\uff1a\u9519\u522b\u5b57\u3001\u5806\u780c\u5173\u952e\u8bcd\u3001\u975e\u6807\u51c6\u81ea\u7136\u8bed\u8a00 \u591a\u610f\u56fe\uff1a\u8f93\u5165\u7684\u8bed\u53e5\u4fe1\u606f\u91cf\u592a\u5c11\u9020\u6210\u610f\u56fe\u4e0d\u660e\u786e\uff0c\u4e14\u6709\u6b67\u4e49\u3002\u6bd4\u5982\u8f93\u5165\u4ed9\u5251\u5947\u4fa0\u4f20\uff0c\u90a3\u4e48\u662f\u60f3\u83b7\u5f97\u6e38\u620f\u4e0b\u8f7d\u3001\u7535\u89c6\u5267\u3001\u7535\u5f71\u3001\u97f3\u4e50\u8fd8\u662f\u5c0f\u8bf4\u4e0b\u8f7d \u610f\u56fe\u5f3a\u5ea6\uff1a\u8f93\u5165\u7684\u8bed\u53e5\u597d\u50cf\u5373\u5c5e\u4e8eA\u610f\u56fe\uff0c\u53c8\u5c5e\u4e8eB\u610f\u56fe\uff0c\u6bcf\u4e2a\u610f\u56fe\u7684\u7684\u5f97\u5206\u90fd\u4e0d\u9ad8 \u65f6\u6548\u6027\uff1a\u7528\u6237\u7684\u610f\u56fe\u662f\u6709\u8f83\u5f3a\u65f6\u6548\u6027\u7684\uff0c\u7528\u6237\u5728\u4e0d\u540c\u65f6\u95f4\u8282\u70b9\u7684\u76f8\u540c\u7684query\u53ef\u80fd\u662f\u5c5e\u4e8e\u4e0d\u540c\u610f\u56fe\u7684\uff0c\u6bd4\u5982query\u4e3a\u201c\u6218\u72fc\u201d\uff0c\u5728\u5f53\u524d\u65f6\u95f4\u8282\u70b9\u53ef\u80fd\u662f\u60f3\u5728\u7ebf\u89c2\u770b\u6218\u72fc1\u6216\u8005\u6218\u72fc2\uff0c\u800c\u5982\u679c\u662f\u5728\u6218\u72fc3\u5f00\u62cd\u7684\u65f6\u95f4\u8282\u70b9\u641c\u7684\u8bdd\uff0c\u53ef\u80fd\u5f88\u5927\u6982\u7387\u662f\u60f3\u4e86\u89e3\u6218\u72fc3\u7684\u4e00\u4e9b\u76f8\u5173\u65b0\u95fb\u4e86","title":"3.3 \u6df1\u5ea6\u5b66\u4e60"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#4","text":"\u69fd\u4f4d\u586b\u5145\u5305\u62ec\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u548c\u69fd\u4f4d\u9884\u6d4b\uff0c\u5176\u5b9e\u8bf4\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u662f\u4e0d\u4e25\u8c28\u7684\uff0c\u6bd4\u5982\u5728\u201c\u8ba2\u673a\u7968\u201d\u610f\u56fe\u4e0b\u7684\u8bed\u4e49\u69fd\u4e2d\uff0c\u5e94\u8be5\u6709\u201c\u51fa\u53d1\u5730\u201d\u548c\u201c\u76ee\u7684\u5730\u201d\uff0c\u867d\u7136\u4ed6\u4eec\u90fd\u662f\u5730\u540d\uff0c\u4f46\u662f\u6709\u533a\u522b\uff0c\u4ed6\u4eec\u7684\u987a\u5e8f\u4e0d\u80fd\u53d8\uff0c\u4e5f\u5c31\u662f\u4e0d\u80fd\u7528\u201c\u5730\u540d\u201d\u6765\u7edf\u4e00\u4ee3\u66ff\uff0c\u800c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u505a\u6cd5\u5c31\u662f\u5c06\u4ed6\u4eec\u90fd\u5f53\u505a\u201c\u5730\u540d\u201d\u4e86\u3002\u6211\u4eec\u53ea\u80fd\u79f0\u69fd\u4f4d\u586b\u5145\u662f\u4e00\u4e2a\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\uff0c\u4f46\u7edd\u4e0d\u80fd\u8bf4\u5e8f\u5217\u6807\u6ce8\u4efb\u52a1\u5c31\u662f\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0c\u4e14\u6211\u4eec\u5728\u6807\u6ce8\u6570\u636e\u7684\u65f6\u5019\u4e5f\u4e0d\u80fd\u4e00\u6837\u6807\u6ce8\u3002\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4e0e\u69fd\u4f4d\u586b\u5145\u6807\u6ce8\u7684\u533a\u522b\u5982\u4e0b\uff1a \u53ef\u4ee5\u770b\u5230\u69fd\u4f4d\u586b\u5145\u6807\u6ce8\u4e2d\uff0c\u9488\u5bf9\u8ba2\u673a\u7968\u610f\u56fe\u7684\u57ce\u5e02\u5b9e\u4f53\u7684\u6807\u6ce8\uff0c\u6211\u4eec\u4f7f\u7528dept\u548carr\u6765\u533a\u5206\u51fa\u53d1\u5730\u548c\u76ee\u7684\u5730\u5b9e\u4f53\uff0c\u6240\u4ee5\u6211\u4eec\u5e94\u8be5\u4f7f\u7528\u4e0a\u56fe\u4e2d\u7b2c\u4e8c\u79cd\u6807\u6ce8\u65b9\u5f0f\u6765\u6807\u6ce8\u6570\u636e\uff0c\u7136\u540e\u8bad\u7ec3\u5e8f\u5217\u6807\u6ce8\u6a21\u578b\uff0c\u6700\u540e\u7528\u8be5\u6a21\u578b\u53bb\u505a\u69fd\u4f4d\u503c\u8bc6\u522b\u3002 \u69fd\u4f4d\u9884\u6d4b\u662f\u6307\u5f53\u5728\u7528\u6237\u7684query\u4e2d\u8bc6\u522b\u4e0d\u5230\u67d0\u4e9b\u69fd\u4f4d\u503c\u65f6\uff0c\u7cfb\u7edf\u9996\u5148\u9700\u8981\u53bb\u505a\u4e00\u4e2a\u8f83\u4e3a\u9760\u8c31\u7684\u9884\u6d4b\uff0c\u800c\u4e0d\u662f\u51e1\u4e8b\u90fd\u53bb\u8ddf\u7528\u6237\u4e92\u52a8\u6765\u83b7\u53d6\u8fd9\u4e9b\u69fd\u4f4d\u503c\u3002","title":"4 \u69fd\u4f4d\u586b\u5145\u7684\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/02-%E9%97%AE%E7%AD%94%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF.html#_2","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u81ea\u7136\u8bed\u8a00\u7406\u89e3\u4e2d\u7684\u610f\u56fe\u8bc6\u522b\u548c\u69fd\u4f4d\u586b\u5145\u4e24\u5927\u6838\u5fc3\u6280\u672f\u6a21\u5757\uff0c\u8be6\u7ec6\u8bb2\u89e3\u4e86\u4e0d\u540c\u6a21\u5757\u7684\u5b9a\u4e49\u4ee5\u53ca\u5b9e\u73b0\u65b9\u6cd5\uff0c\u65b9\u4fbf\u540e\u7eed\u8fdb\u884c\u77e5\u8bc6\u56fe\u8c31\u95ee\u7b54\u7cfb\u7edf\u7684\u642d\u5efa\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html","text":"\u533b\u7597KBQA\u7cfb\u7edf \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3KBQA\u7cfb\u7edf\u7684\u5de5\u4f5c\u6d41\u7a0b \u638c\u63e1KBQA\u7cfb\u7edf\u5b9e\u73b0\u7684\u8fc7\u7a0b \u7cfb\u7edf\u67b6\u6784 \u00b6 \u4e0b\u56fe\u4e3a\u672c\u6b21\u9879\u76ee\u4e2d\uff0c\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u7684\u6d41\u7a0b\u6846\u67b6\uff08\u5176\u5c5e\u4e8e\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\uff09\uff0c\u5176\u4e3b\u8981\u73af\u8282\u4f9d\u7136\u5305\u62ec\u4e09\u90e8\u5206\uff1aNLU\uff08\u81ea\u7136\u8bed\u8a00\u7406\u89e3\uff09\uff0cDM\uff08\u5bf9\u8bdd\u7ba1\u7406\uff09\uff0cNLG\uff08\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\u3002 \u63a5\u4e0b\u6765\uff0c\u4ee5\u7528\u6237\u8f93\u5165\"\u8bf7\u95ee\u5f97\u4e86\u7cd6\u5c3f\u75c5\u8be5\u600e\u4e48\u529e\"\u4e3a\u4f8b\uff0c\u7406\u89e3\u6574\u4e2a\u95ee\u7b54\u6d41\u7a0b\uff1a NLU\u6a21\u5757 \u00b6 \u7b2c\u4e00\u6b65\uff1a\u5c06\u7528\u6237\u95ee\u9898\u5148\u8f93\u5165\u5206\u7c7b\u6a21\u578b1\uff0c\u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u7c7b\u7684\u610f\u56fe\uff0c\u4e3b\u8981\u5206\u4e3a6\u79cd\u7c7b\u578b\uff1agreet\u3001goodbye\u3001deny\u3001isbot\u3001accept\u3001 diagnosis\uff1a \u547d\u4e2d\u524d\u56db\u4e2a\u610f\u56fe\uff0c\u90a3\u5c31\u8fdb\u5165Chitchat_bot\uff0c\u4ece\u51c6\u5907\u597d\u7684\u56de\u590d\u8bed\u6599\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u6761\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5bf9\u8bdd\u7ed3\u675f\uff1b \u547d\u4e2daccept\uff0caccept\u610f\u56fe\u662f\u5728\u8fdb\u884c**\u95ee\u9898\u6f84\u6e05**\u65f6\u53d1\u6325\u4f5c\u7528\uff1b \u547d\u4e2ddiagnosis\uff0c\u8fdb\u5165Medical_bot\uff1b \u4e0a\u56fe\u4f8b\u5b50\u4e2d\uff0c\u547d\u4e2d\u7684\u662f diagnosis \uff0c\u8fdb\u5165 Medical_bot \u7b2c\u4e8c\u6b65\uff1a\u5728Medical_bot\u4e2d\uff0c\u5148\u8fdb\u5165\u5206\u7c7b\u6a21\u578b2\u8fdb\u884c\u610f\u56fe\u4e8c\u6b21\u8bc6\u522b\uff0c\u8fd9\u91cc\u5305\u62ec13\u4e2a\u533b\u7597\u7c7b\u7684\u610f\u56fe\uff1b\u7136\u540e\u8fdb\u5165NER\u6a21\u578b\u8fdb\u884c\u5b9e\u4f53\u8bc6\u522b\u4e0e\u63d0\u53d6\uff1a \u610f\u56fe\u8bc6\u522b\u7c7b\u578b\uff1a { 'co nf ide n ce' : 0.8997645974159241 , 'i ntent ' : '\u6cbb\u7597\u65b9\u6cd5' } \u5b9e\u4f53\u8bc6\u522b\u7684\u7ed3\u679c\u662f\uff1a { 'e nt i t ies' : [{ ' t ype' : 'disease' , 'word' : '\u7cd6\u5c3f\u75c5' }], 's tr i n g' : '\u8bf7\u95ee\u5f97\u4e86\u7cd6\u5c3f\u75c5\u600e\u4e48\u529e\u5462' } \u524d\u9762\u8fd9\u4e24\u6b65\u76f8\u5f53\u4e8e\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684NLU\u6a21\u5757 DM\u6a21\u5757 \u00b6 DST\u6a21\u5757+PL\u6a21\u5757\u7ec4\u6210\u4e86\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684\u5bf9\u8bdd\u7ba1\u7406(DM)\u6a21\u5757\u3002 DST\u6a21\u5757\uff08Dialog State Tracking\uff0c\u5bf9\u8bdd\u72b6\u6001\u8ddf\u8e2a\uff09\uff1a \u8d1f\u8d23\u8ddf\u8e2a\u7528\u6237\u5728\u5bf9\u8bdd\u4e2d\u7684\u610f\u56fe\u548c\u72b6\u6001\uff0c\u8bb0\u5f55\u5173\u952e\u4fe1\u606f\uff0c\u7ef4\u62a4\u5bf9\u8bdd\u4e0a\u4e0b\u6587\u3002\u5b83\u901a\u8fc7\u5b9e\u65f6\u76d1\u6d4b\u7528\u6237\u8f93\u5165\u548c\u7cfb\u7edf\u54cd\u5e94\uff0c\u786e\u4fdd\u7cfb\u7edf\u80fd\u591f\u7406\u89e3\u7528\u6237\u7684\u9700\u6c42\u5e76\u505a\u51fa\u76f8\u5e94\u7684\u56de\u7b54\u3002 PL\u6a21\u5757\uff08Policy Learning\uff0c\u7b56\u7565\u5b66\u4e60\uff09\uff1a \u8d1f\u8d23\u6839\u636e\u5bf9\u8bdd\u72b6\u6001\u548c\u4e0a\u4e0b\u6587\uff0c\u5b66\u4e60\u548c\u4f18\u5316\u7cfb\u7edf\u7684\u54cd\u5e94\u7b56\u7565\u3002PL\u6a21\u5757\u4f1a\u8bc4\u4f30\u4e0d\u540c\u7b56\u7565\u7684\u6548\u679c\uff0c\u901a\u8fc7\u5b66\u4e60\u7528\u6237\u53cd\u9988\uff0c\u8c03\u6574\u7cfb\u7edf\u7684\u54cd\u5e94\u65b9\u5f0f\uff0c\u4ee5\u63d0\u9ad8\u7528\u6237\u6ee1\u610f\u5ea6\u548c\u5bf9\u8bdd\u7684\u6d41\u7545\u6027\u3002 DST\u6a21\u5757 \u00b6 \u7b2c\u4e09\u6b65\uff1a\u5f97\u5230\u610f\u56fe\u548c\u5b9e\u4f53\u4e4b\u540e\uff0c\u5148\u7528\u5b9e\u4f53\u586b\u5145\u69fd\u4f4d NLU\u548cDST\u7684\u8054\u7cfb\u4e0e\u533a\u522b\uff0cNLU\u548cDST\u7684\u5173\u7cfb\u5176\u5b9e\u975e\u5e38\u7d27\u5bc6\uff0c\u5b83\u4eec\u90fd\u5728\u69fd\u4f4d\u586b\u5145\u8fc7\u7a0b\u4e2d\u53d1\u6325\u4e86\u4f5c\u7528\uff0c\u4f46\u662f\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u626e\u6f14\u4e86\u4e0d\u540c\u7684\u89d2\u8272\uff1a NLU\u6a21\u5757\u662f\u5bf9\u7528\u6237\u7684\u8f93\u5165\u8fdb\u884c\u610f\u56fe\u7684\u5206\u7c7b\uff0c\u540c\u65f6\u5bf9\u8f93\u5165\u4e2d\u7684\u5b9e\u4f53\u8fdb\u884c\u6807\u6ce8\uff0c\u4e0b\u9762\u662f\u4e0a\u9762\u5b9e\u4f53\u8bc6\u522b\u7ed3\u679c\u7684\u8282\u9009\uff1a { 'e nt i t ies' : [{ ' t ype' : 'disease' , 'word' : '\u7cd6\u5c3f\u75c5' }], 's tr i n g' : '\u8bf7\u95ee\u5f97\u4e86\u7cd6\u5c3f\u75c5\u600e\u4e48\u529e\u5462' } \u5728\u6b64\u9879\u76ee\u4e2d\uff0c\u662f\u6807\u51fa\u5b9e\u4f53\u7684\u7c7b\u578b\uff0c\u5bf9\u5e94\u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u8282\u70b9\uff0c\u540c\u65f6\u6807\u51fa\u5bf9\u5e94\u7684\u5b57\u6bb5\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u586b\u5145\uff0c\u53ea\u662f\u628a\u5b9e\u4f53\u627e\u51fa\u6765\u800c\u5df2\u3002 DST\u6a21\u5757\u5219\u662f\u57fa\u4e8e\u5bf9\u8bdd\u5386\u53f2\uff0c\u4e3a\u69fd\u4f4d\u5217\u8868\u4e2d\u7684\u6bcf\u4e00\u4e2a\u69fd\u4f4d\u627e\u5230\u4e00\u4e2a\u69fd\u4f4d\u503c \"\u6cbb\u7597\u65b9\u6cd5\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : No ne , \"cql_template\" : [ \"MATCH(p:\u75be\u75c5) WHERE p.name='{Disease}' RETURN p.cure_way\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_drug]->(q) WHERE p.name='{Disease}' RETURN q.name\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_recipes]->(q) WHERE p.name='{Disease}' RETURN q.name\" ], \"reply_template\" : \"'{Disease}' \u75be\u75c5\u7684\u6cbb\u7597\u65b9\u5f0f\u3001\u53ef\u7528\u7684\u836f\u7269\u3001\u63a8\u8350\u83dc\u80b4\u6709\uff1a\\n\" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 '{Disease}' \u7684\u6cbb\u7597\u65b9\u6cd5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u6ca1\u6709\u7406\u89e3\u60a8\u8bf4\u7684\u610f\u601d\u54e6~\" }, \u8fd9\u662f\"\u6cbb\u7597\u65b9\u6cd5\"\u8fd9\u4e2a\u610f\u56fe\u7684\u4e0b\u7684\u4fe1\u606f\uff0c\u69fd\u4f4d\u5217\u8868\u4e2d\u53ea\u6709\u4e00\u4e2a\u69fd\u4f4d\"Disease\"\u3002 \u5728\u6bcf\u4e00\u8f6e\u5bf9\u8bdd\u4e2d\uff0cDST\u6a21\u5757\u90fd\u4f1a\u67e5\u770b\u622a\u6b62\u76ee\u524d\u7684\u6240\u6709\u5bf9\u8bdd\u5386\u53f2\uff0c\u7136\u540e\u786e\u5b9a\u54ea\u4e2a\u6587\u672c\u53ef\u4ee5\u586b\u5145\u4e3a\u69fd\u4f4d\u5217\u8868\u4e2d\u67d0\u4e2a\u7279\u5b9a\u69fd\u4f4d\u7684\u69fd\u4f4d\u503c\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u8c13\u4e4b\u8ffd\u8e2a(Dialogue State Tracking)\u3002 \u5728\u8fd9\u4e2a\u9879\u76ee\u4e2d\uff0c\u8fd9\u4e00\u6b65\u662f\u901a\u8fc7\u904d\u5386**\u69fd\u4f4d\u5217\u8868**\u548c**\u5b9e\u4f53\u8bc6\u522b\u7684\u7ed3\u679c**\u8fdb\u884c\u5339\u914d\u5b8c\u6210\u7684\u3002 PL\u6a21\u5757 \u00b6 \u7b2c\u56db\u6b65\uff1a\u6839\u636e\u610f\u56fe\u7f6e\u4fe1\u5ea6\u786e\u5b9a\u56de\u590d\u7b56\u7565\uff0c\u8fd9\u91cc\u5206\u4e86\u4e09\u79cd\u7b80\u5355\u7684\u60c5\u51b5\uff1a >=0.8\uff0c\u6839\u636e\u8bc6\u522b\u5230\u7684\u610f\u56fe\u53bbNeo4j(\u77e5\u8bc6\u56fe\u8c31)\u4e2d\u67e5\u8be2\u7b54\u6848\uff0c\u8fd4\u56de\u7ed9\u7528\u6237 0.4~0.8\uff0c\u53cd\u95ee\u7528\u6237\uff0c\u8fdb\u884c\u95ee\u9898\u6f84\u6e05 <0.4\uff0c\u8fd4\u56de\u515c\u5e95\u8bdd\u672f DST\u6a21\u5757+PL\u6a21\u5757\u7ec4\u6210\u4e86\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684\u5bf9\u8bdd\u7ba1\u7406(DM)\u6a21\u5757\uff0c\u5728\u8fd9\u4e2a\u9879\u76ee\u4e2d\u754c\u9650\u5e76\u4e0d\u662f\u7279\u522b\u660e\u663e\uff0c\u4e3b\u8981\u5b9e\u73b0\u903b\u8f91\u90fd\u5728 modules.py \u6587\u4ef6\u7684 semantic_parser \u51fd\u6570\u4e2d\u3002 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3\u4e86\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u95ee\u7b54\u7cfb\u7edf\u7684\u5de5\u4f5c\u6d41\u7a0b\uff0c\u4e3a\u540e\u7eed\u4ee3\u7801\u5b9e\u73b0\u63d0\u4f9b\u7406\u8bba\u57fa\u7840\u3002","title":"7.3 \u533b\u7597KBQA\u7cfb\u7edf\u67b6\u6784"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#kbqa","text":"","title":"\u533b\u7597KBQA\u7cfb\u7edf"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#_1","text":"\u4e86\u89e3KBQA\u7cfb\u7edf\u7684\u5de5\u4f5c\u6d41\u7a0b \u638c\u63e1KBQA\u7cfb\u7edf\u5b9e\u73b0\u7684\u8fc7\u7a0b","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#_2","text":"\u4e0b\u56fe\u4e3a\u672c\u6b21\u9879\u76ee\u4e2d\uff0c\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u7684\u6d41\u7a0b\u6846\u67b6\uff08\u5176\u5c5e\u4e8e\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\uff09\uff0c\u5176\u4e3b\u8981\u73af\u8282\u4f9d\u7136\u5305\u62ec\u4e09\u90e8\u5206\uff1aNLU\uff08\u81ea\u7136\u8bed\u8a00\u7406\u89e3\uff09\uff0cDM\uff08\u5bf9\u8bdd\u7ba1\u7406\uff09\uff0cNLG\uff08\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\u3002 \u63a5\u4e0b\u6765\uff0c\u4ee5\u7528\u6237\u8f93\u5165\"\u8bf7\u95ee\u5f97\u4e86\u7cd6\u5c3f\u75c5\u8be5\u600e\u4e48\u529e\"\u4e3a\u4f8b\uff0c\u7406\u89e3\u6574\u4e2a\u95ee\u7b54\u6d41\u7a0b\uff1a","title":"\u7cfb\u7edf\u67b6\u6784"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#nlu","text":"\u7b2c\u4e00\u6b65\uff1a\u5c06\u7528\u6237\u95ee\u9898\u5148\u8f93\u5165\u5206\u7c7b\u6a21\u578b1\uff0c\u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u7c7b\u7684\u610f\u56fe\uff0c\u4e3b\u8981\u5206\u4e3a6\u79cd\u7c7b\u578b\uff1agreet\u3001goodbye\u3001deny\u3001isbot\u3001accept\u3001 diagnosis\uff1a \u547d\u4e2d\u524d\u56db\u4e2a\u610f\u56fe\uff0c\u90a3\u5c31\u8fdb\u5165Chitchat_bot\uff0c\u4ece\u51c6\u5907\u597d\u7684\u56de\u590d\u8bed\u6599\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u6761\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5bf9\u8bdd\u7ed3\u675f\uff1b \u547d\u4e2daccept\uff0caccept\u610f\u56fe\u662f\u5728\u8fdb\u884c**\u95ee\u9898\u6f84\u6e05**\u65f6\u53d1\u6325\u4f5c\u7528\uff1b \u547d\u4e2ddiagnosis\uff0c\u8fdb\u5165Medical_bot\uff1b \u4e0a\u56fe\u4f8b\u5b50\u4e2d\uff0c\u547d\u4e2d\u7684\u662f diagnosis \uff0c\u8fdb\u5165 Medical_bot \u7b2c\u4e8c\u6b65\uff1a\u5728Medical_bot\u4e2d\uff0c\u5148\u8fdb\u5165\u5206\u7c7b\u6a21\u578b2\u8fdb\u884c\u610f\u56fe\u4e8c\u6b21\u8bc6\u522b\uff0c\u8fd9\u91cc\u5305\u62ec13\u4e2a\u533b\u7597\u7c7b\u7684\u610f\u56fe\uff1b\u7136\u540e\u8fdb\u5165NER\u6a21\u578b\u8fdb\u884c\u5b9e\u4f53\u8bc6\u522b\u4e0e\u63d0\u53d6\uff1a \u610f\u56fe\u8bc6\u522b\u7c7b\u578b\uff1a { 'co nf ide n ce' : 0.8997645974159241 , 'i ntent ' : '\u6cbb\u7597\u65b9\u6cd5' } \u5b9e\u4f53\u8bc6\u522b\u7684\u7ed3\u679c\u662f\uff1a { 'e nt i t ies' : [{ ' t ype' : 'disease' , 'word' : '\u7cd6\u5c3f\u75c5' }], 's tr i n g' : '\u8bf7\u95ee\u5f97\u4e86\u7cd6\u5c3f\u75c5\u600e\u4e48\u529e\u5462' } \u524d\u9762\u8fd9\u4e24\u6b65\u76f8\u5f53\u4e8e\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684NLU\u6a21\u5757","title":"NLU\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#dm","text":"DST\u6a21\u5757+PL\u6a21\u5757\u7ec4\u6210\u4e86\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684\u5bf9\u8bdd\u7ba1\u7406(DM)\u6a21\u5757\u3002 DST\u6a21\u5757\uff08Dialog State Tracking\uff0c\u5bf9\u8bdd\u72b6\u6001\u8ddf\u8e2a\uff09\uff1a \u8d1f\u8d23\u8ddf\u8e2a\u7528\u6237\u5728\u5bf9\u8bdd\u4e2d\u7684\u610f\u56fe\u548c\u72b6\u6001\uff0c\u8bb0\u5f55\u5173\u952e\u4fe1\u606f\uff0c\u7ef4\u62a4\u5bf9\u8bdd\u4e0a\u4e0b\u6587\u3002\u5b83\u901a\u8fc7\u5b9e\u65f6\u76d1\u6d4b\u7528\u6237\u8f93\u5165\u548c\u7cfb\u7edf\u54cd\u5e94\uff0c\u786e\u4fdd\u7cfb\u7edf\u80fd\u591f\u7406\u89e3\u7528\u6237\u7684\u9700\u6c42\u5e76\u505a\u51fa\u76f8\u5e94\u7684\u56de\u7b54\u3002 PL\u6a21\u5757\uff08Policy Learning\uff0c\u7b56\u7565\u5b66\u4e60\uff09\uff1a \u8d1f\u8d23\u6839\u636e\u5bf9\u8bdd\u72b6\u6001\u548c\u4e0a\u4e0b\u6587\uff0c\u5b66\u4e60\u548c\u4f18\u5316\u7cfb\u7edf\u7684\u54cd\u5e94\u7b56\u7565\u3002PL\u6a21\u5757\u4f1a\u8bc4\u4f30\u4e0d\u540c\u7b56\u7565\u7684\u6548\u679c\uff0c\u901a\u8fc7\u5b66\u4e60\u7528\u6237\u53cd\u9988\uff0c\u8c03\u6574\u7cfb\u7edf\u7684\u54cd\u5e94\u65b9\u5f0f\uff0c\u4ee5\u63d0\u9ad8\u7528\u6237\u6ee1\u610f\u5ea6\u548c\u5bf9\u8bdd\u7684\u6d41\u7545\u6027\u3002","title":"DM\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#dst","text":"\u7b2c\u4e09\u6b65\uff1a\u5f97\u5230\u610f\u56fe\u548c\u5b9e\u4f53\u4e4b\u540e\uff0c\u5148\u7528\u5b9e\u4f53\u586b\u5145\u69fd\u4f4d NLU\u548cDST\u7684\u8054\u7cfb\u4e0e\u533a\u522b\uff0cNLU\u548cDST\u7684\u5173\u7cfb\u5176\u5b9e\u975e\u5e38\u7d27\u5bc6\uff0c\u5b83\u4eec\u90fd\u5728\u69fd\u4f4d\u586b\u5145\u8fc7\u7a0b\u4e2d\u53d1\u6325\u4e86\u4f5c\u7528\uff0c\u4f46\u662f\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u626e\u6f14\u4e86\u4e0d\u540c\u7684\u89d2\u8272\uff1a NLU\u6a21\u5757\u662f\u5bf9\u7528\u6237\u7684\u8f93\u5165\u8fdb\u884c\u610f\u56fe\u7684\u5206\u7c7b\uff0c\u540c\u65f6\u5bf9\u8f93\u5165\u4e2d\u7684\u5b9e\u4f53\u8fdb\u884c\u6807\u6ce8\uff0c\u4e0b\u9762\u662f\u4e0a\u9762\u5b9e\u4f53\u8bc6\u522b\u7ed3\u679c\u7684\u8282\u9009\uff1a { 'e nt i t ies' : [{ ' t ype' : 'disease' , 'word' : '\u7cd6\u5c3f\u75c5' }], 's tr i n g' : '\u8bf7\u95ee\u5f97\u4e86\u7cd6\u5c3f\u75c5\u600e\u4e48\u529e\u5462' } \u5728\u6b64\u9879\u76ee\u4e2d\uff0c\u662f\u6807\u51fa\u5b9e\u4f53\u7684\u7c7b\u578b\uff0c\u5bf9\u5e94\u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u8282\u70b9\uff0c\u540c\u65f6\u6807\u51fa\u5bf9\u5e94\u7684\u5b57\u6bb5\uff0c\u4f46\u662f\u8fd8\u6ca1\u6709\u586b\u5145\uff0c\u53ea\u662f\u628a\u5b9e\u4f53\u627e\u51fa\u6765\u800c\u5df2\u3002 DST\u6a21\u5757\u5219\u662f\u57fa\u4e8e\u5bf9\u8bdd\u5386\u53f2\uff0c\u4e3a\u69fd\u4f4d\u5217\u8868\u4e2d\u7684\u6bcf\u4e00\u4e2a\u69fd\u4f4d\u627e\u5230\u4e00\u4e2a\u69fd\u4f4d\u503c \"\u6cbb\u7597\u65b9\u6cd5\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : No ne , \"cql_template\" : [ \"MATCH(p:\u75be\u75c5) WHERE p.name='{Disease}' RETURN p.cure_way\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_drug]->(q) WHERE p.name='{Disease}' RETURN q.name\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_recipes]->(q) WHERE p.name='{Disease}' RETURN q.name\" ], \"reply_template\" : \"'{Disease}' \u75be\u75c5\u7684\u6cbb\u7597\u65b9\u5f0f\u3001\u53ef\u7528\u7684\u836f\u7269\u3001\u63a8\u8350\u83dc\u80b4\u6709\uff1a\\n\" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 '{Disease}' \u7684\u6cbb\u7597\u65b9\u6cd5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u6ca1\u6709\u7406\u89e3\u60a8\u8bf4\u7684\u610f\u601d\u54e6~\" }, \u8fd9\u662f\"\u6cbb\u7597\u65b9\u6cd5\"\u8fd9\u4e2a\u610f\u56fe\u7684\u4e0b\u7684\u4fe1\u606f\uff0c\u69fd\u4f4d\u5217\u8868\u4e2d\u53ea\u6709\u4e00\u4e2a\u69fd\u4f4d\"Disease\"\u3002 \u5728\u6bcf\u4e00\u8f6e\u5bf9\u8bdd\u4e2d\uff0cDST\u6a21\u5757\u90fd\u4f1a\u67e5\u770b\u622a\u6b62\u76ee\u524d\u7684\u6240\u6709\u5bf9\u8bdd\u5386\u53f2\uff0c\u7136\u540e\u786e\u5b9a\u54ea\u4e2a\u6587\u672c\u53ef\u4ee5\u586b\u5145\u4e3a\u69fd\u4f4d\u5217\u8868\u4e2d\u67d0\u4e2a\u7279\u5b9a\u69fd\u4f4d\u7684\u69fd\u4f4d\u503c\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u8c13\u4e4b\u8ffd\u8e2a(Dialogue State Tracking)\u3002 \u5728\u8fd9\u4e2a\u9879\u76ee\u4e2d\uff0c\u8fd9\u4e00\u6b65\u662f\u901a\u8fc7\u904d\u5386**\u69fd\u4f4d\u5217\u8868**\u548c**\u5b9e\u4f53\u8bc6\u522b\u7684\u7ed3\u679c**\u8fdb\u884c\u5339\u914d\u5b8c\u6210\u7684\u3002","title":"DST\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#pl","text":"\u7b2c\u56db\u6b65\uff1a\u6839\u636e\u610f\u56fe\u7f6e\u4fe1\u5ea6\u786e\u5b9a\u56de\u590d\u7b56\u7565\uff0c\u8fd9\u91cc\u5206\u4e86\u4e09\u79cd\u7b80\u5355\u7684\u60c5\u51b5\uff1a >=0.8\uff0c\u6839\u636e\u8bc6\u522b\u5230\u7684\u610f\u56fe\u53bbNeo4j(\u77e5\u8bc6\u56fe\u8c31)\u4e2d\u67e5\u8be2\u7b54\u6848\uff0c\u8fd4\u56de\u7ed9\u7528\u6237 0.4~0.8\uff0c\u53cd\u95ee\u7528\u6237\uff0c\u8fdb\u884c\u95ee\u9898\u6f84\u6e05 <0.4\uff0c\u8fd4\u56de\u515c\u5e95\u8bdd\u672f DST\u6a21\u5757+PL\u6a21\u5757\u7ec4\u6210\u4e86\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684\u5bf9\u8bdd\u7ba1\u7406(DM)\u6a21\u5757\uff0c\u5728\u8fd9\u4e2a\u9879\u76ee\u4e2d\u754c\u9650\u5e76\u4e0d\u662f\u7279\u522b\u660e\u663e\uff0c\u4e3b\u8981\u5b9e\u73b0\u903b\u8f91\u90fd\u5728 modules.py \u6587\u4ef6\u7684 semantic_parser \u51fd\u6570\u4e2d\u3002","title":"PL\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/03-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.html#_3","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3\u4e86\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u95ee\u7b54\u7cfb\u7edf\u7684\u5de5\u4f5c\u6d41\u7a0b\uff0c\u4e3a\u540e\u7eed\u4ee3\u7801\u5b9e\u73b0\u63d0\u4f9b\u7406\u8bba\u57fa\u7840\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html","text":"\u533b\u7597KBQA\u7cfb\u7edf\u5b9e\u73b0 \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3KBQA\u7cfb\u7edf\u7684\u5de5\u4f5c\u6d41\u7a0b \u638c\u63e1KBQA\u7cfb\u7edf\u4e2d\u610f\u56fe\u5206\u7c7b\u539f\u7406\u548c\u4ee3\u7801\u5b9e\u73b0 \u638c\u63e1KBQA\u7cfb\u7edf\u4e2d\u69fd\u4f4d\u586b\u5145\u539f\u7406\u548c\u4ee3\u7801\u5b9e\u73b0 \u638c\u63e1KBQA\u7cfb\u7edf\u4e2d\u5bf9\u8bdd\u7ba1\u7406\u4ee3\u7801\u7684\u5b9e\u73b0 \u7cfb\u7edf\u67b6\u6784 \u00b6 \u4e0b\u56fe\u4e3a\u672c\u6b21\u9879\u76ee\u4e2d\uff0c\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u7684\u6d41\u7a0b\u6846\u67b6\uff08\u5176\u5c5e\u4e8e\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\uff09\uff0c\u5176\u4e3b\u8981\u73af\u8282\u4f9d\u7136\u5305\u62ec\u4e09\u90e8\u5206\uff1aNLU\uff08\u81ea\u7136\u8bed\u8a00\u7406\u89e3\uff09\uff0cDM\uff08\u5bf9\u8bdd\u7ba1\u7406\uff09\uff0cNLG\uff08\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\u3002 KBQA\u95ee\u7b54\u7cfb\u7edf\u5b9e\u73b0\u6b65\u9aa4\uff1a \u00b6 NLU\u6a21\u5757 \u5b9e\u73b0\u7b2c\u4e00\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a\u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u7c7b\u7684\u610f\u56fe \u5b9e\u73b0\u7b2c\u4e8c\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a\u5305\u62ec13\u4e2a\u533b\u7597\u7c7b\u7684\u610f\u56fe \u5b9e\u73b0\u7b2c\u4e09\u4e2a\u69fd\u4f4d\u586b\u5145\uff08NER\uff09\u6a21\u578b\uff1a\u8fd9\u91cc\u76f4\u63a5\u4f7f\u7528NER\u4efb\u52a1\u6a21\u578b DM\u6a21\u5757 \u57fa\u4e8e\u4e0d\u540c\u610f\u56fe\uff0c\u8bbe\u8ba1\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd \u4e3b\u903b\u8f91\u670d\u52a1\u6a21\u5757\u5b9e\u73b0 \u8bbe\u8ba1\u6574\u4e2a\u5bf9\u8bdd\u903b\u8f91 NLU\u6a21\u5757 \u00b6 \u7b2c\u4e00\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a \u00b6 \u76ee\u7684\uff1a\u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u7c7b\u7684\u610f\u56fe \u5171\u652f\u63016\u79cd\u7c7b\u578b\uff1agreet\u3001goodbye\u3001deny\u3001isbot\u3001accept\u3001 diagnosis - \u547d\u4e2d\u524d\u56db\u4e2a\u610f\u56fe\uff0c\u90a3\u5c31\u8fdb\u5165Chi t cha t _bo t \uff0c\u4ece\u51c6\u5907\u597d\u7684\u56de\u590d\u8bed\u6599\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u6761\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5bf9\u8bdd\u7ed3\u675f\uff1b - \u547d\u4e2daccep t \uff0caccep t \u610f\u56fe\u662f\u5728\u8fdb\u884c**\u95ee\u9898\u6f84\u6e05**\u65f6\u53d1\u6325\u4f5c\u7528\uff1b - \u547d\u4e2ddiag n osis\uff0c\u8fdb\u5165Medical_bo t \uff1b \u5177\u4f53\u4ee3\u7801\uff1a \u4ee3\u7801\u4f4d\u7f6e\uff1a./MedicalKB/NLU/sklearn_Classification \u5b9e\u73b0\u6b65\u9aa4\uff1a \u67e5\u770b\u6570\u636e \u8bad\u7ec3\u6a21\u578b\u53ca\u4fdd\u5b58 \u6a21\u578b\u52a0\u8f7d\u91cd\u5229\u7528 \u67e5\u770b\u6570\u636e \u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff1a./MedicalKB/NLU/Chatty_intention/data/train.txt \u793a\u4f8b \u4f60\u597d\u5440,greet \u518d\u89c1,goodbye \u4f60\u9519\u4e86,deny \u4f60\u662f\u8c01,isbot \u53ef\u4ee5,accept \u8fd9\u4e2a\u75c5\u53ef\u4ee5\u9884\u9632\u5417,diagnosis train.txt\u4e00\u5171\u5305\u542b\uff1a208\u884c\u6570\u636e\uff0c\u5206\u4e3a\u4e24\u5217\uff1b\u7b2c\u4e00\u5217\u4e3a\u539f\u59cb\u6587\u672c\uff1b\u7b2c\u4e8c\u5217\u4e3a\u610f\u56fe\u7c7b\u522b\u3002 \u8bad\u7ec3\u6a21\u578b\u53ca\u4fdd\u5b58 \u811a\u672c\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Chatty_intention/train.py \u5177\u4f53\u4ee3\u7801 # -*- coding:utf-8 -*- import os import pickle import random import numpy as np from sklearn import svm from sklearn.linear_model import LogisticRegression from sklearn.ensemble import GradientBoostingClassifier from sklearn.feature_extraction.text import CountVectorizer , TfidfVectorizer from sklearn.metrics import f1_score from sklearn.metrics import classification_report , confusion_matrix from sklearn.model_selection import train_test_split seed = 222 random . seed ( seed ) np . random . seed ( seed ) def load_data ( data_path ): X , y = [],[] with open ( data_path , 'r' , encoding = 'utf8' ) as f : for line in f . readlines (): text , label = line . strip () . split ( ',' ) text = ' ' . join ( list ( text . lower ())) X . append ( text ) y . append ( label ) index = np . arange ( len ( X )) np . random . shuffle ( index ) X = [ X [ i ] for i in index ] y = [ y [ i ] for i in index ] return X , y def run ( data_path , model_save_path ): X , y = load_data ( data_path ) label_set = sorted ( list ( set ( y ))) label2id = { label : idx for idx , label in enumerate ( label_set )} id2label = { idx : label for label , idx in label2id . items ()} y = [ label2id [ i ] for i in y ] label_names = sorted ( label2id . items (), key = lambda kv : kv [ 1 ], reverse = False ) target_names = [ i [ 0 ] for i in label_names ] labels = [ i [ 1 ] for i in label_names ] train_X , text_X , train_y , text_y = train_test_split ( X , y , test_size = 0.15 , random_state = 42 ) vec = TfidfVectorizer ( ngram_range = ( 1 , 3 ), min_df = 0.0 , max_df = 0.9 , analyzer = 'char' ) train_X = vec . fit_transform ( train_X ) text_X = vec . transform ( text_X ) # -------------LR-------------- LR = LogisticRegression ( C = 8 , dual = False , n_jobs = 4 , max_iter = 400 , multi_class = 'ovr' , random_state = 122 ) LR . fit ( train_X , train_y ) pred = LR . predict ( text_X ) print ( classification_report ( text_y , pred , target_names = target_names )) print ( confusion_matrix ( text_y , pred , labels = labels )) # -------------gbdt-------------- gbdt = GradientBoostingClassifier ( n_estimators = 450 , learning_rate = 0.01 , max_depth = 8 , random_state = 24 ) gbdt . fit ( train_X , train_y ) pred = gbdt . predict ( text_X ) print ( classification_report ( text_y , pred , target_names = target_names )) print ( confusion_matrix ( text_y , pred , labels = labels )) # -------------\u878d\u5408-------------- pred_prob1 = LR . predict_proba ( text_X ) pred_prob2 = gbdt . predict_proba ( text_X ) pred = np . argmax (( pred_prob1 + pred_prob2 ) / 2 , axis = 1 ) print ( classification_report ( text_y , pred , target_names = target_names )) print ( confusion_matrix ( text_y , pred , labels = labels )) pickle . dump ( id2label , open ( os . path . join ( model_save_path , 'id2label.pkl' ), 'wb' )) pickle . dump ( vec , open ( os . path . join ( model_save_path , 'vec.pkl' ), 'wb' )) pickle . dump ( LR , open ( os . path . join ( model_save_path , 'LR.pkl' ), 'wb' )) pickle . dump ( gbdt , open ( os . path . join ( model_save_path , 'gbdt.pkl' ), 'wb' )) if __name__ == '__main__' : run ( \"./data/intent_recog_data.txt\" , \"./model_file/\" ) \u6a21\u578b\u52a0\u8f7d\u91cd\u5229\u7528 \u811a\u672c\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Chatty_intention/clf_model.py \u5177\u4f53\u4ee3\u7801 # -*- coding:utf-8 -*- import os import pickle import numpy as np from sklearn import svm class CLFModel ( object ): def __init__ ( self , model_save_path ): super ( CLFModel , self ) . __init__ () self . model_save_path = model_save_path self . id2label = pickle . load ( open ( os . path . join ( self . model_save_path , 'id2label.pkl' ), 'rb' )) self . vec = pickle . load ( open ( os . path . join ( self . model_save_path , 'vec.pkl' ), 'rb' )) self . LR_clf = pickle . load ( open ( os . path . join ( self . model_save_path , 'LR.pkl' ), 'rb' )) self . gbdt_clf = pickle . load ( open ( os . path . join ( self . model_save_path , 'gbdt.pkl' ), 'rb' )) def predict ( self , text ): text = ' ' . join ( list ( text . lower ())) text = self . vec . transform ([ text ]) proba1 = self . LR_clf . predict_proba ( text ) proba2 = self . gbdt_clf . predict_proba ( text ) label = np . argmax (( proba1 + proba2 ) / 2 , axis = 1 ) return self . id2label . get ( label [ 0 ]) if __name__ == '__main__' : model = CLFModel ( './model_file' ) text = '\u4f60\u662f\u8c01' label = model . predict ( text ) print ( label ) \u7b2c\u4e8c\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a \u00b6 \u76ee\u7684\uff1a\u5224\u65ad\u6587\u672c\u5c5e\u4e8e13\u4e2a\u533b\u7597\u7c7b\u7684\u54ea\u79cd\u533b\u7597\u7c7b\u522b\uff08\u610f\u56fe\uff09 \u5171\u652f\u630113\u79cd\u7c7b\u578b\uff08label.txt\uff09 \u5b9a\u4e49 \u75c5\u56e0 \u9884\u9632 \u4e34\u5e8a\u8868\u73b0(\u75c5\u75c7\u8868\u73b0) \u76f8\u5173\u75c5\u75c7 \u6cbb\u7597\u65b9\u6cd5 \u6240\u5c5e\u79d1\u5ba4 \u4f20\u67d3\u6027 \u6cbb\u6108\u7387 \u7981\u5fcc \u5316\u9a8c/\u4f53\u68c0\u65b9\u6848 \u6cbb\u7597\u65f6\u95f4 \u5176\u4ed6 \u5177\u4f53\u4ee3\u7801\uff1a \u4f4d\u7f6e\uff1a./NLP/MedicalKB/NLU/Medical_intention \u5b9e\u73b0\u6b65\u9aa4\uff1a \u67e5\u770b\u6570\u636e \u7f16\u5199\u914d\u7f6e\u6587\u4ef6 \u6570\u636e\u9884\u5904\u7406 \u6784\u5efa\u6a21\u578b \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\u548c\u4fdd\u5b58 \u6a21\u578b\u52a0\u8f7d\u4e0e\u5229\u7528 \u67e5\u770b\u6570\u636e \u6570\u636e\u4f4d\u7f6e\uff1a./NLP/MedicalKB/NLU/Medical_intention/data \u5728data\u6587\u4ef6\u5939\u4e2d\uff0c\u4e00\u5171\u4e09\u4e2a\u6587\u4ef6\uff0c\u5206\u522b\u4e3a\uff1atrain.csv, test.csv,label.txt train.csv\uff1a\u793a\u4f8b (test.csv\u683c\u5f0f\u4e00\u90c5) text,label_class,label_id \u80be\u7ed3\u77f3\uff0c\u8f93\u5c3f\u7ba1\u7ed3\u77f3\u4e00\u822c\u7528\u4ec0\u4e48\u836f\u5462\u800c\u4e14\u6548\u679c\u8f83\u597d\uff1f,\u6cbb\u7597\u65b9\u6cd5,5 \u5a74\u513f\u4f1a\u6709\u75d4\u75ae\u5417,\u5176\u4ed6,12 \u7761\u4e00\u89c9\u9192\u7761\u4e0d\u7740\u548b\u641e\u7684\uff1f\u73b0\u5728\u6000\u5b557\u4e2a\u6708\u4e86\uff0c\u665a\u4e0a\u7ecf\u5e38\u51c6\u70b9\u9192\uff0c\u7136\u540e\u5c31\u7761\u4e0d\u7740\u4e86\u3002,\u75c5\u56e0,1 \u8bf7\u95ee\u51fa\u8840\u6027\u8111\u6897\u6b7b\u75c7\u72b6\u662f\u4ec0\u4e48,\u4e34\u5e8a\u8868\u73b0(\u75c5\u75c7\u8868\u73b0),3 train.csv\u5171\u8ba17273\u6761\uff0c\u6bcf\u884c\u6837\u672c\u5206\u4e3a3\u5217\uff0c\u7b2c\u4e00\u5217\u4e3a\u539f\u59cb\u6587\u672c\u4e86\uff1b\u7b2c\u4e8c\u5217\u4e3a\u533b\u7597\u7c7b\u522b\u540d\u79f0\uff1b\u7b2c\u4e09\u5217\u4e3a\u7c7b\u522b\u5bf9\u5e94\u7684id\uff0c\u4e0d\u540c\u5217\u4e4b\u95f4\u7528\u9017\u53f7\u9694\u5f00 \u7f16\u5199\u914d\u7f6e\u6587\u4ef6 \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Medical_intention/intent_config.py \u5177\u4f53\u4ee3\u7801 import torch class Config (): def __init__ ( self ): self . device = \"mps\" if torch . cuda . is_available () else \"cpu\" self . train_path = './NLP/MedicalKB/NLU/Bert_IntentRe/data/train.csv' self . test_path = './NLP/MedicalKB/NLU/Bert_IntentRe/data/test.csv' self . label_path = './NLP/MedicalKB/NLU/Bert_IntentRe/data/label.txt' self . epochs = 10 self . lr = 2e-5 self . batch_size = 16 self . max_len = 60 self . num_class = 13 self . bert_path = './NLP/MedicalKB/bert-base-chinese' \u6570\u636e\u9884\u5904\u7406 \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLU/Medical_intention/utils/data_loader.py \u811a\u672c\u4e2d\u4e00\u5171\u4e09\u4e2a\u51fd\u6570\u4e00\u4e2a\u7c7b load_data(): \u5c06csv\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58 MyDataset(): \u81ea\u5b9a\u4e49Dataset\u7c7b collate_fn(): \u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5904\u7406\u6765\u81eadataset\u4e2d\u7684\u6570\u636e get_dataloader(): \u83b7\u5f97\u8bad\u7ec3\u4ee5\u53ca\u6d4b\u8bd5\u6570\u636e\u8fed\u4ee3\u5668 \u5c06csv\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58\uff1aload_data() import os import torch import pandas as pd import numpy as np from intent_config import * from torch.utils.data import Dataset , DataLoader from transformers import BertModel , BertTokenizer from transformers import BertForSequenceClassification , AutoModelForMaskedLM conf = Config () tokenizer = BertTokenizer . from_pretrained ( conf . bert_path ) def load_data ( path ): train = pd . read_csv ( path , header = 0 , sep = ',' , names = [ \"text\" , \"label_class\" , \"label_id\" ]) texts = train . text . to_list () labels = train . label_id . map ( int ) . to_list () return texts , labels \u81ea\u5b9a\u4e49Dataset\u7c7b\uff1aMyDataset() class MyDataset ( Dataset ): def __init__ ( self , data_path ): self . texts , self . labels = load_data ( data_path ) def __len__ ( self ): return len ( self . texts ) def __getitem__ ( self , item ): text = self . texts [ item ] label = self . labels [ item ] return text , label \u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5904\u7406\u6765\u81eadataset\u4e2d\u7684\u6570\u636e:collate_fn() def collate_fn ( datas ): batch_text = [ item [ 0 ] for item in datas ] batch_label = [ item [ 1 ] for item in datas ] inputs = tokenizer . batch_encode_plus ( batch_text , padding = 'max_length' , truncation = True , max_length = conf . max_len , return_tensors = 'pt' ) input_ids = inputs [ \"input_ids\" ] . to ( conf . device ) attention_mask = inputs [ \"attention_mask\" ] . to ( conf . device ) token_type_ids = inputs [ \"token_type_ids\" ] . to ( conf . device ) labels = torch . tensor ( batch_label , dtype = torch . long , device = conf . device ) return input_ids , attention_mask , token_type_ids , labels \u83b7\u5f97\u8bad\u7ec3\u4ee5\u53ca\u6d4b\u8bd5\u6570\u636e\u8fed\u4ee3\u5668: get_dataloader() def get_dataloader (): train_dataset = MyDataset ( conf . train_path ) train_iter = DataLoader ( train_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , shuffle = True ) dev_dataset = MyDataset ( conf . train_path ) dev_iter = DataLoader ( dev_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , shuffle = True ) return train_iter , dev_iter \u6784\u5efa\u6a21\u578b \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Medical_intention/model.py \u5177\u4f53\u4ee3\u7801 import torch import torch.nn as nn from utils.data_loader import * from transformers import BertModel class MyModel ( nn . Module ): def __init__ ( self , bert_path , bert_hidden , tag_size ): super () . __init__ () self . bert = BertModel . from_pretrained ( bert_path ) self . linear = nn . Linear ( bert_hidden , tag_size ) def forward ( self , input_ids , attention_mask , token_type_ids ): pool_output = self . bert ( input_ids , attention_mask , token_type_ids ) . pooler_output output = self . linear ( pool_output ) return output if __name__ == '__main__' : train_iter , dev_iter = get_dataloader () mymodel = MyModel ( conf . bert_path , 768 , conf . num_class ) for input_ids , attention_mask , token_type_ids , labels in train_iter : output = mymodel ( input_ids , attention_mask , token_type_ids ) print ( output . shape ) break \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\u548c\u4fdd\u5b58 \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Medical_intention/train.py import time import torch import torch.optim as optim from model import * from tqdm import tqdm from utils.data_loader import * def model2train (): # \u83b7\u53d6\u6570\u636e train_iter , dev_iter = get_dataloader () # \u5b9e\u4f8b\u5316\u6a21\u578b my_model = MyModel ( conf . bert_path , 768 , conf . num_class ) my_model = my_model . to ( conf . device ) # \u5b9e\u4f8b\u5316\u4f18\u5316\u5668 my_optim = optim . Adam ( my_model . parameters (), lr = conf . lr ) # \u5b9e\u4f8b\u5316\u635f\u5931\u51fd\u6570\u5bf9\u8c61 criation = nn . CrossEntropyLoss () # \u5b9a\u4e49\u6a21\u578b\u8bad\u7ec3\u53c2\u6570 my_model . train () total_num = 0 # \u8bad\u7ec3\u6837\u672c\u53c2\u6570 total_loss = 0 # \u8bad\u7ec3\u6837\u672c\u7684\u635f\u5931 total_acc = 0 # \u9884\u6d4b\u6b63\u786e\u6837\u672c\u7684\u4e2a\u6570 # \u5f00\u59cb\u8bad\u7ec3 start_time = time . time () for epoch_idx in range ( conf . epochs ): for i , ( input_ids , attention_mask , token_type_ids , labels ) in enumerate ( tqdm ( train_iter , desc = '\u8bad\u7ec3\u96c6' )): outputs = my_model ( input_ids , attention_mask , token_type_ids ) # \u8ba1\u7b97\u635f\u5931 my_loss = criation ( outputs , labels ) # \u68af\u5ea6\u6e05\u96f6 my_optim . zero_grad () # \u53cd\u5411\u4f20\u64ad my_loss . backward () # \u68af\u5ea6\u66f4\u65b0 my_optim . step () # \u6253\u5370\u8bad\u7ec3\u65e5\u5fd7 total_num = total_num + outputs . size ( 0 ) total_loss = total_loss + my_loss acc_num = sum ( torch . argmax ( outputs , dim =- 1 ) == labels ) . item () total_acc = total_acc + acc_num if i % 100 == 0 : avg_loss = total_loss / total_num avg_acc = total_acc / total_num use_time = time . time () - start_time print ( f '\u5f53\u524d\u8bad\u7ec3\u8f6e\u6b21%.d, \u5e73\u5747\u635f\u5931%.2f, \u5e73\u5747\u51c6\u786e\u7387%.2f, \u8017\u65f6%.2f' % ( epoch_idx + 1 , avg_loss , avg_acc , use_time )) torch . save ( my_model . state_dict (), './save_model/epoch_ %s .pth' % ( epoch_idx + 1 )) end_time = time . time () print ( f '\u603b\u8017\u65f6--> { end_time - start_time } ' ) if __name__ == '__main__' : model2train () \u6a21\u578b\u52a0\u8f7d\u4e0e\u5229\u7528 \u57fa\u4e8eflask\u6846\u67b6\u5c01\u88c5API\u63a5\u53e3 \u4ee3\u7801\u5b9e\u73b0 import time import torch import torch.optim as optim from model import * from intent_config import * from flask import Flask , request , jsonify app = Flask ( __name__ ) conf = Config () label_list = [ line . strip () for line in open ( './data/label.txt' , 'r' , encoding = 'utf8' )] id2label = { idx : label for idx , label in enumerate ( label_list )} print ( f 'id2label--\u300b { id2label } ' ) tokenizer = BertTokenizer . from_pretrained ( conf . bert_path ) model = MyModel ( bert_path = conf . bert_path , bert_hidden = 768 , tag_size = conf . num_class ) model . load_state_dict ( torch . load ( './save_model/epoch_10.pth' )) model = model . to ( conf . device ) def model2predict ( sample , model ): # \u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406 inputs = tokenizer . encode_plus ( sample , padding = 'max_length' , truncation = True , max_length = 60 , return_tensors = 'pt' ) input_ids = inputs [ \"input_ids\" ] . to ( conf . device ) attention_mask = inputs [ \"attention_mask\" ] . to ( conf . device ) token_type_ids = inputs [ \"token_type_ids\" ] . to ( conf . device ) # \u5c06\u6570\u636e\u9001\u5165\u6a21\u578b model . eval () with torch . no_grad (): logits = model ( input_ids , attention_mask , token_type_ids ) logits = torch . softmax ( logits , dim =- 1 ) out = torch . argmax ( logits , dim =- 1 ) . item () value , index = torch . topk ( logits , k = 1 ) return { \"name\" : id2label [ out ], \"confidence\" : round ( float ( value . item ()), 3 )} @app . route ( \"/service/api/bert_intent_recognize\" , methods = [ \"GET\" , \"POST\" ]) def bert_intent_recognize (): data = { \"sucess\" : 0 } result = None param = request . get_json () text = param [ \"text\" ] try : result = model2predict ( text , model ) data [ \"result\" ] = result data [ \"sucess\" ] = 1 except : print ( '\u6a21\u578b\u8c03\u7528\u6709\u8bef' ) return jsonify ( data ) if __name__ == '__main__' : app . run ( host = '0.0.0.0' , port = 6001 ) \u6d4b\u8bd5API\u63a5\u53e3 \u4ee3\u7801\u5b9e\u73b0 import requests import json def intent_classifier ( text ): url = 'http://127.0.0.1:6001/service/api/bert_intent_recognize' data = { \"text\" : text } headers = { 'Content-Type' : 'application/json; charset=utf8' } reponse = requests . post ( url , data = json . dumps ( data ), headers = headers ) if reponse . status_code == 200 : reponse = json . loads ( reponse . text ) return reponse [ 'result' ] else : return - 1 if __name__ == '__main__' : result = intent_classifier ( text = \"\u4e0d\u540c\u7c7b\u578b\u7684\u808c\u65e0\u529b\u75c7\u72b6\u8868\u73b0\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f\" ) print ( f 'result--\u300b { result } ' ) \u7b2c\u4e09\u4e2a\u69fd\u4f4d\u586b\u5145\uff08NER\uff09\u6a21\u578b \u00b6 \u69fd\u4f4d\u586b\u5145\uff08NER\uff09\u6a21\u578b\uff0c\u4f9d\u7136\u57fa\u4e8eBiLSTM+CRF\u7ed3\u6784\uff0c\u4e0d\u540c\u4e8e\u4fe1\u606f\u62bd\u53d6\u4efb\u52a1\u4e2d\u7684NER, \u6570\u636e\u96c6\u8fdb\u884c\u4e86\u66ff\u6362\uff0c\u5e76\u4e14\u652f\u63017\u79cd\u5b9e\u4f53\u7c7b\u578b \u672c\u6b21\u4efb\u52a1\uff0c\u4f5c\u4e3a\u9879\u76ee\u5b9e\u8df5\uff08\u7531\u5b66\u5458\u81ea\u5df1\u52a8\u624b\u5b9e\u8df5\u5b8c\u6210\uff09 DM\u6a21\u5757 \u00b6 \u57fa\u4e8e\u4e0d\u540c\u7684\u533b\u7597\u610f\u56fe\uff0c\u6211\u4eec\u5b9a\u4e49\u4e0d\u540c\u7684\u8bed\u610f\u69fd \u5b9a\u4e49config\u6587\u4ef6\uff0c\u4f4d\u7f6e\uff1a.NLP/MedicalKB/config.py \u5177\u4f53\u4ee3\u7801\u5b9e\u73b0\uff1a # -*- coding:utf-8 -*- # \u8bed\u610f\u69fd semantic_slot = { \"\u5b9a\u4e49\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.desc\" , \"reply_template\" : \"' {Disease} ' \u662f\u8fd9\u6837\u7684\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f ' {Disease} ' \u7684\u5b9a\u4e49\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u5f88\u62b1\u6b49\u6ca1\u6709\u7406\u89e3\u4f60\u7684\u610f\u601d\u5462~\" }, \"\u75c5\u56e0\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cause\" , \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u539f\u56e0\u662f\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u539f\u56e0\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u9884\u9632\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.prevent\" , \"reply_template\" : \"\u5173\u4e8e ' {Disease} ' \u75be\u75c5\u60a8\u53ef\u4ee5\u8fd9\u6837\u9884\u9632\uff1a \\n \" , \"ask_template\" : \"\u8bf7\u95ee\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u9884\u9632\u63aa\u65bd\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u989d~\u4f3c\u4e4e\u6709\u70b9\u4e0d\u7406\u89e3\u4f60\u8bf4\u7684\u662f\u5565\u5462~\" }, \"\u4e34\u5e8a\u8868\u73b0(\u75c5\u75c7\u8868\u73b0)\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:has_symptom]->(q:\u75c7\u72b6) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u75c5\u75c7\u8868\u73b0\u4e00\u822c\u662f\u8fd9\u6837\u7684\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u75c7\u72b6\u8868\u73b0\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u4eba\u7c7b\u7684\u8bed\u8a00\u592a\u96be\u4e86\uff01\uff01\" }, \"\u76f8\u5173\u75c5\u75c7\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:acompany_with]->(q:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u5177\u6709\u4ee5\u4e0b\u5e76\u53d1\u75be\u75c5\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u5e76\u53d1\u75be\u75c5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u4eba\u7c7b\u7684\u8bed\u8a00\u592a\u96be\u4e86\uff01\uff01~\" }, \"\u6cbb\u7597\u65b9\u6cd5\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : [ \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cure_way\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_drug]->(q) WHERE p.name=' {Disease} ' RETURN q.name\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_recipes]->(q) WHERE p.name=' {Disease} ' RETURN q.name\" ], \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u6cbb\u7597\u65b9\u5f0f\u3001\u53ef\u7528\u7684\u836f\u7269\u3001\u63a8\u8350\u83dc\u80b4\u6709\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u6cbb\u7597\u65b9\u6cd5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u6ca1\u6709\u7406\u89e3\u60a8\u8bf4\u7684\u610f\u601d\u54e6~\" }, \"\u6240\u5c5e\u79d1\u5ba4\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:cure_department]->(q:\u79d1\u5ba4) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"\u5f97\u4e86 ' {Disease} ' \u53ef\u4ee5\u6302\u8fd9\u4e2a\u79d1\u5ba4\u54e6\uff1a \\n \" , \"ask_template\" : \"\u60a8\u60f3\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u8981\u6302\u4ec0\u4e48\u79d1\u5ba4\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u4f20\u67d3\u6027\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.easy_get\" , \"reply_template\" : \"' {Disease} ' \u8f83\u4e3a\u5bb9\u6613\u611f\u67d3\u8fd9\u4e9b\u4eba\u7fa4\uff1a \\n \" , \"ask_template\" : \"\u60a8\u60f3\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u4f1a\u611f\u67d3\u54ea\u4e9b\u4eba\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u6ca1\u6709\u7406\u89e3\u60a8\u8bf4\u7684\u610f\u601d\u54e6~\" }, \"\u6cbb\u6108\u7387\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cured_prob\" , \"reply_template\" : \"\u5f97\u4e86' {Disease} ' \u7684\u6cbb\u6108\u7387\u4e3a\uff1a\" , \"ask_template\" : \"\u60a8\u60f3\u95ee ' {Disease} ' \u7684\u6cbb\u6108\u7387\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u6cbb\u7597\u65f6\u95f4\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cure_lasttime\" , \"reply_template\" : \"\u75be\u75c5 ' {Disease} ' \u7684\u6cbb\u7597\u5468\u671f\u4e3a\uff1a\" , \"ask_template\" : \"\u60a8\u60f3\u95ee ' {Disease} ' \u7684\u6cbb\u7597\u5468\u671f\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u5f88\u62b1\u6b49\u6ca1\u6709\u7406\u89e3\u4f60\u7684\u610f\u601d\u5462~\" }, \"\u5316\u9a8c/\u4f53\u68c0\u65b9\u6848\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:need_check]->(q:\u68c0\u67e5) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"\u5f97\u4e86 ' {Disease} ' \u9700\u8981\u505a\u4ee5\u4e0b\u68c0\u67e5\uff1a \\n \" , \"ask_template\" : \"\u60a8\u662f\u60f3\u95ee ' {Disease} ' \u8981\u505a\u4ec0\u4e48\u68c0\u67e5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u7981\u5fcc\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:not_eat]->(q:\u98df\u7269) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"\u5f97\u4e86 ' {Disease} ' \u5207\u8bb0\u4e0d\u8981\u5403\u8fd9\u4e9b\u98df\u7269\u54e6\uff1a \\n \" , \"ask_template\" : \"\u60a8\u662f\u60f3\u95ee ' {Disease} ' \u4e0d\u53ef\u4ee5\u5403\u7684\u98df\u7269\u662f\u4ec0\u4e48\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u989d~\u4f3c\u4e4e\u6709\u70b9\u4e0d\u7406\u89e3\u4f60\u8bf4\u7684\u662f\u5565\u5462~~\" }, \"unrecognized\" :{ \"slot_values\" : None , \"replay_answer\" : \"\u975e\u5e38\u62b1\u6b49\uff0c\u6211\u8fd8\u4e0d\u77e5\u9053\u5982\u4f55\u56de\u7b54\u60a8\uff0c\u6211\u6b63\u5728\u52aa\u529b\u5b66\u4e60\u4e2d~\" , } } intent_threshold_config = { \"accept\" : 0.8 , \"deny\" : 0.4 } default_answer = \"\"\"\u5f88\u62b1\u6b49\u6211\u8fd8\u4e0d\u77e5\u9053\u56de\u7b54\u4f60\u8fd9\u4e2a\u95ee\u9898 \\n \u4f60\u53ef\u4ee5\u95ee\u6211\u4e00\u4e9b\u6709\u5173\u75be\u75c5\u7684 \\n \u5b9a\u4e49\u3001\u539f\u56e0\u3001\u6cbb\u7597\u65b9\u6cd5\u3001\u6ce8\u610f\u4e8b\u9879\u3001\u6302\u4ec0\u4e48\u79d1\u5ba4 \\n \u9884\u9632\u3001\u7981\u5fcc\u7b49\u76f8\u5173\u95ee\u9898\u54e6~\"\"\" gossip_corpus = { \"greet\" :[ \"hi\" , \"\u4f60\u597d\u5440\" , \"\u6211\u662f\u667a\u80fd\u533b\u7597\u8bca\u65ad\u673a\u5668\u4eba\uff0c\u6709\u4ec0\u4e48\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5417\" , \"hi\uff0c\u4f60\u597d\uff0c\u4f60\u53ef\u4ee5\u53eb\u6211\u5c0f\u5eb7\" , \"\u4f60\u597d\uff0c\u4f60\u53ef\u4ee5\u95ee\u6211\u4e00\u4e9b\u5173\u4e8e\u75be\u75c5\u8bca\u65ad\u7684\u95ee\u9898\u54e6\" ], \"goodbye\" :[ \"\u518d\u89c1\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\" , \"bye\" , \"\u518d\u89c1\uff0c\u611f\u8c22\u4f7f\u7528\u6211\u7684\u670d\u52a1\" , \"\u518d\u89c1\u5566\uff0c\u795d\u4f60\u5065\u5eb7\" ], \"deny\" :[ \"\u5f88\u62b1\u6b49\u6ca1\u5e2e\u5230\u60a8\" , \"I am sorry\" , \"\u90a3\u60a8\u53ef\u4ee5\u8bd5\u7740\u95ee\u6211\u5176\u4ed6\u95ee\u9898\u54df\" ], \"isbot\" :[ \"\u6211\u662f\u5c0f\u5eb7\uff0c\u4f60\u7684\u667a\u80fd\u5065\u5eb7\u987e\u95ee\" , \"\u4f60\u53ef\u4ee5\u53eb\u6211\u5c0f\u5eb7\u54e6~\" , \"\u6211\u662f\u533b\u7597\u8bca\u65ad\u673a\u5668\u4eba\u5c0f\u5eb7\" ], } \u4e3b\u903b\u8f91\u6a21\u5757 \u00b6 modules\u6a21\u5757 \u00b6 DST\u6a21\u5757+PL\u6a21\u5757\u7ec4\u6210\u4e86\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684\u5bf9\u8bdd\u7ba1\u7406(DM)\u6a21\u5757\uff0c\u5728\u8fd9\u4e2a\u9879\u76ee\u4e2d\u754c\u9650\u5e76\u4e0d\u662f\u7279\u522b\u660e\u663e\uff0c\u4e3b\u8981\u5b9e\u73b0\u903b\u8f91\u90fd\u5728 modules.py \u6587\u4ef6\u7684 semantic_parser \u51fd\u6570\u4e2d\u3002 modules\u811a\u672c\u4f4d\u7f6e\uff1a./NLP/MedicalKB/modules.py\uff1b\u5176\u4e2d\u5171\u5305\u542b8\u4e2a\u51fd\u6570\u3002 \u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305\uff1a # -*- coding:utf-8 -*- import os import re import json import requests import random from py2neo import Graph from NLU.Chatty_intention.clf_model import CLFModel from config import * graph = Graph ( \"http://localhost:7474\" , auth = ( \"neo4j\" , \"12345\" )) clf_model = CLFModel ( './NLU/Chatty_intention/model_file/' ) \u7b2c\u4e00\u4e2a\u51fd\u6570: classifier() \u4f5c\u7528: \u95f2\u804a\u610f\u56fe\u8bc6\u522b\uff08\u7b2c\u4e00\u4e2a\u610f\u56fe\u5206\u7c7b\u6a21\u578b\u5e94\u7528\uff09 \u4ee3\u7801\uff1a def classifier ( text ): \"\"\" \u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u610f\u56fe\uff0c\u4ee5\u53ca\u662f\u4ec0\u4e48\u7c7b\u578b\u95f2\u804a \"\"\" return clf_model . predict ( text ) \u7b2c\u4e8c\u4e2a\u51fd\u6570: intent_classifier() \u4f5c\u7528\uff1a\u533b\u7597\u610f\u56fe\u8bc6\u522b\uff08\u7b2c\u4e8c\u4e2a\u610f\u56fe\u5206\u7c7b\u6a21\u578b\u5e94\u7528\uff09\uff0c\u5982\u679c\u4e0d\u80fd\u6b63\u5e38\u9884\u6d4b\u7ed3\u679c\uff0c\u8fd4\u56de\u503c\u9ed8\u8ba4\u4e3a-1 \u4ee3\u7801\uff1a def intent_classifier ( text ): url = 'http://127.0.0.1:6001/service/api/bert_intent_recognize' data = { \"text\" : text } headers = { 'Content-Type' : 'application/json; charset=utf8' } reponse = requests . post ( url , data = json . dumps ( data ), headers = headers ) if reponse . status_code == 200 : reponse = json . loads ( reponse . text ) return reponse [ 'result' ] else : return - 1 \u7b2c\u4e09\u4e2a\u51fd\u6570: slot_recognizer() \u4f5c\u7528\uff1a\u69fd\u4f4d\u586b\u5145\uff0c\u5982\u679c\u4e0d\u80fd\u6b63\u5e38\u9884\u6d4b\u7ed3\u679c\uff0c\u8fd4\u56de\u503c\u9ed8\u8ba4\u4e3a-1 \u4ee3\u7801\uff1a def slot_recognizer ( sample ): url = 'http://127.0.0.1:6002/service/api/medical_ner' data = { \"text\" : sample } headers = { 'Content-Type' : 'application/json;charset=utf8' } reponse = requests . post ( url , data = json . dumps ( data ), headers = headers ) if reponse . status_code == 200 : reponse = json . loads ( reponse . text ) # print(f'reponse--\u300b{reponse}') return reponse [ 'result' ] else : return - 1 \u7b2c\u56db\u4e2a\u51fd\u6570\uff1a gossip_robot() \u4f5c\u7528\uff1a\u5982\u679c\u662f\u7528\u6237\u5c5e\u4e8e\u95f2\u804a\u610f\u56fe\uff0c\u4ece\u51c6\u5907\u597d\u7684\u56de\u590d\u8bed\u6599\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u6761\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5bf9\u8bdd\u7ed3\u675f \u4ee3\u7801\uff1a def gossip_robot ( intent ): return random . choice ( gossip_corpus . get ( intent ) ) \u7b2c\u4e94\u4e2a\u51fd\u6570\uff1amedical_robot() \u4f5c\u7528\uff1a\u5982\u679c\u7528\u6237\u610f\u56fe\u4e0d\u5c5e\u4e8e\u95f2\u804a\uff0c\u5219\u4f1a\u8fdb\u884c\u7b2c\u4e8c\u6b21\u533b\u7597\u610f\u56fe\u8bc6\u522b\uff0c\u5e76\u8fdb\u884c\u8bca\u65ad\u56de\u7b54 \u4ee3\u7801\uff1a def medical_robot ( text ): \"\"\" \u5982\u679c\u786e\u5b9a\u662f\u8bca\u65ad\u610f\u56fe\u5219\u4f7f\u7528\u8be5\u65b9\u6cd5\u8fdb\u884c\u8bca\u65ad\u95ee\u7b54 \"\"\" semantic_slot = semantic_parser ( text ) answer = get_answer ( semantic_slot ) return answer \u7b2c\u516d\u4e2a\u51fd\u6570\uff1asemantic_parser(text) \u4f5c\u7528\uff1a\u5bf9\u6587\u672c\u89e3\u6790\uff0c\u586b\u69fd\uff0c\u5e76\u6839\u636e\u610f\u56fe\u5f3a\u5ea6\u6765\u786e\u8ba4\u56de\u590d\u7b56\u7565 \u4ee3\u7801\uff1a def semantic_parser ( text ): \"\"\" \u5bf9\u6587\u672c\u8fdb\u884c\u89e3\u6790 intent = {\"name\":str,\"confidence\":float} \"\"\" # \u533b\u7597\u610f\u56fe\u8bc6\u522b intent_rst = intent_classifier ( text ) # \u69fd\u4f4d\u586b\u5145NER\u8bc6\u522b slot_rst = slot_recognizer ( text ) if intent_rst == - 1 or slot_rst == - 1 or len ( slot_rst ) == 0 or intent_rst . get ( \"name\" ) == \"\u5176\u4ed6\" : return semantic_slot . get ( \"unrecognized\" ) slot_info = semantic_slot . get ( intent_rst . get ( \"name\" )) # \u586b\u69fd slots = slot_info . get ( \"slot_list\" ) slot_values = {} for key , value in slot_rst . items (): if value . lower () == slots [ 0 ] . lower (): slot_values [ slots [ 0 ]] = key slot_info [ \"slot_values\" ] = slot_values # \u6839\u636e\u610f\u56fe\u5f3a\u5ea6\u6765\u786e\u8ba4\u56de\u590d\u7b56\u7565 conf = intent_rst . get ( \"confidence\" ) if conf >= intent_threshold_config [ \"accept\" ]: slot_info [ \"intent_strategy\" ] = \"accept\" elif conf >= intent_threshold_config [ \"deny\" ]: slot_info [ \"intent_strategy\" ] = \"clarify\" else : slot_info [ \"intent_strategy\" ] = \"deny\" return slot_info \u7b2c\u4e03\u4e2a\u51fd\u6570\uff1aget_answer() \u4f5c\u7528\uff1a\u6839\u636e\u8bed\u4e49\u69fd\u83b7\u53d6\u7b54\u6848\u56de\u590d \u4ee3\u7801\uff1a def get_answer ( slot_info ): \"\"\" \u6839\u636e\u8bed\u4e49\u69fd\u83b7\u53d6\u7b54\u6848\u56de\u590d \"\"\" cql_template = slot_info . get ( \"cql_template\" ) reply_template = slot_info . get ( \"reply_template\" ) ask_template = slot_info . get ( \"ask_template\" ) slot_values = slot_info . get ( \"slot_values\" ) strategy = slot_info . get ( \"intent_strategy\" ) print ( f '11slot_info--> { slot_info } ' ) if not slot_values : return slot_info if strategy == \"accept\" : cql = [] if isinstance ( cql_template , list ): for cqlt in cql_template : cql . append ( cqlt . format ( ** slot_values )) else : cql = cql_template . format ( ** slot_values ) answer = neo4j_searcher ( cql ) if not answer : slot_info [ \"replay_answer\" ] = \"\u5514~\u6211\u88c5\u6ee1\u77e5\u8bc6\u7684\u5927\u8111\u6b64\u523b\u5f88\u8d2b\u7620\" else : pattern = reply_template . format ( ** slot_values ) slot_info [ \"replay_answer\" ] = pattern + answer elif strategy == \"clarify\" : print ( f '\u8fdb\u5165clarify' ) # \u6f84\u6e05\u7528\u6237\u662f\u5426\u95ee\u8be5\u95ee\u9898 pattern = ask_template . format ( ** slot_values ) slot_info [ \"replay_answer\" ] = pattern # \u5f97\u5230\u80af\u5b9a\u610f\u56fe\u4e4b\u540e\u9700\u8981\u7ed9\u7528\u6237\u56de\u590d\u7684\u7b54\u6848 cql = [] if isinstance ( cql_template , list ): for cqlt in cql_template : cql . append ( cqlt . format ( ** slot_values )) else : cql = cql_template . format ( ** slot_values ) print ( f 'cql--\u300b { cql } ' ) answer = neo4j_searcher ( cql ) if not answer : slot_info [ \"replay_answer\" ] = \"\u5514~\u6211\u88c5\u6ee1\u77e5\u8bc6\u7684\u5927\u8111\u6b64\u523b\u5f88\u8d2b\u7620\" else : pattern = reply_template . format ( ** slot_values ) slot_info [ \"choice_answer\" ] = pattern + answer elif strategy == \"deny\" : slot_info [ \"replay_answer\" ] = slot_info . get ( \"deny_response\" ) return slot_info \u7b2c\u516b\u4e2a\u51fd\u6570\uff1aneo4j_searcher() \u4f5c\u7528\uff1a\u67e5\u8be2Neo4j\u6570\u636e\u5e93\uff0c\u5f97\u5230\u8fd4\u56de\u7ed3\u679c \u4ee3\u7801\uff1a def neo4j_searcher ( cql_list ): result = \"\" if isinstance ( cql_list , list ): for cql in cql_list : rst = [] data = graph . run ( cql ) . data () if not data : continue for d in data : d = list ( d . values ()) if isinstance ( d [ 0 ], list ): rst . extend ( d [ 0 ]) else : rst . extend ( d ) data = \"\u3001\" . join ([ str ( i ) for i in rst ]) result += data + \" \\n \" else : data = graph . run ( cql_list ) . data () if not data : return result rst = [] for d in data : d = list ( d . values ()) if isinstance ( d [ 0 ], list ): rst . extend ( d [ 0 ]) else : rst . extend ( d ) data = \"\u3001\" . join ([ str ( i ) for i in rst ]) result += data return result chat_app\u6a21\u5757 \u00b6 chat_app\u6a21\u5757\u4e3a\u4e3b\u7a0b\u5e8f\u4ee3\u7801\uff0c\u5728\u8be5\u811a\u672c\u4e2d\u5b9e\u73b0\u4e86\u6574\u4e2a\u903b\u8f91\u5bf9\u8bdd\u4ee3\u7801\uff0c\u5e76\u501f\u52a9streamlit\u5de5\u5177\uff0c\u5b9e\u73b0web\u754c\u9762\u7684\u95ee\u7b54\u804a\u5929\u4ea4\u4e92\u3002 \u6574\u4e2achat_app\u4ee3\u7801\u903b\u8f91\uff1a \u95ee\u7b54\u6d41\u7a0b\uff1a 1\u3001\u7528\u6237\u8f93\u5165\u6587\u672c 2\u3001\u5bf9\u6587\u672c\u8fdb\u884c\u89e3\u6790\u5f97\u5230\u8bed\u4e49\u7ed3\u6784\u4fe1\u606f 3\u3001\u6839\u636e\u8bed\u4e49\u7ed3\u6784\u53bb\u67e5\u627e\u77e5\u8bc6\uff0c\u8fd4\u56de\u7ed9\u7528\u6237 \u5bf9\u6587\u672c\u8fdb\u884c\u89e3\u6790\u7684\u6d41\u7a0b\uff1a 1\u3001\u610f\u56fe\u7406\u89e3 \u95f2\u804a\u610f\u56fe\uff1a\u95ee\u597d\u3001\u79bb\u5f00\u3001\u80af\u5b9a\u3001\u62d2\u7edd \u95ee\u597d\u3001\u79bb\u5f00\uff1a\u9700\u8981\u6709\u56de\u590d\u52a8\u4f5c \u80af\u5b9a\u3001\u62d2\u7edd\uff1a\u9700\u8981\u6267\u884c\u52a8\u4f5c \u8bca\u65ad\u610f\u56fe\uff1a \u5f53\u610f\u56fe\u7f6e\u4fe1\u5ea6\u8fbe\u5230\u4e00\u5b9a\u9608\u503c\u65f6(>=0.8)\uff0c\u53ef\u4ee5\u67e5\u8be2\u8be5\u610f\u56fe\u4e0b\u7684\u7b54\u6848 \u5f53\u610f\u56fe\u7f6e\u4fe1\u5ea6\u8f83\u4f4e\u65f6(0.4~0.8)\uff0c\u6309\u6700\u9ad8\u7f6e\u4fe1\u5ea6\u7684\u610f\u56fe\u67e5\u627e\u7b54\u6848\uff0c\u8be2\u95ee\u7528\u6237\u662f\u5426\u95ee\u7684\u8fd9\u4e2a\u95ee\u9898 \u5f53\u610f\u56fe\u7f6e\u4fe1\u5ea6\u66f4\u4f4e\u65f6(<0.4)\uff0c\u62d2\u7edd\u56de\u7b54 2\u3001\u69fd\u4f4d\u586b\u5145 \u5982\u679c\u8f93\u5165\u662f\u4e00\u4e2a\u8bca\u65ad\u610f\u56fe\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8bed\u4e49\u69fd\u7684\u586b\u5145\uff0c\u5f97\u5230\u7ed3\u6784\u5316\u8bed\u4e49 \u4ee3\u7801\u5b9e\u73b0 # -*- coding:utf-8 -*- import streamlit as st from modules import gossip_robot , medical_robot , classifier from utils.json_utils import dump_user_dialogue_context , load_user_dialogue_context def main (): st . title ( \"\u6b22\u8fce\u8bbf\u95ee\u5c0f\u5eb7\u533b\u7597\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\" ) # \u521d\u59cb\u5316\u4f1a\u8bdd\u72b6\u6001\uff0c\u5982\u679c\u6ca1\u6709\u5219\u521b\u5efa if 'history' not in st . session_state : st . session_state . history = [] # \u663e\u793a\u5bf9\u8bdd\u5386\u53f2 for chat in st . session_state . history : if chat [ 'role' ] == 'user' : with st . chat_message ( \"user\" ): st . markdown ( chat [ 'content' ]) else : with st . chat_message ( \"assistant\" ): st . markdown ( chat [ 'content' ]) # user_input\u63a5\u6536\u7528\u6237\u7684\u8f93\u5165 if user_input := st . chat_input ( \"Chat with \u5c0f\u5eb7: \" ): # \u5728\u9875\u9762\u4e0a\u663e\u793a\u7528\u6237\u7684\u8f93\u5165 with st . chat_message ( \"user\" ): st . markdown ( user_input ) # \u5224\u65ad\u7528\u6237\u8f93\u5165\u662f\u5426\u4e3a\u95f2\u804a\u610f\u56fe user_intent = classifier ( user_input ) if user_intent in [ \"greet\" , \"goodbye\" , \"deny\" , \"isbot\" ]: # \u95f2\u804a\u610f\u56fe\u65f6\uff0c\u76f4\u63a5\u968f\u673a\u8fd4\u56de\u8bbe\u8ba1\u597d\u7684\u7b54\u6848\uff0c response = gossip_robot ( user_intent ) elif user_intent == \"accept\" : # \u6f84\u6e05\u610f\u56fe\u65f6\uff0c\u8fdb\u884c\u56de\u590d reply = load_user_dialogue_context () response = reply . get ( \"choice_answer\" ) else : # \u4e3a\u8bca\u65ad\u610f\u56fe\u65f6\uff0c\u8fd4\u56de\u56fe\u8c31\u7b54\u6848 reply = medical_robot ( user_input ) if reply [ \"slot_values\" ]: dump_user_dialogue_context ( reply ) response = reply . get ( \"replay_answer\" ) # \u5c06\u7528\u6237\u7684\u8f93\u5165\u52a0\u5165\u5386\u53f2 st . session_state . history . append ({ \"role\" : \"user\" , \"content\" : user_input }) # \u5728\u9875\u9762\u4e0a\u663e\u793a\u6a21\u578b\u751f\u6210\u7684\u56de\u590d with st . chat_message ( \"assistant\" ): st . markdown ( response ) # \u5c06\u6a21\u578b\u7684\u8f93\u51fa\u52a0\u5165\u5230\u5386\u53f2\u4fe1\u606f\u4e2d st . session_state . history . append ({ \"role\" : \"assistant\" , \"content\" : response }) # \u53ea\u4fdd\u7559\u5341\u8f6e\u5bf9\u8bdd\uff0c\u8fd9\u4e2a\u53ef\u6839\u636e\u81ea\u5df1\u7684\u60c5\u51b5\u8bbe\u5b9a if len ( st . session_state . history ) > 20 : st . session_state . history = st . session_state . history [ - 20 :] if __name__ == \"__main__\" : main () \u6f84\u6e05\u610f\u56fe\u65f6\uff0c\u4e34\u65f6\u4fdd\u5b58\u67e5\u8be2\u7ed3\u679c \u811a\u672c\uff1a./NLP/MedicalKB/utils/json_utils.py \u4ee3\u7801\u5b9e\u73b0\uff1a # -*- coding:utf-8 -*- import os import re import json LOGS_DIR = \"./logs\" def dump_user_dialogue_context ( data ): path = os . path . join ( LOGS_DIR , ' {} .json' . format ( \"user\" )) with open ( path , 'w' , encoding = 'utf8' ) as f : f . write ( json . dumps ( data , sort_keys = True , indent = 4 , separators = ( ', ' , ': ' ), ensure_ascii = False )) def load_user_dialogue_context (): path = os . path . join ( LOGS_DIR , ' {} .json' . format ( \"user\" )) if not os . path . exists ( path ): return { \"choice_answer\" : \"hi\uff0c\u673a\u5668\u4eba\u5c0f\u667a\u5f88\u9ad8\u5fc3\u4e3a\u60a8\u670d\u52a1\" , \"slot_values\" : None } else : with open ( path , 'r' , encoding = 'utf8' ) as f : data = f . read () return json . loads ( data ) \u4e0a\u7ebf\u4f7f\u7528 \u00b6 \u542f\u52a8\u670d\u52a1 \u00b6 \u542f\u52a8\u610f\u56fe\u8bc6\u522b\u6a21\u578b\u670d\u52a1\u548cNER\u6a21\u578b\u670d\u52a1 \u542f\u52a8\u547d\u4ee4\u5728\u4e0b\u9762\u4e24\u4e2a\u6587\u4ef6\u4e2d Intention_recognition.sh solt_ner.sh \u542f\u52a8\u77e5\u8bc6\u56fe\u8c31\u670d\u52a1 \u00b6 \u5982\u679c\u4f60\u6784\u5efa\u597d\u77e5\u8bc6\u56fe\u8c31\u540e\u6ca1\u6709\u5173\u95ed\u670d\u52a1\uff0c\u8fd9\u4e00\u6b65\u53ef\u4ee5\u8df3\u8fc7\uff0c\u8981\u662f\u5173\u95ed\u4e86\uff0c\u5c31\u91cd\u65b0\u542f\u52a8 \u542f\u52a8\u547d\u4ee4 \u6253\u5f00\u7ec8\u7aef\uff0c\u8f93\u5165\uff1a./neo4j start \u542f\u52a8\u4e3b\u7a0b\u5e8f \u00b6 \u4e3b\u7a0b\u5e8f\u540d\u79f0\uff1achat_app.py \u7ec8\u7aef\u8fd0\u884c\u547d\u4ee4 streamlit run chat_app.py \u8fd0\u884c\u6548\u679c\u622a\u56fe \u00b6 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3\u4e86\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u6574\u4e2a\u95ee\u7b54\u7cfb\u7edf\u7684\u4ee3\u7801\u5b9e\u73b0\u8fc7\u7a0b\uff0c\u521d\u6b65\u642d\u5efa\u4e86\u80fd\u591f\u5e94\u7528\u7684AI\u533b\u7597\u804a\u5929\u673a\u5668\u4eba\u3002","title":"7.4 \u533b\u7597KBQA\u7cfb\u7edf\u5b9e\u73b0"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#kbqa","text":"","title":"\u533b\u7597KBQA\u7cfb\u7edf\u5b9e\u73b0"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_1","text":"\u4e86\u89e3KBQA\u7cfb\u7edf\u7684\u5de5\u4f5c\u6d41\u7a0b \u638c\u63e1KBQA\u7cfb\u7edf\u4e2d\u610f\u56fe\u5206\u7c7b\u539f\u7406\u548c\u4ee3\u7801\u5b9e\u73b0 \u638c\u63e1KBQA\u7cfb\u7edf\u4e2d\u69fd\u4f4d\u586b\u5145\u539f\u7406\u548c\u4ee3\u7801\u5b9e\u73b0 \u638c\u63e1KBQA\u7cfb\u7edf\u4e2d\u5bf9\u8bdd\u7ba1\u7406\u4ee3\u7801\u7684\u5b9e\u73b0","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_2","text":"\u4e0b\u56fe\u4e3a\u672c\u6b21\u9879\u76ee\u4e2d\uff0c\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\u7684\u6d41\u7a0b\u6846\u67b6\uff08\u5176\u5c5e\u4e8e\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\uff09\uff0c\u5176\u4e3b\u8981\u73af\u8282\u4f9d\u7136\u5305\u62ec\u4e09\u90e8\u5206\uff1aNLU\uff08\u81ea\u7136\u8bed\u8a00\u7406\u89e3\uff09\uff0cDM\uff08\u5bf9\u8bdd\u7ba1\u7406\uff09\uff0cNLG\uff08\u81ea\u7136\u8bed\u8a00\u751f\u6210\uff09\u3002","title":"\u7cfb\u7edf\u67b6\u6784"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#kbqa_1","text":"NLU\u6a21\u5757 \u5b9e\u73b0\u7b2c\u4e00\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a\u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u7c7b\u7684\u610f\u56fe \u5b9e\u73b0\u7b2c\u4e8c\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a\u5305\u62ec13\u4e2a\u533b\u7597\u7c7b\u7684\u610f\u56fe \u5b9e\u73b0\u7b2c\u4e09\u4e2a\u69fd\u4f4d\u586b\u5145\uff08NER\uff09\u6a21\u578b\uff1a\u8fd9\u91cc\u76f4\u63a5\u4f7f\u7528NER\u4efb\u52a1\u6a21\u578b DM\u6a21\u5757 \u57fa\u4e8e\u4e0d\u540c\u610f\u56fe\uff0c\u8bbe\u8ba1\u5bf9\u5e94\u7684\u8bed\u4e49\u69fd \u4e3b\u903b\u8f91\u670d\u52a1\u6a21\u5757\u5b9e\u73b0 \u8bbe\u8ba1\u6574\u4e2a\u5bf9\u8bdd\u903b\u8f91","title":"KBQA\u95ee\u7b54\u7cfb\u7edf\u5b9e\u73b0\u6b65\u9aa4\uff1a"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#nlu","text":"","title":"NLU\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_3","text":"\u76ee\u7684\uff1a\u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u7c7b\u7684\u610f\u56fe \u5171\u652f\u63016\u79cd\u7c7b\u578b\uff1agreet\u3001goodbye\u3001deny\u3001isbot\u3001accept\u3001 diagnosis - \u547d\u4e2d\u524d\u56db\u4e2a\u610f\u56fe\uff0c\u90a3\u5c31\u8fdb\u5165Chi t cha t _bo t \uff0c\u4ece\u51c6\u5907\u597d\u7684\u56de\u590d\u8bed\u6599\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u6761\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5bf9\u8bdd\u7ed3\u675f\uff1b - \u547d\u4e2daccep t \uff0caccep t \u610f\u56fe\u662f\u5728\u8fdb\u884c**\u95ee\u9898\u6f84\u6e05**\u65f6\u53d1\u6325\u4f5c\u7528\uff1b - \u547d\u4e2ddiag n osis\uff0c\u8fdb\u5165Medical_bo t \uff1b \u5177\u4f53\u4ee3\u7801\uff1a \u4ee3\u7801\u4f4d\u7f6e\uff1a./MedicalKB/NLU/sklearn_Classification \u5b9e\u73b0\u6b65\u9aa4\uff1a \u67e5\u770b\u6570\u636e \u8bad\u7ec3\u6a21\u578b\u53ca\u4fdd\u5b58 \u6a21\u578b\u52a0\u8f7d\u91cd\u5229\u7528 \u67e5\u770b\u6570\u636e \u6570\u636e\u5b58\u50a8\u4f4d\u7f6e\uff1a./MedicalKB/NLU/Chatty_intention/data/train.txt \u793a\u4f8b \u4f60\u597d\u5440,greet \u518d\u89c1,goodbye \u4f60\u9519\u4e86,deny \u4f60\u662f\u8c01,isbot \u53ef\u4ee5,accept \u8fd9\u4e2a\u75c5\u53ef\u4ee5\u9884\u9632\u5417,diagnosis train.txt\u4e00\u5171\u5305\u542b\uff1a208\u884c\u6570\u636e\uff0c\u5206\u4e3a\u4e24\u5217\uff1b\u7b2c\u4e00\u5217\u4e3a\u539f\u59cb\u6587\u672c\uff1b\u7b2c\u4e8c\u5217\u4e3a\u610f\u56fe\u7c7b\u522b\u3002 \u8bad\u7ec3\u6a21\u578b\u53ca\u4fdd\u5b58 \u811a\u672c\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Chatty_intention/train.py \u5177\u4f53\u4ee3\u7801 # -*- coding:utf-8 -*- import os import pickle import random import numpy as np from sklearn import svm from sklearn.linear_model import LogisticRegression from sklearn.ensemble import GradientBoostingClassifier from sklearn.feature_extraction.text import CountVectorizer , TfidfVectorizer from sklearn.metrics import f1_score from sklearn.metrics import classification_report , confusion_matrix from sklearn.model_selection import train_test_split seed = 222 random . seed ( seed ) np . random . seed ( seed ) def load_data ( data_path ): X , y = [],[] with open ( data_path , 'r' , encoding = 'utf8' ) as f : for line in f . readlines (): text , label = line . strip () . split ( ',' ) text = ' ' . join ( list ( text . lower ())) X . append ( text ) y . append ( label ) index = np . arange ( len ( X )) np . random . shuffle ( index ) X = [ X [ i ] for i in index ] y = [ y [ i ] for i in index ] return X , y def run ( data_path , model_save_path ): X , y = load_data ( data_path ) label_set = sorted ( list ( set ( y ))) label2id = { label : idx for idx , label in enumerate ( label_set )} id2label = { idx : label for label , idx in label2id . items ()} y = [ label2id [ i ] for i in y ] label_names = sorted ( label2id . items (), key = lambda kv : kv [ 1 ], reverse = False ) target_names = [ i [ 0 ] for i in label_names ] labels = [ i [ 1 ] for i in label_names ] train_X , text_X , train_y , text_y = train_test_split ( X , y , test_size = 0.15 , random_state = 42 ) vec = TfidfVectorizer ( ngram_range = ( 1 , 3 ), min_df = 0.0 , max_df = 0.9 , analyzer = 'char' ) train_X = vec . fit_transform ( train_X ) text_X = vec . transform ( text_X ) # -------------LR-------------- LR = LogisticRegression ( C = 8 , dual = False , n_jobs = 4 , max_iter = 400 , multi_class = 'ovr' , random_state = 122 ) LR . fit ( train_X , train_y ) pred = LR . predict ( text_X ) print ( classification_report ( text_y , pred , target_names = target_names )) print ( confusion_matrix ( text_y , pred , labels = labels )) # -------------gbdt-------------- gbdt = GradientBoostingClassifier ( n_estimators = 450 , learning_rate = 0.01 , max_depth = 8 , random_state = 24 ) gbdt . fit ( train_X , train_y ) pred = gbdt . predict ( text_X ) print ( classification_report ( text_y , pred , target_names = target_names )) print ( confusion_matrix ( text_y , pred , labels = labels )) # -------------\u878d\u5408-------------- pred_prob1 = LR . predict_proba ( text_X ) pred_prob2 = gbdt . predict_proba ( text_X ) pred = np . argmax (( pred_prob1 + pred_prob2 ) / 2 , axis = 1 ) print ( classification_report ( text_y , pred , target_names = target_names )) print ( confusion_matrix ( text_y , pred , labels = labels )) pickle . dump ( id2label , open ( os . path . join ( model_save_path , 'id2label.pkl' ), 'wb' )) pickle . dump ( vec , open ( os . path . join ( model_save_path , 'vec.pkl' ), 'wb' )) pickle . dump ( LR , open ( os . path . join ( model_save_path , 'LR.pkl' ), 'wb' )) pickle . dump ( gbdt , open ( os . path . join ( model_save_path , 'gbdt.pkl' ), 'wb' )) if __name__ == '__main__' : run ( \"./data/intent_recog_data.txt\" , \"./model_file/\" ) \u6a21\u578b\u52a0\u8f7d\u91cd\u5229\u7528 \u811a\u672c\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Chatty_intention/clf_model.py \u5177\u4f53\u4ee3\u7801 # -*- coding:utf-8 -*- import os import pickle import numpy as np from sklearn import svm class CLFModel ( object ): def __init__ ( self , model_save_path ): super ( CLFModel , self ) . __init__ () self . model_save_path = model_save_path self . id2label = pickle . load ( open ( os . path . join ( self . model_save_path , 'id2label.pkl' ), 'rb' )) self . vec = pickle . load ( open ( os . path . join ( self . model_save_path , 'vec.pkl' ), 'rb' )) self . LR_clf = pickle . load ( open ( os . path . join ( self . model_save_path , 'LR.pkl' ), 'rb' )) self . gbdt_clf = pickle . load ( open ( os . path . join ( self . model_save_path , 'gbdt.pkl' ), 'rb' )) def predict ( self , text ): text = ' ' . join ( list ( text . lower ())) text = self . vec . transform ([ text ]) proba1 = self . LR_clf . predict_proba ( text ) proba2 = self . gbdt_clf . predict_proba ( text ) label = np . argmax (( proba1 + proba2 ) / 2 , axis = 1 ) return self . id2label . get ( label [ 0 ]) if __name__ == '__main__' : model = CLFModel ( './model_file' ) text = '\u4f60\u662f\u8c01' label = model . predict ( text ) print ( label )","title":"\u7b2c\u4e00\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_4","text":"\u76ee\u7684\uff1a\u5224\u65ad\u6587\u672c\u5c5e\u4e8e13\u4e2a\u533b\u7597\u7c7b\u7684\u54ea\u79cd\u533b\u7597\u7c7b\u522b\uff08\u610f\u56fe\uff09 \u5171\u652f\u630113\u79cd\u7c7b\u578b\uff08label.txt\uff09 \u5b9a\u4e49 \u75c5\u56e0 \u9884\u9632 \u4e34\u5e8a\u8868\u73b0(\u75c5\u75c7\u8868\u73b0) \u76f8\u5173\u75c5\u75c7 \u6cbb\u7597\u65b9\u6cd5 \u6240\u5c5e\u79d1\u5ba4 \u4f20\u67d3\u6027 \u6cbb\u6108\u7387 \u7981\u5fcc \u5316\u9a8c/\u4f53\u68c0\u65b9\u6848 \u6cbb\u7597\u65f6\u95f4 \u5176\u4ed6 \u5177\u4f53\u4ee3\u7801\uff1a \u4f4d\u7f6e\uff1a./NLP/MedicalKB/NLU/Medical_intention \u5b9e\u73b0\u6b65\u9aa4\uff1a \u67e5\u770b\u6570\u636e \u7f16\u5199\u914d\u7f6e\u6587\u4ef6 \u6570\u636e\u9884\u5904\u7406 \u6784\u5efa\u6a21\u578b \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\u548c\u4fdd\u5b58 \u6a21\u578b\u52a0\u8f7d\u4e0e\u5229\u7528 \u67e5\u770b\u6570\u636e \u6570\u636e\u4f4d\u7f6e\uff1a./NLP/MedicalKB/NLU/Medical_intention/data \u5728data\u6587\u4ef6\u5939\u4e2d\uff0c\u4e00\u5171\u4e09\u4e2a\u6587\u4ef6\uff0c\u5206\u522b\u4e3a\uff1atrain.csv, test.csv,label.txt train.csv\uff1a\u793a\u4f8b (test.csv\u683c\u5f0f\u4e00\u90c5) text,label_class,label_id \u80be\u7ed3\u77f3\uff0c\u8f93\u5c3f\u7ba1\u7ed3\u77f3\u4e00\u822c\u7528\u4ec0\u4e48\u836f\u5462\u800c\u4e14\u6548\u679c\u8f83\u597d\uff1f,\u6cbb\u7597\u65b9\u6cd5,5 \u5a74\u513f\u4f1a\u6709\u75d4\u75ae\u5417,\u5176\u4ed6,12 \u7761\u4e00\u89c9\u9192\u7761\u4e0d\u7740\u548b\u641e\u7684\uff1f\u73b0\u5728\u6000\u5b557\u4e2a\u6708\u4e86\uff0c\u665a\u4e0a\u7ecf\u5e38\u51c6\u70b9\u9192\uff0c\u7136\u540e\u5c31\u7761\u4e0d\u7740\u4e86\u3002,\u75c5\u56e0,1 \u8bf7\u95ee\u51fa\u8840\u6027\u8111\u6897\u6b7b\u75c7\u72b6\u662f\u4ec0\u4e48,\u4e34\u5e8a\u8868\u73b0(\u75c5\u75c7\u8868\u73b0),3 train.csv\u5171\u8ba17273\u6761\uff0c\u6bcf\u884c\u6837\u672c\u5206\u4e3a3\u5217\uff0c\u7b2c\u4e00\u5217\u4e3a\u539f\u59cb\u6587\u672c\u4e86\uff1b\u7b2c\u4e8c\u5217\u4e3a\u533b\u7597\u7c7b\u522b\u540d\u79f0\uff1b\u7b2c\u4e09\u5217\u4e3a\u7c7b\u522b\u5bf9\u5e94\u7684id\uff0c\u4e0d\u540c\u5217\u4e4b\u95f4\u7528\u9017\u53f7\u9694\u5f00 \u7f16\u5199\u914d\u7f6e\u6587\u4ef6 \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Medical_intention/intent_config.py \u5177\u4f53\u4ee3\u7801 import torch class Config (): def __init__ ( self ): self . device = \"mps\" if torch . cuda . is_available () else \"cpu\" self . train_path = './NLP/MedicalKB/NLU/Bert_IntentRe/data/train.csv' self . test_path = './NLP/MedicalKB/NLU/Bert_IntentRe/data/test.csv' self . label_path = './NLP/MedicalKB/NLU/Bert_IntentRe/data/label.txt' self . epochs = 10 self . lr = 2e-5 self . batch_size = 16 self . max_len = 60 self . num_class = 13 self . bert_path = './NLP/MedicalKB/bert-base-chinese' \u6570\u636e\u9884\u5904\u7406 \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLU/Medical_intention/utils/data_loader.py \u811a\u672c\u4e2d\u4e00\u5171\u4e09\u4e2a\u51fd\u6570\u4e00\u4e2a\u7c7b load_data(): \u5c06csv\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58 MyDataset(): \u81ea\u5b9a\u4e49Dataset\u7c7b collate_fn(): \u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5904\u7406\u6765\u81eadataset\u4e2d\u7684\u6570\u636e get_dataloader(): \u83b7\u5f97\u8bad\u7ec3\u4ee5\u53ca\u6d4b\u8bd5\u6570\u636e\u8fed\u4ee3\u5668 \u5c06csv\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58\uff1aload_data() import os import torch import pandas as pd import numpy as np from intent_config import * from torch.utils.data import Dataset , DataLoader from transformers import BertModel , BertTokenizer from transformers import BertForSequenceClassification , AutoModelForMaskedLM conf = Config () tokenizer = BertTokenizer . from_pretrained ( conf . bert_path ) def load_data ( path ): train = pd . read_csv ( path , header = 0 , sep = ',' , names = [ \"text\" , \"label_class\" , \"label_id\" ]) texts = train . text . to_list () labels = train . label_id . map ( int ) . to_list () return texts , labels \u81ea\u5b9a\u4e49Dataset\u7c7b\uff1aMyDataset() class MyDataset ( Dataset ): def __init__ ( self , data_path ): self . texts , self . labels = load_data ( data_path ) def __len__ ( self ): return len ( self . texts ) def __getitem__ ( self , item ): text = self . texts [ item ] label = self . labels [ item ] return text , label \u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u5904\u7406\u6765\u81eadataset\u4e2d\u7684\u6570\u636e:collate_fn() def collate_fn ( datas ): batch_text = [ item [ 0 ] for item in datas ] batch_label = [ item [ 1 ] for item in datas ] inputs = tokenizer . batch_encode_plus ( batch_text , padding = 'max_length' , truncation = True , max_length = conf . max_len , return_tensors = 'pt' ) input_ids = inputs [ \"input_ids\" ] . to ( conf . device ) attention_mask = inputs [ \"attention_mask\" ] . to ( conf . device ) token_type_ids = inputs [ \"token_type_ids\" ] . to ( conf . device ) labels = torch . tensor ( batch_label , dtype = torch . long , device = conf . device ) return input_ids , attention_mask , token_type_ids , labels \u83b7\u5f97\u8bad\u7ec3\u4ee5\u53ca\u6d4b\u8bd5\u6570\u636e\u8fed\u4ee3\u5668: get_dataloader() def get_dataloader (): train_dataset = MyDataset ( conf . train_path ) train_iter = DataLoader ( train_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , shuffle = True ) dev_dataset = MyDataset ( conf . train_path ) dev_iter = DataLoader ( dev_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , shuffle = True ) return train_iter , dev_iter \u6784\u5efa\u6a21\u578b \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Medical_intention/model.py \u5177\u4f53\u4ee3\u7801 import torch import torch.nn as nn from utils.data_loader import * from transformers import BertModel class MyModel ( nn . Module ): def __init__ ( self , bert_path , bert_hidden , tag_size ): super () . __init__ () self . bert = BertModel . from_pretrained ( bert_path ) self . linear = nn . Linear ( bert_hidden , tag_size ) def forward ( self , input_ids , attention_mask , token_type_ids ): pool_output = self . bert ( input_ids , attention_mask , token_type_ids ) . pooler_output output = self . linear ( pool_output ) return output if __name__ == '__main__' : train_iter , dev_iter = get_dataloader () mymodel = MyModel ( conf . bert_path , 768 , conf . num_class ) for input_ids , attention_mask , token_type_ids , labels in train_iter : output = mymodel ( input_ids , attention_mask , token_type_ids ) print ( output . shape ) break \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\u548c\u4fdd\u5b58 \u4ee3\u7801\u4f4d\u7f6e\u53ca\u540d\u79f0\uff1a./NLP/MedicalKB/NLU/Medical_intention/train.py import time import torch import torch.optim as optim from model import * from tqdm import tqdm from utils.data_loader import * def model2train (): # \u83b7\u53d6\u6570\u636e train_iter , dev_iter = get_dataloader () # \u5b9e\u4f8b\u5316\u6a21\u578b my_model = MyModel ( conf . bert_path , 768 , conf . num_class ) my_model = my_model . to ( conf . device ) # \u5b9e\u4f8b\u5316\u4f18\u5316\u5668 my_optim = optim . Adam ( my_model . parameters (), lr = conf . lr ) # \u5b9e\u4f8b\u5316\u635f\u5931\u51fd\u6570\u5bf9\u8c61 criation = nn . CrossEntropyLoss () # \u5b9a\u4e49\u6a21\u578b\u8bad\u7ec3\u53c2\u6570 my_model . train () total_num = 0 # \u8bad\u7ec3\u6837\u672c\u53c2\u6570 total_loss = 0 # \u8bad\u7ec3\u6837\u672c\u7684\u635f\u5931 total_acc = 0 # \u9884\u6d4b\u6b63\u786e\u6837\u672c\u7684\u4e2a\u6570 # \u5f00\u59cb\u8bad\u7ec3 start_time = time . time () for epoch_idx in range ( conf . epochs ): for i , ( input_ids , attention_mask , token_type_ids , labels ) in enumerate ( tqdm ( train_iter , desc = '\u8bad\u7ec3\u96c6' )): outputs = my_model ( input_ids , attention_mask , token_type_ids ) # \u8ba1\u7b97\u635f\u5931 my_loss = criation ( outputs , labels ) # \u68af\u5ea6\u6e05\u96f6 my_optim . zero_grad () # \u53cd\u5411\u4f20\u64ad my_loss . backward () # \u68af\u5ea6\u66f4\u65b0 my_optim . step () # \u6253\u5370\u8bad\u7ec3\u65e5\u5fd7 total_num = total_num + outputs . size ( 0 ) total_loss = total_loss + my_loss acc_num = sum ( torch . argmax ( outputs , dim =- 1 ) == labels ) . item () total_acc = total_acc + acc_num if i % 100 == 0 : avg_loss = total_loss / total_num avg_acc = total_acc / total_num use_time = time . time () - start_time print ( f '\u5f53\u524d\u8bad\u7ec3\u8f6e\u6b21%.d, \u5e73\u5747\u635f\u5931%.2f, \u5e73\u5747\u51c6\u786e\u7387%.2f, \u8017\u65f6%.2f' % ( epoch_idx + 1 , avg_loss , avg_acc , use_time )) torch . save ( my_model . state_dict (), './save_model/epoch_ %s .pth' % ( epoch_idx + 1 )) end_time = time . time () print ( f '\u603b\u8017\u65f6--> { end_time - start_time } ' ) if __name__ == '__main__' : model2train () \u6a21\u578b\u52a0\u8f7d\u4e0e\u5229\u7528 \u57fa\u4e8eflask\u6846\u67b6\u5c01\u88c5API\u63a5\u53e3 \u4ee3\u7801\u5b9e\u73b0 import time import torch import torch.optim as optim from model import * from intent_config import * from flask import Flask , request , jsonify app = Flask ( __name__ ) conf = Config () label_list = [ line . strip () for line in open ( './data/label.txt' , 'r' , encoding = 'utf8' )] id2label = { idx : label for idx , label in enumerate ( label_list )} print ( f 'id2label--\u300b { id2label } ' ) tokenizer = BertTokenizer . from_pretrained ( conf . bert_path ) model = MyModel ( bert_path = conf . bert_path , bert_hidden = 768 , tag_size = conf . num_class ) model . load_state_dict ( torch . load ( './save_model/epoch_10.pth' )) model = model . to ( conf . device ) def model2predict ( sample , model ): # \u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406 inputs = tokenizer . encode_plus ( sample , padding = 'max_length' , truncation = True , max_length = 60 , return_tensors = 'pt' ) input_ids = inputs [ \"input_ids\" ] . to ( conf . device ) attention_mask = inputs [ \"attention_mask\" ] . to ( conf . device ) token_type_ids = inputs [ \"token_type_ids\" ] . to ( conf . device ) # \u5c06\u6570\u636e\u9001\u5165\u6a21\u578b model . eval () with torch . no_grad (): logits = model ( input_ids , attention_mask , token_type_ids ) logits = torch . softmax ( logits , dim =- 1 ) out = torch . argmax ( logits , dim =- 1 ) . item () value , index = torch . topk ( logits , k = 1 ) return { \"name\" : id2label [ out ], \"confidence\" : round ( float ( value . item ()), 3 )} @app . route ( \"/service/api/bert_intent_recognize\" , methods = [ \"GET\" , \"POST\" ]) def bert_intent_recognize (): data = { \"sucess\" : 0 } result = None param = request . get_json () text = param [ \"text\" ] try : result = model2predict ( text , model ) data [ \"result\" ] = result data [ \"sucess\" ] = 1 except : print ( '\u6a21\u578b\u8c03\u7528\u6709\u8bef' ) return jsonify ( data ) if __name__ == '__main__' : app . run ( host = '0.0.0.0' , port = 6001 ) \u6d4b\u8bd5API\u63a5\u53e3 \u4ee3\u7801\u5b9e\u73b0 import requests import json def intent_classifier ( text ): url = 'http://127.0.0.1:6001/service/api/bert_intent_recognize' data = { \"text\" : text } headers = { 'Content-Type' : 'application/json; charset=utf8' } reponse = requests . post ( url , data = json . dumps ( data ), headers = headers ) if reponse . status_code == 200 : reponse = json . loads ( reponse . text ) return reponse [ 'result' ] else : return - 1 if __name__ == '__main__' : result = intent_classifier ( text = \"\u4e0d\u540c\u7c7b\u578b\u7684\u808c\u65e0\u529b\u75c7\u72b6\u8868\u73b0\u6709\u4ec0\u4e48\u4e0d\u540c\uff1f\" ) print ( f 'result--\u300b { result } ' )","title":"\u7b2c\u4e8c\u4e2a\u610f\u56fe\u8bc6\u522b\u6a21\u578b\uff1a"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#ner","text":"\u69fd\u4f4d\u586b\u5145\uff08NER\uff09\u6a21\u578b\uff0c\u4f9d\u7136\u57fa\u4e8eBiLSTM+CRF\u7ed3\u6784\uff0c\u4e0d\u540c\u4e8e\u4fe1\u606f\u62bd\u53d6\u4efb\u52a1\u4e2d\u7684NER, \u6570\u636e\u96c6\u8fdb\u884c\u4e86\u66ff\u6362\uff0c\u5e76\u4e14\u652f\u63017\u79cd\u5b9e\u4f53\u7c7b\u578b \u672c\u6b21\u4efb\u52a1\uff0c\u4f5c\u4e3a\u9879\u76ee\u5b9e\u8df5\uff08\u7531\u5b66\u5458\u81ea\u5df1\u52a8\u624b\u5b9e\u8df5\u5b8c\u6210\uff09","title":"\u7b2c\u4e09\u4e2a\u69fd\u4f4d\u586b\u5145\uff08NER\uff09\u6a21\u578b"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#dm","text":"\u57fa\u4e8e\u4e0d\u540c\u7684\u533b\u7597\u610f\u56fe\uff0c\u6211\u4eec\u5b9a\u4e49\u4e0d\u540c\u7684\u8bed\u610f\u69fd \u5b9a\u4e49config\u6587\u4ef6\uff0c\u4f4d\u7f6e\uff1a.NLP/MedicalKB/config.py \u5177\u4f53\u4ee3\u7801\u5b9e\u73b0\uff1a # -*- coding:utf-8 -*- # \u8bed\u610f\u69fd semantic_slot = { \"\u5b9a\u4e49\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.desc\" , \"reply_template\" : \"' {Disease} ' \u662f\u8fd9\u6837\u7684\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f ' {Disease} ' \u7684\u5b9a\u4e49\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u5f88\u62b1\u6b49\u6ca1\u6709\u7406\u89e3\u4f60\u7684\u610f\u601d\u5462~\" }, \"\u75c5\u56e0\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cause\" , \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u539f\u56e0\u662f\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u539f\u56e0\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u9884\u9632\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.prevent\" , \"reply_template\" : \"\u5173\u4e8e ' {Disease} ' \u75be\u75c5\u60a8\u53ef\u4ee5\u8fd9\u6837\u9884\u9632\uff1a \\n \" , \"ask_template\" : \"\u8bf7\u95ee\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u9884\u9632\u63aa\u65bd\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u989d~\u4f3c\u4e4e\u6709\u70b9\u4e0d\u7406\u89e3\u4f60\u8bf4\u7684\u662f\u5565\u5462~\" }, \"\u4e34\u5e8a\u8868\u73b0(\u75c5\u75c7\u8868\u73b0)\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:has_symptom]->(q:\u75c7\u72b6) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u75c5\u75c7\u8868\u73b0\u4e00\u822c\u662f\u8fd9\u6837\u7684\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u75c7\u72b6\u8868\u73b0\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u4eba\u7c7b\u7684\u8bed\u8a00\u592a\u96be\u4e86\uff01\uff01\" }, \"\u76f8\u5173\u75c5\u75c7\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:acompany_with]->(q:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u5177\u6709\u4ee5\u4e0b\u5e76\u53d1\u75be\u75c5\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u5e76\u53d1\u75be\u75c5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u4eba\u7c7b\u7684\u8bed\u8a00\u592a\u96be\u4e86\uff01\uff01~\" }, \"\u6cbb\u7597\u65b9\u6cd5\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : [ \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cure_way\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_drug]->(q) WHERE p.name=' {Disease} ' RETURN q.name\" , \"MATCH(p:\u75be\u75c5)-[r:recommand_recipes]->(q) WHERE p.name=' {Disease} ' RETURN q.name\" ], \"reply_template\" : \"' {Disease} ' \u75be\u75c5\u7684\u6cbb\u7597\u65b9\u5f0f\u3001\u53ef\u7528\u7684\u836f\u7269\u3001\u63a8\u8350\u83dc\u80b4\u6709\uff1a \\n \" , \"ask_template\" : \"\u60a8\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u7684\u6cbb\u7597\u65b9\u6cd5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u6ca1\u6709\u7406\u89e3\u60a8\u8bf4\u7684\u610f\u601d\u54e6~\" }, \"\u6240\u5c5e\u79d1\u5ba4\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:cure_department]->(q:\u79d1\u5ba4) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"\u5f97\u4e86 ' {Disease} ' \u53ef\u4ee5\u6302\u8fd9\u4e2a\u79d1\u5ba4\u54e6\uff1a \\n \" , \"ask_template\" : \"\u60a8\u60f3\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u8981\u6302\u4ec0\u4e48\u79d1\u5ba4\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u4f20\u67d3\u6027\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.easy_get\" , \"reply_template\" : \"' {Disease} ' \u8f83\u4e3a\u5bb9\u6613\u611f\u67d3\u8fd9\u4e9b\u4eba\u7fa4\uff1a \\n \" , \"ask_template\" : \"\u60a8\u60f3\u95ee\u7684\u662f\u75be\u75c5 ' {Disease} ' \u4f1a\u611f\u67d3\u54ea\u4e9b\u4eba\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u6ca1\u6709\u7406\u89e3\u60a8\u8bf4\u7684\u610f\u601d\u54e6~\" }, \"\u6cbb\u6108\u7387\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cured_prob\" , \"reply_template\" : \"\u5f97\u4e86' {Disease} ' \u7684\u6cbb\u6108\u7387\u4e3a\uff1a\" , \"ask_template\" : \"\u60a8\u60f3\u95ee ' {Disease} ' \u7684\u6cbb\u6108\u7387\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u6cbb\u7597\u65f6\u95f4\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5) WHERE p.name=' {Disease} ' RETURN p.cure_lasttime\" , \"reply_template\" : \"\u75be\u75c5 ' {Disease} ' \u7684\u6cbb\u7597\u5468\u671f\u4e3a\uff1a\" , \"ask_template\" : \"\u60a8\u60f3\u95ee ' {Disease} ' \u7684\u6cbb\u7597\u5468\u671f\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u5f88\u62b1\u6b49\u6ca1\u6709\u7406\u89e3\u4f60\u7684\u610f\u601d\u5462~\" }, \"\u5316\u9a8c/\u4f53\u68c0\u65b9\u6848\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:need_check]->(q:\u68c0\u67e5) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"\u5f97\u4e86 ' {Disease} ' \u9700\u8981\u505a\u4ee5\u4e0b\u68c0\u67e5\uff1a \\n \" , \"ask_template\" : \"\u60a8\u662f\u60f3\u95ee ' {Disease} ' \u8981\u505a\u4ec0\u4e48\u68c0\u67e5\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u60a8\u8bf4\u7684\u6211\u6709\u70b9\u4e0d\u660e\u767d\uff0c\u60a8\u53ef\u4ee5\u6362\u4e2a\u95ee\u6cd5\u95ee\u6211\u54e6~\" }, \"\u7981\u5fcc\" :{ \"slot_list\" : [ \"Disease\" ], \"slot_values\" : None , \"cql_template\" : \"MATCH(p:\u75be\u75c5)-[r:not_eat]->(q:\u98df\u7269) WHERE p.name=' {Disease} ' RETURN q.name\" , \"reply_template\" : \"\u5f97\u4e86 ' {Disease} ' \u5207\u8bb0\u4e0d\u8981\u5403\u8fd9\u4e9b\u98df\u7269\u54e6\uff1a \\n \" , \"ask_template\" : \"\u60a8\u662f\u60f3\u95ee ' {Disease} ' \u4e0d\u53ef\u4ee5\u5403\u7684\u98df\u7269\u662f\u4ec0\u4e48\u5417\uff1f\" , \"intent_strategy\" : \"\" , \"deny_response\" : \"\u989d~\u4f3c\u4e4e\u6709\u70b9\u4e0d\u7406\u89e3\u4f60\u8bf4\u7684\u662f\u5565\u5462~~\" }, \"unrecognized\" :{ \"slot_values\" : None , \"replay_answer\" : \"\u975e\u5e38\u62b1\u6b49\uff0c\u6211\u8fd8\u4e0d\u77e5\u9053\u5982\u4f55\u56de\u7b54\u60a8\uff0c\u6211\u6b63\u5728\u52aa\u529b\u5b66\u4e60\u4e2d~\" , } } intent_threshold_config = { \"accept\" : 0.8 , \"deny\" : 0.4 } default_answer = \"\"\"\u5f88\u62b1\u6b49\u6211\u8fd8\u4e0d\u77e5\u9053\u56de\u7b54\u4f60\u8fd9\u4e2a\u95ee\u9898 \\n \u4f60\u53ef\u4ee5\u95ee\u6211\u4e00\u4e9b\u6709\u5173\u75be\u75c5\u7684 \\n \u5b9a\u4e49\u3001\u539f\u56e0\u3001\u6cbb\u7597\u65b9\u6cd5\u3001\u6ce8\u610f\u4e8b\u9879\u3001\u6302\u4ec0\u4e48\u79d1\u5ba4 \\n \u9884\u9632\u3001\u7981\u5fcc\u7b49\u76f8\u5173\u95ee\u9898\u54e6~\"\"\" gossip_corpus = { \"greet\" :[ \"hi\" , \"\u4f60\u597d\u5440\" , \"\u6211\u662f\u667a\u80fd\u533b\u7597\u8bca\u65ad\u673a\u5668\u4eba\uff0c\u6709\u4ec0\u4e48\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5417\" , \"hi\uff0c\u4f60\u597d\uff0c\u4f60\u53ef\u4ee5\u53eb\u6211\u5c0f\u5eb7\" , \"\u4f60\u597d\uff0c\u4f60\u53ef\u4ee5\u95ee\u6211\u4e00\u4e9b\u5173\u4e8e\u75be\u75c5\u8bca\u65ad\u7684\u95ee\u9898\u54e6\" ], \"goodbye\" :[ \"\u518d\u89c1\uff0c\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\" , \"bye\" , \"\u518d\u89c1\uff0c\u611f\u8c22\u4f7f\u7528\u6211\u7684\u670d\u52a1\" , \"\u518d\u89c1\u5566\uff0c\u795d\u4f60\u5065\u5eb7\" ], \"deny\" :[ \"\u5f88\u62b1\u6b49\u6ca1\u5e2e\u5230\u60a8\" , \"I am sorry\" , \"\u90a3\u60a8\u53ef\u4ee5\u8bd5\u7740\u95ee\u6211\u5176\u4ed6\u95ee\u9898\u54df\" ], \"isbot\" :[ \"\u6211\u662f\u5c0f\u5eb7\uff0c\u4f60\u7684\u667a\u80fd\u5065\u5eb7\u987e\u95ee\" , \"\u4f60\u53ef\u4ee5\u53eb\u6211\u5c0f\u5eb7\u54e6~\" , \"\u6211\u662f\u533b\u7597\u8bca\u65ad\u673a\u5668\u4eba\u5c0f\u5eb7\" ], }","title":"DM\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_5","text":"","title":"\u4e3b\u903b\u8f91\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#modules","text":"DST\u6a21\u5757+PL\u6a21\u5757\u7ec4\u6210\u4e86\u4efb\u52a1\u578b\u5bf9\u8bdd\u673a\u5668\u4eba\u4e2d\u7684\u5bf9\u8bdd\u7ba1\u7406(DM)\u6a21\u5757\uff0c\u5728\u8fd9\u4e2a\u9879\u76ee\u4e2d\u754c\u9650\u5e76\u4e0d\u662f\u7279\u522b\u660e\u663e\uff0c\u4e3b\u8981\u5b9e\u73b0\u903b\u8f91\u90fd\u5728 modules.py \u6587\u4ef6\u7684 semantic_parser \u51fd\u6570\u4e2d\u3002 modules\u811a\u672c\u4f4d\u7f6e\uff1a./NLP/MedicalKB/modules.py\uff1b\u5176\u4e2d\u5171\u5305\u542b8\u4e2a\u51fd\u6570\u3002 \u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305\uff1a # -*- coding:utf-8 -*- import os import re import json import requests import random from py2neo import Graph from NLU.Chatty_intention.clf_model import CLFModel from config import * graph = Graph ( \"http://localhost:7474\" , auth = ( \"neo4j\" , \"12345\" )) clf_model = CLFModel ( './NLU/Chatty_intention/model_file/' ) \u7b2c\u4e00\u4e2a\u51fd\u6570: classifier() \u4f5c\u7528: \u95f2\u804a\u610f\u56fe\u8bc6\u522b\uff08\u7b2c\u4e00\u4e2a\u610f\u56fe\u5206\u7c7b\u6a21\u578b\u5e94\u7528\uff09 \u4ee3\u7801\uff1a def classifier ( text ): \"\"\" \u5224\u65ad\u662f\u5426\u662f\u95f2\u804a\u610f\u56fe\uff0c\u4ee5\u53ca\u662f\u4ec0\u4e48\u7c7b\u578b\u95f2\u804a \"\"\" return clf_model . predict ( text ) \u7b2c\u4e8c\u4e2a\u51fd\u6570: intent_classifier() \u4f5c\u7528\uff1a\u533b\u7597\u610f\u56fe\u8bc6\u522b\uff08\u7b2c\u4e8c\u4e2a\u610f\u56fe\u5206\u7c7b\u6a21\u578b\u5e94\u7528\uff09\uff0c\u5982\u679c\u4e0d\u80fd\u6b63\u5e38\u9884\u6d4b\u7ed3\u679c\uff0c\u8fd4\u56de\u503c\u9ed8\u8ba4\u4e3a-1 \u4ee3\u7801\uff1a def intent_classifier ( text ): url = 'http://127.0.0.1:6001/service/api/bert_intent_recognize' data = { \"text\" : text } headers = { 'Content-Type' : 'application/json; charset=utf8' } reponse = requests . post ( url , data = json . dumps ( data ), headers = headers ) if reponse . status_code == 200 : reponse = json . loads ( reponse . text ) return reponse [ 'result' ] else : return - 1 \u7b2c\u4e09\u4e2a\u51fd\u6570: slot_recognizer() \u4f5c\u7528\uff1a\u69fd\u4f4d\u586b\u5145\uff0c\u5982\u679c\u4e0d\u80fd\u6b63\u5e38\u9884\u6d4b\u7ed3\u679c\uff0c\u8fd4\u56de\u503c\u9ed8\u8ba4\u4e3a-1 \u4ee3\u7801\uff1a def slot_recognizer ( sample ): url = 'http://127.0.0.1:6002/service/api/medical_ner' data = { \"text\" : sample } headers = { 'Content-Type' : 'application/json;charset=utf8' } reponse = requests . post ( url , data = json . dumps ( data ), headers = headers ) if reponse . status_code == 200 : reponse = json . loads ( reponse . text ) # print(f'reponse--\u300b{reponse}') return reponse [ 'result' ] else : return - 1 \u7b2c\u56db\u4e2a\u51fd\u6570\uff1a gossip_robot() \u4f5c\u7528\uff1a\u5982\u679c\u662f\u7528\u6237\u5c5e\u4e8e\u95f2\u804a\u610f\u56fe\uff0c\u4ece\u51c6\u5907\u597d\u7684\u56de\u590d\u8bed\u6599\u4e2d\u968f\u673a\u62bd\u53d6\u4e00\u6761\u8fd4\u56de\u7ed9\u7528\u6237\uff0c\u5bf9\u8bdd\u7ed3\u675f \u4ee3\u7801\uff1a def gossip_robot ( intent ): return random . choice ( gossip_corpus . get ( intent ) ) \u7b2c\u4e94\u4e2a\u51fd\u6570\uff1amedical_robot() \u4f5c\u7528\uff1a\u5982\u679c\u7528\u6237\u610f\u56fe\u4e0d\u5c5e\u4e8e\u95f2\u804a\uff0c\u5219\u4f1a\u8fdb\u884c\u7b2c\u4e8c\u6b21\u533b\u7597\u610f\u56fe\u8bc6\u522b\uff0c\u5e76\u8fdb\u884c\u8bca\u65ad\u56de\u7b54 \u4ee3\u7801\uff1a def medical_robot ( text ): \"\"\" \u5982\u679c\u786e\u5b9a\u662f\u8bca\u65ad\u610f\u56fe\u5219\u4f7f\u7528\u8be5\u65b9\u6cd5\u8fdb\u884c\u8bca\u65ad\u95ee\u7b54 \"\"\" semantic_slot = semantic_parser ( text ) answer = get_answer ( semantic_slot ) return answer \u7b2c\u516d\u4e2a\u51fd\u6570\uff1asemantic_parser(text) \u4f5c\u7528\uff1a\u5bf9\u6587\u672c\u89e3\u6790\uff0c\u586b\u69fd\uff0c\u5e76\u6839\u636e\u610f\u56fe\u5f3a\u5ea6\u6765\u786e\u8ba4\u56de\u590d\u7b56\u7565 \u4ee3\u7801\uff1a def semantic_parser ( text ): \"\"\" \u5bf9\u6587\u672c\u8fdb\u884c\u89e3\u6790 intent = {\"name\":str,\"confidence\":float} \"\"\" # \u533b\u7597\u610f\u56fe\u8bc6\u522b intent_rst = intent_classifier ( text ) # \u69fd\u4f4d\u586b\u5145NER\u8bc6\u522b slot_rst = slot_recognizer ( text ) if intent_rst == - 1 or slot_rst == - 1 or len ( slot_rst ) == 0 or intent_rst . get ( \"name\" ) == \"\u5176\u4ed6\" : return semantic_slot . get ( \"unrecognized\" ) slot_info = semantic_slot . get ( intent_rst . get ( \"name\" )) # \u586b\u69fd slots = slot_info . get ( \"slot_list\" ) slot_values = {} for key , value in slot_rst . items (): if value . lower () == slots [ 0 ] . lower (): slot_values [ slots [ 0 ]] = key slot_info [ \"slot_values\" ] = slot_values # \u6839\u636e\u610f\u56fe\u5f3a\u5ea6\u6765\u786e\u8ba4\u56de\u590d\u7b56\u7565 conf = intent_rst . get ( \"confidence\" ) if conf >= intent_threshold_config [ \"accept\" ]: slot_info [ \"intent_strategy\" ] = \"accept\" elif conf >= intent_threshold_config [ \"deny\" ]: slot_info [ \"intent_strategy\" ] = \"clarify\" else : slot_info [ \"intent_strategy\" ] = \"deny\" return slot_info \u7b2c\u4e03\u4e2a\u51fd\u6570\uff1aget_answer() \u4f5c\u7528\uff1a\u6839\u636e\u8bed\u4e49\u69fd\u83b7\u53d6\u7b54\u6848\u56de\u590d \u4ee3\u7801\uff1a def get_answer ( slot_info ): \"\"\" \u6839\u636e\u8bed\u4e49\u69fd\u83b7\u53d6\u7b54\u6848\u56de\u590d \"\"\" cql_template = slot_info . get ( \"cql_template\" ) reply_template = slot_info . get ( \"reply_template\" ) ask_template = slot_info . get ( \"ask_template\" ) slot_values = slot_info . get ( \"slot_values\" ) strategy = slot_info . get ( \"intent_strategy\" ) print ( f '11slot_info--> { slot_info } ' ) if not slot_values : return slot_info if strategy == \"accept\" : cql = [] if isinstance ( cql_template , list ): for cqlt in cql_template : cql . append ( cqlt . format ( ** slot_values )) else : cql = cql_template . format ( ** slot_values ) answer = neo4j_searcher ( cql ) if not answer : slot_info [ \"replay_answer\" ] = \"\u5514~\u6211\u88c5\u6ee1\u77e5\u8bc6\u7684\u5927\u8111\u6b64\u523b\u5f88\u8d2b\u7620\" else : pattern = reply_template . format ( ** slot_values ) slot_info [ \"replay_answer\" ] = pattern + answer elif strategy == \"clarify\" : print ( f '\u8fdb\u5165clarify' ) # \u6f84\u6e05\u7528\u6237\u662f\u5426\u95ee\u8be5\u95ee\u9898 pattern = ask_template . format ( ** slot_values ) slot_info [ \"replay_answer\" ] = pattern # \u5f97\u5230\u80af\u5b9a\u610f\u56fe\u4e4b\u540e\u9700\u8981\u7ed9\u7528\u6237\u56de\u590d\u7684\u7b54\u6848 cql = [] if isinstance ( cql_template , list ): for cqlt in cql_template : cql . append ( cqlt . format ( ** slot_values )) else : cql = cql_template . format ( ** slot_values ) print ( f 'cql--\u300b { cql } ' ) answer = neo4j_searcher ( cql ) if not answer : slot_info [ \"replay_answer\" ] = \"\u5514~\u6211\u88c5\u6ee1\u77e5\u8bc6\u7684\u5927\u8111\u6b64\u523b\u5f88\u8d2b\u7620\" else : pattern = reply_template . format ( ** slot_values ) slot_info [ \"choice_answer\" ] = pattern + answer elif strategy == \"deny\" : slot_info [ \"replay_answer\" ] = slot_info . get ( \"deny_response\" ) return slot_info \u7b2c\u516b\u4e2a\u51fd\u6570\uff1aneo4j_searcher() \u4f5c\u7528\uff1a\u67e5\u8be2Neo4j\u6570\u636e\u5e93\uff0c\u5f97\u5230\u8fd4\u56de\u7ed3\u679c \u4ee3\u7801\uff1a def neo4j_searcher ( cql_list ): result = \"\" if isinstance ( cql_list , list ): for cql in cql_list : rst = [] data = graph . run ( cql ) . data () if not data : continue for d in data : d = list ( d . values ()) if isinstance ( d [ 0 ], list ): rst . extend ( d [ 0 ]) else : rst . extend ( d ) data = \"\u3001\" . join ([ str ( i ) for i in rst ]) result += data + \" \\n \" else : data = graph . run ( cql_list ) . data () if not data : return result rst = [] for d in data : d = list ( d . values ()) if isinstance ( d [ 0 ], list ): rst . extend ( d [ 0 ]) else : rst . extend ( d ) data = \"\u3001\" . join ([ str ( i ) for i in rst ]) result += data return result","title":"modules\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#chat_app","text":"chat_app\u6a21\u5757\u4e3a\u4e3b\u7a0b\u5e8f\u4ee3\u7801\uff0c\u5728\u8be5\u811a\u672c\u4e2d\u5b9e\u73b0\u4e86\u6574\u4e2a\u903b\u8f91\u5bf9\u8bdd\u4ee3\u7801\uff0c\u5e76\u501f\u52a9streamlit\u5de5\u5177\uff0c\u5b9e\u73b0web\u754c\u9762\u7684\u95ee\u7b54\u804a\u5929\u4ea4\u4e92\u3002 \u6574\u4e2achat_app\u4ee3\u7801\u903b\u8f91\uff1a \u95ee\u7b54\u6d41\u7a0b\uff1a 1\u3001\u7528\u6237\u8f93\u5165\u6587\u672c 2\u3001\u5bf9\u6587\u672c\u8fdb\u884c\u89e3\u6790\u5f97\u5230\u8bed\u4e49\u7ed3\u6784\u4fe1\u606f 3\u3001\u6839\u636e\u8bed\u4e49\u7ed3\u6784\u53bb\u67e5\u627e\u77e5\u8bc6\uff0c\u8fd4\u56de\u7ed9\u7528\u6237 \u5bf9\u6587\u672c\u8fdb\u884c\u89e3\u6790\u7684\u6d41\u7a0b\uff1a 1\u3001\u610f\u56fe\u7406\u89e3 \u95f2\u804a\u610f\u56fe\uff1a\u95ee\u597d\u3001\u79bb\u5f00\u3001\u80af\u5b9a\u3001\u62d2\u7edd \u95ee\u597d\u3001\u79bb\u5f00\uff1a\u9700\u8981\u6709\u56de\u590d\u52a8\u4f5c \u80af\u5b9a\u3001\u62d2\u7edd\uff1a\u9700\u8981\u6267\u884c\u52a8\u4f5c \u8bca\u65ad\u610f\u56fe\uff1a \u5f53\u610f\u56fe\u7f6e\u4fe1\u5ea6\u8fbe\u5230\u4e00\u5b9a\u9608\u503c\u65f6(>=0.8)\uff0c\u53ef\u4ee5\u67e5\u8be2\u8be5\u610f\u56fe\u4e0b\u7684\u7b54\u6848 \u5f53\u610f\u56fe\u7f6e\u4fe1\u5ea6\u8f83\u4f4e\u65f6(0.4~0.8)\uff0c\u6309\u6700\u9ad8\u7f6e\u4fe1\u5ea6\u7684\u610f\u56fe\u67e5\u627e\u7b54\u6848\uff0c\u8be2\u95ee\u7528\u6237\u662f\u5426\u95ee\u7684\u8fd9\u4e2a\u95ee\u9898 \u5f53\u610f\u56fe\u7f6e\u4fe1\u5ea6\u66f4\u4f4e\u65f6(<0.4)\uff0c\u62d2\u7edd\u56de\u7b54 2\u3001\u69fd\u4f4d\u586b\u5145 \u5982\u679c\u8f93\u5165\u662f\u4e00\u4e2a\u8bca\u65ad\u610f\u56fe\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8bed\u4e49\u69fd\u7684\u586b\u5145\uff0c\u5f97\u5230\u7ed3\u6784\u5316\u8bed\u4e49 \u4ee3\u7801\u5b9e\u73b0 # -*- coding:utf-8 -*- import streamlit as st from modules import gossip_robot , medical_robot , classifier from utils.json_utils import dump_user_dialogue_context , load_user_dialogue_context def main (): st . title ( \"\u6b22\u8fce\u8bbf\u95ee\u5c0f\u5eb7\u533b\u7597\u667a\u80fd\u95ee\u7b54\u7cfb\u7edf\" ) # \u521d\u59cb\u5316\u4f1a\u8bdd\u72b6\u6001\uff0c\u5982\u679c\u6ca1\u6709\u5219\u521b\u5efa if 'history' not in st . session_state : st . session_state . history = [] # \u663e\u793a\u5bf9\u8bdd\u5386\u53f2 for chat in st . session_state . history : if chat [ 'role' ] == 'user' : with st . chat_message ( \"user\" ): st . markdown ( chat [ 'content' ]) else : with st . chat_message ( \"assistant\" ): st . markdown ( chat [ 'content' ]) # user_input\u63a5\u6536\u7528\u6237\u7684\u8f93\u5165 if user_input := st . chat_input ( \"Chat with \u5c0f\u5eb7: \" ): # \u5728\u9875\u9762\u4e0a\u663e\u793a\u7528\u6237\u7684\u8f93\u5165 with st . chat_message ( \"user\" ): st . markdown ( user_input ) # \u5224\u65ad\u7528\u6237\u8f93\u5165\u662f\u5426\u4e3a\u95f2\u804a\u610f\u56fe user_intent = classifier ( user_input ) if user_intent in [ \"greet\" , \"goodbye\" , \"deny\" , \"isbot\" ]: # \u95f2\u804a\u610f\u56fe\u65f6\uff0c\u76f4\u63a5\u968f\u673a\u8fd4\u56de\u8bbe\u8ba1\u597d\u7684\u7b54\u6848\uff0c response = gossip_robot ( user_intent ) elif user_intent == \"accept\" : # \u6f84\u6e05\u610f\u56fe\u65f6\uff0c\u8fdb\u884c\u56de\u590d reply = load_user_dialogue_context () response = reply . get ( \"choice_answer\" ) else : # \u4e3a\u8bca\u65ad\u610f\u56fe\u65f6\uff0c\u8fd4\u56de\u56fe\u8c31\u7b54\u6848 reply = medical_robot ( user_input ) if reply [ \"slot_values\" ]: dump_user_dialogue_context ( reply ) response = reply . get ( \"replay_answer\" ) # \u5c06\u7528\u6237\u7684\u8f93\u5165\u52a0\u5165\u5386\u53f2 st . session_state . history . append ({ \"role\" : \"user\" , \"content\" : user_input }) # \u5728\u9875\u9762\u4e0a\u663e\u793a\u6a21\u578b\u751f\u6210\u7684\u56de\u590d with st . chat_message ( \"assistant\" ): st . markdown ( response ) # \u5c06\u6a21\u578b\u7684\u8f93\u51fa\u52a0\u5165\u5230\u5386\u53f2\u4fe1\u606f\u4e2d st . session_state . history . append ({ \"role\" : \"assistant\" , \"content\" : response }) # \u53ea\u4fdd\u7559\u5341\u8f6e\u5bf9\u8bdd\uff0c\u8fd9\u4e2a\u53ef\u6839\u636e\u81ea\u5df1\u7684\u60c5\u51b5\u8bbe\u5b9a if len ( st . session_state . history ) > 20 : st . session_state . history = st . session_state . history [ - 20 :] if __name__ == \"__main__\" : main () \u6f84\u6e05\u610f\u56fe\u65f6\uff0c\u4e34\u65f6\u4fdd\u5b58\u67e5\u8be2\u7ed3\u679c \u811a\u672c\uff1a./NLP/MedicalKB/utils/json_utils.py \u4ee3\u7801\u5b9e\u73b0\uff1a # -*- coding:utf-8 -*- import os import re import json LOGS_DIR = \"./logs\" def dump_user_dialogue_context ( data ): path = os . path . join ( LOGS_DIR , ' {} .json' . format ( \"user\" )) with open ( path , 'w' , encoding = 'utf8' ) as f : f . write ( json . dumps ( data , sort_keys = True , indent = 4 , separators = ( ', ' , ': ' ), ensure_ascii = False )) def load_user_dialogue_context (): path = os . path . join ( LOGS_DIR , ' {} .json' . format ( \"user\" )) if not os . path . exists ( path ): return { \"choice_answer\" : \"hi\uff0c\u673a\u5668\u4eba\u5c0f\u667a\u5f88\u9ad8\u5fc3\u4e3a\u60a8\u670d\u52a1\" , \"slot_values\" : None } else : with open ( path , 'r' , encoding = 'utf8' ) as f : data = f . read () return json . loads ( data )","title":"chat_app\u6a21\u5757"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_6","text":"","title":"\u4e0a\u7ebf\u4f7f\u7528"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_7","text":"\u542f\u52a8\u610f\u56fe\u8bc6\u522b\u6a21\u578b\u670d\u52a1\u548cNER\u6a21\u578b\u670d\u52a1 \u542f\u52a8\u547d\u4ee4\u5728\u4e0b\u9762\u4e24\u4e2a\u6587\u4ef6\u4e2d Intention_recognition.sh solt_ner.sh","title":"\u542f\u52a8\u670d\u52a1"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_8","text":"\u5982\u679c\u4f60\u6784\u5efa\u597d\u77e5\u8bc6\u56fe\u8c31\u540e\u6ca1\u6709\u5173\u95ed\u670d\u52a1\uff0c\u8fd9\u4e00\u6b65\u53ef\u4ee5\u8df3\u8fc7\uff0c\u8981\u662f\u5173\u95ed\u4e86\uff0c\u5c31\u91cd\u65b0\u542f\u52a8 \u542f\u52a8\u547d\u4ee4 \u6253\u5f00\u7ec8\u7aef\uff0c\u8f93\u5165\uff1a./neo4j start","title":"\u542f\u52a8\u77e5\u8bc6\u56fe\u8c31\u670d\u52a1"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_9","text":"\u4e3b\u7a0b\u5e8f\u540d\u79f0\uff1achat_app.py \u7ec8\u7aef\u8fd0\u884c\u547d\u4ee4 streamlit run chat_app.py","title":"\u542f\u52a8\u4e3b\u7a0b\u5e8f"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_10","text":"","title":"\u8fd0\u884c\u6548\u679c\u622a\u56fe"},{"location":"%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E5%BA%94%E7%94%A8/04-%E5%8C%BB%E7%96%97KBQA%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0.html#_11","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3\u4e86\u57fa\u4e8e\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u5b9e\u73b0\u6574\u4e2a\u95ee\u7b54\u7cfb\u7edf\u7684\u4ee3\u7801\u5b9e\u73b0\u8fc7\u7a0b\uff0c\u521d\u6b65\u642d\u5efa\u4e86\u80fd\u591f\u5e94\u7528\u7684AI\u533b\u7597\u804a\u5929\u673a\u5668\u4eba\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html","text":"\u547d\u540d\u5b9e\u4f53\u8bc6\u522b \u00b6 1 \u4ec0\u4e48\u662fNER \u00b6 \u5b9e\u4f53\u662f\u6587\u672c\u4e4b\u4e2d\u627f\u8f7d\u4fe1\u606f\u7684\u8bed\u4e49\u5355\u5143\uff0c\u662f\u6587\u672c\u8bed\u4e49\u7406\u89e3\u7684\u57fa\u7840\uff0c\u50cf\u4e00\u53e5\u8bdd\u4e4b\u4e2d\u7684\u4eba\u540d\u5730\u540d\u5c31\u662f\u4e00\u79cd\u5b9e\u4f53\u3002 \u5b9e\u4f53\u62bd\u53d6\uff0c\u53c8\u79f0\u4e3a\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff08named entity recognition\uff0cNER\uff09\uff0c\u6307\u7684\u662f\u4ece\u6587\u672c\u4e4b\u4e2d\u62bd\u53d6\u51fa\u547d\u540d\u6027\u5b9e\u4f53\uff0c\u5e76\u628a\u8fd9\u4e9b\u5b9e\u4f53\u5212\u5206\u5230\u6307\u5b9a\u7684\u7c7b\u522b\u3002 \u5e38\u89c1\u7684\u5b9e\u4f53\u5305\u62ec\u4e03\u79cd\u7c7b\u522b\uff1a\u4eba\u540d\u3001\u5730\u540d\u3001\u673a\u6784\u540d\u3001\u65f6\u95f4\u3001\u65e5\u671f\u3001\u8d27\u5e01\u3001\u767e\u5206\u6bd4\u3002 \u5982\u56fe\u6240\u793a\uff0c\u201c1973\u5e741\u670819\u65e5\u201d\u662f\u65f6\u95f4\u5b9e\u4f53\uff1b\u201c\u8a79\u59c6\u65af\u00b7\u74e6\u7279\u201d\u662f\u4eba\u540d\u5b9e\u4f53\uff1b\u201c\u82cf\u683c\u5170\u201d\u3001\u201c\u683c\u62c9\u65af\u54e5\u201d\u3001\u201c\u514b\u83b1\u5fb7\u6cb3\u6e7e\u201d\u3001\u201c\u683c\u6797\u8bfa\u514b\u201d\u662f\u5730\u540d\u5b9e\u4f53\u3002\u5728\u4e0d\u540c\u9886\u57df\u7684\u5b9e\u4f53\u62bd\u53d6\u4efb\u52a1\u4e4b\u4e2d\uff0c\u8fd8\u4f1a\u589e\u52a0\u5176\u4ed6\u7c7b\u578b\u7684\u5b9e\u4f53\u3002\u4f8b\u5982\uff0c\u5728\u4e00\u822c\u7684\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u4e4b\u4e2d\uff0c\u8fd8\u4f1a\u589e\u52a0\u75be\u75c5\u3001\u836f\u7269\u3001\u6cbb\u7597\u65b9\u6cd5\u7b49\u5b9e\u4f53\u3002 2 \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u65b9\u6cd5 \u00b6 \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4e00\u76f4\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u4efb\u52a1\u3002\u76ee\u524d\uff0c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u65b9\u6cd5\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u3001\u57fa\u4e8e\u4f20\u7edf\u673a\u5668\u5b66\u4e60\u7684\u65b9\u6cd5\u3001\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\u4e09\u5927\u7c7b\u3002 2.1 \u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5 \u00b6 \u57fa\u4e8e\u89c4\u5219\uff1a\u9488\u5bf9\u6709\u7279\u6b8a\u4e0a\u4e0b\u6587\u7684\u5b9e\u4f53\uff0c\u6216\u5b9e\u4f53\u672c\u8eab\u6709\u5f88\u591a\u7279\u5f81\u7684\u6587\u672c\uff0c\u4f7f\u7528\u89c4\u5219\u7684\u65b9\u6cd5\u7b80\u5355\u4e14\u6709\u6548\u3002\u6bd4\u5982\u62bd\u53d6\u6587\u672c\u4e2d\u7269\u54c1\u4ef7\u683c\uff0c\u5982\u679c\u6587\u672c\u4e2d\u6240\u6709\u5546\u54c1\u4ef7\u683c\u90fd\u662f\u201c\u6570\u5b57+\u5143\u201d\u7684\u5f62\u5f0f\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u201d\\d*.?\\d+\u5143\u201d\u8fdb\u884c\u62bd\u53d6\u3002\u4f46\u5982\u679c\u5f85\u62bd\u53d6\u6587\u672c\u4e2d\u4ef7\u683c\u7684\u8868\u8fbe\u65b9\u5f0f\u591a\u79cd\u591a\u6837\uff0c\u4f8b\u5982\u201c\u4e00\u5343\u516b\u767e\u4e07\u201d\uff0c\u201c\u4f0d\u4f70\u8d30\u62fe\u5706\u201d\uff0c\u201c2000\u4e07\u5143\u201d\uff0c\u9047\u5230\u8fd9\u4e9b\u60c5\u51b5\u5c31\u8981\u4fee\u6539\u89c4\u5219\u6765\u6ee1\u8db3\u6240\u6709\u53ef\u80fd\u7684\u60c5\u51b5\u3002\u968f\u7740\u8bed\u6599\u6570\u91cf\u7684\u589e\u52a0\uff0c\u9762\u5bf9\u7684\u60c5\u51b5\u4e5f\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u89c4\u5219\u4e4b\u95f4\u4e5f\u53ef\u80fd\u53d1\u751f\u51b2\u7a81\uff0c\u6574\u4e2a\u7cfb\u7edf\u4e5f\u53ef\u80fd\u53d8\u5f97\u4e0d\u53ef\u7ef4\u62a4\u3002\u56e0\u6b64\u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u5f0f\u6bd4\u8f83\u9002\u5408\u534a\u7ed3\u6784\u5316\u6216\u6bd4\u8f83\u89c4\u8303\u7684\u6587\u672c\u4e2d\u7684\u8fdb\u884c\u62bd\u53d6\u4efb\u52a1\uff0c\u7ed3\u5408\u4e1a\u52a1\u9700\u6c42\u80fd\u591f\u8fbe\u5230\u4e00\u5b9a\u7684\u6548\u679c\u3002 \u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u5feb\u901f\u3002 \u7f3a\u70b9\uff1a\u9002\u7528\u6027\u5dee\uff0c\u7ef4\u62a4\u6210\u672c\u9ad8\u540e\u671f\u751a\u81f3\u4e0d\u80fd\u7ef4\u62a4\u3002 2.2 \u57fa\u4e8e\u4f20\u7edf\u673a\u5668\u5b66\u4e60\u7684\u65b9\u6cd5 \u00b6 \u65e9\u671f\u4f7f\u7528\u4e8e\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4efb\u52a1\u4e4b\u4e2d\u7684\u673a\u5668\u5b66\u4e60\u65b9\u6cd5\uff0c\u4e3b\u8981\u662f\u4e00\u4e9b\u57fa\u4e8e\u7edf\u8ba1\u7684\u65b9\u6cd5\u3002\u4f7f\u7528\u7edf\u8ba1\u65b9\u6cd5\uff0c\u5305\u62ec\u4e09\u4e2a\u6b65\u9aa4\uff1a\u2460\u9009\u62e9\u7279\u5f81\u3002\u4f20\u7edf\u7edf\u8ba1\u65b9\u6cd5\u9700\u8981\u4eba\u5de5\u9009\u62e9\u7279\u5f81\u3002\u8fd9\u4e9b\u7279\u5f81\u5305\u62ec\u8bcd\u8bed\u4e0a\u4e0b\u6587\u4fe1\u606f\u3001\u8bcd\u7f00\u3001\u8bcd\u6027\u4e0a\u4e0b\u6587\u7279\u5f81\u7b49\u7b49\u3002\u2461\u9009\u62e9\u6a21\u578b\u5e76\u8bad\u7ec3\u6a21\u578b\u3002\u2462\u9884\u6d4b\u5b9e\u4f53\u3002\u8fd9\u4e00\u6b65\u662f\u4f7f\u7528\u5df2\u7ecf\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u6765\u9884\u6d4b\u5b9e\u4f53\u3002 \u4e00\u822c\u4f7f\u7528\u7edf\u8ba1\u6a21\u578b\u662f\u628a\u5b9e\u4f53\u62bd\u53d6\u4efb\u52a1\u8f6c\u5316\u4e3a\u5e8f\u5217\u6807\u6ce8\u95ee\u9898\uff0c\u4f7f\u7528IO\u3001BIO\u3001BIOES\u7b49\u6807\u6ce8\u65b9\u6cd5\u5bf9\u5b9e\u4f53\u8fdb\u884c\u6807\u6ce8\u3002\u5bf9\u4e8e\u6587\u672c\u4e4b\u4e2d\u7684\u6bcf\u4e2a\u8bcd\uff0c\u6216\u8005\u6c49\u8bed\u4e4b\u4e2d\u7684\u6bcf\u4e2a\u5b57\uff0c\u90fd\u6709\u82e5\u5e72\u5019\u9009\u7684\u6807\u7b7e\u3002\u5982\u88681\u6240\u793a\uff0c\u5bf9\u201c\u74e6\u7279\u51fa\u751f\u4e8e\u82cf\u683c\u5170\u201d\u8fd9\u4e2a\u5e8f\u5217\u8fdb\u884c\u6807\u6ce8\uff0cPER\u8868\u793a\u4eba\u540d\uff0cLOC\u8868\u793a\u5730\u540d\u3002\u5206\u522b\u4f7f\u7528IO\u3001BIO\u3001BIOES\u65b9\u6cd5\u8fdb\u884c\u6807\u6ce8\uff0c\u53ef\u4ee5\u5f97\u5230\u8868\u4e2d\u7684\u7ed3\u679c\u3002 B\u4ee3\u8868Begin\uff0c\u8868\u793a\u5b9e\u4f53\u540d\u79f0\u7684\u5f00\u5934\uff0cI\u4ee3\u8868Inside,\u8868\u793a\u5b9e\u4f53\u540d\u79f0\u7684\u4e2d\u95f4\u6216\u8005\u672b\u5c3e\u5b57\u7b26\uff0cE\u4ee3\u8868End,\u8868\u793a\u5b9e\u4f53\u540d\u79f0\u7684\u7ed3\u675f\u5b57\u7b26\uff0cO\u4ee3\u8868Outside\uff0c\u8868\u793a\u4e0d\u662f\u5b9e\u4f53\u540d\u79f0\u7684\u5b57\u7b26\uff0cS\u4ee3\u8868Single\uff0c\u8868\u793a\u5355\u5b57\u4e3a\u4e00\u4e2a\u547d\u540d\u5b9e\u4f53 \u6587\u672c\u5e8f\u5217 IO\u6807\u6ce8\u4f53\u7cfb BIO\u6807\u6ce8\u4f53\u7cfb BIOES\u6807\u6ce8\u6a21\u5f0f \u74e6 I-PER B-PER B-PER \u7279 I-PER I-PER E-PER \u51fa O O O \u751f O O O \u4e8e O O O \u82cf I-LOC B-LOC B-LOC \u683c I-LOC I-LOC I-LOC \u5170 I-LOC I-LOC E-LOC \u57fa\u4e8e\u5e8f\u5217\u6807\u6ce8\u65b9\u6cd5\u7684\u7edf\u8ba1\u6a21\u578b\uff0c\u5e38\u89c1\u7684\u5305\u62ec\uff1a\u652f\u6301\u5411\u91cf\u673a\uff08SVM\uff09\u3001\u9690\u9a6c\u5c14\u79d1\u592b\u6a21\u578b\uff08HMM\uff09\u3001\u6761\u4ef6\u968f\u673a\u573a\uff08CRF\uff09\u7b49\u3002\u5728\u5b9e\u9645\u7814\u7a76\u4e4b\u4e2d\uff0c\u7814\u7a76\u4eba\u5458\u5f80\u5f80\u628a\u8fd9\u4e9b\u6a21\u578b\u548c\u5176\u4ed6\u65b9\u6cd5\u7ed3\u5408\u5728\u4e00\u8d77\u3002 \u5728\u4f20\u7edf\u7684\u7edf\u8ba1\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u7279\u5f81\u7684\u9009\u62e9\u662f\u81f3\u5173\u91cd\u8981\u7684\uff0c\u9009\u62e9\u66f4\u597d\u7684\u7279\u5f81\u80fd\u591f\u63d0\u9ad8\u5b9e\u4f53\u62bd\u53d6\u7684\u6548\u679c\u3002\u5e38\u89c1\u7684\u7279\u5f81\u53ef\u4ee5\u5206\u4e3a\u5f62\u6001\u3001\u8bcd\u6c47\u3001\u53e5\u6cd5\u3001\u5168\u5c40\u7279\u5f81\u3001\u5916\u90e8\u4fe1\u606f\u7b49\u3002\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u8f83\u4e4b\u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\uff0c\u66f4\u52a0\u7075\u6d3b\u548c\u5065\u58ee\uff0c\u53ef\u4ee5\u79fb\u690d\u5230\u5176\u4ed6\u9886\u57df\u3002\u4f46\u662f\u8fd9\u4e9b\u6a21\u578b\u4f9d\u8d56\u4eba\u5de5\u8bbe\u8ba1\u7684\u7279\u5f81\u548c\u73b0\u6709\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5de5\u5177\uff08\u5982\u5206\u8bcd\u5de5\u5177\uff09\u3002\u4eba\u5de5\u8bbe\u8ba1\u7684\u7279\u5f81\u548c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5de5\u5177\u76f4\u63a5\u5f71\u54cd\u5230\u7edf\u8ba1\u6a21\u578b\u7684\u6027\u80fd\u3002 2.3 \u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5 \u00b6 \u5728\u8fd1\u5e74\u6765\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u9010\u6e10\u706b\u7206\u7684\u80cc\u666f\u4e0b\uff0c\u5927\u91cf\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u88ab\u4f7f\u7528\u5230\u5b9e\u4f53\u62bd\u53d6\u4efb\u52a1\u4e4b\u4e2d\u3002\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\uff0c\u4e0d\u9700\u8981\u8bbe\u8ba1\u590d\u6742\u7684\u7279\u5f81\uff0c\u5bf9\u81ea\u7136\u8bed\u4e49\u5904\u7406\u5de5\u5177\u7684\u4f9d\u8d56\u4e5f\u8f83\u5c11\u3002\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\u4e3b\u8981\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\uff0c\u7ed3\u5408\u6761\u4ef6\u968f\u673a\u573a\u6a21\u578b\u3002\u5e38\u7528\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u5305\u62ec\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\uff08CNN\uff09\u3001\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\uff08RNN\uff09\u3001\u957f\u77ed\u671f\u8bb0\u5fc6\u7f51\u7edc\uff08LSTM\uff09\u7b49\uff0c\u5176\u4e2dBiLSTM-CRF\u662f\u76ee\u524d\u6700\u4e3a\u5e38\u7528\u7684\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u6a21\u578b. \u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\uff0c\u4e0d\u9700\u8981\u4eba\u5de5\u6765\u8bbe\u8ba1\u7279\u5f81\uff0c\u540c\u65f6\u80fd\u591f\u53d6\u5f97\u8f83\u9ad8\u7684\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u3002\u4f46\u662f\u8fd9\u4e9b\u6a21\u578b\u5341\u5206\u4f9d\u8d56\u4eba\u5de5\u6807\u6ce8\u6570\u636e\uff0c\u6807\u6ce8\u8bed\u6599\u7684\u7f3a\u4e4f\u4e3a\u6a21\u578b\u7684\u8bad\u7ec3\u5e26\u6765\u4e86\u6781\u5927\u7684\u56f0\u96be\u3002 3 NER\u8bc4\u6d4b\u6807\u51c6 \u00b6 NER\u7684\u8bc4\u6d4b\u6807\u51c6\u901a\u5e38\u5305\u62ec\uff1a\u51c6\u786e\u7387 ( Precision ) \u3001\u53ec\u56de\u7387 ( Recall ) \u548c F1 \u503c\u4e09\u4e2a\u65b9\u9762 \u51c6\u786e\u7387\uff1a\u6a21\u578b\u8bc6\u522b\u51fa\u6765\u7684\u5b9e\u4f53\u4e2d\uff0c\u88ab\u6240\u6709\u9884\u6d4b\u4e3a\u6b63\u7684\u6837\u672c\u4e2d\u5b9e\u9645\u4e3a\u6b63\u6837\u672c\u7684\u6982\u7387 \u53ec\u56de\u7387\uff1a\u6a21\u578b\u8bc6\u522b\u51fa\u6765\u7684\u5b9e\u4f53\u4e2d\uff0c\u5b9e\u9645\u4e3a\u6b63\u7684\u6837\u672c\u4e2d\u88ab\u9884\u6d4b\u4e3a\u6b63\u6837\u672c\u7684\u6982\u7387 \u800c F1 \u503c\u5219\u662f\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u7684\u8c03\u548c\u5e73\u5747\u503c\uff0c\u53ef\u4ee5\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u8fdb\u884c\u7efc\u5408\u6027\u7684\u8bc4\u4ef7 \u5bf9\u5e94\u7684\u8ba1\u7b97\u4e3a: 4 NER\u7684\u5e38\u89c1\u95ee\u9898 \u00b6 \u73b0\u9636\u6bb5\u7684\u5b9e\u4f53\u62bd\u53d6\u6a21\u578b\u5f88\u5c11\u8003\u8651\u6807\u7b7e\u91cd\u53e0\u95ee\u9898\u3002\u6240\u8c13\u6807\u7b7e\u91cd\u53e0\uff0c\u6307\u7684\u662f\u6bcf\u4e2a\u8bcd\u6216\u5b57\u5177\u6709\u4e24\u79cd\u4ee5\u4e0a\u7684\u6807\u7b7e\u3002\u800c\u73b0\u9636\u6bb5\u7684\u6a21\u578b\uff0c\u6bcf\u4e2a\u8bcd\u6216\u5b57\u53ea\u80fd\u5c5e\u4e8e\u67d0\u4e00\u7c7b\u6807\u7b7e\u3002\u5bf9\u4e8e\u591a\u6807\u7b7e\u7684\u5b9e\u4f53\u62bd\u53d6\uff0c\u4ecd\u7136\u662f\u5b9e\u4f53\u62bd\u53d6\u672a\u6765\u7684\u4e3b\u8981\u7814\u7a76\u65b9\u5411\u4e4b\u4e00\u3002 \u76ee\u524d\u7684\u5b9e\u4f53\u62bd\u53d6\u65b9\u6cd5\u5927\u90fd\u5c40\u9650\u4e8e\u62bd\u53d6\u4eba\u540d\u3001\u5730\u540d\u3001\u673a\u6784\u540d\u7b49\u4f20\u7edf\u5b9e\u4f53\u7c7b\u522b\uff0c\u800c\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6240\u9700\u8981\u62bd\u53d6\u7684\u7c7b\u522b\u4f1a\u66f4\u591a\uff0c\u5e76\u4e14\u7f3a\u4e4f\u6807\u6ce8\u6570\u636e\u3002 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u6982\u5ff5\u3001\u5b9e\u73b0\u65b9\u6cd5\u3001\u8bc4\u4ef7\u6307\u6807\u4ee5\u53ca\u5e38\u89c1\u95ee\u9898\u7b49\u77e5\u8bc6\u3002","title":"3.1 \u5b9e\u4f53\u8bc6\u522b\u57fa\u672c\u77e5\u8bc6"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#_1","text":"","title":"\u547d\u540d\u5b9e\u4f53\u8bc6\u522b"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#1-ner","text":"\u5b9e\u4f53\u662f\u6587\u672c\u4e4b\u4e2d\u627f\u8f7d\u4fe1\u606f\u7684\u8bed\u4e49\u5355\u5143\uff0c\u662f\u6587\u672c\u8bed\u4e49\u7406\u89e3\u7684\u57fa\u7840\uff0c\u50cf\u4e00\u53e5\u8bdd\u4e4b\u4e2d\u7684\u4eba\u540d\u5730\u540d\u5c31\u662f\u4e00\u79cd\u5b9e\u4f53\u3002 \u5b9e\u4f53\u62bd\u53d6\uff0c\u53c8\u79f0\u4e3a\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff08named entity recognition\uff0cNER\uff09\uff0c\u6307\u7684\u662f\u4ece\u6587\u672c\u4e4b\u4e2d\u62bd\u53d6\u51fa\u547d\u540d\u6027\u5b9e\u4f53\uff0c\u5e76\u628a\u8fd9\u4e9b\u5b9e\u4f53\u5212\u5206\u5230\u6307\u5b9a\u7684\u7c7b\u522b\u3002 \u5e38\u89c1\u7684\u5b9e\u4f53\u5305\u62ec\u4e03\u79cd\u7c7b\u522b\uff1a\u4eba\u540d\u3001\u5730\u540d\u3001\u673a\u6784\u540d\u3001\u65f6\u95f4\u3001\u65e5\u671f\u3001\u8d27\u5e01\u3001\u767e\u5206\u6bd4\u3002 \u5982\u56fe\u6240\u793a\uff0c\u201c1973\u5e741\u670819\u65e5\u201d\u662f\u65f6\u95f4\u5b9e\u4f53\uff1b\u201c\u8a79\u59c6\u65af\u00b7\u74e6\u7279\u201d\u662f\u4eba\u540d\u5b9e\u4f53\uff1b\u201c\u82cf\u683c\u5170\u201d\u3001\u201c\u683c\u62c9\u65af\u54e5\u201d\u3001\u201c\u514b\u83b1\u5fb7\u6cb3\u6e7e\u201d\u3001\u201c\u683c\u6797\u8bfa\u514b\u201d\u662f\u5730\u540d\u5b9e\u4f53\u3002\u5728\u4e0d\u540c\u9886\u57df\u7684\u5b9e\u4f53\u62bd\u53d6\u4efb\u52a1\u4e4b\u4e2d\uff0c\u8fd8\u4f1a\u589e\u52a0\u5176\u4ed6\u7c7b\u578b\u7684\u5b9e\u4f53\u3002\u4f8b\u5982\uff0c\u5728\u4e00\u822c\u7684\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u4e4b\u4e2d\uff0c\u8fd8\u4f1a\u589e\u52a0\u75be\u75c5\u3001\u836f\u7269\u3001\u6cbb\u7597\u65b9\u6cd5\u7b49\u5b9e\u4f53\u3002","title":"1 \u4ec0\u4e48\u662fNER"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#2","text":"\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4e00\u76f4\u662f\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u4efb\u52a1\u3002\u76ee\u524d\uff0c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u65b9\u6cd5\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u3001\u57fa\u4e8e\u4f20\u7edf\u673a\u5668\u5b66\u4e60\u7684\u65b9\u6cd5\u3001\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\u4e09\u5927\u7c7b\u3002","title":"2 \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#21","text":"\u57fa\u4e8e\u89c4\u5219\uff1a\u9488\u5bf9\u6709\u7279\u6b8a\u4e0a\u4e0b\u6587\u7684\u5b9e\u4f53\uff0c\u6216\u5b9e\u4f53\u672c\u8eab\u6709\u5f88\u591a\u7279\u5f81\u7684\u6587\u672c\uff0c\u4f7f\u7528\u89c4\u5219\u7684\u65b9\u6cd5\u7b80\u5355\u4e14\u6709\u6548\u3002\u6bd4\u5982\u62bd\u53d6\u6587\u672c\u4e2d\u7269\u54c1\u4ef7\u683c\uff0c\u5982\u679c\u6587\u672c\u4e2d\u6240\u6709\u5546\u54c1\u4ef7\u683c\u90fd\u662f\u201c\u6570\u5b57+\u5143\u201d\u7684\u5f62\u5f0f\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u201d\\d*.?\\d+\u5143\u201d\u8fdb\u884c\u62bd\u53d6\u3002\u4f46\u5982\u679c\u5f85\u62bd\u53d6\u6587\u672c\u4e2d\u4ef7\u683c\u7684\u8868\u8fbe\u65b9\u5f0f\u591a\u79cd\u591a\u6837\uff0c\u4f8b\u5982\u201c\u4e00\u5343\u516b\u767e\u4e07\u201d\uff0c\u201c\u4f0d\u4f70\u8d30\u62fe\u5706\u201d\uff0c\u201c2000\u4e07\u5143\u201d\uff0c\u9047\u5230\u8fd9\u4e9b\u60c5\u51b5\u5c31\u8981\u4fee\u6539\u89c4\u5219\u6765\u6ee1\u8db3\u6240\u6709\u53ef\u80fd\u7684\u60c5\u51b5\u3002\u968f\u7740\u8bed\u6599\u6570\u91cf\u7684\u589e\u52a0\uff0c\u9762\u5bf9\u7684\u60c5\u51b5\u4e5f\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u89c4\u5219\u4e4b\u95f4\u4e5f\u53ef\u80fd\u53d1\u751f\u51b2\u7a81\uff0c\u6574\u4e2a\u7cfb\u7edf\u4e5f\u53ef\u80fd\u53d8\u5f97\u4e0d\u53ef\u7ef4\u62a4\u3002\u56e0\u6b64\u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u5f0f\u6bd4\u8f83\u9002\u5408\u534a\u7ed3\u6784\u5316\u6216\u6bd4\u8f83\u89c4\u8303\u7684\u6587\u672c\u4e2d\u7684\u8fdb\u884c\u62bd\u53d6\u4efb\u52a1\uff0c\u7ed3\u5408\u4e1a\u52a1\u9700\u6c42\u80fd\u591f\u8fbe\u5230\u4e00\u5b9a\u7684\u6548\u679c\u3002 \u4f18\u70b9\uff1a\u7b80\u5355\uff0c\u5feb\u901f\u3002 \u7f3a\u70b9\uff1a\u9002\u7528\u6027\u5dee\uff0c\u7ef4\u62a4\u6210\u672c\u9ad8\u540e\u671f\u751a\u81f3\u4e0d\u80fd\u7ef4\u62a4\u3002","title":"2.1 \u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#22","text":"\u65e9\u671f\u4f7f\u7528\u4e8e\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4efb\u52a1\u4e4b\u4e2d\u7684\u673a\u5668\u5b66\u4e60\u65b9\u6cd5\uff0c\u4e3b\u8981\u662f\u4e00\u4e9b\u57fa\u4e8e\u7edf\u8ba1\u7684\u65b9\u6cd5\u3002\u4f7f\u7528\u7edf\u8ba1\u65b9\u6cd5\uff0c\u5305\u62ec\u4e09\u4e2a\u6b65\u9aa4\uff1a\u2460\u9009\u62e9\u7279\u5f81\u3002\u4f20\u7edf\u7edf\u8ba1\u65b9\u6cd5\u9700\u8981\u4eba\u5de5\u9009\u62e9\u7279\u5f81\u3002\u8fd9\u4e9b\u7279\u5f81\u5305\u62ec\u8bcd\u8bed\u4e0a\u4e0b\u6587\u4fe1\u606f\u3001\u8bcd\u7f00\u3001\u8bcd\u6027\u4e0a\u4e0b\u6587\u7279\u5f81\u7b49\u7b49\u3002\u2461\u9009\u62e9\u6a21\u578b\u5e76\u8bad\u7ec3\u6a21\u578b\u3002\u2462\u9884\u6d4b\u5b9e\u4f53\u3002\u8fd9\u4e00\u6b65\u662f\u4f7f\u7528\u5df2\u7ecf\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u6765\u9884\u6d4b\u5b9e\u4f53\u3002 \u4e00\u822c\u4f7f\u7528\u7edf\u8ba1\u6a21\u578b\u662f\u628a\u5b9e\u4f53\u62bd\u53d6\u4efb\u52a1\u8f6c\u5316\u4e3a\u5e8f\u5217\u6807\u6ce8\u95ee\u9898\uff0c\u4f7f\u7528IO\u3001BIO\u3001BIOES\u7b49\u6807\u6ce8\u65b9\u6cd5\u5bf9\u5b9e\u4f53\u8fdb\u884c\u6807\u6ce8\u3002\u5bf9\u4e8e\u6587\u672c\u4e4b\u4e2d\u7684\u6bcf\u4e2a\u8bcd\uff0c\u6216\u8005\u6c49\u8bed\u4e4b\u4e2d\u7684\u6bcf\u4e2a\u5b57\uff0c\u90fd\u6709\u82e5\u5e72\u5019\u9009\u7684\u6807\u7b7e\u3002\u5982\u88681\u6240\u793a\uff0c\u5bf9\u201c\u74e6\u7279\u51fa\u751f\u4e8e\u82cf\u683c\u5170\u201d\u8fd9\u4e2a\u5e8f\u5217\u8fdb\u884c\u6807\u6ce8\uff0cPER\u8868\u793a\u4eba\u540d\uff0cLOC\u8868\u793a\u5730\u540d\u3002\u5206\u522b\u4f7f\u7528IO\u3001BIO\u3001BIOES\u65b9\u6cd5\u8fdb\u884c\u6807\u6ce8\uff0c\u53ef\u4ee5\u5f97\u5230\u8868\u4e2d\u7684\u7ed3\u679c\u3002 B\u4ee3\u8868Begin\uff0c\u8868\u793a\u5b9e\u4f53\u540d\u79f0\u7684\u5f00\u5934\uff0cI\u4ee3\u8868Inside,\u8868\u793a\u5b9e\u4f53\u540d\u79f0\u7684\u4e2d\u95f4\u6216\u8005\u672b\u5c3e\u5b57\u7b26\uff0cE\u4ee3\u8868End,\u8868\u793a\u5b9e\u4f53\u540d\u79f0\u7684\u7ed3\u675f\u5b57\u7b26\uff0cO\u4ee3\u8868Outside\uff0c\u8868\u793a\u4e0d\u662f\u5b9e\u4f53\u540d\u79f0\u7684\u5b57\u7b26\uff0cS\u4ee3\u8868Single\uff0c\u8868\u793a\u5355\u5b57\u4e3a\u4e00\u4e2a\u547d\u540d\u5b9e\u4f53 \u6587\u672c\u5e8f\u5217 IO\u6807\u6ce8\u4f53\u7cfb BIO\u6807\u6ce8\u4f53\u7cfb BIOES\u6807\u6ce8\u6a21\u5f0f \u74e6 I-PER B-PER B-PER \u7279 I-PER I-PER E-PER \u51fa O O O \u751f O O O \u4e8e O O O \u82cf I-LOC B-LOC B-LOC \u683c I-LOC I-LOC I-LOC \u5170 I-LOC I-LOC E-LOC \u57fa\u4e8e\u5e8f\u5217\u6807\u6ce8\u65b9\u6cd5\u7684\u7edf\u8ba1\u6a21\u578b\uff0c\u5e38\u89c1\u7684\u5305\u62ec\uff1a\u652f\u6301\u5411\u91cf\u673a\uff08SVM\uff09\u3001\u9690\u9a6c\u5c14\u79d1\u592b\u6a21\u578b\uff08HMM\uff09\u3001\u6761\u4ef6\u968f\u673a\u573a\uff08CRF\uff09\u7b49\u3002\u5728\u5b9e\u9645\u7814\u7a76\u4e4b\u4e2d\uff0c\u7814\u7a76\u4eba\u5458\u5f80\u5f80\u628a\u8fd9\u4e9b\u6a21\u578b\u548c\u5176\u4ed6\u65b9\u6cd5\u7ed3\u5408\u5728\u4e00\u8d77\u3002 \u5728\u4f20\u7edf\u7684\u7edf\u8ba1\u65b9\u6cd5\u4e4b\u4e2d\uff0c\u7279\u5f81\u7684\u9009\u62e9\u662f\u81f3\u5173\u91cd\u8981\u7684\uff0c\u9009\u62e9\u66f4\u597d\u7684\u7279\u5f81\u80fd\u591f\u63d0\u9ad8\u5b9e\u4f53\u62bd\u53d6\u7684\u6548\u679c\u3002\u5e38\u89c1\u7684\u7279\u5f81\u53ef\u4ee5\u5206\u4e3a\u5f62\u6001\u3001\u8bcd\u6c47\u3001\u53e5\u6cd5\u3001\u5168\u5c40\u7279\u5f81\u3001\u5916\u90e8\u4fe1\u606f\u7b49\u3002\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u8f83\u4e4b\u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\uff0c\u66f4\u52a0\u7075\u6d3b\u548c\u5065\u58ee\uff0c\u53ef\u4ee5\u79fb\u690d\u5230\u5176\u4ed6\u9886\u57df\u3002\u4f46\u662f\u8fd9\u4e9b\u6a21\u578b\u4f9d\u8d56\u4eba\u5de5\u8bbe\u8ba1\u7684\u7279\u5f81\u548c\u73b0\u6709\u7684\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5de5\u5177\uff08\u5982\u5206\u8bcd\u5de5\u5177\uff09\u3002\u4eba\u5de5\u8bbe\u8ba1\u7684\u7279\u5f81\u548c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u5de5\u5177\u76f4\u63a5\u5f71\u54cd\u5230\u7edf\u8ba1\u6a21\u578b\u7684\u6027\u80fd\u3002","title":"2.2 \u57fa\u4e8e\u4f20\u7edf\u673a\u5668\u5b66\u4e60\u7684\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#23","text":"\u5728\u8fd1\u5e74\u6765\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u9010\u6e10\u706b\u7206\u7684\u80cc\u666f\u4e0b\uff0c\u5927\u91cf\u7684\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u88ab\u4f7f\u7528\u5230\u5b9e\u4f53\u62bd\u53d6\u4efb\u52a1\u4e4b\u4e2d\u3002\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\uff0c\u4e0d\u9700\u8981\u8bbe\u8ba1\u590d\u6742\u7684\u7279\u5f81\uff0c\u5bf9\u81ea\u7136\u8bed\u4e49\u5904\u7406\u5de5\u5177\u7684\u4f9d\u8d56\u4e5f\u8f83\u5c11\u3002\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\u4e3b\u8981\u4f7f\u7528\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\uff0c\u7ed3\u5408\u6761\u4ef6\u968f\u673a\u573a\u6a21\u578b\u3002\u5e38\u7528\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u5305\u62ec\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\uff08CNN\uff09\u3001\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\uff08RNN\uff09\u3001\u957f\u77ed\u671f\u8bb0\u5fc6\u7f51\u7edc\uff08LSTM\uff09\u7b49\uff0c\u5176\u4e2dBiLSTM-CRF\u662f\u76ee\u524d\u6700\u4e3a\u5e38\u7528\u7684\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u6a21\u578b. \u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5\uff0c\u4e0d\u9700\u8981\u4eba\u5de5\u6765\u8bbe\u8ba1\u7279\u5f81\uff0c\u540c\u65f6\u80fd\u591f\u53d6\u5f97\u8f83\u9ad8\u7684\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u3002\u4f46\u662f\u8fd9\u4e9b\u6a21\u578b\u5341\u5206\u4f9d\u8d56\u4eba\u5de5\u6807\u6ce8\u6570\u636e\uff0c\u6807\u6ce8\u8bed\u6599\u7684\u7f3a\u4e4f\u4e3a\u6a21\u578b\u7684\u8bad\u7ec3\u5e26\u6765\u4e86\u6781\u5927\u7684\u56f0\u96be\u3002","title":"2.3 \u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#3-ner","text":"NER\u7684\u8bc4\u6d4b\u6807\u51c6\u901a\u5e38\u5305\u62ec\uff1a\u51c6\u786e\u7387 ( Precision ) \u3001\u53ec\u56de\u7387 ( Recall ) \u548c F1 \u503c\u4e09\u4e2a\u65b9\u9762 \u51c6\u786e\u7387\uff1a\u6a21\u578b\u8bc6\u522b\u51fa\u6765\u7684\u5b9e\u4f53\u4e2d\uff0c\u88ab\u6240\u6709\u9884\u6d4b\u4e3a\u6b63\u7684\u6837\u672c\u4e2d\u5b9e\u9645\u4e3a\u6b63\u6837\u672c\u7684\u6982\u7387 \u53ec\u56de\u7387\uff1a\u6a21\u578b\u8bc6\u522b\u51fa\u6765\u7684\u5b9e\u4f53\u4e2d\uff0c\u5b9e\u9645\u4e3a\u6b63\u7684\u6837\u672c\u4e2d\u88ab\u9884\u6d4b\u4e3a\u6b63\u6837\u672c\u7684\u6982\u7387 \u800c F1 \u503c\u5219\u662f\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u7684\u8c03\u548c\u5e73\u5747\u503c\uff0c\u53ef\u4ee5\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u8fdb\u884c\u7efc\u5408\u6027\u7684\u8bc4\u4ef7 \u5bf9\u5e94\u7684\u8ba1\u7b97\u4e3a:","title":"3 NER\u8bc4\u6d4b\u6807\u51c6"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#4-ner","text":"\u73b0\u9636\u6bb5\u7684\u5b9e\u4f53\u62bd\u53d6\u6a21\u578b\u5f88\u5c11\u8003\u8651\u6807\u7b7e\u91cd\u53e0\u95ee\u9898\u3002\u6240\u8c13\u6807\u7b7e\u91cd\u53e0\uff0c\u6307\u7684\u662f\u6bcf\u4e2a\u8bcd\u6216\u5b57\u5177\u6709\u4e24\u79cd\u4ee5\u4e0a\u7684\u6807\u7b7e\u3002\u800c\u73b0\u9636\u6bb5\u7684\u6a21\u578b\uff0c\u6bcf\u4e2a\u8bcd\u6216\u5b57\u53ea\u80fd\u5c5e\u4e8e\u67d0\u4e00\u7c7b\u6807\u7b7e\u3002\u5bf9\u4e8e\u591a\u6807\u7b7e\u7684\u5b9e\u4f53\u62bd\u53d6\uff0c\u4ecd\u7136\u662f\u5b9e\u4f53\u62bd\u53d6\u672a\u6765\u7684\u4e3b\u8981\u7814\u7a76\u65b9\u5411\u4e4b\u4e00\u3002 \u76ee\u524d\u7684\u5b9e\u4f53\u62bd\u53d6\u65b9\u6cd5\u5927\u90fd\u5c40\u9650\u4e8e\u62bd\u53d6\u4eba\u540d\u3001\u5730\u540d\u3001\u673a\u6784\u540d\u7b49\u4f20\u7edf\u5b9e\u4f53\u7c7b\u522b\uff0c\u800c\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6240\u9700\u8981\u62bd\u53d6\u7684\u7c7b\u522b\u4f1a\u66f4\u591a\uff0c\u5e76\u4e14\u7f3a\u4e4f\u6807\u6ce8\u6570\u636e\u3002","title":"4 NER\u7684\u5e38\u89c1\u95ee\u9898"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/01-%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#_2","text":"\u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u6982\u5ff5\u3001\u5b9e\u73b0\u65b9\u6cd5\u3001\u8bc4\u4ef7\u6307\u6807\u4ee5\u53ca\u5e38\u89c1\u95ee\u9898\u7b49\u77e5\u8bc6\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/02-%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E5%AE%9E%E7%8E%B0NER.html","text":"\u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0NER \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3\u4ec0\u4e48\u662f\u89c4\u5219\u6d3e\u7684NER \u638c\u63e1NER\u4efb\u52a1\u5e38\u89c1\u7684\u89c4\u5219\u5904\u7406\u65b9\u6cd5. 1 \u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0NER\u7684\u539f\u7406 \u00b6 \u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u591a\u91c7\u7528\u8bed\u8a00\u5b66\u4e13\u5bb6\u624b\u5de5\u6784\u9020\u89c4\u5219\u6a21\u677f, \u9009\u7528\u7279\u5f81\u5305\u62ec\u7edf\u8ba1\u4fe1\u606f, \u6807\u70b9\u7b26\u53f7, \u5173\u952e\u5b57, \u6307\u793a\u8bcd\u548c\u65b9\u5411\u8bcd, \u4f4d\u7f6e\u8bcd(\u5982\u5c3e\u5b57), \u4e2d\u5fc3\u8bcd\u7b49\u65b9\u6cd5, \u4ee5\u6a21\u5f0f\u548c\u5b57\u7b26\u4e32\u76f8\u5339\u914d\u4e3a\u4e3b\u8981\u624b\u6bb5, \u8fd9\u7c7b\u7cfb\u7edf\u5927\u591a\u4f9d\u8d56\u4e8e\u77e5\u8bc6\u5e93\u548c\u8bcd\u5178\u7684\u5efa\u7acb. \u57fa\u4e8e\u89c4\u5219\u548c\u8bcd\u5178\u7684\u65b9\u6cd5\u662f\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4e2d\u6700\u65e9\u4f7f\u7528\u7684\u65b9\u6cd5. \u4e00\u822c\u800c\u8a00, \u5f53\u63d0\u53d6\u7684\u89c4\u5219\u80fd\u6bd4\u8f83\u7cbe\u786e\u5730\u53cd\u6620\u8bed\u8a00\u73b0\u8c61\u65f6, \u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u6027\u80fd\u8981\u4f18\u4e8e\u57fa\u4e8e\u7edf\u8ba1\u7684\u65b9\u6cd5. \u4f46\u662f\u8fd9\u4e9b\u89c4\u5219\u5f80\u5f80\u4f9d\u8d56\u4e8e\u5177\u4f53\u8bed\u8a00, \u9886\u57df\u548c\u6587\u672c\u98ce\u683c, \u7f16\u5236\u8fc7\u7a0b\u8017\u65f6\u4e14\u96be\u4ee5\u6db5\u76d6\u6240\u6709\u7684\u8bed\u8a00\u73b0\u8c61, \u7279\u522b\u5bb9\u6613\u4ea7\u751f\u9519\u8bef, \u7cfb\u7edf\u53ef\u79fb\u690d\u6027\u4e0d\u597d, \u5bf9\u4e8e\u4e0d\u540c\u7684\u7cfb\u7edf\u9700\u8981\u8bed\u8a00\u5b66\u4e13\u5bb6\u91cd\u65b0\u4e66\u5199\u89c4\u5219. \u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u7684\u53e6\u5916\u4e00\u4e2a\u7f3a\u70b9\u662f\u4ee3\u4ef7\u592a\u5927, \u5b58\u5728\u7cfb\u7edf\u5efa\u8bbe\u5468\u671f\u957f, \u79fb\u690d\u6027\u5dee\u800c\u4e14\u9700\u8981\u5efa\u7acb\u4e0d\u540c\u9886\u57df\u77e5\u8bc6\u5e93\u4f5c\u4e3a\u8f85\u52a9\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u8bc6\u522b\u80fd\u529b\u7b49\u95ee\u9898. 2 \u5e38\u89c1\u7684\u89c4\u5219\u5904\u7406\u65b9\u6cd5 \u00b6 \u5de5\u4e1a\u754c\u5e38\u7528\u7684\u89c4\u5219\u5904\u7406\u65b9\u6cd5: \u9886\u57df\u5b57\u5178\u5339\u914d \u5b9a\u4e49\u6b63\u5219\u8868\u8fbe\u5f0f 3 \u6848\u4f8b\u5206\u6790 \u00b6 \u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\u57fa\u4e8e\u89c4\u5219\u7684NER\u65b9\u6cd5\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u3002\u5047\u8bbe\u6211\u4eec\u8981\u4ece\u4e00\u6bb5\u65b0\u95fb\u62a5\u9053\u4e2d\u8bc6\u522b\u51fa\u673a\u6784\u540d\u3002\u9996\u5148\uff0c\u6211\u4eec\u8bbe\u8ba1\u4ee5\u4e0b\u89c4\u5219\uff1a \u5982\u679c\u4e00\u4e2a\u8bcd\u8bed\u540e\u9762\u7d27\u8ddf\u7740\u201c\u516c\u53f8\u201d\u3001\u201c\u96c6\u56e2\u201d\u7b49\u8bcd\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u662f\u4e00\u4e2a\u673a\u6784\u540d\u7684\u5f00\u59cb\u3002 \u5982\u679c\u4e00\u4e2a\u8bcd\u8bed\u540e\u9762\u7d27\u8ddf\u7740\u201c\u5c40\u201d\u3001\u201c\u90e8\u201d\u7b49\u8bcd\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u662f\u4e00\u4e2a\u673a\u6784\u540d\u7684\u7ed3\u675f\u3002 \u7136\u540e\uff0c\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u5305\u542b\u201c\u516c\u53f8\u201d\u3001\u201c\u96c6\u56e2\u201d\u3001\u201c\u5c40\u201d\u3001\u201c\u90e8\u201d\u7b49\u8bcd\u7684\u8bcd\u5178\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5bf9\u65b0\u95fb\u62a5\u9053\u8fdb\u884c\u5e8f\u5217\u6807\u6ce8\uff0c\u5c06\u8bcd\u5178\u4e2d\u7684\u8bcd\u6807\u8bb0\u4e3aB\u6216E\uff0c\u5176\u4f59\u8bcd\u8bed\u6807\u8bb0\u4e3aO\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u201cB+OE\u201d\u4ece\u6807\u6ce8\u5e8f\u5217\u4e2d\u62bd\u53d6\u51fa\u673a\u6784\u540d\u3002 \u4ee3\u7801\u5b9e\u73b0\uff1a import jieba import jieba.posseg as pseg import re org_tag = [ '\u516c\u53f8' , '\u6709\u9650\u516c\u53f8' , '\u5927\u5b66' , '\u653f\u5e9c' , '\u4eba\u6c11\u653f\u5e9c' , '\u603b\u5c40' ] def extract_org ( text ): # \u4f7f\u7528jieba\u7684\u8bcd\u6027\u6807\u6ce8\u8fdb\u884c\u5206\u8bcd words_flags = pseg . lcut ( text ) words , features = [], [] for word , flag in words_flags : words . append ( word ) if word in org_tag : features . append ( 'E' ) else : if flag in [ 'ns' ]: # \u5730\u540d\u5173\u952e\u8bcd\uff0c\u5229\u7528jieba\u7684\u8bcd\u6027\u6807\u6ce8\uff0c'ns'\u4ee3\u8868\u5730\u540d features . append ( 'S' ) else : features . append ( 'O' ) labels = '' . join ( features ) pattern = re . compile ( 'S+O*E+' ) match_label = re . finditer ( pattern , labels ) match_list = [] for ne in match_label : match_list . append ( '' . join ( words [ int ( ne . start ()): int ( ne . end ())])) return match_list text = \"\u53ef\u5728\u63a5\u5230\u672c\u51b3\u5b9a\u4e66\u4e4b\u65e5\u8d77\u516d\u5341\u65e5\u5185\u5411\u4e2d\u56fd\u56fd\u5bb6\u5e02\u573a\u76d1\u7763\u7ba1\u7406\u603b\u5c40\u7533\u8bf7\u884c\u653f\u590d\u8bae,\u676d\u5dde\u6d77\u5eb7\u5a01\u89c6\u6570\u5b57\u6280\u672f\u80a1\u4efd\u6709\u9650\u516c\u53f8.\" print ( extract_org ( text )) ##result: ['\u4e2d\u56fd\u56fd\u5bb6\u5e02\u573a\u76d1\u7763\u7ba1\u7406\u603b\u5c40', '\u676d\u5dde\u6d77\u5eb7\u5a01\u89c6\u6570\u5b57\u6280\u672f\u80a1\u4efd\u6709\u9650\u516c\u53f8'] \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0NER\u7684\u539f\u7406\u53ca\u8fc7\u7a0b\uff0c\u6ce8\u610f\uff0c\u672a\u6765\u5982\u4f55\u5c06\u89c4\u5219\u7684\u65b9\u6cd5\u4e0e\u6a21\u578b\u7684\u65b9\u6cd5\u76f8\u7ed3\u5408\uff0c\u53d1\u6325\u5404\u81ea\u7684\u4f18\u52bf\uff0c\u662f\u4e00\u4e2a\u503c\u5f97\u63a2\u7d22\u7684\u65b9\u5411\u3002","title":"3.2 \u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0NER"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/02-%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E5%AE%9E%E7%8E%B0NER.html#ner","text":"","title":"\u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0NER"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/02-%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E5%AE%9E%E7%8E%B0NER.html#_1","text":"\u7406\u89e3\u4ec0\u4e48\u662f\u89c4\u5219\u6d3e\u7684NER \u638c\u63e1NER\u4efb\u52a1\u5e38\u89c1\u7684\u89c4\u5219\u5904\u7406\u65b9\u6cd5.","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/02-%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E5%AE%9E%E7%8E%B0NER.html#1-ner","text":"\u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u591a\u91c7\u7528\u8bed\u8a00\u5b66\u4e13\u5bb6\u624b\u5de5\u6784\u9020\u89c4\u5219\u6a21\u677f, \u9009\u7528\u7279\u5f81\u5305\u62ec\u7edf\u8ba1\u4fe1\u606f, \u6807\u70b9\u7b26\u53f7, \u5173\u952e\u5b57, \u6307\u793a\u8bcd\u548c\u65b9\u5411\u8bcd, \u4f4d\u7f6e\u8bcd(\u5982\u5c3e\u5b57), \u4e2d\u5fc3\u8bcd\u7b49\u65b9\u6cd5, \u4ee5\u6a21\u5f0f\u548c\u5b57\u7b26\u4e32\u76f8\u5339\u914d\u4e3a\u4e3b\u8981\u624b\u6bb5, \u8fd9\u7c7b\u7cfb\u7edf\u5927\u591a\u4f9d\u8d56\u4e8e\u77e5\u8bc6\u5e93\u548c\u8bcd\u5178\u7684\u5efa\u7acb. \u57fa\u4e8e\u89c4\u5219\u548c\u8bcd\u5178\u7684\u65b9\u6cd5\u662f\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u4e2d\u6700\u65e9\u4f7f\u7528\u7684\u65b9\u6cd5. \u4e00\u822c\u800c\u8a00, \u5f53\u63d0\u53d6\u7684\u89c4\u5219\u80fd\u6bd4\u8f83\u7cbe\u786e\u5730\u53cd\u6620\u8bed\u8a00\u73b0\u8c61\u65f6, \u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u6027\u80fd\u8981\u4f18\u4e8e\u57fa\u4e8e\u7edf\u8ba1\u7684\u65b9\u6cd5. \u4f46\u662f\u8fd9\u4e9b\u89c4\u5219\u5f80\u5f80\u4f9d\u8d56\u4e8e\u5177\u4f53\u8bed\u8a00, \u9886\u57df\u548c\u6587\u672c\u98ce\u683c, \u7f16\u5236\u8fc7\u7a0b\u8017\u65f6\u4e14\u96be\u4ee5\u6db5\u76d6\u6240\u6709\u7684\u8bed\u8a00\u73b0\u8c61, \u7279\u522b\u5bb9\u6613\u4ea7\u751f\u9519\u8bef, \u7cfb\u7edf\u53ef\u79fb\u690d\u6027\u4e0d\u597d, \u5bf9\u4e8e\u4e0d\u540c\u7684\u7cfb\u7edf\u9700\u8981\u8bed\u8a00\u5b66\u4e13\u5bb6\u91cd\u65b0\u4e66\u5199\u89c4\u5219. \u57fa\u4e8e\u89c4\u5219\u7684\u65b9\u6cd5\u7684\u53e6\u5916\u4e00\u4e2a\u7f3a\u70b9\u662f\u4ee3\u4ef7\u592a\u5927, \u5b58\u5728\u7cfb\u7edf\u5efa\u8bbe\u5468\u671f\u957f, \u79fb\u690d\u6027\u5dee\u800c\u4e14\u9700\u8981\u5efa\u7acb\u4e0d\u540c\u9886\u57df\u77e5\u8bc6\u5e93\u4f5c\u4e3a\u8f85\u52a9\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u8bc6\u522b\u80fd\u529b\u7b49\u95ee\u9898.","title":"1 \u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0NER\u7684\u539f\u7406"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/02-%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E5%AE%9E%E7%8E%B0NER.html#2","text":"\u5de5\u4e1a\u754c\u5e38\u7528\u7684\u89c4\u5219\u5904\u7406\u65b9\u6cd5: \u9886\u57df\u5b57\u5178\u5339\u914d \u5b9a\u4e49\u6b63\u5219\u8868\u8fbe\u5f0f","title":"2 \u5e38\u89c1\u7684\u89c4\u5219\u5904\u7406\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/02-%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E5%AE%9E%E7%8E%B0NER.html#3","text":"\u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\u57fa\u4e8e\u89c4\u5219\u7684NER\u65b9\u6cd5\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u3002\u5047\u8bbe\u6211\u4eec\u8981\u4ece\u4e00\u6bb5\u65b0\u95fb\u62a5\u9053\u4e2d\u8bc6\u522b\u51fa\u673a\u6784\u540d\u3002\u9996\u5148\uff0c\u6211\u4eec\u8bbe\u8ba1\u4ee5\u4e0b\u89c4\u5219\uff1a \u5982\u679c\u4e00\u4e2a\u8bcd\u8bed\u540e\u9762\u7d27\u8ddf\u7740\u201c\u516c\u53f8\u201d\u3001\u201c\u96c6\u56e2\u201d\u7b49\u8bcd\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u662f\u4e00\u4e2a\u673a\u6784\u540d\u7684\u5f00\u59cb\u3002 \u5982\u679c\u4e00\u4e2a\u8bcd\u8bed\u540e\u9762\u7d27\u8ddf\u7740\u201c\u5c40\u201d\u3001\u201c\u90e8\u201d\u7b49\u8bcd\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u662f\u4e00\u4e2a\u673a\u6784\u540d\u7684\u7ed3\u675f\u3002 \u7136\u540e\uff0c\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u5305\u542b\u201c\u516c\u53f8\u201d\u3001\u201c\u96c6\u56e2\u201d\u3001\u201c\u5c40\u201d\u3001\u201c\u90e8\u201d\u7b49\u8bcd\u7684\u8bcd\u5178\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5bf9\u65b0\u95fb\u62a5\u9053\u8fdb\u884c\u5e8f\u5217\u6807\u6ce8\uff0c\u5c06\u8bcd\u5178\u4e2d\u7684\u8bcd\u6807\u8bb0\u4e3aB\u6216E\uff0c\u5176\u4f59\u8bcd\u8bed\u6807\u8bb0\u4e3aO\u3002\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u201cB+OE\u201d\u4ece\u6807\u6ce8\u5e8f\u5217\u4e2d\u62bd\u53d6\u51fa\u673a\u6784\u540d\u3002 \u4ee3\u7801\u5b9e\u73b0\uff1a import jieba import jieba.posseg as pseg import re org_tag = [ '\u516c\u53f8' , '\u6709\u9650\u516c\u53f8' , '\u5927\u5b66' , '\u653f\u5e9c' , '\u4eba\u6c11\u653f\u5e9c' , '\u603b\u5c40' ] def extract_org ( text ): # \u4f7f\u7528jieba\u7684\u8bcd\u6027\u6807\u6ce8\u8fdb\u884c\u5206\u8bcd words_flags = pseg . lcut ( text ) words , features = [], [] for word , flag in words_flags : words . append ( word ) if word in org_tag : features . append ( 'E' ) else : if flag in [ 'ns' ]: # \u5730\u540d\u5173\u952e\u8bcd\uff0c\u5229\u7528jieba\u7684\u8bcd\u6027\u6807\u6ce8\uff0c'ns'\u4ee3\u8868\u5730\u540d features . append ( 'S' ) else : features . append ( 'O' ) labels = '' . join ( features ) pattern = re . compile ( 'S+O*E+' ) match_label = re . finditer ( pattern , labels ) match_list = [] for ne in match_label : match_list . append ( '' . join ( words [ int ( ne . start ()): int ( ne . end ())])) return match_list text = \"\u53ef\u5728\u63a5\u5230\u672c\u51b3\u5b9a\u4e66\u4e4b\u65e5\u8d77\u516d\u5341\u65e5\u5185\u5411\u4e2d\u56fd\u56fd\u5bb6\u5e02\u573a\u76d1\u7763\u7ba1\u7406\u603b\u5c40\u7533\u8bf7\u884c\u653f\u590d\u8bae,\u676d\u5dde\u6d77\u5eb7\u5a01\u89c6\u6570\u5b57\u6280\u672f\u80a1\u4efd\u6709\u9650\u516c\u53f8.\" print ( extract_org ( text )) ##result: ['\u4e2d\u56fd\u56fd\u5bb6\u5e02\u573a\u76d1\u7763\u7ba1\u7406\u603b\u5c40', '\u676d\u5dde\u6d77\u5eb7\u5a01\u89c6\u6570\u5b57\u6280\u672f\u80a1\u4efd\u6709\u9650\u516c\u53f8']","title":"3 \u6848\u4f8b\u5206\u6790"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/02-%E5%9F%BA%E4%BA%8E%E8%A7%84%E5%88%99%E5%AE%9E%E7%8E%B0NER.html#_2","text":"\u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0NER\u7684\u539f\u7406\u53ca\u8fc7\u7a0b\uff0c\u6ce8\u610f\uff0c\u672a\u6765\u5982\u4f55\u5c06\u89c4\u5219\u7684\u65b9\u6cd5\u4e0e\u6a21\u578b\u7684\u65b9\u6cd5\u76f8\u7ed3\u5408\uff0c\u53d1\u6325\u5404\u81ea\u7684\u4f18\u52bf\uff0c\u662f\u4e00\u4e2a\u503c\u5f97\u63a2\u7d22\u7684\u65b9\u5411\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html","text":"\u57fa\u4e8eBiLSTM+CRF\u5b9e\u73b0NER \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3BiLSTM\u5b9e\u73b0NER\u7684\u539f\u7406 \u7406\u89e3\u4ec0\u4e48\u662fCRF\u7b97\u6cd5 \u638c\u63e1CRF\u7684\u635f\u5931\u51fd\u6570\u539f\u7406 1 BiLSTM+CRF\u6a21\u578b\u4ecb\u7ecd \u00b6 BiLSTM+CRF\u6a21\u578b\u7684\u4f5c\u7528 BiLSTM+CRF : \u89e3\u51b3NER\u95ee\u9898 \u5b9e\u73b0\u65b9\u5f0f : \u4ece\u4e00\u6bb5\u81ea\u7136\u8bed\u8a00\u6587\u672c\u4e2d\u627e\u51fa\u76f8\u5173\u5b9e\u4f53\uff0c\u5e76\u6807\u6ce8\u51fa\u5176\u4f4d\u7f6e\u4ee5\u53ca\u7c7b\u578b\u3002 \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u95ee\u9898\u5b9e\u9645\u4e0a\u662f\u5e8f\u5217\u6807\u6ce8\u95ee\u9898 : \u4ee5\u4e2d\u6587\u5206\u8bcd\u4efb\u52a1\u8fdb\u884c\u4e3e\u4f8b, \u4f8b\u5982\u8f93\u5165\u5e8f\u5217\u662f\u4e00\u4e32\u6587\u5b57: \u201c\u6211\u662f\u4e2d\u56fd\u4eba\u201d, \u8f93\u51fa\u5e8f\u5217\u662f\u4e00\u4e32\u6807\u7b7e: \u201cOOBII\u201d, \u5176\u4e2d\"BIO\"\u7ec4\u6210\u4e86\u4e00\u79cd\u4e2d\u6587\u5206\u8bcd\u7684\u6807\u7b7e\u4f53\u7cfb: B\u8868\u793a\u8fd9\u4e2a\u5b57\u662f\u8bcd\u7684\u5f00\u59cb, I\u8868\u793a\u8bcd\u7684\u4e2d\u95f4\u5230\u7ed3\u5c3e, O\u8868\u793a\u5176\u4ed6\u7c7b\u578b\u8bcd. \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8f93\u51fa\u5e8f\u5217\"OOBII\"\u8fdb\u884c\u89e3\u7801, \u5f97\u5230\u5206\u8bcd\u7ed3\u679c\"\u6211\\\u662f\\\u4e2d\u56fd\u4eba\"\u3002 \u5e8f\u5217\u6807\u6ce8\u95ee\u9898\u6db5\u76d6\u4e86\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u5f88\u591a\u4efb\u52a1 : \u5305\u62ec\u8bed\u97f3\u8bc6\u522b, \u4e2d\u6587\u5206\u8bcd, \u673a\u5668\u7ffb\u8bd1, \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7b49, \u800c\u5e38\u89c1\u7684\u5e8f\u5217\u6807\u6ce8\u6a21\u578b\u5305\u62ecHMM, CRF, RNN, LSTM, GRU\u7b49\u6a21\u578b\u3002 \u5176\u4e2d\u5728\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u6280\u672f\u4e0a, \u76ee\u524d\u4e3b\u6d41\u7684\u6280\u672f : \u901a\u8fc7BiLSTM+CRF\u6a21\u578b\u8fdb\u884c\u5e8f\u5217\u6807\u6ce8\u3002 \u6570\u636e\u6807\u7b7e\uff08\u5047\u5b9a\uff0c\u5177\u4f53\u60c5\u51b5\u6839\u636e\u4e1a\u52a1\uff09 B-Person \uff08\u4eba\u540d\u7684\u5f00\u59cb\u90e8\u5206\uff09 I-Person \uff08\u4eba\u540d\u7684\u4e2d\u95f4\u90e8\u5206\uff09 B-Organization \uff08\u7ec4\u7ec7\u673a\u6784\u7684\u5f00\u59cb\u90e8\u5206\uff09 I-Organization \uff08\u7ec4\u7ec7\u673a\u6784\u7684\u4e2d\u95f4\u90e8\u5206\uff09 O \uff08\u975e\u5b9e\u4f53\u4fe1\u606f\uff09 \u6a21\u578b\u67b6\u6784\uff08\u56fe1\uff09 BiLSTM\u7f51\u7edc\u7ed3\u6784\uff1a \u6240\u8c13\u7684BiLSTM\uff0c\u5c31\u662f(Bidirectional LSTM)\u53cc\u5411LSTM. \u5355\u5411\u7684LSTM\u6a21\u578b\u53ea\u80fd\u6355\u6349\u5230\u4ece\u524d\u5411\u540e\u4f20\u9012\u7684\u4fe1\u606f\uff0c\u800c\u53cc\u5411\u7684\u7f51\u7edc\u53ef\u4ee5\u540c\u65f6\u6355\u6349\u6b63\u5411\u4fe1\u606f\u548c\u53cd\u5411\u4fe1\u606f\uff0c\u4f7f\u5f97\u5bf9\u6587\u672c\u4fe1\u606f\u7684\u5229\u7528\u66f4\u5168\u9762\uff0c\u6548\u679c\u4e5f\u66f4\u597d\u3002 \u5728BiLSTM\u7f51\u7edc\u6700\u7ec8\u7684\u8f93\u51fa\u5c42\u540e\u9762\u589e\u52a0\u4e86\u4e00\u4e2a\u7ebf\u6027\u5c42\uff0c\u7528\u6765\u5c06BiLSTM\u4ea7\u751f\u7684\u9690\u85cf\u5c42\u8f93\u51fa\u7ed3\u679c\u6295\u5c04\u5230\u5177\u6709\u67d0\u79cd\u8868\u8fbe\u6807\u7b7e\u7279\u5f81\u610f\u4e49\u7684\u533a\u95f4 CRF\u7f51\u7edc\u7ed3\u6784\uff1a \u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u5728BiLSTM\u4e0a\u65b9\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e2aCRF\u5c42\u3002\u5177\u4f53\u5730\uff0c\u5728\u57fa\u4e8eBiLSTM\u83b7\u5f97\u5404\u4e2a\u4f4d\u7f6e\u7684\u6807\u7b7e\u5411\u91cf\u4e4b\u540e\uff0c\u8fd9\u4e9b\u6807\u7b7e\u5411\u91cf\u5c06\u88ab\u4f5c\u4e3a\u3010\u53d1\u5c04\u5206\u6570\u3011\u4f20\u5165CRF\u4e2d\uff0c\u53d1\u5c04\u8fd9\u4e2a\u6982\u5ff5\u662f\u4eceCRF\u91cc\u9762\u5e26\u51fa\u6765\u7684\uff0c\u540e\u8fb9\u5728\u4ecb\u7ecdCRF\u90e8\u5206\u4f1a\u66f4\u591a\u5730\u63d0\u53ca\uff0c\u8fd9\u91cc\u5148\u4e0d\u7528\u7ea0\u7ed3\u8fd9\u4e00\u70b9\u3002 \u8fd9\u4e9b\u53d1\u5c04\u5206\u6570\uff08\u6807\u7b7e\u5411\u91cf\uff09\u4f20\u5165CRF\u4e4b\u540e\uff0cCRF\u4f1a\u636e\u6b64\u89e3\u7801\u51fa\u4e00\u4e32\u6807\u7b7e\u5e8f\u5217\u3002\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u4ece\u4e0a\u56fe\u6700\u4e0a\u8fb9\u7684\u89e3\u7801\u8fc7\u7a0b\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u91cc\u53ef\u80fd\u5bf9\u5e94\u7740\u5f88\u591a\u6761\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u4f8b\u5982\uff1a B-Person, I-Person, O, \u2026, I-Organization B-Organization, I-Person, O, \u2026, I-Person B-Organization, I-Organization, O, \u2026, O CRF\u7684\u4f5c\u7528\u5c31\u662f\u5728\u6240\u6709\u53ef\u80fd\u7684\u8def\u5f84\u4e2d\uff0c\u627e\u51fa\u5f97\u51fa\u6982\u7387\u6700\u5927\uff0c\u6548\u679c\u6700\u4f18\u7684\u4e00\u6761\u8def\u5f84\uff0c\u90a3\u8fd9\u4e2a\u6807\u7b7e\u5e8f\u5217\u5c31\u662f\u6a21\u578b\u7684\u8f93\u51fa\u3002 \u603b\u7ed3\u4e00\u4e0b\uff1a\u4f7f\u7528BiLSTM+CRF\u6a21\u578b\u67b6\u6784\u5b9e\u73b0NER\u4efb\u52a1\uff0c\u5927\u81f4\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a \u4f7f\u7528BiLSTM\u751f\u6210\u53d1\u5c04\u5206\u6570\uff08\u6807\u7b7e\u5411\u91cf\uff09\u3002 \u57fa\u4e8e\u53d1\u5c04\u5206\u6570\u4f7f\u7528CRF\u89e3\u7801\u6700\u4f18\u7684\u6807\u7b7e\u8def\u5f84\u3002 2 CRF\u539f\u7406 \u00b6 \u672c\u5c0f\u8282\u5c06\u5f00\u59cb\u805a\u7126\u5728CRF\u539f\u7406\u672c\u8eab\u8fdb\u884c\u8bb2\u89e3\uff0c\u529b\u56fe\u4e3a\u5927\u5bb6\u5c55\u73b0\u4e00\u4e2a\u6e05\u695a\u660e\u767d\uff0c\u57fa\u7840\u672c\u8d28\u7684CRF\u3002 2.1 \u7ebf\u6027CRF\u7684\u5b9a\u4e49 \u00b6 \u901a\u5e38\u6211\u4eec\u4f1a\u4f7f\u7528\u7ebf\u6027\u94feCRF\u6765\u5efa\u6a21NER\u4efb\u52a1\uff0c\u6240\u4ee5\u672c\u9879\u76ee\u5c06\u805a\u7126\u5728\u7ebf\u6027\u94feCRF\u6765\u63a2\u8ba8\u3002\u90a3\u4ec0\u4e48\u662f\u7ebf\u6027\u94feCRF\u5462\uff0c\u6211\u4eec\u6765\u770b\u4e0b\u674e\u822a\u8001\u5e08\u5728\u300a\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u300b\u4e66\u4e2d\u7684\u5b9a\u4e49\uff1a \u8bbe\ud835\udc4b=[\ud835\udc651,\ud835\udc652,...,\ud835\udc65\ud835\udc5b]\uff0c\ud835\udc4c=[\ud835\udc661,\ud835\udc662,...,\ud835\udc66\ud835\udc5b]\uff1b\ud835\udc4b\uff0c\ud835\udc4c\u5747\u4e3a\u7ebf\u6027\u94fe\u8868\u793a\u7684\u968f\u673a\u53d8\u91cf\u5e8f\u5217\uff0c\u82e5\u5728\u7ed9\u5b9a\u968f\u673a\u53d8\u91cf\u5e8f\u5217\u7684\ud835\udc4b\u7684\u6761\u4ef6\u4e0b\uff0c\u968f\u673a\u53d8\u91cf\u5e8f\u5217\ud835\udc4c\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\ud835\udc43(\ud835\udc4c|\ud835\udc4b)\u6784\u6210\u6761\u4ef6\u968f\u673a\u573a\uff0c\u5373\u6ee1\u8db3\u9a6c\u5c14\u53ef\u592b\u6027: \ud835\udc43(\ud835\udc66\ud835\udc56|\ud835\udc4b,\ud835\udc661,...,\ud835\udc66\ud835\udc56\u22121,\ud835\udc66\ud835\udc56+1,...,\ud835\udc66\ud835\udc5b)=\ud835\udc43(\ud835\udc66\ud835\udc56|\ud835\udc4b,\ud835\udc66\ud835\udc56\u22121,\ud835\udc66\ud835\udc56+1) i=1,2,...,\ud835\udc5b(\u5728\ud835\udc56=1\u548c\ud835\udc5b\u65f6\u53ea\u8003\u8651\u5355\u8fb9)\uff1b\u5219\u79f0\ud835\udc43(\ud835\udc4c|\ud835\udc4b)\u4e3a\u3010\u7ebf\u6027\u94fe\u6761\u4ef6\u968f\u673a\u573a\u3011 \u540c\u5b66\u4eec\u770b\u5230\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u6216\u8bb8\u4f1a\u6709\u4e9b\u7591\u60d1\uff0c\u4f46\u662f\u4e0d\u7528\u7740\u6025\uff0c\u6211\u4eec\u6765\u63a2\u8ba8\u4e0b\u8fd9\u4e2a\u5b9a\u4e49\u3002\u4e0b\u56fe\uff08\u56fe2\uff09\u5c55\u793a\u4e86\u4e00\u79cd\u7ecf\u5178\u7684\u7ebf\u6027\u94feCRF\u7684\u7ed3\u6784\u56fe\uff0c\u4ece\u8fd9\u5f20\u7ed3\u6784\u56fe\u6765\u7406\u89e3\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u70b9\uff1a \u786e\u4fdd\u8f93\u5165\u5e8f\u5217\ud835\udc4b\u548c\u8f93\u51fa\u5e8f\u5217\ud835\udc4c\u662f\u7ebf\u6027\u5e8f\u5217 \u6bcf\u4e2a\u6807\u7b7e\ud835\udc66\ud835\udc56\u7684\u4ea7\u751f\uff0c\u53ea\u4e0e\u8fd9\u4e9b\u56e0\u7d20\u6709\u5173\u7cfb\uff1a\u5f53\u524d\u4f4d\u7f6e\u7684\u8f93\u5165\ud835\udc65\ud835\udc56\uff0c\ud835\udc66\ud835\udc56\u76f4\u63a5\u76f8\u8fde\u7684\u4e24\u4e2a\u90bb\u5c45\ud835\udc66\ud835\udc56\u22121\u548c\ud835\udc66\ud835\udc56+1\uff0c\u4e0e\u5176\u4ed6\u7684\u6807\u7b7e\u548c\u8f93\u5165\u6ca1\u6709\u5173\u7cfb\u3002 \u8fd9\u6837\u7684\u5b9a\u4e49\uff0c\u5176\u5b9e\u5e2e\u52a9\u6211\u4eec\u51cf\u5c0f\u4e86\u5efa\u6a21CRF\u7684\u4ee3\u4ef7\u3002 2.2 \u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570 \u00b6 \u4e0a\u8fb9\u6211\u4eec\u63a2\u8ba8\u4e86\u7ebf\u6027\u94feCRF\u7684\u5b9a\u4e49\u4ee5\u53ca\u5b83\u7684\u4e00\u79cd\u7ecf\u5178\u56fe\u7ed3\u6784\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u7ee7\u7eed\u56de\u5230\u6211\u4eec\u5efa\u6a21\u7684\u547d\u540d\u5b9e\u4f53\u4efb\u52a1\u4e0a\u6765\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\ud835\udc65=[\ud835\udc650,\ud835\udc651,...,\ud835\udc65\ud835\udc56,...,\ud835\udc65\ud835\udc5b]\u4ee3\u8868\u8f93\u5165\u53d8\u91cf\uff0c\u5bf9\u5e94\u5230\u6211\u4eec\u5f53\u524d\u4efb\u52a1\u5c31\u662f\u8f93\u5165\u6587\u672c\u5e8f\u5217, \ud835\udc66=[\ud835\udc660,\ud835\udc661,...,\ud835\udc66\ud835\udc56,...,\ud835\udc66\ud835\udc5b]\u4ee3\u8868\u76f8\u5e94\u7684\u6807\u7b7e\u5e8f\u5217 \u5176\u4e2d\uff0c\u6bcf\u4e2a\u8f93\u5165\ud835\udc65\ud835\udc56\u5747\u5bf9\u5e94\u7740\u4e00\u4e2a\u6807\u7b7e\ud835\udc66\ud835\udc56\uff0c\u8fd9\u4e00\u6b65\u5bf9\u5e94\u7684\u5c31\u662f\u53d1\u5c04\u5206\u6570\uff0c\u5b83\u6307\u793a\u4e86\u5f53\u524d\u7684\u8f93\u5165\ud835\udc65\ud835\udc56\u5e94\u8be5\u5bf9\u5e94\u4ec0\u4e48\u6837\u7684\u6807\u7b7e\uff1b\u5728\u6bcf\u4e2a\u6807\u7b7e\ud835\udc66\ud835\udc56\u4e4b\u95f4\u4e5f\u5b58\u5728\u8fde\u7ebf\uff0c\u5b83\u8868\u793a\u5f53\u524d\u4f4d\u7f6e\u7684\u6807\u7b7e\ud835\udc66\ud835\udc56\u5411\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u7684\u6807\u7b7e\ud835\udc66\ud835\udc56+1\u7684\u4e00\u79cd\u8f6c\u79fb\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u5f53\u524d\u4f4d\u7f6e\u7684\u6807\u7b7e\u662f\u201dB-Person\u201d\uff0c\u90a3\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u5c31\u5f88\u6709\u53ef\u80fd\u662f\u201dI-Person\u201d\u6807\u7b7e\uff0c\u5373\u6807\u7b7e\u201dB-Person\u201d\u5411\u201dI-Person\u201d\u8f6c\u79fb\u7684\u6982\u7387\u4f1a\u6bd4\u8f83\u5927\u3002 \u8fd9\u91cc\u6211\u4eec\u5e26\u51fa\u4e86\u5efa\u6a21CRF\u8fc7\u7a0b\u4e2d\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570\uff0c\u4e0b\u8fb9\u6211\u4eec\u6765\u770b\u770b\u4ed6\u4eec\u662f\u4ec0\u4e48\u3002 2.2.1 \u53d1\u5c04\u5206\u6570 \u00b6 \u524d\u8fb9\u6211\u4eec\u5df2\u7ecf\u63d0\u5230\u8fc7\u53d1\u5c04\u5206\u6570\u4e86\uff0c\u5373BiLSTM\u540e\u4ea7\u751f\u7684\u6807\u7b7e\u5411\u91cf\u3002\u4e0b\u56fe\uff08\u56fe3\uff09\u4ee5\u77e9\u9635\u7684\u5f62\u5f0f\u5c55\u793a\u4e86\u53d1\u5c04\u5206\u6570\u7684\u751f\u6210\u8fc7\u7a0b\u3002 \u5f53\u7ed9\u5b9a\u7684\u6587\u672c\u5e8f\u5217\ud835\udc65=[\ud835\udc651,\ud835\udc652,\ud835\udc653,...,\ud835\udc65\ud835\udc5b]\u6620\u5c04\u4e3a\u5bf9\u5e94\u8bcd\u5411\u91cf\u4e4b\u540e\uff0c\u5c06\u4f1a\u5f97\u5230\u4e00\u4e2ashape\u4e3a[\ud835\udc5b,\ud835\udc52\ud835\udc5a\ud835\udc4f\ud835\udc52\ud835\udc51\ud835\udc51\ud835\udc56\ud835\udc5b\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\u7684\u8bcd\u5411\u91cf\u77e9\u9635\uff0c\u5176\u4e2d\u6bcf\u5bf9\u5e94\u4e00\u4e2a\u5b57\u8bcd\uff08\u6837\u4f8b\u53ea\u4f7f\u7528\u4e864\u4e2a\u8bcd\uff09\uff0c\u4f8b\u5982\ud835\udc650\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u662f[\ud835\udc5200,\ud835\udc5201,\ud835\udc5202,\ud835\udc5203]\u3002 \u7136\u540e\u5c06\ud835\udc52\ud835\udc5a\ud835\udc4f\ud835\udc60\u4f20\u5165BiLSTM\u540e\uff0c\u6bcf\u4e2a\u8bcd\u7684\u4f4d\u7f6e\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\uff0c\u6240\u6709\u7684\u5411\u91cf\u7ec4\u5408\u4e4b\u540e\u4f1a\u5f97\u5230\u4e00\u4e2a\u5411\u91cf\u77e9\u9635\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc63\ud835\udc52\ud835\udc50\ud835\udc61\ud835\udc5c\ud835\udc5f\uff0c\u5176\u4e2d\u6bcf\u884c\u4ee3\u8868\u5bf9\u5e94\u5355\u8bcd\u7ecf\u8fc7BiLSTM\u540e\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u3002 \u8fd9\u91cc\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u53ef\u4ee5\u7528\u6765\u6307\u5bfc\u5f53\u524d\u4f4d\u7f6e\u5e94\u8be5\u8f93\u51fa\u7684\u6807\u7b7e\u4fe1\u606f\uff0c\u4f46\u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\uff0c\u8fd9\u4e2a\u8f93\u51fa\u5411\u91cf\u7684\u7ef4\u5ea6\u5e76\u4e0d\u662f\u6807\u7b7e\u7684\u6570\u91cf\uff0c\u5b83\u4e0d\u80fd\u76f4\u63a5\u7528\u6765\u6307\u793a\u5e94\u8be5\u8f93\u51fa\u4ec0\u4e48\u6807\u7b7e\u3002\u4e00\u822c\u7684\u505a\u6cd5\u662f\u5728\u540e\u8fb9\u52a0\u4e00\u5c42\u7ebf\u6027\u5c42\uff0c\u5c06\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u7684\u7ef4\u5ea6\u6620\u5c04\u4e3a\u6807\u7b7e\u7684\u6570\u91cf\uff0c\u8fd9\u6837\u7684\u8bdd\u5c31\u4f1a\u751f\u6210\u524d\u8fb9\u6240\u8bb2\u7684\u6807\u7b7e\u5411\u91cf\uff0c\u5176\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5206\u522b\u5bf9\u5e94\u7740\u76f8\u5e94\u6807\u7b7e\u7684\u5206\u6570\uff0c\u6839\u636e\u8fd9\u4e2a\u5206\u6570\u53ef\u4ee5\u7528\u6765\u6307\u5bfc\u6700\u7ec8\u6807\u7b7e\u7684\u8f93\u51fa\u3002 \u5177\u4f53\u5730\uff0c\u7ebf\u6027\u5c42\u8fd9\u91cc\u53ea\u662f\u505a\u4e86\u8fd9\u6837\u7684\u4e00\u4e2a\u7ebf\u6027\u53d8\u6362\uff1a\ud835\udc66=\ud835\udc4b\ud835\udc4a+\ud835\udc4f\uff0c\u663e\u7136\uff0c\u8fd9\u91cc\u7684\ud835\udc4b\u5c31\u662f\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc63\ud835\udc52\ud835\udc50\ud835\udc61\ud835\udc5c\ud835\udc5f\uff0c \ud835\udc66\u662f\u76f8\u5e94\u7684\ud835\udc52\ud835\udc5a\ud835\udc56\ud835\udc60\ud835\udc60\ud835\udc56\ud835\udc5c\ud835\udc5b_\ud835\udc60\ud835\udc50\ud835\udc5c\ud835\udc5f\ud835\udc52\uff0c\ud835\udc4a\u548c\ud835\udc4f\u662f\u7ebf\u6027\u5c42\u7684\u53ef\u5b66\u4e60\u53c2\u6570\u3002 \u524d\u8fb9\u63d0\u5230\uff0c\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc63\ud835\udc52\ud835\udc50\ud835\udc61\ud835\udc5c\ud835\udc5f\u7684shape\u4e3a[\ud835\udc5b\uff0c\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\uff0c\u90a3\u4e48\u7ebf\u6027\u5c42\u7684\ud835\udc4a\u7684shape\u5e94\u8be5\u662f[\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52,\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\uff0c\u7ecf\u8fc7\u4ee5\u4e0a\u516c\u5f0f\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u53d1\u5c04\u5206\u6570\ud835\udc52\ud835\udc5a\ud835\udc56\ud835\udc60\ud835\udc60\ud835\udc56\ud835\udc5c\ud835\udc5b_\ud835\udc60\ud835\udc50\ud835\udc5c\ud835\udc5f\ud835\udc52\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5b57\u8bcd\u5bf9\u5e94\u4e00\u884c\u7684\u6807\u7b7e\u5206\u6570\uff08\u56fe\u4e2d\u53ea\u8bbe\u7f6e\u4e86\u4e09\u5217\uff0c\u4ee3\u8868\u4e00\u5171\u67093\u4e2a\u6807\u7b7e\uff09\uff0c\u4f8b\u5982\uff0c\ud835\udc650\u5bf9\u7b2c\u4e00\u4e2a\u6807\u7b7e\u7684\u5206\u6570\u9884\u6d4b\u4e3a\ud835\udc6100\uff0c\u5bf9\u7b2c\u4e8c\u4e2a\u6807\u7b7e\u7684\u5206\u6570\u9884\u6d4b\u4e3a\ud835\udc6101\uff0c\u5bf9\u7b2c\u4e09\u4e2a\u6807\u7b7e\u7684\u5206\u6570\u9884\u6d4b\u4e3a\ud835\udc6102\uff0c\u4f9d\u6b21\u7c7b\u63a8\u3002 2.2.2 \u8f6c\u79fb\u5206\u6570 \u00b6 \u4e0b\u9762\u6211\u4eec\u6765\u804a\u804a\u8f6c\u79fb\u5206\u6570\uff0c\u8fd9\u4e2a\u8f6c\u79fb\u5206\u6570\u8868\u793a\u4e00\u4e2a\u6807\u7b7e\u5411\u53e6\u4e00\u4e2a\u6807\u7b7e\u8f6c\u79fb\u7684\u5206\u6570\uff0c\u5206\u6570\u8d8a\u9ad8\uff0c\u8f6c\u79fb\u6982\u7387\u5c31\u8d8a\u5927\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u4e0b\u56fe\uff08\u56fe4\uff09\u5c55\u793a\u4e86\u8bb0\u5f55\u8f6c\u79fb\u5206\u6570\u7684\u77e9\u9635\u3002 \u8ba9\u6211\u4eec\u4ece\u5217\u5230\u884c\u5730\u6765\u770b\u4e0b\u8fd9\u4e2a\u8f6c\u79fb\u77e9\u9635\ud835\udc47\uff0cB-Person\u5411I-Person\u8f6c\u79fb\u7684\u5206\u6570\u4e3a0.93\uff0cB-Person\u5411I-Organization\u8f6c\u79fb\u7684\u5206\u6570\u4e3a0.02\uff0c\u524d\u8005\u7684\u5206\u6570\u8fdc\u8fdc\u5927\u4e8e\u540e\u8005\u3002I-Person\u5411I-Person\u8f6c\u79fb\u7684\u6982\u7387\u662f0.71\uff0cI-Organization\u5411I-Organization\u8f6c\u79fb\u7684\u5206\u6570\u662f0.95\uff0c\u56e0\u4e3a\u4e00\u4e2a\u4eba\u6216\u8005\u7ec4\u7ec7\u7684\u540d\u5b57\u5f80\u5f80\u5305\u542b\u591a\u4e2a\u5b57\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6982\u7387\u76f8\u5bf9\u662f\u6bd4\u8f83\u9ad8\u7684\uff0c\u8fd9\u5176\u5b9e\u4e5f\u662f\u5f88\u7b26\u5408\u6211\u4eec\u76f4\u89c2\u8ba4\u8bc6\u7684\u3002 \u5047\u8bbe\u6211\u4eec\u73b0\u5728\u6709\u4e2a\u6807\u7b7e\u5e8f\u5217\uff1aB-Person, I-Person, O, O\uff0cB-Organization, I-Organization\u3002\u90a3\u4e48\u8fd9\u4e2a\u5e8f\u5217\u7684\u8f6c\u79fb\u5206\u6570\u53ef\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u8ba1\u7b97\uff1a\ud835\udc46\ud835\udc52\ud835\udc5e\ud835\udc61=\ud835\udc47\ud835\udc3c\u2212\ud835\udc43\ud835\udc52\ud835\udc5f\ud835\udc60\ud835\udc5c\ud835\udc5b,\ud835\udc35\u2212\ud835\udc43\ud835\udc52\ud835\udc5f\ud835\udc60\ud835\udc5c\ud835\udc5b+\ud835\udc47\ud835\udc42,\ud835\udc3c\u2212\ud835\udc43\ud835\udc52\ud835\udc5f\ud835\udc60\ud835\udc5c\ud835\udc5b+\ud835\udc47\ud835\udc42,\ud835\udc42+\ud835\udc47\ud835\udc42,\ud835\udc35\u2212\ud835\udc42\ud835\udc5f\ud835\udc54\ud835\udc4e\ud835\udc5b\ud835\udc56\ud835\udc67\ud835\udc4e\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b+\ud835\udc47\ud835\udc35\u2212\ud835\udc42\ud835\udc5f\ud835\udc54\ud835\udc4e\ud835\udc5b\ud835\udc56\ud835\udc67\ud835\udc4e\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b,\ud835\udc3c\u2212\ud835\udc42\ud835\udc5f\ud835\udc54\ud835\udc4e\ud835\udc5b\ud835\udc56\ud835\udc67\ud835\udc4e\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b \u8fd9\u4e2a\u8f6c\u79fb\u5206\u6570\u77e9\u9635\u662fCRF\u4e2d\u7684\u4e00\u4e2a**\u53ef\u5b66\u4e60\u7684\u53c2\u6570\u77e9\u9635**\uff0c\u5b83\u7684\u5b58\u5728\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u663e\u793a\u5730\u53bb\u5efa\u6a21\u6807\u7b7e\u4e4b\u95f4\u7684\u8f6c\u79fb\u5173\u7cfb\uff0c\u63d0\u9ad8\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u51c6\u786e\u7387\u3002 2.3 CRF\u5efa\u6a21\u7684\u635f\u5931\u51fd\u6570 \u00b6 \u524d\u8fb9\u6211\u4eec\u8bb2\u5230\uff0cCRF\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u4ee5\u4e00\u79cd\u5168\u5c40\u7684\u65b9\u5f0f\u5efa\u6a21\uff0c\u5728\u6240\u6709\u53ef\u80fd\u7684\u8def\u5f84\u4e2d\u9009\u62e9\u6548\u679c\u6700\u4f18\uff0c\u5206\u6570\u6700\u9ad8\u7684\u90a3\u6761\u8def\u5f84\u3002\u90a3\u4e48\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u53bb\u5efa\u6a21\u8fd9\u4e2a\u7b56\u7565\u5462\uff0c\u4e0b\u9762\u6211\u4eec\u6765\u5177\u4f53\u8c08\u8c08\u3002(\u56fe5) \u4e0a\u56fe5\u5c55\u793a\u4e86CRF\u7684\u5de5\u4f5c\u56fe\uff0c\u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e32\u8f93\u5165\ud835\udc65=[\ud835\udc650,\ud835\udc651,\ud835\udc652,\ud835\udc65\ud835\udc5b]\uff08\u8fd9\u91cc\u7684\ud835\udc65\u662f\u6587\u672c\u4e32\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\uff0c\u6bcf\u4e2a\u5b57\u8bcd\ud835\udc65\ud835\udc56\u90fd\u5bf9\u5e94\u7740\u4e00\u4e2a\u53d1\u5c04\u5206\u6570\u5411\u91cf\uff0c\u4e5f\u5c31\u662f\u524d\u8fb9\u63d0\u5230\u7684\u6807\u7b7e\u5411\u91cf\uff0c\u8be5\u5411\u91cf\u7684\u7ef4\u5ea6\u5c31\u662f\u6807\u7b7e\u6570\u91cf\uff09\uff0c\u671f\u5f85\u89e3\u7801\u51fa\u76f8\u5e94\u7684\u6807\u7b7e\u5e8f\u5217\ud835\udc66=[\ud835\udc660,\ud835\udc661,\ud835\udc662,...,\ud835\udc66\ud835\udc5b]\uff0c\u5f62\u5f0f\u5316\u4e3a\u5bf9\u5e94\u7684\u6761\u4ef6\u6982\u7387\u516c\u5f0f\u5982\u4e0b\uff1a \u5728\u524d\u9762\u5185\u5bb9\u6211\u4eec\u63d0\u5230\uff0cCRF\u7684\u89e3\u7801\u7b56\u7565\u5728\u6240\u6709\u53ef\u80fd\u7684\u8def\u5f84\u4e2d\uff0c\u627e\u51fa\u5f97\u51fa\u6982\u7387\u6700\u5927\uff0c\u6548\u679c\u6700\u4f18\u7684\u4e00\u6761\u8def\u5f84\uff0c\u90a3\u8fd9\u4e2a\u6807\u7b7e\u5e8f\u5217\u5c31\u662f\u6a21\u578b\u7684\u8f93\u51fa\uff0c\u5047\u8bbe\u6807\u7b7e\u6570\u91cf\u662f\ud835\udc58\uff0c\u6587\u672c\u957f\u5ea6\u662f\ud835\udc5b\uff0c\u663e\u7136\u4f1a\u6709\ud835\udc41=\ud835\udc58\ud835\udc5b\u6761\u8def\u5f84\uff0c\u82e5\u7528\ud835\udc46\ud835\udc56\u4ee3\u8868\u7b2c\ud835\udc56\u6761\u8def\u5f84\u7684\u5206\u6570\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u53bb\u7b97\u4e00\u4e2a\u6807\u7b7e\u5e8f\u5217\u51fa\u73b0\u7684\u6982\u7387\uff1a \u73b0\u5728\u6211\u4eec\u6709\u4e00\u6761\u771f\u5b9e\u7684\u8def\u5f84\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59\uff0c\u5373\u6211\u4eec\u671f\u5f85CRF\u89e3\u7801\u51fa\u6765\u7684\u5e8f\u5217\u5c31\u662f\u8fd9\u4e00\u6761\u3002\u90a3\u5b83\u7684\u5206\u6570\u53ef\u4ee5\u8868\u793a\u4e3a\ud835\udc60\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59\uff0c\u5b83\u51fa\u73b0\u7684\u6982\u7387\u5c31\u662f\uff1a \u6240\u4ee5\u6211\u4eec\u5efa\u6a21\u5b66\u4e60\u7684\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u4e0d\u65ad\u7684\u63d0\u9ad8\ud835\udc43(\ud835\udc46\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59)\u7684\u6982\u7387\u503c\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5f53\u76ee\u6807\u51fd\u6570\u8d8a\u5927\u65f6\uff0c\u5b83\u5bf9\u5e94\u7684\u635f\u5931\u5c31\u5e94\u8be5\u8d8a\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u53bb\u5efa\u6a21\u5b83\u7684\u635f\u5931\u51fd\u6570\uff1a \u4e3a\u65b9\u4fbf\u6c42\u89e3\uff0c\u6211\u4eec\u4e00\u822c\u5c06\u8fd9\u6837\u7684\u635f\u5931\u653e\u5230log\u7a7a\u95f4\u53bb\u6c42\u89e3\uff0c\u56e0\u4e3alog\u51fd\u6570\u672c\u8eab\u662f\u5355\u8c03\u9012\u589e\u7684\uff0c\u6240\u4ee5\u5b83\u5e76\u4e0d\u5f71\u54cd\u6211\u4eec\u53bb\u8fed\u4ee3\u4f18\u5316\u635f\u5931\u51fd\u6570\u3002 \u5343\u547c\u4e07\u5524\u59cb\u51fa\u6765\uff0c\u8fd9\u5c31\u662f\u6211\u4eecCRF\u5efa\u6a21\u7684\u635f\u5931\u51fd\u6570\u4e86\u3002\u6211\u4eec\u6574\u4e2aBiLSTM+CRF\u5efa\u6a21\u7684\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u51fd\u6570\u8d8a\u6765\u8d8a\u5c0f\u3002\u4ece\u8fd9\u4e2a\u635f\u5931\u51fd\u6570\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u4e2a\u635f\u5931\u51fd\u6570\u5305\u542b\u4e24\u90e8\u5206\uff1a \u5355\u6761\u771f\u5b9e\u8def\u5f84\u7684\u5206\u6570\ud835\udc46\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59\u548c\u5f52\u4e00\u5316\u9879\ud835\udc59\ud835\udc5c\ud835\udc54(\ud835\udc52\ud835\udc461+\ud835\udc52\ud835\udc462+...+\ud835\udc52\ud835\udc46\ud835\udc41)\uff0c \u5373\u5c06\u5168\u90e8\u7684\u8def\u5f84\u5206\u6570\u8fdb\u884c\ud835\udc59\ud835\udc5c\ud835\udc54_\ud835\udc60\ud835\udc62\ud835\udc5a_\ud835\udc52\ud835\udc65\ud835\udc5d\u64cd\u4f5c\uff0c\u5373\u5148\u5c06\u6bcf\u6761\u8def\u5f84\u5206\u6570\ud835\udc46\ud835\udc56\u8fdb\u884c\ud835\udc52\ud835\udc65\ud835\udc5d(\ud835\udc46\ud835\udc56)\uff0c\u7136\u540e\u518d\u5c06\u6240\u6709\u7684\u9879\u52a0\u8d77\u6765\uff0c\u6700\u540e\u53d6\ud835\udc59\ud835\udc5c\ud835\udc54\u503c\u3002 \u8bb2\u5230\u8fd9\u91cc\uff0c\u6709\u7684\u540c\u5b66\u53ef\u80fd\u4f1a\u6709\u7591\u60d1\uff0c\u8fd9\u91cc\u7684\u6bcf\u6761\u8def\u5f84\u5206\u6570\u5e94\u8be5\u600e\u4e48\u7b97\u5462\uff1f\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 2.4 \u5355\u6761\u8def\u5f84\u7684\u5206\u6570\u8ba1\u7b97 \u00b6 \u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u6211\u4eec\u518d\u6765\u505a\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u524d\u8fb9\u6211\u4eec\u63d0\u5230\u4e86\u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570\uff0c\u5047\u8bbe\ud835\udc38\u4ee3\u8868\u53d1\u5c04\u5206\u6570\u77e9\u9635\uff0c\ud835\udc47\u4ee3\u8868\u8f6c\u79fb\u5206\u6570\u77e9\u9635\uff0c\ud835\udc5b\u4ee3\u8868\u6587\u672c\u5e8f\u5217\u957f\u5ea6\uff0c\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52\u4ee3\u8868\u6807\u7b7e\u7684\u6570\u91cf\u3002\u53e6\u5916\u4e3a\u65b9\u4fbf\u4e66\u5199\uff0c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u6807\u7b7e\u7f16\u4e2aid\u53f7\u3002 Tag B-Person I-Person B-Organization I-organization O Tag_id 0 1 2 3 4 \u5176\u4e2d, \ud835\udc38\u7684shape\u4e3a[\ud835\udc5b,\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52], \u6bcf\u884c\u5bf9\u5e94\u7740\u4e00\u4e2a\u6587\u672c\u5b57\u8bcd\u7684\u53d1\u5c04\u5206\u6570\uff0c\u6bcf\u5217\u4ee3\u8868\u4e00\u4e2a\u6807\u7b7e\uff0c\u4f8b\u5982\uff0c\ud835\udc3801\u4ee3\u8868\ud835\udc650\u53d6id\u4e3a1\u7684\u6807\u7b7e\u5206\u6570\uff0c\ud835\udc3823\u4ee3\u8868\ud835\udc652\u53d6id\u4e3a3\u7684\u6807\u7b7e\u5206\u6570\u3002\ud835\udc47\u7684shape\u4e3a[\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52,\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\uff0c\u5b83\u4ee3\u8868\u4e86\u6807\u7b7e\u4e4b\u95f4\u76f8\u4e92\u8f6c\u79fb\u7684\u5206\u6570\uff0c\u4f8b\u5982\uff0c\ud835\udc4703\u4ee3\u8868id\u4e3a3\u7684\u6807\u7b7e\u5411id\u4e3a0\u7684\u6807\u7b7e\u8f6c\u79fb\u5206\u6570\u3002 \u6bcf\u6761\u8def\u5f84\u7684\u5206\u6570\u5c31\u662f\u7531\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570\u7ec4\u5408\u800c\u6210\u7684\uff0c\u5bf9\u4e8e\u56fe5\u6807\u8bb0\u51fa\u6765\u7684\u9ec4\u8272\u8def\u5f84\u6765\u8bf4\uff0c\ud835\udc650\u7684\u6807\u7b7e\u662fB-Person\uff0c\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\u662f\ud835\udc3800\uff0c\ud835\udc651\u7684\u6807\u7b7e\u662fI-Person\uff0c\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\u662f\ud835\udc3811\uff0c\u7531B-Person\u5411I-Person\u8f6c\u79fb\u7684\u5206\u6570\u662f\ud835\udc4710\uff0c\u56e0\u6b64\u5230\u8fd9\u4e00\u6b65\u7684\u5206\u6570\u5c31\u662f\uff1a\ud835\udc3800+\ud835\udc4710+\ud835\udc3811\u3002 \u63a5\u4e0b\u6765\ud835\udc652\u7684\u6807\u7b7e\u662f\ud835\udc42\uff0c\u7531\ud835\udc651\u7684\u6807\u7b7e\u5411I-Person\u5411\ud835\udc652\u7684\u6807\u7b7eO\u8f6c\u79fb\u7684\u6982\u7387\u662f\ud835\udc4741\uff0c\u56e0\u6b64\u5230\u8fd9\u4e00\u6b65\u7684\u5206\u6570\u662f\uff1a\ud835\udc3800+\ud835\udc4710+\ud835\udc3811+\ud835\udc4741+\ud835\udc3824\uff0c\u4f9d\u6b21\u7c7b\u63a8\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u5b8c\u6574\u6761\u8def\u5f84\u7684\u5206\u6570\u3002\u5047\u8bbe\u7b2c\ud835\udc56\u4e2a\u4f4d\u7f6e\u5bf9\u5e94\u7684\u6807\u7b7e\u4e3a\ud835\udc66\uff0c\u5219\u6574\u6761\u8def\u5f84\u7684\u5206\u6570\u8ba1\u7b97\u5f62\u5f0f\u5316\u516c\u5f0f\u4e3a\uff1a 2.5 \u5168\u90e8\u8def\u5f84\u7684\u5206\u6570\u8ba1\u7b97 \u00b6 2.3\u8282\u4e2d\u7684\u635f\u5931\u51fd\u6570\u5305\u62ec\u4e24\u9879\uff0c\u5355\u6761\u771f\u5b9e\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\u548c\u5f52\u4e00\u5316\u9879\uff08\u5982\u4e0a\u6240\u8ff0\uff0c\u5168\u90e8\u8def\u5f84\u5206\u6570\u7684\ud835\udc59\ud835\udc5c\ud835\udc54_\ud835\udc60\ud835\udc62\ud835\udc5a_\ud835\udc52\ud835\udc65\ud835\udc5d\uff0c\u4e3a\u65b9\u4fbf\u63cf\u8ff0\uff0c\u540e\u7eed\u76f4\u63a5\u5c06\u4e2a\u5f52\u4e00\u5316\u9879\u63cf\u8ff0\u4e3a\u5168\u90e8\u8def\u5f84\u4e4b\u548c\uff09\u7684\u8ba1\u7b97\u3002\u8fd9\u91cc\u4f60\u6216\u8bb8\u4f1a\u95ee\uff0c\u73b0\u5728\u77e5\u9053\u4e86\u5355\u6761\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u904d\u5386\u4e00\u4e0b\u6240\u6709\u7684\u8def\u5f84\u7b97\u4e2a\u5206\u6570\uff0c\u4e0d\u5c31\u53ef\u4ee5\u8f7b\u677e\u7b97\u51fa\u5168\u90e8\u8def\u5f84\u4e4b\u548c\u5417\uff1f\u662f\u7684\uff0c\u8fd9\u5728\u7406\u8bba\u4e0a\u662f\u53ef\u884c\u7684\u3002 \u4f46\u662f\uff0c\u524d\u8fb9\u6211\u4eec\u63d0\u5230\u8fd9\u4e2a\u8def\u5f84\u7684\u6570\u91cf\u662f\u4e2a\u6307\u6570\u7ea7\u522b\u7684\u91cf\u7eb2\uff0c\u5047\u8bbe\u6211\u5bf9\u4e32\u5305\u542b50\u4e2a\u5b57\u7684\u6587\u672c\u4e32\u8fdb\u884c\u5b9e\u4f53\u8bc6\u522b\uff0c\u6807\u7b7e\u7684\u6570\u91cf\u662f31\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8def\u5f84\u7684\u6570\u91cf\u5c06\u662f 31^{50}\u200b 31^{50}\u200b \u6761\uff0c\u8fd9\u662f\u771f\u7684\u662f\u96be\u4ee5\u63a5\u53d7\u7684\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5b83\u4f1a\u8fdc\u8fdc\u62d6\u6162\u6a21\u578b\u7684\u8bad\u7ec3\u548c\u9884\u6d4b\u6548\u7387\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u8981\u6362\u4e00\u79cd\u9ad8\u6548\u7684\u601d\u8def\uff0c\u8fd9\u91cc\u5176\u5b9e\u7528\u5230\u4e86\u4e00\u79cd\u88ab\u79f0\u4e3a\u524d\u5411\u7b97\u6cd5\uff08\u8fd9\u91cc\u4e0d\u518d\u8bb2\u89e3\uff09\u7684\u52a8\u6001\u89c4\u5212\uff0c\u5b83\u80fd\u5e2e\u52a9\u6211\u4eec\u5c06\u56fe5\u6240\u6709\u8def\u5f84\u7684\u548c\u8ba1\u7b97\uff0c\u62c6\u89e3\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u548c\u8ba1\u7b97\uff0c\u6700\u7ec8\u5f97\u51fa\u6240\u6709\u7684\u8def\u5f84\u4e4b\u548c\u3002 2.6 Viterbi\u89e3\u7801 \u00b6 \u5728\u524d\u8fb9\u51e0\u8282\uff0c\u6211\u4eec\u8bb2\u8fc7\u4e86CRF\u7684\u635f\u5931\u51fd\u6570\u3001\u5355\u6761\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\u3001\u5168\u90e8\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\uff0c\u6839\u636e\u8fd9\u4e9b\u5185\u5bb9\u5b8c\u5168\u53ef\u4ee5\u8fdb\u884cBiLSTM+CRF\u7684\u8bad\u7ec3\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5982\u4f55\u4f7f\u7528CRF\u4ece\u5168\u90e8\u7684\u8def\u5f84\u4e2d\u89e3\u7801\u51fa\u5f97\u5206\u6700\u9ad8\u7684\u90a3\u6761\u8def\u5f84\u5462\uff1f \u540c2.5\u8282\u6240\u8ff0\uff0c\u8ba1\u7b97\u5168\u90e8\u8def\u5f84\u5206\u6570\u540e\uff0c\u9009\u62e9\u5f97\u5206\u6700\u5927\u7684\u90a3\u6761\u8def\u5f84\u80af\u5b9a\u662f\u4e0d\u884c\u7684\u3002\u5176\u5b9e\u8fd9\u91cc\u662f\u4f7f\u7528\u4e86\u4e00\u79cd\u88ab\u79f0\u4e3a**Viterbi\uff08\u6269\u5c55\u8d44\u6599\uff09**\u7684\u7b97\u6cd5\uff0c\u5b83\u7684\u601d\u60f3\u548c2.5\u8282\u4ecb\u7ecd\u7684**\u524d\u5411\u7b97\u6cd5**\u6709\u4e9b\u7c7b\u4f3c\uff0c\u5c06\u4ece\u5168\u90e8\u8def\u5f84\u4e2d\u67e5\u627e\u6700\u4f18\u8def\u5f84\u7684\u8fc7\u7a0b\uff0c\u62c6\u89e3\u4e3a\u9009\u62e9\u6bcf\u4e2a\u4f4d\u7f6e\u7d2f\u8ba1\u7684\u6700\u5927\u8def\u5f84\u3002 3 BiLSTM+CRF\u9879\u76ee\u5b8c\u6574\u5b9e\u73b0 \u00b6 3.1 \u6574\u4f53\u4ee3\u7801\u67b6\u6784\u56fe \u00b6 3.2 \u6570\u636e\u9884\u5904\u7406 \u00b6 \u672c\u9879\u76ee\u4e2d\u5bf9\u6570\u636e\u90e8\u5206\u7684\u9884\u5904\u7406\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u7b2c\u4e8c\u6b65: \u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e \u7b2c\u4e09\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4e0edataloader\u51fd\u6570 \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u00b6 \u6570\u636e\u8bf4\u660e\uff1a\u672c\u6b21\u9879\u76ee\u6570\u636e\u4e00\u5171\u5b58\u653e\u5728\u4e24\u4e2a\u6587\u4ef6\u5939\u4e2d\uff0c\u8def\u5f84\u5206\u522b\u4e3a\uff1a /MedicalKB/Ner/LSTM_CRF/data_origin /MedicalKB/Ner/LSTM_CRF/data data_origin\u6570\u636e\u8bf4\u660e\uff1a \u8be5\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u6765\u6e90\u4e3a**\u533b\u9662\u771f\u5b9e\u75c5\u60a3\u7684\u533b\u7597\u6570\u636e\uff0c\u6570\u636e\u91cf\u6709\u9650\uff0c\u4f46\u662f\u8db3\u591f\u638c\u63e1\u672c\u6b21\u5b9e\u73b0\u5b9e\u4f53\u62bd\u53d6\u7684\u6a21\u578b\u601d\u60f3\u3002 \u8be5\u6587\u4ef6\u4e2d\u5171\u5305\u62ec4\u4e2a\u6587\u4ef6\u5939: \u6bcf\u4e2a\u6587\u4ef6\u5939\u4e0b\u5171\u6709\u4e24\u7c7b\u6587\u4ef6\uff1a \u4ee5.txt\u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u662f\u6807\u6ce8\u597d\u7684\u6570\u636e\uff0c\u5305\u62ec\u5176\u4f4d\u7f6e\u548c\u7c7b\u578b\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a \u53f3\u9acb\u90e8 21 23 \u8eab\u4f53\u90e8\u4f4d \u75bc\u75db 27 28 \u75c7\u72b6\u548c\u4f53\u5f81 \u80bf\u80c0 29 30 \u75c7\u72b6\u548c\u4f53\u5f81 txt\u4e2d\uff0c\u6bcf\u884c\u67094\u5217\uff0c\u5217\u4e4b\u95f4\u7528\u7a7a\u683c\u9694\u5f00 \u7b2c\u4e00\u5217\uff1a\u5b9e\u4f53\u540d\u79f0\uff1b\u7b2c\u4e8c\u5217\uff1a\u5b9e\u4f53\u5f00\u59cb\u4f4d\u7f6e\uff1b\u7b2c\u4e09\u5217\uff1a\u5b9e\u4f53\u7ed3\u675f\u4f4d\u7f6e\uff1b\u7b2c\u56db\u5217\uff1a\u5b9e\u4f53\u7c7b\u578b \u4ee5txtoriginal.txt\u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u662f\u539f\u59cb\u6587\u6863 \u5973\u6027\uff0c88\u5c81\uff0c\u519c\u6c11\uff0c\u53cc\u6ee6\u5e94\u8425\u5b50\u6751\u4eba\uff0c\u4e3b\u56e0\u53f3\u9acb\u90e8\u6454\u4f24\u540e\u75bc\u75db\u80bf\u80c0\uff0c\u6d3b\u52a8\u53d7\u96505\u5c0f\u65f6\u4e8e2016-10-29\uff0c11\uff1a12\u5165\u9662\u3002 \u6ce8\u610f\uff1a\u6211\u4eec\u9700\u8981\u5bf9data_origin\u4e2d\u6240\u6709\u7684\u6587\u4ef6\u6570\u636e\u8fdb\u884c\u683c\u5f0f\u8f6c\u6362\uff0c\u5c06\u5176\u8f6c\u6362\u4e3aBIO\u6570\u636e\u6807\u6ce8\u5f62\u5f0f\uff0c\u7b26\u5408NER\u4efb\u52a1\u8981\u6c42\u3002 data\u6570\u636e\u8bf4\u660e\uff1a \u8be5\u6587\u4ef6\u4e2d\u539f\u59cb\u5305\u62ec\u4e24\u4e2ajson\u6587\u4ef6\uff1alabels.json\u548ctag2id.json labels.json\u6587\u4ef6\u8bf4\u660e\uff1a { \"\u6cbb\u7597\": \"TREATMENT\", \"\u8eab\u4f53\u90e8\u4f4d\": \"BODY\", \"\u75c7\u72b6\u548c\u4f53\u5f81\": \"SIGNS\", \"\u68c0\u67e5\u548c\u68c0\u9a8c\": \"CHECK\", \"\u75be\u75c5\u548c\u8bca\u65ad\": \"DISEASE\" } \u4e00\u5171\u5305\u542b5\u79cd\u5b9e\u4f53\u7c7b\u578b\uff1aTREATMENT\u6cbb\u7597\u65b9\u5f0f, BODY\u8eab\u4f53\u90e8\u4f4d, SIGN\u75be\u75c5\u75c7\u72b6, CHECK\u533b\u5b66\u68c0\u67e5, DISEASE\u75be\u75c5\u5b9e\u4f53.O\u975e\u5b9e\u4f53\u90e8\u5206, tag2id.json\u6587\u4ef6\u8bf4\u660e\uff1a { \"O\" : 0 , \"B-TREATMENT\" : 1 , \"I-TREATMENT\" : 2 , \"B-BODY\" : 3 , \"I-BODY\" : 4 , \"B-SIGNS\" : 5 , \"I-SIGNS\" : 6 , \"B-CHECK\" : 7 , \"I-CHECK\" : 8 , \"B-DISEASE\" : 9 , \"I-DISEASE\" : 10 } \u5c06\u4e0a\u8ff05\u79cd\u5b9e\u4f53\u7c7b\u578b\uff0c\u8f6c\u6362\u4e3a\u6807\u7b7e\u5f62\u5f0f\uff0c\u6bcf\u4e2atoken\u5bf9\u5e9411\u79cd\u53ef\u80fd\u7684\u6807\u7b7e\uff08\u6ce8\u610f\u8fd8\u6709\u4e00\u4e2a\u975e\u5b9e\u4f53\u7c7b\u578bO\uff09 \u7b2c\u4e8c\u6b65: \u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e \u00b6 \u9700\u8981\u5bf9\u4e0a\u8ff0\u7684origin\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u8fdb\u884c\u5e8f\u5217\u6807\u6ce8\uff0c\u9009\u62e9\u6807\u6ce8\u65b9\u5f0f\uff1aBIO\uff0c\u76ee\u7684\uff1a\u5bf9\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2atoken\u90fd\u8981\u6807\u8bb0\u4e0a\u5bf9\u5e94\u7684\u6807\u7b7e\uff0c\u5e76\u7edf\u8ba1\u6240\u6709tokens\uff08\u53bb\u91cd\u540e\uff09\u5e76\u4fdd\u5b58 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u672a\u6807\u6ce8\u524d\uff1a ['\u4ee5', '\u54b3', '\u55fd', '\uff0c', '\u54b3', '\u75f0', '\uff0c', '\u53d1', '\u70ed', '\u4e3a', '\u4e3b', '\u75c7', '\u3002'] \u6807\u6ce8\u540e\uff1a ['O', 'B-SIGNS', 'I-SIGNS', 'O', 'B-SIGNS', 'I-SIGNS', 'O', 'B-SIGNS', 'I-SIGNS', 'O', 'O', 'O', 'O'] \u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e \u4ee3\u7801\u8def\u5f84\uff1a/MedicalKB/Ner/LSTM_CRF/utils/data_process.py \u5728data_process.py\u811a\u672c\u4e2d\uff0c\u5b9a\u4e49\u4e00\u4e2aTransferData\u7c7b\uff0c\u5b9e\u73b0\u6570\u636e\u683c\u5f0f\u7684\u8f6c\u6362 \u5177\u4f53\u4ee3\u7801\uff1a import json import os from collections import Counter os . chdir ( '..' ) cur = os . getcwd () print ( '\u5f53\u524d\u6570\u636e\u5904\u7406\u9ed8\u8ba4\u5de5\u4f5c\u76ee\u5f55\uff1a' , cur ) class TransferData (): def __init__ ( self ): self . label_dict = json . load ( open ( os . path . join ( cur , 'data/labels.json' ))) self . seq_tag_dict = json . load ( open ( os . path . join ( cur , 'data/tag2id.json' ))) self . origin_path = os . path . join ( cur , 'data_origin' ) self . train_filepath = os . path . join ( cur , 'data/train.txt' ) def transfer ( self ): with open ( self . train_filepath , 'w' , encoding = 'utf-8' ) as fr : for root , dirs , files in os . walk ( self . origin_path ): for file in files : filepath = os . path . join ( root , file ) if 'original' not in filepath : continue label_filepath = filepath . replace ( '.txtoriginal' , '' ) print ( filepath , ' \\t\\t ' , label_filepath ) res_dict = self . read_label_text ( label_filepath ) with open ( filepath , 'r' , encoding = 'utf-8' ) as f : content = f . read () . strip () for indx , char in enumerate ( content ): char_label = res_dict . get ( indx , 'O' ) fr . write ( char + ' \\t ' + char_label + ' \\n ' ) def read_label_text ( self , label_filepath ): res_dict = {} for line in open ( label_filepath , 'r' , encoding = 'utf-8' ): # line--\u300b[\u53f3\u9acb\u90e8\\t21\\t23\\t\u8eab\u4f53\u90e8\u4f4d] res = line . strip () . split ( ' \\t ' ) # res-->['\u53f3\u9acb\u90e8', '21', '23', '\u8eab\u4f53\u90e8\u4f4d'] start = int ( res [ 1 ]) end = int ( res [ 2 ]) label = res [ 3 ] label_tag = self . label_dict . get ( label ) for i in range ( start , end + 1 ): if i == start : tag = \"B-\" + label_tag else : tag = \"I-\" + label_tag res_dict [ i ] = tag return res_dict if __name__ == '__main__' : handler = TransferData () handler . transfer () \u7ecf\u8fc7\u6570\u636e\u8f6c\u6362\u540e\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u4e00\u4e2atrain.txt\u6587\u6863\uff0c\u6b64\u65f6\uff0c\u5bf9\u4e8e\u6240\u6709origin\u4e2d\u7684\u6570\u636e\uff0c\u90fd\u5b9e\u73b0\u4e86BIO\u6807\u6ce8 \u54b3 B-SIGNS \u75f0 I-SIGNS \uff0c O \u53d1 B-SIGNS \u70ed I-SIGNS \uff0c O \u996e O \u98df O \u3001 O \u7761 O \u7720 O \u5c1a O \u53ef O \u7b2c\u4e09\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u00b6 Config\u7c7b\u6587\u4ef6\u8def\u5f84\u4e3a:/MedicalKB/Ner/LSTM_CRF/config.py config\u6587\u4ef6\u76ee\u7684: \u914d\u7f6e\u9879\u76ee\u5e38\u7528\u53d8\u91cf\uff0c\u4e00\u822c\u8fd9\u4e9b\u53d8\u91cf\u5c5e\u4e8e\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\uff0c\u6bd4\u5982: \u8bad\u7ec3\u6587\u4ef6\u8def\u5f84\u3001\u6a21\u578b\u8bad\u7ec3\u6b21\u6570\u3001\u6a21\u578b\u8d85\u53c2\u6570\u7b49\u7b49 import os import torch import json class Config ( object ): def __init__ ( self ): # \u5982\u679c\u662fwindows\u6216\u8005linux\u7535\u8111\uff08\u4f7f\u7528GPU\uff09 # self.device = \"cuda:0\" if torch.cuda.is_available() else \"cpu:0\" # M1\u82af\u7247\u53ca\u5176\u4ee5\u4e0a\u7684\u7535\u8111\uff08\u4f7f\u7528GPU\uff09 self . device = 'mps' self . train_path = '/MedicalKB/Ner/LSTM_CRF/data/train.txt' self . vocab_path = '/MedicalKB/Ner/LSTM_CRF/vocab/vocab.txt' self . embedding_dim = 300 self . epochs = 5 self . batch_size = 8 self . hidden_dim = 256 self . lr = 2e-3 # crf\u7684\u65f6\u5019\uff0clr\u53ef\u4ee5\u5c0f\u70b9\uff0c\u6bd4\u59821e-3 self . dropout = 0.2 self . model = \"BiLSTM_CRF\" # \u53ef\u4ee5\u53ea\u7528\"BiLSTM\" self . tag2id = json . load ( open ( '/MedicalKB/Ner/LSTM_CRF/data/tag2id.json' )) if __name__ == '__main__' : conf = Config () print ( conf . train_path ) print ( conf . tag2id ) \u7b2c\u56db\u6b65: \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570 \u00b6 \u6784\u9020\u6570\u636e\u9884\u5904\u7406\u51fd\u6570\uff0c\u5206\u4e3a\u4e24\u6b65\u9aa4\uff1a 1.\u6784\u9020\u6837\u672cx\u4ee5\u53ca\u6807\u7b7ey\u6570\u636e\u5bf9\uff0c\u4ee5\u53ca\u83b7\u53d6vocabs 2.\u6784\u9020\u6570\u636e\u8fed\u4ee3\u5668 4.1 \u6784\u9020(x,y)\u6837\u672c\u5bf9\uff0c\u4ee5\u53ca\u83b7\u53d6vocabs \u00b6 \u56e0\u4e3a\u5728\u7b2c\u4e8c\u6b65\u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e\u65f6\uff0c\u6ca1\u6709\u5bf9\u6837\u672c\u8fdb\u884c\u660e\u786e\u7684\u5206\u5272\uff0c\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u6807\u70b9\u7b26\u53f7\u4e3a\u5206\u9694\u7b26\uff0c\u6784\u9020\u4e0d\u540c\u7684(x, y)\u6837\u672c\u5bf9 \u4ee3\u7801\u5b9e\u73b0\uff1a \u8def\u5f84\uff1a/MedicalKB/Ner/LSTM_CRF/utils/common.py from LSTM_CRF.config import * conf = Config () '''\u6784\u9020\u6570\u636e\u96c6''' def build_data (): datas = [] sample_x = [] sample_y = [] vocab_list = [ \"PAD\" , 'UNK' ] for line in open ( conf . train_path , 'r' , encoding = 'utf-8' ): line = line . rstrip () . split ( ' \\t ' ) if not line : continue char = line [ 0 ] if not char : continue cate = line [ - 1 ] sample_x . append ( char ) sample_y . append ( cate ) if char not in vocab_list : vocab_list . append ( char ) if char in [ '\u3002' , '?' , '!' , '\uff01' , '\uff1f' ]: datas . append ([ sample_x , sample_y ]) sample_x = [] sample_y = [] word2id = { wd : index for index , wd in enumerate ( vocab_list )} write_file ( vocab_list , conf . vocab_path ) return datas , word2id '''\u4fdd\u5b58\u5b57\u5178\u6587\u4ef6''' def write_file ( wordlist , filepath ): with open ( filepath , 'w' , encoding = 'utf-8' ) as f : f . write ( ' \\n ' . join ( wordlist )) if __name__ == '__main__' : datas , word2id = build_data () print ( len ( datas )) print ( datas [: 4 ]) print ( word2id ) print ( len ( word2id )) 4.2 \u6784\u9020\u6570\u636e\u8fed\u4ee3\u5668 \u00b6 \u4ee3\u7801\u8def\u5f84\uff1a/MedicalKB/Ner/LSTM_CRF/utils/data_loader.py \u7b2c\u4e00\u6b65\uff1a\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 import json import torch from common import * from torch.utils.data import DataLoader , Dataset from torch.nn.utils.rnn import pad_sequence datas , word2id = build_data () \u7b2c\u4e8c\u6b65\uff1a\u6784\u5efaDataset\u7c7b class NerDataset ( Dataset ): def __init__ ( self , datas ): super () . __init__ () self . datas = datas def __len__ ( self ): return len ( self . datas ) def __getitem__ ( self , item ): x = self . datas [ item ][ 0 ] y = self . datas [ item ][ 1 ] return x , y \u7b2c\u4e09\u6b65\uff1a\u6784\u5efa\u81ea\u5b9a\u4e49\u51fd\u6570collate_fn() def collate_fn ( batch ): x_train = [ torch . tensor ([ word2id [ char ] for char in data [ 0 ]]) for data in batch ] y_train = [ torch . tensor ([ conf . tag2id [ label ] for label in data [ 1 ]]) for data in batch ] # \u8865\u9f50input_ids, \u4f7f\u75280\u4f5c\u4e3a\u586b\u5145\u503c input_ids_padded = pad_sequence ( x_train , batch_first = True , padding_value = 0 ) # # \u8865\u9f50labels\uff0c\u4f7f\u75280\u4f5c\u4e3a\u586b\u5145\u503c labels_padded = pad_sequence ( y_train , batch_first = True , padding_value =- 100 ) # \u521b\u5efaattention mask attention_mask = ( input_ids_padded != 0 ) . long () return input_ids_padded , labels_padded , attention_mask \u7b2c\u56db\u6b65\uff1a\u6784\u5efaget_data\u51fd\u6570\uff0c\u83b7\u5f97\u6570\u636e\u8fed\u4ee3\u5668 def get_data (): train_dataset = NerDataset ( datas [: 6200 ]) train_dataloader = DataLoader ( dataset = train_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , ) dev_dataset = NerDataset ( datas [ 6200 :]) dev_dataloader = DataLoader ( dataset = dev_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , ) return train_dataloader , dev_dataloader if __name__ == '__main__' : train_dataloader , dev_dataloader = get_data () for input_ids_padded , labels_padded , attention_mask in train_dataloader : print ( input_ids_padded . shape ) print ( labels_padded . shape ) print ( attention_mask . shape ) break 3.3 BiLSTM+CRF\u6a21\u578b\u642d\u5efa \u00b6 \u672c\u9879\u76ee\u4e2dBiLSTN+CRF\u6a21\u578b\u642d\u5efa\u7684\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570 \u7b2c\u4e09\u6b65: \u7f16\u5199\u4f7f\u7528\u6a21\u578b\u9884\u6d4b\u4ee3\u7801\u7684\u5b9e\u73b0. \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u00b6 \u6784\u5efaBiLSTM\u6a21\u578b \u4ee3\u7801\u8def\u5f84: /MedicalKB/Ner/LSTM_CRF/model/BiLSTM.py import torch import torch.nn as nn class NERLSTM ( nn . Module ): def __init__ ( self , embedding_dim , hidden_dim , dropout , word2id , tag2id ): super ( NERLSTM , self ) . __init__ () self . name = \"BiLSTM\" self . embedding_dim = embedding_dim self . hidden_dim = hidden_dim self . vocab_size = len ( word2id ) + 1 self . tag_to_ix = tag2id self . tag_size = len ( tag2id ) self . word_embeds = nn . Embedding ( self . vocab_size , self . embedding_dim ) self . dropout = nn . Dropout ( dropout ) self . lstm = nn . LSTM ( self . embedding_dim , self . hidden_dim // 2 , bidirectional = True , batch_first = True ) self . hidden2tag = nn . Linear ( self . hidden_dim , self . tag_size ) def forward ( self , x , mask ): embedding = self . word_embeds ( x ) outputs , hidden = self . lstm ( embedding ) outputs = outputs * mask . unsqueeze ( - 1 ) # \u4ec5\u4fdd\u7559\u6709\u6548\u4f4d\u7f6e\u7684\u8f93\u51fa outputs = self . dropout ( outputs ) outputs = self . hidden2tag ( outputs ) return outputs \u6784\u5efaBiLSTM_CRF\u6a21\u578b\u7c7b \u4ee3\u7801\u8def\u5f84: /MedicalKB/Ner/LSTM_CRF/model/BiLSTM_CRF.py import torch import torch.nn as nn from TorchCRF import CRF class NERLSTM_CRF ( nn . Module ): def __init__ ( self , embedding_dim , hidden_dim , dropout , word2id , tag2id ): super ( NERLSTM_CRF , self ) . __init__ () self . name = \"BiLSTM_CRF\" self . embedding_dim = embedding_dim self . hidden_dim = hidden_dim self . vocab_size = len ( word2id ) + 1 self . tag_to_ix = tag2id self . tag_size = len ( tag2id ) self . word_embeds = nn . Embedding ( self . vocab_size , self . embedding_dim ) self . dropout = nn . Dropout ( dropout ) #CRF self . lstm = nn . LSTM ( self . embedding_dim , self . hidden_dim // 2 , bidirectional = True , batch_first = True ) self . hidden2tag = nn . Linear ( self . hidden_dim , self . tag_size ) self . crf = CRF ( self . tag_size ) def forward ( self , x , mask ): #lstm\u6a21\u578b\u5f97\u5230\u7684\u7ed3\u679c outputs = self . get_lstm2linear ( x ) outputs = outputs * mask . unsqueeze ( - 1 ) outputs = self . crf . viterbi_decode ( outputs , mask ) return outputs def log_likelihood ( self , x , tags , mask ): # lstm\u6a21\u578b\u5f97\u5230\u7684\u7ed3\u679c outputs = self . get_lstm2linear ( x ) outputs = outputs * mask . unsqueeze ( - 1 ) # \u8ba1\u7b97\u635f\u5931 return - self . crf ( outputs , tags , mask ) def get_lstm2linear ( self , x ): embedding = self . word_embeds ( x ) outputs , hidden = self . lstm ( embedding ) outputs = self . dropout ( outputs ) outputs = self . hidden2tag ( outputs ) return outputs \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570 \u00b6 \u5b9e\u73b0\u8bad\u7ec3\u51fd\u6570train.py \u4ee3\u7801\u4f4d\u7f6e:/MedicalKB/Ner/LSTM_CRF/trian.py \u7b2c\u4e00\u6b65\uff1a\u5bfc\u5165\u5fc5\u5907\u5de5\u5177\u5305 import torch import torch.nn as nn import torch.optim as optim from model.BiLSTM import * from model.BiLSTM_CRF import * from utils.data_loader import * from tqdm import tqdm # classification_report\u53ef\u4ee5\u5bfc\u51fa\u5b57\u5178\u683c\u5f0f\uff0c\u4fee\u6539\u53c2\u6570\uff1aoutput_dict=True\uff0c\u53ef\u4ee5\u5c06\u5b57\u5178\u5728\u4fdd\u5b58\u4e3acsv\u683c\u5f0f\u8f93\u51fa from sklearn.metrics import precision_score , recall_score , f1_score , classification_report from config import * conf = Config () \u7b2c\u4e8c\u6b65\uff1a\u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\u51fd\u6570\u7684\u642d\u5efa\uff1amode2trian() def model2train (): # \u83b7\u53d6\u6570\u636e train_dataloader , dev_dataloader = get_data () # \u5b9e\u4f8b\u5316\u6a21\u578b models = { 'BiLSTM' : NERLSTM , 'BiLSTM_CRF' : NERLSTM_CRF } model = models [ conf . model ]( conf . embedding_dim , conf . hidden_dim , conf . dropout , word2id , conf . tag2id ) model = model . to ( conf . device ) # \u5b9e\u4f8b\u5316\u635f\u5931\u51fd\u6570 criterion = nn . CrossEntropyLoss () # \u5b9e\u4f8b\u5316\u4f18\u5316\u5668 optimizer = optim . Adam ( model . parameters (), lr = conf . lr ) # \u9009\u62e9\u6a21\u578b\u8fdb\u884c\u8bad\u7ec3 start_time = time . time () if conf . model == 'BiLSTM' : f1_score = - 1000 for epoch in range ( conf . epochs ): model . train () for index , ( inputs , labels , mask ) in enumerate ( tqdm ( train_dataloader , desc = 'BiLSTM\u8bad\u7ec3' )): x = inputs . to ( conf . device ) mask = mask . to ( conf . device ) y = labels . to ( conf . device ) pred = model ( x , mask ) pred = pred . view ( - 1 , len ( conf . tag2id )) my_loss = criterion ( pred , y . view ( - 1 )) optimizer . zero_grad () my_loss . backward () optimizer . step () if index % 200 == 0 : print ( 'epoch: %04d ,------------loss: %f ' % ( epoch , my_loss . item ())) precision , recall , f1 , report = model2dev ( dev_dataloader , model , criterion ) if f1 > f1_score : f1_score = f1 torch . save ( model . state_dict (), 'save_model/bilstm_best.pth' ) print ( report ) end_time = time . time () print ( f '\u8bad\u7ec3\u603b\u8017\u65f6\uff1a { end_time - start_time } ' ) elif conf . model == 'BiLSTM_CRF' : f1_score = - 1000 for epoch in range ( conf . epochs ): model . train () for index , ( inputs , labels , mask ) in enumerate ( tqdm ( train_dataloader , desc = 'bilstm+crf\u8bad\u7ec3' )): x = inputs . to ( conf . device ) mask = mask . to ( torch . bool ) . to ( conf . device ) tags = labels . to ( conf . device ) # CRF loss = model . log_likelihood ( x , tags , mask ) . mean () optimizer . zero_grad () loss . backward () # CRF torch . nn . utils . clip_grad_norm_ ( parameters = model . parameters (), max_norm = 10 ) optimizer . step () if index % 200 == 0 : print ( 'epoch: %04d ,------------loss: %f ' % ( epoch , loss . item ())) precision , recall , f1 , report = model2dev ( dev_dataloader , model ) if f1 > f1_score : f1_score = f1 torch . save ( model . state_dict (), 'save_model/bilstm_crf_best.pth' ) print ( report ) end_time = time . time () print ( f '\u8bad\u7ec3\u603b\u8017\u65f6\uff1a { end_time - start_time } ' ) \u7b2c\u4e09\u6b65\uff1a\u5b9e\u73b0\u6a21\u578b\u9a8c\u8bc1\u51fd\u6570\u7684\u642d\u5efa\uff1amodel2dev() def model2dev ( dev_iter , model , criterion = None ): aver_loss = 0 preds , golds = [], [] model . eval () for index , ( inputs , labels , mask ) in enumerate ( tqdm ( dev_iter , desc = \"\u6d4b\u8bd5\u96c6\u9a8c\u8bc1\" )): val_x = inputs . to ( conf . device ) mask = mask . to ( conf . device ) val_y = labels . to ( conf . device ) predict = [] if model . name == \"BiLSTM\" : pred = model ( val_x , mask ) predict = torch . argmax ( pred , dim =- 1 ) . tolist () pred = pred . view ( - 1 , len ( conf . tag2id )) val_loss = criterion ( pred , val_y . view ( - 1 )) aver_loss += val_loss . item () elif model . name == \"BiLSTM_CRF\" : mask = mask . to ( torch . bool ) predict = model ( val_x , mask ) loss = model . log_likelihood ( val_x , val_y , mask ) aver_loss += loss . mean () . item () # \u7edf\u8ba1\u975e0\u7684\uff0c\u4e5f\u5c31\u662f\u771f\u5b9e\u6807\u7b7e\u7684\u957f\u5ea6 leng = [] for i in val_y . cpu (): tmp = [] for j in i : if j . item () > 0 : tmp . append ( j . item ()) leng . append ( tmp ) # \u63d0\u53d6\u771f\u5b9e\u957f\u5ea6\u7684\u9884\u6d4b\u6807\u7b7e for index , i in enumerate ( predict ): preds . extend ( i [: len ( leng [ index ])]) # \u63d0\u53d6\u771f\u5b9e\u957f\u5ea6\u7684\u771f\u5b9e\u6807\u7b7e for index , i in enumerate ( val_y . tolist ()): golds . extend ( i [: len ( leng [ index ])]) aver_loss /= ( len ( dev_iter ) * 64 ) precision = precision_score ( golds , preds , average = 'macro' ) recall = recall_score ( golds , preds , average = 'macro' ) f1 = f1_score ( golds , preds , average = 'macro' ) report = classification_report ( golds , preds ) return precision , recall , f1 , report \u6a21\u578b\u8bad\u7ec3\u6548\u679c\uff1a BiLSTM\uff1a\u8bad\u7ec35\u8f6e\uff0c\u603b\u5171\u8017\u65f6\uff1a105s \u8bad\u7ec3\u65e5\u5fd7\uff1a BiLSTM+CRF\uff1a\u8bad\u7ec35\u8f6e\uff0c\u603b\u5171\u8017\u65f6\uff1a831s \u8bad\u7ec3\u65e5\u5fd7\uff1a \u6574\u4f53\u5bf9\u6bd4\uff1aBiLSTM+CRF\u867d\u7136\u6bd4BiLSTM\u901f\u5ea6\u6162\uff0c\u4f46\u662f\u7cbe\u5ea6\u6709\u6240\u63d0\u5347\uff0c\u8fd9\u4e2a\u6548\u679c\u968f\u7740\u6570\u636e\u91cf\u7684\u589e\u52a0\u8fd8\u4f1a\u8fdb\u4e00\u6b65\u63d0\u5347\u3002 \u7b2c\u4e09\u6b65: \u7f16\u5199\u6a21\u578b\u9884\u6d4b\u51fd\u6570 \u00b6 \u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u968f\u673a\u62bd\u53d6\u6587\u672c\u8fdb\u884cNER \u4ee3\u7801\u4f4d\u7f6e: /MedicalKB/Ner/LSTM_CRF/ner_predict.py \u7b2c\u4e00\u6b65\uff1a\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 import torch.nn as nn import torch.optim as optim from model.BiLSTM import * from model.BiLSTM_CRF import * from utils.data_loader import * from tqdm import tqdm # \u5b9e\u4f8b\u5316\u6a21\u578b models = { 'BiLSTM' : NERLSTM , 'BiLSTM_CRF' : NERLSTM_CRF } model = models [ \"BiLSTM_CRF\" ]( conf . embedding_dim , conf . hidden_dim , conf . dropout , word2id , conf . tag2id ) model . load_state_dict ( torch . load ( 'save_model/bilstm_crf_best.pth' )) id2tag = { value : key for key , value in conf . tag2id . items ()} \u7b2c\u4e8c\u6b65\uff1a\u5b9e\u73b0\u6a21\u578b\u9884\u6d4b\u51fd\u6570\uff1amodel2test def model2test ( sample ): x = [] for char in sample : if char not in word2id : char = \"UNK\" x . append ( word2id [ char ]) x_train = torch . tensor ([ x ]) mask = ( x_train != 0 ) . long () model . eval () with torch . no_grad (): if model . name == \"BiLSTM\" : outputs = model ( x_train , mask ) preds_ids = torch . argmax ( outputs , dim =- 1 )[ 0 ] tags = [ id2tag [ i . item ()] for i in preds_ids ] else : preds_ids = model ( x_train , mask ) tags = [ id2tag [ i ] for i in preds_ids [ 0 ]] chars = [ i for i in sample ] assert len ( chars ) == len ( tags ) result = extract_entities ( chars , tags ) return result if __name__ == '__main__' : result = model2test ( sample = '\u5c0f\u660e\u7684\u7236\u4eb2\u60a3\u6709\u51a0\u5fc3\u75c5\u53ca\u7cd6\u5c3f\u75c5\uff0c\u65e0\u624b\u672f\u5916\u4f24\u53f2\u53ca\u836f\u7269\u8fc7\u654f\u53f2' ) print ( result ) \u7b2c\u4e09\u6b65\uff1a\u5b9e\u73b0\u5b9e\u4f53\u89e3\u6790\u51fd\u6570\uff1aextract_entities def extract_entities ( tokens , labels ): entities = [] entity = [] entity_type = None for token , label in zip ( tokens , labels ): if label . startswith ( \"B-\" ): # \u5b9e\u4f53\u7684\u5f00\u59cb if entity : # \u5982\u679c\u5df2\u7ecf\u6709\u5b9e\u4f53\uff0c\u5148\u4fdd\u5b58 entities . append (( entity_type , '' . join ( entity ))) entity = [] entity_type = label . split ( '-' )[ 1 ] entity . append ( token ) elif label . startswith ( \"I-\" ) and entity : # \u5b9e\u4f53\u7684\u4e2d\u95f4\u6216\u7ed3\u5c3e entity . append ( token ) else : if entity : # \u4fdd\u5b58\u4e0a\u4e00\u4e2a\u5b9e\u4f53 entities . append (( entity_type , '' . join ( entity ))) entity = [] entity_type = None # \u5982\u679c\u6700\u540e\u4e00\u4e2a\u5b9e\u4f53\u6ca1\u6709\u4fdd\u5b58\uff0c\u624b\u52a8\u4fdd\u5b58 if entity : entities . append (( entity_type , '' . join ( entity ))) return { entity : entity_type for entity_type , entity in entities } \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u57fa\u4e8eBiLSTM+CRF\u6a21\u578b\u5b9e\u73b0NER\u4efb\u52a1\u7684\u8bad\u7ec3\uff0c\u5e76\u8be6\u7ec6\u7684\u4ecb\u7ecd\u4e86CRF\u7684\u539f\u7406\u4ee5\u53ca\u5982\u4f55\u548cBiLSTM\u8fdb\u884c\u878d\u5408\u3002","title":"3.3 \u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u5b9e\u73b0NER"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#bilstmcrfner","text":"","title":"\u57fa\u4e8eBiLSTM+CRF\u5b9e\u73b0NER"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_1","text":"\u7406\u89e3BiLSTM\u5b9e\u73b0NER\u7684\u539f\u7406 \u7406\u89e3\u4ec0\u4e48\u662fCRF\u7b97\u6cd5 \u638c\u63e1CRF\u7684\u635f\u5931\u51fd\u6570\u539f\u7406","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#1-bilstmcrf","text":"BiLSTM+CRF\u6a21\u578b\u7684\u4f5c\u7528 BiLSTM+CRF : \u89e3\u51b3NER\u95ee\u9898 \u5b9e\u73b0\u65b9\u5f0f : \u4ece\u4e00\u6bb5\u81ea\u7136\u8bed\u8a00\u6587\u672c\u4e2d\u627e\u51fa\u76f8\u5173\u5b9e\u4f53\uff0c\u5e76\u6807\u6ce8\u51fa\u5176\u4f4d\u7f6e\u4ee5\u53ca\u7c7b\u578b\u3002 \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u95ee\u9898\u5b9e\u9645\u4e0a\u662f\u5e8f\u5217\u6807\u6ce8\u95ee\u9898 : \u4ee5\u4e2d\u6587\u5206\u8bcd\u4efb\u52a1\u8fdb\u884c\u4e3e\u4f8b, \u4f8b\u5982\u8f93\u5165\u5e8f\u5217\u662f\u4e00\u4e32\u6587\u5b57: \u201c\u6211\u662f\u4e2d\u56fd\u4eba\u201d, \u8f93\u51fa\u5e8f\u5217\u662f\u4e00\u4e32\u6807\u7b7e: \u201cOOBII\u201d, \u5176\u4e2d\"BIO\"\u7ec4\u6210\u4e86\u4e00\u79cd\u4e2d\u6587\u5206\u8bcd\u7684\u6807\u7b7e\u4f53\u7cfb: B\u8868\u793a\u8fd9\u4e2a\u5b57\u662f\u8bcd\u7684\u5f00\u59cb, I\u8868\u793a\u8bcd\u7684\u4e2d\u95f4\u5230\u7ed3\u5c3e, O\u8868\u793a\u5176\u4ed6\u7c7b\u578b\u8bcd. \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8f93\u51fa\u5e8f\u5217\"OOBII\"\u8fdb\u884c\u89e3\u7801, \u5f97\u5230\u5206\u8bcd\u7ed3\u679c\"\u6211\\\u662f\\\u4e2d\u56fd\u4eba\"\u3002 \u5e8f\u5217\u6807\u6ce8\u95ee\u9898\u6db5\u76d6\u4e86\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4e2d\u7684\u5f88\u591a\u4efb\u52a1 : \u5305\u62ec\u8bed\u97f3\u8bc6\u522b, \u4e2d\u6587\u5206\u8bcd, \u673a\u5668\u7ffb\u8bd1, \u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7b49, \u800c\u5e38\u89c1\u7684\u5e8f\u5217\u6807\u6ce8\u6a21\u578b\u5305\u62ecHMM, CRF, RNN, LSTM, GRU\u7b49\u6a21\u578b\u3002 \u5176\u4e2d\u5728\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u6280\u672f\u4e0a, \u76ee\u524d\u4e3b\u6d41\u7684\u6280\u672f : \u901a\u8fc7BiLSTM+CRF\u6a21\u578b\u8fdb\u884c\u5e8f\u5217\u6807\u6ce8\u3002 \u6570\u636e\u6807\u7b7e\uff08\u5047\u5b9a\uff0c\u5177\u4f53\u60c5\u51b5\u6839\u636e\u4e1a\u52a1\uff09 B-Person \uff08\u4eba\u540d\u7684\u5f00\u59cb\u90e8\u5206\uff09 I-Person \uff08\u4eba\u540d\u7684\u4e2d\u95f4\u90e8\u5206\uff09 B-Organization \uff08\u7ec4\u7ec7\u673a\u6784\u7684\u5f00\u59cb\u90e8\u5206\uff09 I-Organization \uff08\u7ec4\u7ec7\u673a\u6784\u7684\u4e2d\u95f4\u90e8\u5206\uff09 O \uff08\u975e\u5b9e\u4f53\u4fe1\u606f\uff09 \u6a21\u578b\u67b6\u6784\uff08\u56fe1\uff09 BiLSTM\u7f51\u7edc\u7ed3\u6784\uff1a \u6240\u8c13\u7684BiLSTM\uff0c\u5c31\u662f(Bidirectional LSTM)\u53cc\u5411LSTM. \u5355\u5411\u7684LSTM\u6a21\u578b\u53ea\u80fd\u6355\u6349\u5230\u4ece\u524d\u5411\u540e\u4f20\u9012\u7684\u4fe1\u606f\uff0c\u800c\u53cc\u5411\u7684\u7f51\u7edc\u53ef\u4ee5\u540c\u65f6\u6355\u6349\u6b63\u5411\u4fe1\u606f\u548c\u53cd\u5411\u4fe1\u606f\uff0c\u4f7f\u5f97\u5bf9\u6587\u672c\u4fe1\u606f\u7684\u5229\u7528\u66f4\u5168\u9762\uff0c\u6548\u679c\u4e5f\u66f4\u597d\u3002 \u5728BiLSTM\u7f51\u7edc\u6700\u7ec8\u7684\u8f93\u51fa\u5c42\u540e\u9762\u589e\u52a0\u4e86\u4e00\u4e2a\u7ebf\u6027\u5c42\uff0c\u7528\u6765\u5c06BiLSTM\u4ea7\u751f\u7684\u9690\u85cf\u5c42\u8f93\u51fa\u7ed3\u679c\u6295\u5c04\u5230\u5177\u6709\u67d0\u79cd\u8868\u8fbe\u6807\u7b7e\u7279\u5f81\u610f\u4e49\u7684\u533a\u95f4 CRF\u7f51\u7edc\u7ed3\u6784\uff1a \u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u5728BiLSTM\u4e0a\u65b9\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u4e2aCRF\u5c42\u3002\u5177\u4f53\u5730\uff0c\u5728\u57fa\u4e8eBiLSTM\u83b7\u5f97\u5404\u4e2a\u4f4d\u7f6e\u7684\u6807\u7b7e\u5411\u91cf\u4e4b\u540e\uff0c\u8fd9\u4e9b\u6807\u7b7e\u5411\u91cf\u5c06\u88ab\u4f5c\u4e3a\u3010\u53d1\u5c04\u5206\u6570\u3011\u4f20\u5165CRF\u4e2d\uff0c\u53d1\u5c04\u8fd9\u4e2a\u6982\u5ff5\u662f\u4eceCRF\u91cc\u9762\u5e26\u51fa\u6765\u7684\uff0c\u540e\u8fb9\u5728\u4ecb\u7ecdCRF\u90e8\u5206\u4f1a\u66f4\u591a\u5730\u63d0\u53ca\uff0c\u8fd9\u91cc\u5148\u4e0d\u7528\u7ea0\u7ed3\u8fd9\u4e00\u70b9\u3002 \u8fd9\u4e9b\u53d1\u5c04\u5206\u6570\uff08\u6807\u7b7e\u5411\u91cf\uff09\u4f20\u5165CRF\u4e4b\u540e\uff0cCRF\u4f1a\u636e\u6b64\u89e3\u7801\u51fa\u4e00\u4e32\u6807\u7b7e\u5e8f\u5217\u3002\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u4ece\u4e0a\u56fe\u6700\u4e0a\u8fb9\u7684\u89e3\u7801\u8fc7\u7a0b\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u91cc\u53ef\u80fd\u5bf9\u5e94\u7740\u5f88\u591a\u6761\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u4f8b\u5982\uff1a B-Person, I-Person, O, \u2026, I-Organization B-Organization, I-Person, O, \u2026, I-Person B-Organization, I-Organization, O, \u2026, O CRF\u7684\u4f5c\u7528\u5c31\u662f\u5728\u6240\u6709\u53ef\u80fd\u7684\u8def\u5f84\u4e2d\uff0c\u627e\u51fa\u5f97\u51fa\u6982\u7387\u6700\u5927\uff0c\u6548\u679c\u6700\u4f18\u7684\u4e00\u6761\u8def\u5f84\uff0c\u90a3\u8fd9\u4e2a\u6807\u7b7e\u5e8f\u5217\u5c31\u662f\u6a21\u578b\u7684\u8f93\u51fa\u3002 \u603b\u7ed3\u4e00\u4e0b\uff1a\u4f7f\u7528BiLSTM+CRF\u6a21\u578b\u67b6\u6784\u5b9e\u73b0NER\u4efb\u52a1\uff0c\u5927\u81f4\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a \u4f7f\u7528BiLSTM\u751f\u6210\u53d1\u5c04\u5206\u6570\uff08\u6807\u7b7e\u5411\u91cf\uff09\u3002 \u57fa\u4e8e\u53d1\u5c04\u5206\u6570\u4f7f\u7528CRF\u89e3\u7801\u6700\u4f18\u7684\u6807\u7b7e\u8def\u5f84\u3002","title":"1 BiLSTM+CRF\u6a21\u578b\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#2-crf","text":"\u672c\u5c0f\u8282\u5c06\u5f00\u59cb\u805a\u7126\u5728CRF\u539f\u7406\u672c\u8eab\u8fdb\u884c\u8bb2\u89e3\uff0c\u529b\u56fe\u4e3a\u5927\u5bb6\u5c55\u73b0\u4e00\u4e2a\u6e05\u695a\u660e\u767d\uff0c\u57fa\u7840\u672c\u8d28\u7684CRF\u3002","title":"2 CRF\u539f\u7406"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#21-crf","text":"\u901a\u5e38\u6211\u4eec\u4f1a\u4f7f\u7528\u7ebf\u6027\u94feCRF\u6765\u5efa\u6a21NER\u4efb\u52a1\uff0c\u6240\u4ee5\u672c\u9879\u76ee\u5c06\u805a\u7126\u5728\u7ebf\u6027\u94feCRF\u6765\u63a2\u8ba8\u3002\u90a3\u4ec0\u4e48\u662f\u7ebf\u6027\u94feCRF\u5462\uff0c\u6211\u4eec\u6765\u770b\u4e0b\u674e\u822a\u8001\u5e08\u5728\u300a\u7edf\u8ba1\u5b66\u4e60\u65b9\u6cd5\u300b\u4e66\u4e2d\u7684\u5b9a\u4e49\uff1a \u8bbe\ud835\udc4b=[\ud835\udc651,\ud835\udc652,...,\ud835\udc65\ud835\udc5b]\uff0c\ud835\udc4c=[\ud835\udc661,\ud835\udc662,...,\ud835\udc66\ud835\udc5b]\uff1b\ud835\udc4b\uff0c\ud835\udc4c\u5747\u4e3a\u7ebf\u6027\u94fe\u8868\u793a\u7684\u968f\u673a\u53d8\u91cf\u5e8f\u5217\uff0c\u82e5\u5728\u7ed9\u5b9a\u968f\u673a\u53d8\u91cf\u5e8f\u5217\u7684\ud835\udc4b\u7684\u6761\u4ef6\u4e0b\uff0c\u968f\u673a\u53d8\u91cf\u5e8f\u5217\ud835\udc4c\u7684\u6761\u4ef6\u6982\u7387\u5206\u5e03\ud835\udc43(\ud835\udc4c|\ud835\udc4b)\u6784\u6210\u6761\u4ef6\u968f\u673a\u573a\uff0c\u5373\u6ee1\u8db3\u9a6c\u5c14\u53ef\u592b\u6027: \ud835\udc43(\ud835\udc66\ud835\udc56|\ud835\udc4b,\ud835\udc661,...,\ud835\udc66\ud835\udc56\u22121,\ud835\udc66\ud835\udc56+1,...,\ud835\udc66\ud835\udc5b)=\ud835\udc43(\ud835\udc66\ud835\udc56|\ud835\udc4b,\ud835\udc66\ud835\udc56\u22121,\ud835\udc66\ud835\udc56+1) i=1,2,...,\ud835\udc5b(\u5728\ud835\udc56=1\u548c\ud835\udc5b\u65f6\u53ea\u8003\u8651\u5355\u8fb9)\uff1b\u5219\u79f0\ud835\udc43(\ud835\udc4c|\ud835\udc4b)\u4e3a\u3010\u7ebf\u6027\u94fe\u6761\u4ef6\u968f\u673a\u573a\u3011 \u540c\u5b66\u4eec\u770b\u5230\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u6216\u8bb8\u4f1a\u6709\u4e9b\u7591\u60d1\uff0c\u4f46\u662f\u4e0d\u7528\u7740\u6025\uff0c\u6211\u4eec\u6765\u63a2\u8ba8\u4e0b\u8fd9\u4e2a\u5b9a\u4e49\u3002\u4e0b\u56fe\uff08\u56fe2\uff09\u5c55\u793a\u4e86\u4e00\u79cd\u7ecf\u5178\u7684\u7ebf\u6027\u94feCRF\u7684\u7ed3\u6784\u56fe\uff0c\u4ece\u8fd9\u5f20\u7ed3\u6784\u56fe\u6765\u7406\u89e3\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u70b9\uff1a \u786e\u4fdd\u8f93\u5165\u5e8f\u5217\ud835\udc4b\u548c\u8f93\u51fa\u5e8f\u5217\ud835\udc4c\u662f\u7ebf\u6027\u5e8f\u5217 \u6bcf\u4e2a\u6807\u7b7e\ud835\udc66\ud835\udc56\u7684\u4ea7\u751f\uff0c\u53ea\u4e0e\u8fd9\u4e9b\u56e0\u7d20\u6709\u5173\u7cfb\uff1a\u5f53\u524d\u4f4d\u7f6e\u7684\u8f93\u5165\ud835\udc65\ud835\udc56\uff0c\ud835\udc66\ud835\udc56\u76f4\u63a5\u76f8\u8fde\u7684\u4e24\u4e2a\u90bb\u5c45\ud835\udc66\ud835\udc56\u22121\u548c\ud835\udc66\ud835\udc56+1\uff0c\u4e0e\u5176\u4ed6\u7684\u6807\u7b7e\u548c\u8f93\u5165\u6ca1\u6709\u5173\u7cfb\u3002 \u8fd9\u6837\u7684\u5b9a\u4e49\uff0c\u5176\u5b9e\u5e2e\u52a9\u6211\u4eec\u51cf\u5c0f\u4e86\u5efa\u6a21CRF\u7684\u4ee3\u4ef7\u3002","title":"2.1 \u7ebf\u6027CRF\u7684\u5b9a\u4e49"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#22","text":"\u4e0a\u8fb9\u6211\u4eec\u63a2\u8ba8\u4e86\u7ebf\u6027\u94feCRF\u7684\u5b9a\u4e49\u4ee5\u53ca\u5b83\u7684\u4e00\u79cd\u7ecf\u5178\u56fe\u7ed3\u6784\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u7ee7\u7eed\u56de\u5230\u6211\u4eec\u5efa\u6a21\u7684\u547d\u540d\u5b9e\u4f53\u4efb\u52a1\u4e0a\u6765\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\ud835\udc65=[\ud835\udc650,\ud835\udc651,...,\ud835\udc65\ud835\udc56,...,\ud835\udc65\ud835\udc5b]\u4ee3\u8868\u8f93\u5165\u53d8\u91cf\uff0c\u5bf9\u5e94\u5230\u6211\u4eec\u5f53\u524d\u4efb\u52a1\u5c31\u662f\u8f93\u5165\u6587\u672c\u5e8f\u5217, \ud835\udc66=[\ud835\udc660,\ud835\udc661,...,\ud835\udc66\ud835\udc56,...,\ud835\udc66\ud835\udc5b]\u4ee3\u8868\u76f8\u5e94\u7684\u6807\u7b7e\u5e8f\u5217 \u5176\u4e2d\uff0c\u6bcf\u4e2a\u8f93\u5165\ud835\udc65\ud835\udc56\u5747\u5bf9\u5e94\u7740\u4e00\u4e2a\u6807\u7b7e\ud835\udc66\ud835\udc56\uff0c\u8fd9\u4e00\u6b65\u5bf9\u5e94\u7684\u5c31\u662f\u53d1\u5c04\u5206\u6570\uff0c\u5b83\u6307\u793a\u4e86\u5f53\u524d\u7684\u8f93\u5165\ud835\udc65\ud835\udc56\u5e94\u8be5\u5bf9\u5e94\u4ec0\u4e48\u6837\u7684\u6807\u7b7e\uff1b\u5728\u6bcf\u4e2a\u6807\u7b7e\ud835\udc66\ud835\udc56\u4e4b\u95f4\u4e5f\u5b58\u5728\u8fde\u7ebf\uff0c\u5b83\u8868\u793a\u5f53\u524d\u4f4d\u7f6e\u7684\u6807\u7b7e\ud835\udc66\ud835\udc56\u5411\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u7684\u6807\u7b7e\ud835\udc66\ud835\udc56+1\u7684\u4e00\u79cd\u8f6c\u79fb\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u5f53\u524d\u4f4d\u7f6e\u7684\u6807\u7b7e\u662f\u201dB-Person\u201d\uff0c\u90a3\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u5c31\u5f88\u6709\u53ef\u80fd\u662f\u201dI-Person\u201d\u6807\u7b7e\uff0c\u5373\u6807\u7b7e\u201dB-Person\u201d\u5411\u201dI-Person\u201d\u8f6c\u79fb\u7684\u6982\u7387\u4f1a\u6bd4\u8f83\u5927\u3002 \u8fd9\u91cc\u6211\u4eec\u5e26\u51fa\u4e86\u5efa\u6a21CRF\u8fc7\u7a0b\u4e2d\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570\uff0c\u4e0b\u8fb9\u6211\u4eec\u6765\u770b\u770b\u4ed6\u4eec\u662f\u4ec0\u4e48\u3002","title":"2.2 \u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#221","text":"\u524d\u8fb9\u6211\u4eec\u5df2\u7ecf\u63d0\u5230\u8fc7\u53d1\u5c04\u5206\u6570\u4e86\uff0c\u5373BiLSTM\u540e\u4ea7\u751f\u7684\u6807\u7b7e\u5411\u91cf\u3002\u4e0b\u56fe\uff08\u56fe3\uff09\u4ee5\u77e9\u9635\u7684\u5f62\u5f0f\u5c55\u793a\u4e86\u53d1\u5c04\u5206\u6570\u7684\u751f\u6210\u8fc7\u7a0b\u3002 \u5f53\u7ed9\u5b9a\u7684\u6587\u672c\u5e8f\u5217\ud835\udc65=[\ud835\udc651,\ud835\udc652,\ud835\udc653,...,\ud835\udc65\ud835\udc5b]\u6620\u5c04\u4e3a\u5bf9\u5e94\u8bcd\u5411\u91cf\u4e4b\u540e\uff0c\u5c06\u4f1a\u5f97\u5230\u4e00\u4e2ashape\u4e3a[\ud835\udc5b,\ud835\udc52\ud835\udc5a\ud835\udc4f\ud835\udc52\ud835\udc51\ud835\udc51\ud835\udc56\ud835\udc5b\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\u7684\u8bcd\u5411\u91cf\u77e9\u9635\uff0c\u5176\u4e2d\u6bcf\u5bf9\u5e94\u4e00\u4e2a\u5b57\u8bcd\uff08\u6837\u4f8b\u53ea\u4f7f\u7528\u4e864\u4e2a\u8bcd\uff09\uff0c\u4f8b\u5982\ud835\udc650\u5bf9\u5e94\u7684\u8bcd\u5411\u91cf\u662f[\ud835\udc5200,\ud835\udc5201,\ud835\udc5202,\ud835\udc5203]\u3002 \u7136\u540e\u5c06\ud835\udc52\ud835\udc5a\ud835\udc4f\ud835\udc60\u4f20\u5165BiLSTM\u540e\uff0c\u6bcf\u4e2a\u8bcd\u7684\u4f4d\u7f6e\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\uff0c\u6240\u6709\u7684\u5411\u91cf\u7ec4\u5408\u4e4b\u540e\u4f1a\u5f97\u5230\u4e00\u4e2a\u5411\u91cf\u77e9\u9635\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc63\ud835\udc52\ud835\udc50\ud835\udc61\ud835\udc5c\ud835\udc5f\uff0c\u5176\u4e2d\u6bcf\u884c\u4ee3\u8868\u5bf9\u5e94\u5355\u8bcd\u7ecf\u8fc7BiLSTM\u540e\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u3002 \u8fd9\u91cc\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u4e0a\u4e0b\u6587\u5411\u91cf\u53ef\u4ee5\u7528\u6765\u6307\u5bfc\u5f53\u524d\u4f4d\u7f6e\u5e94\u8be5\u8f93\u51fa\u7684\u6807\u7b7e\u4fe1\u606f\uff0c\u4f46\u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\uff0c\u8fd9\u4e2a\u8f93\u51fa\u5411\u91cf\u7684\u7ef4\u5ea6\u5e76\u4e0d\u662f\u6807\u7b7e\u7684\u6570\u91cf\uff0c\u5b83\u4e0d\u80fd\u76f4\u63a5\u7528\u6765\u6307\u793a\u5e94\u8be5\u8f93\u51fa\u4ec0\u4e48\u6807\u7b7e\u3002\u4e00\u822c\u7684\u505a\u6cd5\u662f\u5728\u540e\u8fb9\u52a0\u4e00\u5c42\u7ebf\u6027\u5c42\uff0c\u5c06\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u5411\u91cf\u7684\u7ef4\u5ea6\u6620\u5c04\u4e3a\u6807\u7b7e\u7684\u6570\u91cf\uff0c\u8fd9\u6837\u7684\u8bdd\u5c31\u4f1a\u751f\u6210\u524d\u8fb9\u6240\u8bb2\u7684\u6807\u7b7e\u5411\u91cf\uff0c\u5176\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5206\u522b\u5bf9\u5e94\u7740\u76f8\u5e94\u6807\u7b7e\u7684\u5206\u6570\uff0c\u6839\u636e\u8fd9\u4e2a\u5206\u6570\u53ef\u4ee5\u7528\u6765\u6307\u5bfc\u6700\u7ec8\u6807\u7b7e\u7684\u8f93\u51fa\u3002 \u5177\u4f53\u5730\uff0c\u7ebf\u6027\u5c42\u8fd9\u91cc\u53ea\u662f\u505a\u4e86\u8fd9\u6837\u7684\u4e00\u4e2a\u7ebf\u6027\u53d8\u6362\uff1a\ud835\udc66=\ud835\udc4b\ud835\udc4a+\ud835\udc4f\uff0c\u663e\u7136\uff0c\u8fd9\u91cc\u7684\ud835\udc4b\u5c31\u662f\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc63\ud835\udc52\ud835\udc50\ud835\udc61\ud835\udc5c\ud835\udc5f\uff0c \ud835\udc66\u662f\u76f8\u5e94\u7684\ud835\udc52\ud835\udc5a\ud835\udc56\ud835\udc60\ud835\udc60\ud835\udc56\ud835\udc5c\ud835\udc5b_\ud835\udc60\ud835\udc50\ud835\udc5c\ud835\udc5f\ud835\udc52\uff0c\ud835\udc4a\u548c\ud835\udc4f\u662f\u7ebf\u6027\u5c42\u7684\u53ef\u5b66\u4e60\u53c2\u6570\u3002 \u524d\u8fb9\u63d0\u5230\uff0c\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc63\ud835\udc52\ud835\udc50\ud835\udc61\ud835\udc5c\ud835\udc5f\u7684shape\u4e3a[\ud835\udc5b\uff0c\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\uff0c\u90a3\u4e48\u7ebf\u6027\u5c42\u7684\ud835\udc4a\u7684shape\u5e94\u8be5\u662f[\ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc52\ud835\udc65\ud835\udc61_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52,\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\uff0c\u7ecf\u8fc7\u4ee5\u4e0a\u516c\u5f0f\u7684\u7ebf\u6027\u53d8\u6362\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u53d1\u5c04\u5206\u6570\ud835\udc52\ud835\udc5a\ud835\udc56\ud835\udc60\ud835\udc60\ud835\udc56\ud835\udc5c\ud835\udc5b_\ud835\udc60\ud835\udc50\ud835\udc5c\ud835\udc5f\ud835\udc52\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5b57\u8bcd\u5bf9\u5e94\u4e00\u884c\u7684\u6807\u7b7e\u5206\u6570\uff08\u56fe\u4e2d\u53ea\u8bbe\u7f6e\u4e86\u4e09\u5217\uff0c\u4ee3\u8868\u4e00\u5171\u67093\u4e2a\u6807\u7b7e\uff09\uff0c\u4f8b\u5982\uff0c\ud835\udc650\u5bf9\u7b2c\u4e00\u4e2a\u6807\u7b7e\u7684\u5206\u6570\u9884\u6d4b\u4e3a\ud835\udc6100\uff0c\u5bf9\u7b2c\u4e8c\u4e2a\u6807\u7b7e\u7684\u5206\u6570\u9884\u6d4b\u4e3a\ud835\udc6101\uff0c\u5bf9\u7b2c\u4e09\u4e2a\u6807\u7b7e\u7684\u5206\u6570\u9884\u6d4b\u4e3a\ud835\udc6102\uff0c\u4f9d\u6b21\u7c7b\u63a8\u3002","title":"2.2.1 \u53d1\u5c04\u5206\u6570"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#222","text":"\u4e0b\u9762\u6211\u4eec\u6765\u804a\u804a\u8f6c\u79fb\u5206\u6570\uff0c\u8fd9\u4e2a\u8f6c\u79fb\u5206\u6570\u8868\u793a\u4e00\u4e2a\u6807\u7b7e\u5411\u53e6\u4e00\u4e2a\u6807\u7b7e\u8f6c\u79fb\u7684\u5206\u6570\uff0c\u5206\u6570\u8d8a\u9ad8\uff0c\u8f6c\u79fb\u6982\u7387\u5c31\u8d8a\u5927\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u4e0b\u56fe\uff08\u56fe4\uff09\u5c55\u793a\u4e86\u8bb0\u5f55\u8f6c\u79fb\u5206\u6570\u7684\u77e9\u9635\u3002 \u8ba9\u6211\u4eec\u4ece\u5217\u5230\u884c\u5730\u6765\u770b\u4e0b\u8fd9\u4e2a\u8f6c\u79fb\u77e9\u9635\ud835\udc47\uff0cB-Person\u5411I-Person\u8f6c\u79fb\u7684\u5206\u6570\u4e3a0.93\uff0cB-Person\u5411I-Organization\u8f6c\u79fb\u7684\u5206\u6570\u4e3a0.02\uff0c\u524d\u8005\u7684\u5206\u6570\u8fdc\u8fdc\u5927\u4e8e\u540e\u8005\u3002I-Person\u5411I-Person\u8f6c\u79fb\u7684\u6982\u7387\u662f0.71\uff0cI-Organization\u5411I-Organization\u8f6c\u79fb\u7684\u5206\u6570\u662f0.95\uff0c\u56e0\u4e3a\u4e00\u4e2a\u4eba\u6216\u8005\u7ec4\u7ec7\u7684\u540d\u5b57\u5f80\u5f80\u5305\u542b\u591a\u4e2a\u5b57\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6982\u7387\u76f8\u5bf9\u662f\u6bd4\u8f83\u9ad8\u7684\uff0c\u8fd9\u5176\u5b9e\u4e5f\u662f\u5f88\u7b26\u5408\u6211\u4eec\u76f4\u89c2\u8ba4\u8bc6\u7684\u3002 \u5047\u8bbe\u6211\u4eec\u73b0\u5728\u6709\u4e2a\u6807\u7b7e\u5e8f\u5217\uff1aB-Person, I-Person, O, O\uff0cB-Organization, I-Organization\u3002\u90a3\u4e48\u8fd9\u4e2a\u5e8f\u5217\u7684\u8f6c\u79fb\u5206\u6570\u53ef\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u8ba1\u7b97\uff1a\ud835\udc46\ud835\udc52\ud835\udc5e\ud835\udc61=\ud835\udc47\ud835\udc3c\u2212\ud835\udc43\ud835\udc52\ud835\udc5f\ud835\udc60\ud835\udc5c\ud835\udc5b,\ud835\udc35\u2212\ud835\udc43\ud835\udc52\ud835\udc5f\ud835\udc60\ud835\udc5c\ud835\udc5b+\ud835\udc47\ud835\udc42,\ud835\udc3c\u2212\ud835\udc43\ud835\udc52\ud835\udc5f\ud835\udc60\ud835\udc5c\ud835\udc5b+\ud835\udc47\ud835\udc42,\ud835\udc42+\ud835\udc47\ud835\udc42,\ud835\udc35\u2212\ud835\udc42\ud835\udc5f\ud835\udc54\ud835\udc4e\ud835\udc5b\ud835\udc56\ud835\udc67\ud835\udc4e\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b+\ud835\udc47\ud835\udc35\u2212\ud835\udc42\ud835\udc5f\ud835\udc54\ud835\udc4e\ud835\udc5b\ud835\udc56\ud835\udc67\ud835\udc4e\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b,\ud835\udc3c\u2212\ud835\udc42\ud835\udc5f\ud835\udc54\ud835\udc4e\ud835\udc5b\ud835\udc56\ud835\udc67\ud835\udc4e\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b \u8fd9\u4e2a\u8f6c\u79fb\u5206\u6570\u77e9\u9635\u662fCRF\u4e2d\u7684\u4e00\u4e2a**\u53ef\u5b66\u4e60\u7684\u53c2\u6570\u77e9\u9635**\uff0c\u5b83\u7684\u5b58\u5728\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u663e\u793a\u5730\u53bb\u5efa\u6a21\u6807\u7b7e\u4e4b\u95f4\u7684\u8f6c\u79fb\u5173\u7cfb\uff0c\u63d0\u9ad8\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u7684\u51c6\u786e\u7387\u3002","title":"2.2.2 \u8f6c\u79fb\u5206\u6570"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#23-crf","text":"\u524d\u8fb9\u6211\u4eec\u8bb2\u5230\uff0cCRF\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u4ee5\u4e00\u79cd\u5168\u5c40\u7684\u65b9\u5f0f\u5efa\u6a21\uff0c\u5728\u6240\u6709\u53ef\u80fd\u7684\u8def\u5f84\u4e2d\u9009\u62e9\u6548\u679c\u6700\u4f18\uff0c\u5206\u6570\u6700\u9ad8\u7684\u90a3\u6761\u8def\u5f84\u3002\u90a3\u4e48\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u53bb\u5efa\u6a21\u8fd9\u4e2a\u7b56\u7565\u5462\uff0c\u4e0b\u9762\u6211\u4eec\u6765\u5177\u4f53\u8c08\u8c08\u3002(\u56fe5) \u4e0a\u56fe5\u5c55\u793a\u4e86CRF\u7684\u5de5\u4f5c\u56fe\uff0c\u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e32\u8f93\u5165\ud835\udc65=[\ud835\udc650,\ud835\udc651,\ud835\udc652,\ud835\udc65\ud835\udc5b]\uff08\u8fd9\u91cc\u7684\ud835\udc65\u662f\u6587\u672c\u4e32\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\uff0c\u6bcf\u4e2a\u5b57\u8bcd\ud835\udc65\ud835\udc56\u90fd\u5bf9\u5e94\u7740\u4e00\u4e2a\u53d1\u5c04\u5206\u6570\u5411\u91cf\uff0c\u4e5f\u5c31\u662f\u524d\u8fb9\u63d0\u5230\u7684\u6807\u7b7e\u5411\u91cf\uff0c\u8be5\u5411\u91cf\u7684\u7ef4\u5ea6\u5c31\u662f\u6807\u7b7e\u6570\u91cf\uff09\uff0c\u671f\u5f85\u89e3\u7801\u51fa\u76f8\u5e94\u7684\u6807\u7b7e\u5e8f\u5217\ud835\udc66=[\ud835\udc660,\ud835\udc661,\ud835\udc662,...,\ud835\udc66\ud835\udc5b]\uff0c\u5f62\u5f0f\u5316\u4e3a\u5bf9\u5e94\u7684\u6761\u4ef6\u6982\u7387\u516c\u5f0f\u5982\u4e0b\uff1a \u5728\u524d\u9762\u5185\u5bb9\u6211\u4eec\u63d0\u5230\uff0cCRF\u7684\u89e3\u7801\u7b56\u7565\u5728\u6240\u6709\u53ef\u80fd\u7684\u8def\u5f84\u4e2d\uff0c\u627e\u51fa\u5f97\u51fa\u6982\u7387\u6700\u5927\uff0c\u6548\u679c\u6700\u4f18\u7684\u4e00\u6761\u8def\u5f84\uff0c\u90a3\u8fd9\u4e2a\u6807\u7b7e\u5e8f\u5217\u5c31\u662f\u6a21\u578b\u7684\u8f93\u51fa\uff0c\u5047\u8bbe\u6807\u7b7e\u6570\u91cf\u662f\ud835\udc58\uff0c\u6587\u672c\u957f\u5ea6\u662f\ud835\udc5b\uff0c\u663e\u7136\u4f1a\u6709\ud835\udc41=\ud835\udc58\ud835\udc5b\u6761\u8def\u5f84\uff0c\u82e5\u7528\ud835\udc46\ud835\udc56\u4ee3\u8868\u7b2c\ud835\udc56\u6761\u8def\u5f84\u7684\u5206\u6570\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u53bb\u7b97\u4e00\u4e2a\u6807\u7b7e\u5e8f\u5217\u51fa\u73b0\u7684\u6982\u7387\uff1a \u73b0\u5728\u6211\u4eec\u6709\u4e00\u6761\u771f\u5b9e\u7684\u8def\u5f84\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59\uff0c\u5373\u6211\u4eec\u671f\u5f85CRF\u89e3\u7801\u51fa\u6765\u7684\u5e8f\u5217\u5c31\u662f\u8fd9\u4e00\u6761\u3002\u90a3\u5b83\u7684\u5206\u6570\u53ef\u4ee5\u8868\u793a\u4e3a\ud835\udc60\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59\uff0c\u5b83\u51fa\u73b0\u7684\u6982\u7387\u5c31\u662f\uff1a \u6240\u4ee5\u6211\u4eec\u5efa\u6a21\u5b66\u4e60\u7684\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u4e0d\u65ad\u7684\u63d0\u9ad8\ud835\udc43(\ud835\udc46\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59)\u7684\u6982\u7387\u503c\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u7684\u76ee\u6807\u51fd\u6570\uff0c\u5f53\u76ee\u6807\u51fd\u6570\u8d8a\u5927\u65f6\uff0c\u5b83\u5bf9\u5e94\u7684\u635f\u5931\u5c31\u5e94\u8be5\u8d8a\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u53bb\u5efa\u6a21\u5b83\u7684\u635f\u5931\u51fd\u6570\uff1a \u4e3a\u65b9\u4fbf\u6c42\u89e3\uff0c\u6211\u4eec\u4e00\u822c\u5c06\u8fd9\u6837\u7684\u635f\u5931\u653e\u5230log\u7a7a\u95f4\u53bb\u6c42\u89e3\uff0c\u56e0\u4e3alog\u51fd\u6570\u672c\u8eab\u662f\u5355\u8c03\u9012\u589e\u7684\uff0c\u6240\u4ee5\u5b83\u5e76\u4e0d\u5f71\u54cd\u6211\u4eec\u53bb\u8fed\u4ee3\u4f18\u5316\u635f\u5931\u51fd\u6570\u3002 \u5343\u547c\u4e07\u5524\u59cb\u51fa\u6765\uff0c\u8fd9\u5c31\u662f\u6211\u4eecCRF\u5efa\u6a21\u7684\u635f\u5931\u51fd\u6570\u4e86\u3002\u6211\u4eec\u6574\u4e2aBiLSTM+CRF\u5efa\u6a21\u7684\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u51fd\u6570\u8d8a\u6765\u8d8a\u5c0f\u3002\u4ece\u8fd9\u4e2a\u635f\u5931\u51fd\u6570\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u4e2a\u635f\u5931\u51fd\u6570\u5305\u542b\u4e24\u90e8\u5206\uff1a \u5355\u6761\u771f\u5b9e\u8def\u5f84\u7684\u5206\u6570\ud835\udc46\ud835\udc5f\ud835\udc52\ud835\udc4e\ud835\udc59\u548c\u5f52\u4e00\u5316\u9879\ud835\udc59\ud835\udc5c\ud835\udc54(\ud835\udc52\ud835\udc461+\ud835\udc52\ud835\udc462+...+\ud835\udc52\ud835\udc46\ud835\udc41)\uff0c \u5373\u5c06\u5168\u90e8\u7684\u8def\u5f84\u5206\u6570\u8fdb\u884c\ud835\udc59\ud835\udc5c\ud835\udc54_\ud835\udc60\ud835\udc62\ud835\udc5a_\ud835\udc52\ud835\udc65\ud835\udc5d\u64cd\u4f5c\uff0c\u5373\u5148\u5c06\u6bcf\u6761\u8def\u5f84\u5206\u6570\ud835\udc46\ud835\udc56\u8fdb\u884c\ud835\udc52\ud835\udc65\ud835\udc5d(\ud835\udc46\ud835\udc56)\uff0c\u7136\u540e\u518d\u5c06\u6240\u6709\u7684\u9879\u52a0\u8d77\u6765\uff0c\u6700\u540e\u53d6\ud835\udc59\ud835\udc5c\ud835\udc54\u503c\u3002 \u8bb2\u5230\u8fd9\u91cc\uff0c\u6709\u7684\u540c\u5b66\u53ef\u80fd\u4f1a\u6709\u7591\u60d1\uff0c\u8fd9\u91cc\u7684\u6bcf\u6761\u8def\u5f84\u5206\u6570\u5e94\u8be5\u600e\u4e48\u7b97\u5462\uff1f\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002","title":"2.3 CRF\u5efa\u6a21\u7684\u635f\u5931\u51fd\u6570"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#24","text":"\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u6211\u4eec\u518d\u6765\u505a\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u524d\u8fb9\u6211\u4eec\u63d0\u5230\u4e86\u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570\uff0c\u5047\u8bbe\ud835\udc38\u4ee3\u8868\u53d1\u5c04\u5206\u6570\u77e9\u9635\uff0c\ud835\udc47\u4ee3\u8868\u8f6c\u79fb\u5206\u6570\u77e9\u9635\uff0c\ud835\udc5b\u4ee3\u8868\u6587\u672c\u5e8f\u5217\u957f\u5ea6\uff0c\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52\u4ee3\u8868\u6807\u7b7e\u7684\u6570\u91cf\u3002\u53e6\u5916\u4e3a\u65b9\u4fbf\u4e66\u5199\uff0c\u6211\u4eec\u4e3a\u6bcf\u4e2a\u6807\u7b7e\u7f16\u4e2aid\u53f7\u3002 Tag B-Person I-Person B-Organization I-organization O Tag_id 0 1 2 3 4 \u5176\u4e2d, \ud835\udc38\u7684shape\u4e3a[\ud835\udc5b,\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52], \u6bcf\u884c\u5bf9\u5e94\u7740\u4e00\u4e2a\u6587\u672c\u5b57\u8bcd\u7684\u53d1\u5c04\u5206\u6570\uff0c\u6bcf\u5217\u4ee3\u8868\u4e00\u4e2a\u6807\u7b7e\uff0c\u4f8b\u5982\uff0c\ud835\udc3801\u4ee3\u8868\ud835\udc650\u53d6id\u4e3a1\u7684\u6807\u7b7e\u5206\u6570\uff0c\ud835\udc3823\u4ee3\u8868\ud835\udc652\u53d6id\u4e3a3\u7684\u6807\u7b7e\u5206\u6570\u3002\ud835\udc47\u7684shape\u4e3a[\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52,\ud835\udc61\ud835\udc4e\ud835\udc54_\ud835\udc60\ud835\udc56\ud835\udc67\ud835\udc52]\uff0c\u5b83\u4ee3\u8868\u4e86\u6807\u7b7e\u4e4b\u95f4\u76f8\u4e92\u8f6c\u79fb\u7684\u5206\u6570\uff0c\u4f8b\u5982\uff0c\ud835\udc4703\u4ee3\u8868id\u4e3a3\u7684\u6807\u7b7e\u5411id\u4e3a0\u7684\u6807\u7b7e\u8f6c\u79fb\u5206\u6570\u3002 \u6bcf\u6761\u8def\u5f84\u7684\u5206\u6570\u5c31\u662f\u7531\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\u548c\u8f6c\u79fb\u5206\u6570\u7ec4\u5408\u800c\u6210\u7684\uff0c\u5bf9\u4e8e\u56fe5\u6807\u8bb0\u51fa\u6765\u7684\u9ec4\u8272\u8def\u5f84\u6765\u8bf4\uff0c\ud835\udc650\u7684\u6807\u7b7e\u662fB-Person\uff0c\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\u662f\ud835\udc3800\uff0c\ud835\udc651\u7684\u6807\u7b7e\u662fI-Person\uff0c\u5bf9\u5e94\u7684\u53d1\u5c04\u5206\u6570\u662f\ud835\udc3811\uff0c\u7531B-Person\u5411I-Person\u8f6c\u79fb\u7684\u5206\u6570\u662f\ud835\udc4710\uff0c\u56e0\u6b64\u5230\u8fd9\u4e00\u6b65\u7684\u5206\u6570\u5c31\u662f\uff1a\ud835\udc3800+\ud835\udc4710+\ud835\udc3811\u3002 \u63a5\u4e0b\u6765\ud835\udc652\u7684\u6807\u7b7e\u662f\ud835\udc42\uff0c\u7531\ud835\udc651\u7684\u6807\u7b7e\u5411I-Person\u5411\ud835\udc652\u7684\u6807\u7b7eO\u8f6c\u79fb\u7684\u6982\u7387\u662f\ud835\udc4741\uff0c\u56e0\u6b64\u5230\u8fd9\u4e00\u6b65\u7684\u5206\u6570\u662f\uff1a\ud835\udc3800+\ud835\udc4710+\ud835\udc3811+\ud835\udc4741+\ud835\udc3824\uff0c\u4f9d\u6b21\u7c7b\u63a8\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u5b8c\u6574\u6761\u8def\u5f84\u7684\u5206\u6570\u3002\u5047\u8bbe\u7b2c\ud835\udc56\u4e2a\u4f4d\u7f6e\u5bf9\u5e94\u7684\u6807\u7b7e\u4e3a\ud835\udc66\uff0c\u5219\u6574\u6761\u8def\u5f84\u7684\u5206\u6570\u8ba1\u7b97\u5f62\u5f0f\u5316\u516c\u5f0f\u4e3a\uff1a","title":"2.4 \u5355\u6761\u8def\u5f84\u7684\u5206\u6570\u8ba1\u7b97"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#25","text":"2.3\u8282\u4e2d\u7684\u635f\u5931\u51fd\u6570\u5305\u62ec\u4e24\u9879\uff0c\u5355\u6761\u771f\u5b9e\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\u548c\u5f52\u4e00\u5316\u9879\uff08\u5982\u4e0a\u6240\u8ff0\uff0c\u5168\u90e8\u8def\u5f84\u5206\u6570\u7684\ud835\udc59\ud835\udc5c\ud835\udc54_\ud835\udc60\ud835\udc62\ud835\udc5a_\ud835\udc52\ud835\udc65\ud835\udc5d\uff0c\u4e3a\u65b9\u4fbf\u63cf\u8ff0\uff0c\u540e\u7eed\u76f4\u63a5\u5c06\u4e2a\u5f52\u4e00\u5316\u9879\u63cf\u8ff0\u4e3a\u5168\u90e8\u8def\u5f84\u4e4b\u548c\uff09\u7684\u8ba1\u7b97\u3002\u8fd9\u91cc\u4f60\u6216\u8bb8\u4f1a\u95ee\uff0c\u73b0\u5728\u77e5\u9053\u4e86\u5355\u6761\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u904d\u5386\u4e00\u4e0b\u6240\u6709\u7684\u8def\u5f84\u7b97\u4e2a\u5206\u6570\uff0c\u4e0d\u5c31\u53ef\u4ee5\u8f7b\u677e\u7b97\u51fa\u5168\u90e8\u8def\u5f84\u4e4b\u548c\u5417\uff1f\u662f\u7684\uff0c\u8fd9\u5728\u7406\u8bba\u4e0a\u662f\u53ef\u884c\u7684\u3002 \u4f46\u662f\uff0c\u524d\u8fb9\u6211\u4eec\u63d0\u5230\u8fd9\u4e2a\u8def\u5f84\u7684\u6570\u91cf\u662f\u4e2a\u6307\u6570\u7ea7\u522b\u7684\u91cf\u7eb2\uff0c\u5047\u8bbe\u6211\u5bf9\u4e32\u5305\u542b50\u4e2a\u5b57\u7684\u6587\u672c\u4e32\u8fdb\u884c\u5b9e\u4f53\u8bc6\u522b\uff0c\u6807\u7b7e\u7684\u6570\u91cf\u662f31\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8def\u5f84\u7684\u6570\u91cf\u5c06\u662f 31^{50}\u200b 31^{50}\u200b \u6761\uff0c\u8fd9\u662f\u771f\u7684\u662f\u96be\u4ee5\u63a5\u53d7\u7684\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5b83\u4f1a\u8fdc\u8fdc\u62d6\u6162\u6a21\u578b\u7684\u8bad\u7ec3\u548c\u9884\u6d4b\u6548\u7387\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u8981\u6362\u4e00\u79cd\u9ad8\u6548\u7684\u601d\u8def\uff0c\u8fd9\u91cc\u5176\u5b9e\u7528\u5230\u4e86\u4e00\u79cd\u88ab\u79f0\u4e3a\u524d\u5411\u7b97\u6cd5\uff08\u8fd9\u91cc\u4e0d\u518d\u8bb2\u89e3\uff09\u7684\u52a8\u6001\u89c4\u5212\uff0c\u5b83\u80fd\u5e2e\u52a9\u6211\u4eec\u5c06\u56fe5\u6240\u6709\u8def\u5f84\u7684\u548c\u8ba1\u7b97\uff0c\u62c6\u89e3\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u548c\u8ba1\u7b97\uff0c\u6700\u7ec8\u5f97\u51fa\u6240\u6709\u7684\u8def\u5f84\u4e4b\u548c\u3002","title":"2.5 \u5168\u90e8\u8def\u5f84\u7684\u5206\u6570\u8ba1\u7b97"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#26-viterbi","text":"\u5728\u524d\u8fb9\u51e0\u8282\uff0c\u6211\u4eec\u8bb2\u8fc7\u4e86CRF\u7684\u635f\u5931\u51fd\u6570\u3001\u5355\u6761\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\u3001\u5168\u90e8\u8def\u5f84\u5206\u6570\u7684\u8ba1\u7b97\uff0c\u6839\u636e\u8fd9\u4e9b\u5185\u5bb9\u5b8c\u5168\u53ef\u4ee5\u8fdb\u884cBiLSTM+CRF\u7684\u8bad\u7ec3\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5982\u4f55\u4f7f\u7528CRF\u4ece\u5168\u90e8\u7684\u8def\u5f84\u4e2d\u89e3\u7801\u51fa\u5f97\u5206\u6700\u9ad8\u7684\u90a3\u6761\u8def\u5f84\u5462\uff1f \u540c2.5\u8282\u6240\u8ff0\uff0c\u8ba1\u7b97\u5168\u90e8\u8def\u5f84\u5206\u6570\u540e\uff0c\u9009\u62e9\u5f97\u5206\u6700\u5927\u7684\u90a3\u6761\u8def\u5f84\u80af\u5b9a\u662f\u4e0d\u884c\u7684\u3002\u5176\u5b9e\u8fd9\u91cc\u662f\u4f7f\u7528\u4e86\u4e00\u79cd\u88ab\u79f0\u4e3a**Viterbi\uff08\u6269\u5c55\u8d44\u6599\uff09**\u7684\u7b97\u6cd5\uff0c\u5b83\u7684\u601d\u60f3\u548c2.5\u8282\u4ecb\u7ecd\u7684**\u524d\u5411\u7b97\u6cd5**\u6709\u4e9b\u7c7b\u4f3c\uff0c\u5c06\u4ece\u5168\u90e8\u8def\u5f84\u4e2d\u67e5\u627e\u6700\u4f18\u8def\u5f84\u7684\u8fc7\u7a0b\uff0c\u62c6\u89e3\u4e3a\u9009\u62e9\u6bcf\u4e2a\u4f4d\u7f6e\u7d2f\u8ba1\u7684\u6700\u5927\u8def\u5f84\u3002","title":"2.6 Viterbi\u89e3\u7801"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#3-bilstmcrf","text":"","title":"3 BiLSTM+CRF\u9879\u76ee\u5b8c\u6574\u5b9e\u73b0"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#31","text":"","title":"3.1 \u6574\u4f53\u4ee3\u7801\u67b6\u6784\u56fe"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#32","text":"\u672c\u9879\u76ee\u4e2d\u5bf9\u6570\u636e\u90e8\u5206\u7684\u9884\u5904\u7406\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u7b2c\u4e8c\u6b65: \u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e \u7b2c\u4e09\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4e0edataloader\u51fd\u6570","title":"3.2 \u6570\u636e\u9884\u5904\u7406"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_2","text":"\u6570\u636e\u8bf4\u660e\uff1a\u672c\u6b21\u9879\u76ee\u6570\u636e\u4e00\u5171\u5b58\u653e\u5728\u4e24\u4e2a\u6587\u4ef6\u5939\u4e2d\uff0c\u8def\u5f84\u5206\u522b\u4e3a\uff1a /MedicalKB/Ner/LSTM_CRF/data_origin /MedicalKB/Ner/LSTM_CRF/data data_origin\u6570\u636e\u8bf4\u660e\uff1a \u8be5\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u6765\u6e90\u4e3a**\u533b\u9662\u771f\u5b9e\u75c5\u60a3\u7684\u533b\u7597\u6570\u636e\uff0c\u6570\u636e\u91cf\u6709\u9650\uff0c\u4f46\u662f\u8db3\u591f\u638c\u63e1\u672c\u6b21\u5b9e\u73b0\u5b9e\u4f53\u62bd\u53d6\u7684\u6a21\u578b\u601d\u60f3\u3002 \u8be5\u6587\u4ef6\u4e2d\u5171\u5305\u62ec4\u4e2a\u6587\u4ef6\u5939: \u6bcf\u4e2a\u6587\u4ef6\u5939\u4e0b\u5171\u6709\u4e24\u7c7b\u6587\u4ef6\uff1a \u4ee5.txt\u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u662f\u6807\u6ce8\u597d\u7684\u6570\u636e\uff0c\u5305\u62ec\u5176\u4f4d\u7f6e\u548c\u7c7b\u578b\uff0c\u683c\u5f0f\u5982\u4e0b\uff1a \u53f3\u9acb\u90e8 21 23 \u8eab\u4f53\u90e8\u4f4d \u75bc\u75db 27 28 \u75c7\u72b6\u548c\u4f53\u5f81 \u80bf\u80c0 29 30 \u75c7\u72b6\u548c\u4f53\u5f81 txt\u4e2d\uff0c\u6bcf\u884c\u67094\u5217\uff0c\u5217\u4e4b\u95f4\u7528\u7a7a\u683c\u9694\u5f00 \u7b2c\u4e00\u5217\uff1a\u5b9e\u4f53\u540d\u79f0\uff1b\u7b2c\u4e8c\u5217\uff1a\u5b9e\u4f53\u5f00\u59cb\u4f4d\u7f6e\uff1b\u7b2c\u4e09\u5217\uff1a\u5b9e\u4f53\u7ed3\u675f\u4f4d\u7f6e\uff1b\u7b2c\u56db\u5217\uff1a\u5b9e\u4f53\u7c7b\u578b \u4ee5txtoriginal.txt\u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u662f\u539f\u59cb\u6587\u6863 \u5973\u6027\uff0c88\u5c81\uff0c\u519c\u6c11\uff0c\u53cc\u6ee6\u5e94\u8425\u5b50\u6751\u4eba\uff0c\u4e3b\u56e0\u53f3\u9acb\u90e8\u6454\u4f24\u540e\u75bc\u75db\u80bf\u80c0\uff0c\u6d3b\u52a8\u53d7\u96505\u5c0f\u65f6\u4e8e2016-10-29\uff0c11\uff1a12\u5165\u9662\u3002 \u6ce8\u610f\uff1a\u6211\u4eec\u9700\u8981\u5bf9data_origin\u4e2d\u6240\u6709\u7684\u6587\u4ef6\u6570\u636e\u8fdb\u884c\u683c\u5f0f\u8f6c\u6362\uff0c\u5c06\u5176\u8f6c\u6362\u4e3aBIO\u6570\u636e\u6807\u6ce8\u5f62\u5f0f\uff0c\u7b26\u5408NER\u4efb\u52a1\u8981\u6c42\u3002 data\u6570\u636e\u8bf4\u660e\uff1a \u8be5\u6587\u4ef6\u4e2d\u539f\u59cb\u5305\u62ec\u4e24\u4e2ajson\u6587\u4ef6\uff1alabels.json\u548ctag2id.json labels.json\u6587\u4ef6\u8bf4\u660e\uff1a { \"\u6cbb\u7597\": \"TREATMENT\", \"\u8eab\u4f53\u90e8\u4f4d\": \"BODY\", \"\u75c7\u72b6\u548c\u4f53\u5f81\": \"SIGNS\", \"\u68c0\u67e5\u548c\u68c0\u9a8c\": \"CHECK\", \"\u75be\u75c5\u548c\u8bca\u65ad\": \"DISEASE\" } \u4e00\u5171\u5305\u542b5\u79cd\u5b9e\u4f53\u7c7b\u578b\uff1aTREATMENT\u6cbb\u7597\u65b9\u5f0f, BODY\u8eab\u4f53\u90e8\u4f4d, SIGN\u75be\u75c5\u75c7\u72b6, CHECK\u533b\u5b66\u68c0\u67e5, DISEASE\u75be\u75c5\u5b9e\u4f53.O\u975e\u5b9e\u4f53\u90e8\u5206, tag2id.json\u6587\u4ef6\u8bf4\u660e\uff1a { \"O\" : 0 , \"B-TREATMENT\" : 1 , \"I-TREATMENT\" : 2 , \"B-BODY\" : 3 , \"I-BODY\" : 4 , \"B-SIGNS\" : 5 , \"I-SIGNS\" : 6 , \"B-CHECK\" : 7 , \"I-CHECK\" : 8 , \"B-DISEASE\" : 9 , \"I-DISEASE\" : 10 } \u5c06\u4e0a\u8ff05\u79cd\u5b9e\u4f53\u7c7b\u578b\uff0c\u8f6c\u6362\u4e3a\u6807\u7b7e\u5f62\u5f0f\uff0c\u6bcf\u4e2atoken\u5bf9\u5e9411\u79cd\u53ef\u80fd\u7684\u6807\u7b7e\uff08\u6ce8\u610f\u8fd8\u6709\u4e00\u4e2a\u975e\u5b9e\u4f53\u7c7b\u578bO\uff09","title":"\u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_3","text":"\u9700\u8981\u5bf9\u4e0a\u8ff0\u7684origin\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u8fdb\u884c\u5e8f\u5217\u6807\u6ce8\uff0c\u9009\u62e9\u6807\u6ce8\u65b9\u5f0f\uff1aBIO\uff0c\u76ee\u7684\uff1a\u5bf9\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2atoken\u90fd\u8981\u6807\u8bb0\u4e0a\u5bf9\u5e94\u7684\u6807\u7b7e\uff0c\u5e76\u7edf\u8ba1\u6240\u6709tokens\uff08\u53bb\u91cd\u540e\uff09\u5e76\u4fdd\u5b58 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u672a\u6807\u6ce8\u524d\uff1a ['\u4ee5', '\u54b3', '\u55fd', '\uff0c', '\u54b3', '\u75f0', '\uff0c', '\u53d1', '\u70ed', '\u4e3a', '\u4e3b', '\u75c7', '\u3002'] \u6807\u6ce8\u540e\uff1a ['O', 'B-SIGNS', 'I-SIGNS', 'O', 'B-SIGNS', 'I-SIGNS', 'O', 'B-SIGNS', 'I-SIGNS', 'O', 'O', 'O', 'O'] \u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e \u4ee3\u7801\u8def\u5f84\uff1a/MedicalKB/Ner/LSTM_CRF/utils/data_process.py \u5728data_process.py\u811a\u672c\u4e2d\uff0c\u5b9a\u4e49\u4e00\u4e2aTransferData\u7c7b\uff0c\u5b9e\u73b0\u6570\u636e\u683c\u5f0f\u7684\u8f6c\u6362 \u5177\u4f53\u4ee3\u7801\uff1a import json import os from collections import Counter os . chdir ( '..' ) cur = os . getcwd () print ( '\u5f53\u524d\u6570\u636e\u5904\u7406\u9ed8\u8ba4\u5de5\u4f5c\u76ee\u5f55\uff1a' , cur ) class TransferData (): def __init__ ( self ): self . label_dict = json . load ( open ( os . path . join ( cur , 'data/labels.json' ))) self . seq_tag_dict = json . load ( open ( os . path . join ( cur , 'data/tag2id.json' ))) self . origin_path = os . path . join ( cur , 'data_origin' ) self . train_filepath = os . path . join ( cur , 'data/train.txt' ) def transfer ( self ): with open ( self . train_filepath , 'w' , encoding = 'utf-8' ) as fr : for root , dirs , files in os . walk ( self . origin_path ): for file in files : filepath = os . path . join ( root , file ) if 'original' not in filepath : continue label_filepath = filepath . replace ( '.txtoriginal' , '' ) print ( filepath , ' \\t\\t ' , label_filepath ) res_dict = self . read_label_text ( label_filepath ) with open ( filepath , 'r' , encoding = 'utf-8' ) as f : content = f . read () . strip () for indx , char in enumerate ( content ): char_label = res_dict . get ( indx , 'O' ) fr . write ( char + ' \\t ' + char_label + ' \\n ' ) def read_label_text ( self , label_filepath ): res_dict = {} for line in open ( label_filepath , 'r' , encoding = 'utf-8' ): # line--\u300b[\u53f3\u9acb\u90e8\\t21\\t23\\t\u8eab\u4f53\u90e8\u4f4d] res = line . strip () . split ( ' \\t ' ) # res-->['\u53f3\u9acb\u90e8', '21', '23', '\u8eab\u4f53\u90e8\u4f4d'] start = int ( res [ 1 ]) end = int ( res [ 2 ]) label = res [ 3 ] label_tag = self . label_dict . get ( label ) for i in range ( start , end + 1 ): if i == start : tag = \"B-\" + label_tag else : tag = \"I-\" + label_tag res_dict [ i ] = tag return res_dict if __name__ == '__main__' : handler = TransferData () handler . transfer () \u7ecf\u8fc7\u6570\u636e\u8f6c\u6362\u540e\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u4e00\u4e2atrain.txt\u6587\u6863\uff0c\u6b64\u65f6\uff0c\u5bf9\u4e8e\u6240\u6709origin\u4e2d\u7684\u6570\u636e\uff0c\u90fd\u5b9e\u73b0\u4e86BIO\u6807\u6ce8 \u54b3 B-SIGNS \u75f0 I-SIGNS \uff0c O \u53d1 B-SIGNS \u70ed I-SIGNS \uff0c O \u996e O \u98df O \u3001 O \u7761 O \u7720 O \u5c1a O \u53ef O","title":"\u7b2c\u4e8c\u6b65: \u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#config","text":"Config\u7c7b\u6587\u4ef6\u8def\u5f84\u4e3a:/MedicalKB/Ner/LSTM_CRF/config.py config\u6587\u4ef6\u76ee\u7684: \u914d\u7f6e\u9879\u76ee\u5e38\u7528\u53d8\u91cf\uff0c\u4e00\u822c\u8fd9\u4e9b\u53d8\u91cf\u5c5e\u4e8e\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\uff0c\u6bd4\u5982: \u8bad\u7ec3\u6587\u4ef6\u8def\u5f84\u3001\u6a21\u578b\u8bad\u7ec3\u6b21\u6570\u3001\u6a21\u578b\u8d85\u53c2\u6570\u7b49\u7b49 import os import torch import json class Config ( object ): def __init__ ( self ): # \u5982\u679c\u662fwindows\u6216\u8005linux\u7535\u8111\uff08\u4f7f\u7528GPU\uff09 # self.device = \"cuda:0\" if torch.cuda.is_available() else \"cpu:0\" # M1\u82af\u7247\u53ca\u5176\u4ee5\u4e0a\u7684\u7535\u8111\uff08\u4f7f\u7528GPU\uff09 self . device = 'mps' self . train_path = '/MedicalKB/Ner/LSTM_CRF/data/train.txt' self . vocab_path = '/MedicalKB/Ner/LSTM_CRF/vocab/vocab.txt' self . embedding_dim = 300 self . epochs = 5 self . batch_size = 8 self . hidden_dim = 256 self . lr = 2e-3 # crf\u7684\u65f6\u5019\uff0clr\u53ef\u4ee5\u5c0f\u70b9\uff0c\u6bd4\u59821e-3 self . dropout = 0.2 self . model = \"BiLSTM_CRF\" # \u53ef\u4ee5\u53ea\u7528\"BiLSTM\" self . tag2id = json . load ( open ( '/MedicalKB/Ner/LSTM_CRF/data/tag2id.json' )) if __name__ == '__main__' : conf = Config () print ( conf . train_path ) print ( conf . tag2id )","title":"\u7b2c\u4e09\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_4","text":"\u6784\u9020\u6570\u636e\u9884\u5904\u7406\u51fd\u6570\uff0c\u5206\u4e3a\u4e24\u6b65\u9aa4\uff1a 1.\u6784\u9020\u6837\u672cx\u4ee5\u53ca\u6807\u7b7ey\u6570\u636e\u5bf9\uff0c\u4ee5\u53ca\u83b7\u53d6vocabs 2.\u6784\u9020\u6570\u636e\u8fed\u4ee3\u5668","title":"\u7b2c\u56db\u6b65:  \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#41-xyvocabs","text":"\u56e0\u4e3a\u5728\u7b2c\u4e8c\u6b65\u6784\u9020\u5e8f\u5217\u6807\u6ce8\u6570\u636e\u65f6\uff0c\u6ca1\u6709\u5bf9\u6837\u672c\u8fdb\u884c\u660e\u786e\u7684\u5206\u5272\uff0c\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u6807\u70b9\u7b26\u53f7\u4e3a\u5206\u9694\u7b26\uff0c\u6784\u9020\u4e0d\u540c\u7684(x, y)\u6837\u672c\u5bf9 \u4ee3\u7801\u5b9e\u73b0\uff1a \u8def\u5f84\uff1a/MedicalKB/Ner/LSTM_CRF/utils/common.py from LSTM_CRF.config import * conf = Config () '''\u6784\u9020\u6570\u636e\u96c6''' def build_data (): datas = [] sample_x = [] sample_y = [] vocab_list = [ \"PAD\" , 'UNK' ] for line in open ( conf . train_path , 'r' , encoding = 'utf-8' ): line = line . rstrip () . split ( ' \\t ' ) if not line : continue char = line [ 0 ] if not char : continue cate = line [ - 1 ] sample_x . append ( char ) sample_y . append ( cate ) if char not in vocab_list : vocab_list . append ( char ) if char in [ '\u3002' , '?' , '!' , '\uff01' , '\uff1f' ]: datas . append ([ sample_x , sample_y ]) sample_x = [] sample_y = [] word2id = { wd : index for index , wd in enumerate ( vocab_list )} write_file ( vocab_list , conf . vocab_path ) return datas , word2id '''\u4fdd\u5b58\u5b57\u5178\u6587\u4ef6''' def write_file ( wordlist , filepath ): with open ( filepath , 'w' , encoding = 'utf-8' ) as f : f . write ( ' \\n ' . join ( wordlist )) if __name__ == '__main__' : datas , word2id = build_data () print ( len ( datas )) print ( datas [: 4 ]) print ( word2id ) print ( len ( word2id ))","title":"4.1 \u6784\u9020(x,y)\u6837\u672c\u5bf9\uff0c\u4ee5\u53ca\u83b7\u53d6vocabs"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#42","text":"\u4ee3\u7801\u8def\u5f84\uff1a/MedicalKB/Ner/LSTM_CRF/utils/data_loader.py \u7b2c\u4e00\u6b65\uff1a\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 import json import torch from common import * from torch.utils.data import DataLoader , Dataset from torch.nn.utils.rnn import pad_sequence datas , word2id = build_data () \u7b2c\u4e8c\u6b65\uff1a\u6784\u5efaDataset\u7c7b class NerDataset ( Dataset ): def __init__ ( self , datas ): super () . __init__ () self . datas = datas def __len__ ( self ): return len ( self . datas ) def __getitem__ ( self , item ): x = self . datas [ item ][ 0 ] y = self . datas [ item ][ 1 ] return x , y \u7b2c\u4e09\u6b65\uff1a\u6784\u5efa\u81ea\u5b9a\u4e49\u51fd\u6570collate_fn() def collate_fn ( batch ): x_train = [ torch . tensor ([ word2id [ char ] for char in data [ 0 ]]) for data in batch ] y_train = [ torch . tensor ([ conf . tag2id [ label ] for label in data [ 1 ]]) for data in batch ] # \u8865\u9f50input_ids, \u4f7f\u75280\u4f5c\u4e3a\u586b\u5145\u503c input_ids_padded = pad_sequence ( x_train , batch_first = True , padding_value = 0 ) # # \u8865\u9f50labels\uff0c\u4f7f\u75280\u4f5c\u4e3a\u586b\u5145\u503c labels_padded = pad_sequence ( y_train , batch_first = True , padding_value =- 100 ) # \u521b\u5efaattention mask attention_mask = ( input_ids_padded != 0 ) . long () return input_ids_padded , labels_padded , attention_mask \u7b2c\u56db\u6b65\uff1a\u6784\u5efaget_data\u51fd\u6570\uff0c\u83b7\u5f97\u6570\u636e\u8fed\u4ee3\u5668 def get_data (): train_dataset = NerDataset ( datas [: 6200 ]) train_dataloader = DataLoader ( dataset = train_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , ) dev_dataset = NerDataset ( datas [ 6200 :]) dev_dataloader = DataLoader ( dataset = dev_dataset , batch_size = conf . batch_size , collate_fn = collate_fn , drop_last = True , ) return train_dataloader , dev_dataloader if __name__ == '__main__' : train_dataloader , dev_dataloader = get_data () for input_ids_padded , labels_padded , attention_mask in train_dataloader : print ( input_ids_padded . shape ) print ( labels_padded . shape ) print ( attention_mask . shape ) break","title":"4.2 \u6784\u9020\u6570\u636e\u8fed\u4ee3\u5668"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#33-bilstmcrf","text":"\u672c\u9879\u76ee\u4e2dBiLSTN+CRF\u6a21\u578b\u642d\u5efa\u7684\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570 \u7b2c\u4e09\u6b65: \u7f16\u5199\u4f7f\u7528\u6a21\u578b\u9884\u6d4b\u4ee3\u7801\u7684\u5b9e\u73b0.","title":"3.3 BiLSTM+CRF\u6a21\u578b\u642d\u5efa"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_5","text":"\u6784\u5efaBiLSTM\u6a21\u578b \u4ee3\u7801\u8def\u5f84: /MedicalKB/Ner/LSTM_CRF/model/BiLSTM.py import torch import torch.nn as nn class NERLSTM ( nn . Module ): def __init__ ( self , embedding_dim , hidden_dim , dropout , word2id , tag2id ): super ( NERLSTM , self ) . __init__ () self . name = \"BiLSTM\" self . embedding_dim = embedding_dim self . hidden_dim = hidden_dim self . vocab_size = len ( word2id ) + 1 self . tag_to_ix = tag2id self . tag_size = len ( tag2id ) self . word_embeds = nn . Embedding ( self . vocab_size , self . embedding_dim ) self . dropout = nn . Dropout ( dropout ) self . lstm = nn . LSTM ( self . embedding_dim , self . hidden_dim // 2 , bidirectional = True , batch_first = True ) self . hidden2tag = nn . Linear ( self . hidden_dim , self . tag_size ) def forward ( self , x , mask ): embedding = self . word_embeds ( x ) outputs , hidden = self . lstm ( embedding ) outputs = outputs * mask . unsqueeze ( - 1 ) # \u4ec5\u4fdd\u7559\u6709\u6548\u4f4d\u7f6e\u7684\u8f93\u51fa outputs = self . dropout ( outputs ) outputs = self . hidden2tag ( outputs ) return outputs \u6784\u5efaBiLSTM_CRF\u6a21\u578b\u7c7b \u4ee3\u7801\u8def\u5f84: /MedicalKB/Ner/LSTM_CRF/model/BiLSTM_CRF.py import torch import torch.nn as nn from TorchCRF import CRF class NERLSTM_CRF ( nn . Module ): def __init__ ( self , embedding_dim , hidden_dim , dropout , word2id , tag2id ): super ( NERLSTM_CRF , self ) . __init__ () self . name = \"BiLSTM_CRF\" self . embedding_dim = embedding_dim self . hidden_dim = hidden_dim self . vocab_size = len ( word2id ) + 1 self . tag_to_ix = tag2id self . tag_size = len ( tag2id ) self . word_embeds = nn . Embedding ( self . vocab_size , self . embedding_dim ) self . dropout = nn . Dropout ( dropout ) #CRF self . lstm = nn . LSTM ( self . embedding_dim , self . hidden_dim // 2 , bidirectional = True , batch_first = True ) self . hidden2tag = nn . Linear ( self . hidden_dim , self . tag_size ) self . crf = CRF ( self . tag_size ) def forward ( self , x , mask ): #lstm\u6a21\u578b\u5f97\u5230\u7684\u7ed3\u679c outputs = self . get_lstm2linear ( x ) outputs = outputs * mask . unsqueeze ( - 1 ) outputs = self . crf . viterbi_decode ( outputs , mask ) return outputs def log_likelihood ( self , x , tags , mask ): # lstm\u6a21\u578b\u5f97\u5230\u7684\u7ed3\u679c outputs = self . get_lstm2linear ( x ) outputs = outputs * mask . unsqueeze ( - 1 ) # \u8ba1\u7b97\u635f\u5931 return - self . crf ( outputs , tags , mask ) def get_lstm2linear ( self , x ): embedding = self . word_embeds ( x ) outputs , hidden = self . lstm ( embedding ) outputs = self . dropout ( outputs ) outputs = self . hidden2tag ( outputs ) return outputs","title":"\u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_6","text":"\u5b9e\u73b0\u8bad\u7ec3\u51fd\u6570train.py \u4ee3\u7801\u4f4d\u7f6e:/MedicalKB/Ner/LSTM_CRF/trian.py \u7b2c\u4e00\u6b65\uff1a\u5bfc\u5165\u5fc5\u5907\u5de5\u5177\u5305 import torch import torch.nn as nn import torch.optim as optim from model.BiLSTM import * from model.BiLSTM_CRF import * from utils.data_loader import * from tqdm import tqdm # classification_report\u53ef\u4ee5\u5bfc\u51fa\u5b57\u5178\u683c\u5f0f\uff0c\u4fee\u6539\u53c2\u6570\uff1aoutput_dict=True\uff0c\u53ef\u4ee5\u5c06\u5b57\u5178\u5728\u4fdd\u5b58\u4e3acsv\u683c\u5f0f\u8f93\u51fa from sklearn.metrics import precision_score , recall_score , f1_score , classification_report from config import * conf = Config () \u7b2c\u4e8c\u6b65\uff1a\u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\u51fd\u6570\u7684\u642d\u5efa\uff1amode2trian() def model2train (): # \u83b7\u53d6\u6570\u636e train_dataloader , dev_dataloader = get_data () # \u5b9e\u4f8b\u5316\u6a21\u578b models = { 'BiLSTM' : NERLSTM , 'BiLSTM_CRF' : NERLSTM_CRF } model = models [ conf . model ]( conf . embedding_dim , conf . hidden_dim , conf . dropout , word2id , conf . tag2id ) model = model . to ( conf . device ) # \u5b9e\u4f8b\u5316\u635f\u5931\u51fd\u6570 criterion = nn . CrossEntropyLoss () # \u5b9e\u4f8b\u5316\u4f18\u5316\u5668 optimizer = optim . Adam ( model . parameters (), lr = conf . lr ) # \u9009\u62e9\u6a21\u578b\u8fdb\u884c\u8bad\u7ec3 start_time = time . time () if conf . model == 'BiLSTM' : f1_score = - 1000 for epoch in range ( conf . epochs ): model . train () for index , ( inputs , labels , mask ) in enumerate ( tqdm ( train_dataloader , desc = 'BiLSTM\u8bad\u7ec3' )): x = inputs . to ( conf . device ) mask = mask . to ( conf . device ) y = labels . to ( conf . device ) pred = model ( x , mask ) pred = pred . view ( - 1 , len ( conf . tag2id )) my_loss = criterion ( pred , y . view ( - 1 )) optimizer . zero_grad () my_loss . backward () optimizer . step () if index % 200 == 0 : print ( 'epoch: %04d ,------------loss: %f ' % ( epoch , my_loss . item ())) precision , recall , f1 , report = model2dev ( dev_dataloader , model , criterion ) if f1 > f1_score : f1_score = f1 torch . save ( model . state_dict (), 'save_model/bilstm_best.pth' ) print ( report ) end_time = time . time () print ( f '\u8bad\u7ec3\u603b\u8017\u65f6\uff1a { end_time - start_time } ' ) elif conf . model == 'BiLSTM_CRF' : f1_score = - 1000 for epoch in range ( conf . epochs ): model . train () for index , ( inputs , labels , mask ) in enumerate ( tqdm ( train_dataloader , desc = 'bilstm+crf\u8bad\u7ec3' )): x = inputs . to ( conf . device ) mask = mask . to ( torch . bool ) . to ( conf . device ) tags = labels . to ( conf . device ) # CRF loss = model . log_likelihood ( x , tags , mask ) . mean () optimizer . zero_grad () loss . backward () # CRF torch . nn . utils . clip_grad_norm_ ( parameters = model . parameters (), max_norm = 10 ) optimizer . step () if index % 200 == 0 : print ( 'epoch: %04d ,------------loss: %f ' % ( epoch , loss . item ())) precision , recall , f1 , report = model2dev ( dev_dataloader , model ) if f1 > f1_score : f1_score = f1 torch . save ( model . state_dict (), 'save_model/bilstm_crf_best.pth' ) print ( report ) end_time = time . time () print ( f '\u8bad\u7ec3\u603b\u8017\u65f6\uff1a { end_time - start_time } ' ) \u7b2c\u4e09\u6b65\uff1a\u5b9e\u73b0\u6a21\u578b\u9a8c\u8bc1\u51fd\u6570\u7684\u642d\u5efa\uff1amodel2dev() def model2dev ( dev_iter , model , criterion = None ): aver_loss = 0 preds , golds = [], [] model . eval () for index , ( inputs , labels , mask ) in enumerate ( tqdm ( dev_iter , desc = \"\u6d4b\u8bd5\u96c6\u9a8c\u8bc1\" )): val_x = inputs . to ( conf . device ) mask = mask . to ( conf . device ) val_y = labels . to ( conf . device ) predict = [] if model . name == \"BiLSTM\" : pred = model ( val_x , mask ) predict = torch . argmax ( pred , dim =- 1 ) . tolist () pred = pred . view ( - 1 , len ( conf . tag2id )) val_loss = criterion ( pred , val_y . view ( - 1 )) aver_loss += val_loss . item () elif model . name == \"BiLSTM_CRF\" : mask = mask . to ( torch . bool ) predict = model ( val_x , mask ) loss = model . log_likelihood ( val_x , val_y , mask ) aver_loss += loss . mean () . item () # \u7edf\u8ba1\u975e0\u7684\uff0c\u4e5f\u5c31\u662f\u771f\u5b9e\u6807\u7b7e\u7684\u957f\u5ea6 leng = [] for i in val_y . cpu (): tmp = [] for j in i : if j . item () > 0 : tmp . append ( j . item ()) leng . append ( tmp ) # \u63d0\u53d6\u771f\u5b9e\u957f\u5ea6\u7684\u9884\u6d4b\u6807\u7b7e for index , i in enumerate ( predict ): preds . extend ( i [: len ( leng [ index ])]) # \u63d0\u53d6\u771f\u5b9e\u957f\u5ea6\u7684\u771f\u5b9e\u6807\u7b7e for index , i in enumerate ( val_y . tolist ()): golds . extend ( i [: len ( leng [ index ])]) aver_loss /= ( len ( dev_iter ) * 64 ) precision = precision_score ( golds , preds , average = 'macro' ) recall = recall_score ( golds , preds , average = 'macro' ) f1 = f1_score ( golds , preds , average = 'macro' ) report = classification_report ( golds , preds ) return precision , recall , f1 , report \u6a21\u578b\u8bad\u7ec3\u6548\u679c\uff1a BiLSTM\uff1a\u8bad\u7ec35\u8f6e\uff0c\u603b\u5171\u8017\u65f6\uff1a105s \u8bad\u7ec3\u65e5\u5fd7\uff1a BiLSTM+CRF\uff1a\u8bad\u7ec35\u8f6e\uff0c\u603b\u5171\u8017\u65f6\uff1a831s \u8bad\u7ec3\u65e5\u5fd7\uff1a \u6574\u4f53\u5bf9\u6bd4\uff1aBiLSTM+CRF\u867d\u7136\u6bd4BiLSTM\u901f\u5ea6\u6162\uff0c\u4f46\u662f\u7cbe\u5ea6\u6709\u6240\u63d0\u5347\uff0c\u8fd9\u4e2a\u6548\u679c\u968f\u7740\u6570\u636e\u91cf\u7684\u589e\u52a0\u8fd8\u4f1a\u8fdb\u4e00\u6b65\u63d0\u5347\u3002","title":"\u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_7","text":"\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u968f\u673a\u62bd\u53d6\u6587\u672c\u8fdb\u884cNER \u4ee3\u7801\u4f4d\u7f6e: /MedicalKB/Ner/LSTM_CRF/ner_predict.py \u7b2c\u4e00\u6b65\uff1a\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 import torch.nn as nn import torch.optim as optim from model.BiLSTM import * from model.BiLSTM_CRF import * from utils.data_loader import * from tqdm import tqdm # \u5b9e\u4f8b\u5316\u6a21\u578b models = { 'BiLSTM' : NERLSTM , 'BiLSTM_CRF' : NERLSTM_CRF } model = models [ \"BiLSTM_CRF\" ]( conf . embedding_dim , conf . hidden_dim , conf . dropout , word2id , conf . tag2id ) model . load_state_dict ( torch . load ( 'save_model/bilstm_crf_best.pth' )) id2tag = { value : key for key , value in conf . tag2id . items ()} \u7b2c\u4e8c\u6b65\uff1a\u5b9e\u73b0\u6a21\u578b\u9884\u6d4b\u51fd\u6570\uff1amodel2test def model2test ( sample ): x = [] for char in sample : if char not in word2id : char = \"UNK\" x . append ( word2id [ char ]) x_train = torch . tensor ([ x ]) mask = ( x_train != 0 ) . long () model . eval () with torch . no_grad (): if model . name == \"BiLSTM\" : outputs = model ( x_train , mask ) preds_ids = torch . argmax ( outputs , dim =- 1 )[ 0 ] tags = [ id2tag [ i . item ()] for i in preds_ids ] else : preds_ids = model ( x_train , mask ) tags = [ id2tag [ i ] for i in preds_ids [ 0 ]] chars = [ i for i in sample ] assert len ( chars ) == len ( tags ) result = extract_entities ( chars , tags ) return result if __name__ == '__main__' : result = model2test ( sample = '\u5c0f\u660e\u7684\u7236\u4eb2\u60a3\u6709\u51a0\u5fc3\u75c5\u53ca\u7cd6\u5c3f\u75c5\uff0c\u65e0\u624b\u672f\u5916\u4f24\u53f2\u53ca\u836f\u7269\u8fc7\u654f\u53f2' ) print ( result ) \u7b2c\u4e09\u6b65\uff1a\u5b9e\u73b0\u5b9e\u4f53\u89e3\u6790\u51fd\u6570\uff1aextract_entities def extract_entities ( tokens , labels ): entities = [] entity = [] entity_type = None for token , label in zip ( tokens , labels ): if label . startswith ( \"B-\" ): # \u5b9e\u4f53\u7684\u5f00\u59cb if entity : # \u5982\u679c\u5df2\u7ecf\u6709\u5b9e\u4f53\uff0c\u5148\u4fdd\u5b58 entities . append (( entity_type , '' . join ( entity ))) entity = [] entity_type = label . split ( '-' )[ 1 ] entity . append ( token ) elif label . startswith ( \"I-\" ) and entity : # \u5b9e\u4f53\u7684\u4e2d\u95f4\u6216\u7ed3\u5c3e entity . append ( token ) else : if entity : # \u4fdd\u5b58\u4e0a\u4e00\u4e2a\u5b9e\u4f53 entities . append (( entity_type , '' . join ( entity ))) entity = [] entity_type = None # \u5982\u679c\u6700\u540e\u4e00\u4e2a\u5b9e\u4f53\u6ca1\u6709\u4fdd\u5b58\uff0c\u624b\u52a8\u4fdd\u5b58 if entity : entities . append (( entity_type , '' . join ( entity ))) return { entity : entity_type for entity_type , entity in entities }","title":"\u7b2c\u4e09\u6b65: \u7f16\u5199\u6a21\u578b\u9884\u6d4b\u51fd\u6570"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/03-%E5%9F%BA%E4%BA%8EBiLSTM%2BCRF%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0NER.html#_8","text":"\u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u57fa\u4e8eBiLSTM+CRF\u6a21\u578b\u5b9e\u73b0NER\u4efb\u52a1\u7684\u8bad\u7ec3\uff0c\u5e76\u8be6\u7ec6\u7684\u4ecb\u7ecd\u4e86CRF\u7684\u539f\u7406\u4ee5\u53ca\u5982\u4f55\u548cBiLSTM\u8fdb\u884c\u878d\u5408\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/04-Veterbi%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D%28%E6%89%A9%E5%B1%95%E8%B5%84%E6%96%99%29.html","text":"Viterbi\u7b97\u6cd5\u4ecb\u7ecd \u00b6 Viterbi\u7b97\u6cd5\u539f\u7406 \u00b6 \u5982\u4e0b\u56fe\uff0c\u5047\u5982\u4f60\u4eceS\u548cE\u4e4b\u95f4\u627e\u4e00\u6761\u6700\u77ed\u7684\u8def\u5f84\uff0c\u9664\u4e86\u904d\u5386\u5b8c\u6240\u6709\u8def\u5f84\uff0c\u8fd8\u6709\u4ec0\u4e48\u66f4\u597d\u7684\u65b9\u6cd5\uff1f viterbi\u7ef4\u7279\u6bd4\u7b97\u6cd5\u89e3\u51b3\u7684\u662f\u7bf1\u7b06\u578b\u7684\u56fe\u7684\u6700\u77ed\u8def\u5f84\u95ee\u9898\uff0c\u56fe\u7684\u8282\u70b9\u6309\u5217\u7ec4\u7ec7\uff0c\u6bcf\u5217\u7684\u8282\u70b9\u6570\u91cf\u53ef\u4ee5\u4e0d\u4e00\u6837\uff0c\u6bcf\u4e00\u5217\u7684\u8282\u70b9\u53ea\u80fd\u548c\u76f8\u90bb\u5217\u7684\u8282\u70b9\u76f8\u8fde\uff0c\u4e0d\u80fd\u8de8\u5217\u76f8\u8fde\uff0c\u8282\u70b9\u4e4b\u95f4\u6709\u7740\u4e0d\u540c\u7684\u8ddd\u79bb\uff0c\u8ddd\u79bb\u7684\u503c\u5c31\u4e0d\u5728\u56fe\u4e0a\u4e00\u4e00\u6807\u6ce8\u51fa\u6765\u4e86\uff0c\u5927\u5bb6\u81ea\u884c\u8111\u8865. viterbi\u7ef4\u7279\u6bd4\u7b97\u6cd5\u8fc7\u7a0b\u975e\u5e38\u7b80\u5355\uff1a \u4e3a\u4e86\u627e\u51faS\u5230E\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\uff0c\u6211\u4eec\u5148\u4eceS\u5f00\u59cb\u4ece\u5de6\u5230\u53f3\u4e00\u5217\u4e00\u5217\u5730\u6765\u770b\u3002 \u9996\u5148\u8d77\u70b9\u662fS\uff0c\u4eceS\u5230A\u5217\u7684\u8def\u5f84\u6709\u4e09\u79cd\u53ef\u80fd\uff1aS-A1\u3001S-A2\u3001S-A3\uff0c\u5982\u4e0b\u56fe\uff1a \u6211\u4eec\u4e0d\u80fd\u6b66\u65ad\u5730\u8bf4S-A1\u3001S-A2\u3001S-A3\u4e2d\u7684\u54ea\u4e00\u6bb5\u5fc5\u5b9a\u662f\u5168\u5c40\u6700\u77ed\u8def\u5f84\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u76ee\u524d\u4e3a\u6b62\u4efb\u4f55\u4e00\u6bb5\u90fd\u6709\u53ef\u80fd\u662f\u5168\u5c40\u6700\u77ed\u8def\u5f84\u7684\u5907\u9009\u9879\u3002 \u6211\u4eec\u7ee7\u7eed\u5f80\u53f3\u770b\uff0c\u5230\u4e86B\u5217\u3002\u6309B\u5217\u7684B1\u3001B2\u3001B3\u9010\u4e2a\u5206\u6790\u3002 \u5148\u770bB1\uff1a \u5982\u4e0a\u56fe\uff0c\u7ecf\u8fc7B1\u7684\u6240\u6709\u8def\u5f84\u53ea\u67093\u6761\uff1a S-A1-B1 S-A2-B1 S-A3-B1 \u4ee5\u4e0a\u8fd9\u4e09\u6761\u8def\u5f84\uff0c\u5404\u8282\u70b9\u8ddd\u79bb\u52a0\u8d77\u6765\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u77e5\u9053\u5176\u4e2d\u54ea\u4e00\u6761\u662f\u6700\u77ed\u7684\u3002\u5047\u8bbeS-A3-B1\u662f\u6700\u77ed\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u77e5\u9053\u4e86\u7ecf\u8fc7B1\u7684\u6240\u6709\u8def\u5f84\u5f53\u4e2dS-A3-B1\u662f\u6700\u77ed\u7684\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u8def\u5f84S-A1-B1\u548cS-A2-B1\u90fd\u6bd4S-A3-B1\u957f\uff0c\u7edd\u5bf9\u4e0d\u662f\u76ee\u6807\u7b54\u6848\uff0c\u53ef\u4ee5\u5927\u80c6\u5730\u5220\u6389\u4e86\u3002\u5220\u6389\u4e86\u4e0d\u53ef\u80fd\u662f\u7b54\u6848\u7684\u8def\u5f84\uff0c\u5c31\u662fviterbi\u7b97\u6cd5\uff08\u7ef4\u7279\u6bd4\u7b97\u6cd5\uff09\u7684\u91cd\u70b9\uff0c\u56e0\u4e3a\u540e\u9762\u6211\u4eec\u518d\u4e5f\u4e0d\u7528\u8003\u8651\u8fd9\u4e9b\u88ab\u5220\u6389\u7684\u8def\u5f84\u4e86\u3002\u73b0\u5728\u7ecf\u8fc7B1\u7684\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\u8def\u5f84\u4e86\uff0c\u5982\u4e0b\u56fe\uff1a \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7ee7\u7eed\u770bB2\uff1a \u540c\u7406\uff0c\u5982\u4e0a\u56fe\uff0c\u7ecf\u8fc7B2\u7684\u8def\u5f84\u67093\u6761\uff1a S-A1-B2 S-A2-B2 S-A3-B2 \u8fd9\u4e09\u6761\u8def\u5f84\u4e2d\uff0c\u5404\u8282\u70b9\u8ddd\u79bb\u52a0\u8d77\u6765\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u6211\u4eec\u80af\u5b9a\u4e5f\u53ef\u4ee5\u77e5\u9053\u5176\u4e2d\u54ea\u4e00\u6761\u662f\u6700\u77ed\u7684\uff0c\u5047\u8bbeS-A1-B2\u662f\u6700\u77ed\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u77e5\u9053\u4e86\u7ecf\u8fc7B2\u7684\u6240\u6709\u8def\u5f84\u5f53\u4e2dS-A1-B2\u662f\u6700\u77ed\u7684\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u8def\u5f84S-A2-B2\u548cS-A3-B1\u4e5f\u53ef\u4ee5\u5220\u6389\u4e86\u3002\u7ecf\u8fc7B2\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\uff0c\u5982\u4e0b\u56fe\uff1a \u63a5\u4e0b\u6765\u6211\u4eec\u7ee7\u7eed\u770bB3\uff1a \u540c\u7406\uff0c\u5982\u4e0a\u56fe\uff0c\u7ecf\u8fc7B3\u7684\u8def\u5f84\u4e5f\u67093\u6761\uff1a S-A1-B3 S-A2-B3 S-A3-B3 \u8fd9\u4e09\u6761\u8def\u5f84\u4e2d\u6211\u4eec\u4e5f\u80af\u5b9a\u53ef\u4ee5\u7b97\u51fa\u5176\u4e2d\u54ea\u4e00\u6761\u662f\u6700\u77ed\u7684\uff0c\u5047\u8bbeS-A2-B3\u662f\u6700\u77ed\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u77e5\u9053\u4e86\u7ecf\u8fc7B3\u7684\u6240\u6709\u8def\u5f84\u5f53\u4e2dS-A2-B3\u662f\u6700\u77ed\u7684\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u8def\u5f84S-A1-B3\u548cS-A3-B3\u4e5f\u53ef\u4ee5\u5220\u6389\u4e86\u3002\u7ecf\u8fc7B3\u7684\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\uff0c\u5982\u4e0b\u56fe\uff1a \u73b0\u5728\u5bf9\u4e8eB\u5217\u7684\u6240\u6709\u8282\u70b9\u6211\u4eec\u90fd\u8fc7\u4e86\u4e00\u904d\uff0cB\u5217\u7684\u6bcf\u4e2a\u8282\u70b9\u6211\u4eec\u90fd\u5220\u9664\u4e86\u4e00\u4e9b\u4e0d\u53ef\u80fd\u662f\u7b54\u6848\u7684\u8def\u5f84\uff0c\u770b\u770b\u6211\u4eec\u5269\u4e0b\u54ea\u4e9b\u5907\u9009\u7684\u6700\u77ed\u8def\u5f84\uff0c\u5982\u4e0b\u56fe\uff1a \u4e0a\u56fe\u662f\u6211\u4eec\u5220\u6389\u4e86\u5176\u5b83\u4e0d\u53ef\u80fd\u662f\u6700\u77ed\u8def\u5f84\u7684\u60c5\u51b5\uff0c\u7559\u4e0b\u4e86\u4e09\u4e2a\u6709\u53ef\u80fd\u662f\u6700\u77ed\u7684\u8def\u5f84\uff1aS-A3-B1\u3001S-A1-B2\u3001S-A2-B3\u3002\u73b0\u5728\u6211\u4eec\u5c06\u8fd9\u4e09\u6761\u5907\u9009\u7684\u8def\u5f84\u653e\u5728\u4e00\u8d77\u6c47\u603b\u5230\u4e0b\u56fe\uff1a S-A3-B1\u3001S-A1-B2\u3001S-A2-B3\u90fd\u6709\u53ef\u80fd\u662f\u5168\u5c40\u7684\u6700\u77ed\u8def\u5f84\u7684\u5907\u9009\u8def\u5f84\uff0c\u6211\u4eec\u8fd8\u6ca1\u6709\u8db3\u591f\u7684\u4fe1\u606f\u5224\u65ad\u54ea\u4e00\u6761\u4e00\u5b9a\u662f\u5168\u5c40\u6700\u77ed\u8def\u5f84\u7684 \u5b50\u8def\u5f84 \u3002 \u63a5\u4e0b\u6765\u8bb2\u5230C\u5217\u4e86\uff0c\u7c7b\u4f3c\u4e0a\u9762\u8bf4\u7684B\u5217\uff0c\u6211\u4eec\u4eceC1\u3001C2\u3001C3\u4e00\u4e2a\u4e2a\u8282\u70b9\u5206\u6790\u3002 \u7ecf\u8fc7C1\u8282\u70b9\u7684\u8def\u5f84\u6709: S-A3-B1-C1\u3001S-A1-B2-C1\u3001S-A2-B3-C1 \u548cB\u5217\u7684\u505a\u6cd5\u4e00\u6837\uff0c\u4ece\u8fd9\u4e09\u6761\u8def\u5f84\u4e2d\u627e\u5230\u6700\u77ed\u7684\u90a3\u6761\uff08\u5047\u5b9a\u662fS-A3-B1-C1\uff09\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u540c\u6837\u9053\u7406\u53ef\u4ee5\u5220\u6389\u4e86\u3002\u90a3\u4e48\u7ecf\u8fc7C1\u7684\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\uff0c\u5982\u4e0b\u56fe\uff1a \u540c\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u7ecf\u8fc7C2\u548cC3\u8282\u70b9\u7684\u6700\u77ed\u8def\u5f84\uff0c\u6c47\u603b\u4e00\u4e0b\uff1a \u5230\u8fbeC\u5217\u65f6\u6700\u7ec8\u4e5f\u53ea\u52693\u6761\u5907\u9009\u7684\u6700\u77ed\u8def\u5f84\uff0c\u6211\u4eec\u4ecd\u7136\u6ca1\u6709\u8db3\u591f\u4fe1\u606f\u65ad\u5b9a\u54ea\u6761\u624d\u662f\u5168\u5c40\u6700\u77ed\u3002\u6700\u540e\uff0c\u6211\u4eec\u7ee7\u7eed\u770b E\u8282\u70b9 \uff0c\u624d\u80fd\u5f97\u51fa\u6700\u540e\u7684\u7ed3\u8bba\u3002 \u5230E\u7684\u8def\u5f84\u4e5f\u53ea\u67093\u79cd\u53ef\u80fd\u6027\uff1a E\u70b9\u5df2\u7ecf\u662f\u7ec8\u70b9\u4e86\uff0c\u6211\u4eec\u7a0d\u5fae\u5bf9\u6bd4\u4e00\u4e0b\u8fd9\u4e09\u6761\u8def\u5f84\u7684\u603b\u957f\u5ea6\u5c31\u80fd\u77e5\u9053\u54ea\u6761\u662f\u6700\u77ed\u8def\u5f84\u4e86\u3002 \u5728\u6548\u7387\u65b9\u9762\u76f8\u5bf9\u4e8e\u7c97\u66b4\u5730\u904d\u5386\u6240\u6709\u8def\u5f84\uff0cviterbi \u7ef4\u7279\u6bd4\u7b97\u6cd5\u5230\u8fbe\u6bcf\u4e00\u5217\u7684\u65f6\u5019\u90fd\u4f1a\u5220\u9664\u4e0d\u7b26\u5408\u6700\u77ed\u8def\u5f84\u8981\u6c42\u7684\u8def\u5f84\uff0c\u5927\u5927\u964d\u4f4e \u65f6\u95f4\u590d\u6742\u5ea6 \u3002 Viterbi vs \u524d\u5411\u7b97\u6cd5 \u00b6 \u524d\u5411\u7b97\u6cd5 \u76ee\u7684 \uff1a\u8ba1\u7b97\u7ed9\u5b9a\u89c2\u6d4b\u5e8f\u5217\u7684\u51fa\u73b0\u6982\u7387\u3002 \u8fc7\u7a0b \uff1a\u901a\u8fc7\u52a8\u6001\u89c4\u5212\u7684\u65b9\u6cd5\uff0c\u9010\u6b65\u8ba1\u7b97\u6bcf\u4e2a\u65f6\u523b\u6bcf\u4e2a\u72b6\u6001\u7684\u6982\u7387\uff0c\u5e76\u5c06\u8fd9\u4e9b\u6982\u7387\u7d2f\u52a0\uff0c\u4ee5\u5f97\u5230\u6700\u7ec8\u7684\u89c2\u6d4b\u5e8f\u5217\u6982\u7387\u3002 \u7279\u70b9 \uff1a\u5173\u6ce8\u6240\u6709\u53ef\u80fd\u7684\u72b6\u6001\u8def\u5f84\uff0c\u8ba1\u7b97\u7684\u662f\u6240\u6709\u8def\u5f84\u7684\u603b\u548c\u3002 Viterbi\u7b97\u6cd5 \u76ee\u7684 \uff1a\u5bfb\u627e\u7ed9\u5b9a\u89c2\u6d4b\u5e8f\u5217\u4e0b\u6700\u53ef\u80fd\u7684\u72b6\u6001\u5e8f\u5217\u3002 \u8fc7\u7a0b \uff1a\u540c\u6837\u4f7f\u7528\u52a8\u6001\u89c4\u5212\uff0c\u4f46\u5728\u6bcf\u4e00\u6b65\u4e2d\u53ea\u4fdd\u7559\u6700\u4f18\u8def\u5f84\uff08\u5373\u6700\u5927\u6982\u7387\u8def\u5f84\uff09\uff0c\u800c\u4e0d\u662f\u6240\u6709\u8def\u5f84\u7684\u603b\u548c\u3002 \u7279\u70b9 \uff1a\u5173\u6ce8\u6700\u4f18\u8def\u5f84\uff0c\u8ba1\u7b97\u7684\u662f\u6700\u5927\u503c\uff0c\u800c\u975e\u603b\u548c\u3002","title":"3.4 Veterbi\u7b97\u6cd5\u4ecb\u7ecd(\u6269\u5c55\u8d44\u6599)"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/04-Veterbi%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D%28%E6%89%A9%E5%B1%95%E8%B5%84%E6%96%99%29.html#viterbi","text":"","title":"Viterbi\u7b97\u6cd5\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/04-Veterbi%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D%28%E6%89%A9%E5%B1%95%E8%B5%84%E6%96%99%29.html#viterbi_1","text":"\u5982\u4e0b\u56fe\uff0c\u5047\u5982\u4f60\u4eceS\u548cE\u4e4b\u95f4\u627e\u4e00\u6761\u6700\u77ed\u7684\u8def\u5f84\uff0c\u9664\u4e86\u904d\u5386\u5b8c\u6240\u6709\u8def\u5f84\uff0c\u8fd8\u6709\u4ec0\u4e48\u66f4\u597d\u7684\u65b9\u6cd5\uff1f viterbi\u7ef4\u7279\u6bd4\u7b97\u6cd5\u89e3\u51b3\u7684\u662f\u7bf1\u7b06\u578b\u7684\u56fe\u7684\u6700\u77ed\u8def\u5f84\u95ee\u9898\uff0c\u56fe\u7684\u8282\u70b9\u6309\u5217\u7ec4\u7ec7\uff0c\u6bcf\u5217\u7684\u8282\u70b9\u6570\u91cf\u53ef\u4ee5\u4e0d\u4e00\u6837\uff0c\u6bcf\u4e00\u5217\u7684\u8282\u70b9\u53ea\u80fd\u548c\u76f8\u90bb\u5217\u7684\u8282\u70b9\u76f8\u8fde\uff0c\u4e0d\u80fd\u8de8\u5217\u76f8\u8fde\uff0c\u8282\u70b9\u4e4b\u95f4\u6709\u7740\u4e0d\u540c\u7684\u8ddd\u79bb\uff0c\u8ddd\u79bb\u7684\u503c\u5c31\u4e0d\u5728\u56fe\u4e0a\u4e00\u4e00\u6807\u6ce8\u51fa\u6765\u4e86\uff0c\u5927\u5bb6\u81ea\u884c\u8111\u8865. viterbi\u7ef4\u7279\u6bd4\u7b97\u6cd5\u8fc7\u7a0b\u975e\u5e38\u7b80\u5355\uff1a \u4e3a\u4e86\u627e\u51faS\u5230E\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\uff0c\u6211\u4eec\u5148\u4eceS\u5f00\u59cb\u4ece\u5de6\u5230\u53f3\u4e00\u5217\u4e00\u5217\u5730\u6765\u770b\u3002 \u9996\u5148\u8d77\u70b9\u662fS\uff0c\u4eceS\u5230A\u5217\u7684\u8def\u5f84\u6709\u4e09\u79cd\u53ef\u80fd\uff1aS-A1\u3001S-A2\u3001S-A3\uff0c\u5982\u4e0b\u56fe\uff1a \u6211\u4eec\u4e0d\u80fd\u6b66\u65ad\u5730\u8bf4S-A1\u3001S-A2\u3001S-A3\u4e2d\u7684\u54ea\u4e00\u6bb5\u5fc5\u5b9a\u662f\u5168\u5c40\u6700\u77ed\u8def\u5f84\u4e2d\u7684\u4e00\u90e8\u5206\uff0c\u76ee\u524d\u4e3a\u6b62\u4efb\u4f55\u4e00\u6bb5\u90fd\u6709\u53ef\u80fd\u662f\u5168\u5c40\u6700\u77ed\u8def\u5f84\u7684\u5907\u9009\u9879\u3002 \u6211\u4eec\u7ee7\u7eed\u5f80\u53f3\u770b\uff0c\u5230\u4e86B\u5217\u3002\u6309B\u5217\u7684B1\u3001B2\u3001B3\u9010\u4e2a\u5206\u6790\u3002 \u5148\u770bB1\uff1a \u5982\u4e0a\u56fe\uff0c\u7ecf\u8fc7B1\u7684\u6240\u6709\u8def\u5f84\u53ea\u67093\u6761\uff1a S-A1-B1 S-A2-B1 S-A3-B1 \u4ee5\u4e0a\u8fd9\u4e09\u6761\u8def\u5f84\uff0c\u5404\u8282\u70b9\u8ddd\u79bb\u52a0\u8d77\u6765\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u77e5\u9053\u5176\u4e2d\u54ea\u4e00\u6761\u662f\u6700\u77ed\u7684\u3002\u5047\u8bbeS-A3-B1\u662f\u6700\u77ed\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u77e5\u9053\u4e86\u7ecf\u8fc7B1\u7684\u6240\u6709\u8def\u5f84\u5f53\u4e2dS-A3-B1\u662f\u6700\u77ed\u7684\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u8def\u5f84S-A1-B1\u548cS-A2-B1\u90fd\u6bd4S-A3-B1\u957f\uff0c\u7edd\u5bf9\u4e0d\u662f\u76ee\u6807\u7b54\u6848\uff0c\u53ef\u4ee5\u5927\u80c6\u5730\u5220\u6389\u4e86\u3002\u5220\u6389\u4e86\u4e0d\u53ef\u80fd\u662f\u7b54\u6848\u7684\u8def\u5f84\uff0c\u5c31\u662fviterbi\u7b97\u6cd5\uff08\u7ef4\u7279\u6bd4\u7b97\u6cd5\uff09\u7684\u91cd\u70b9\uff0c\u56e0\u4e3a\u540e\u9762\u6211\u4eec\u518d\u4e5f\u4e0d\u7528\u8003\u8651\u8fd9\u4e9b\u88ab\u5220\u6389\u7684\u8def\u5f84\u4e86\u3002\u73b0\u5728\u7ecf\u8fc7B1\u7684\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\u8def\u5f84\u4e86\uff0c\u5982\u4e0b\u56fe\uff1a \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7ee7\u7eed\u770bB2\uff1a \u540c\u7406\uff0c\u5982\u4e0a\u56fe\uff0c\u7ecf\u8fc7B2\u7684\u8def\u5f84\u67093\u6761\uff1a S-A1-B2 S-A2-B2 S-A3-B2 \u8fd9\u4e09\u6761\u8def\u5f84\u4e2d\uff0c\u5404\u8282\u70b9\u8ddd\u79bb\u52a0\u8d77\u6765\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u6211\u4eec\u80af\u5b9a\u4e5f\u53ef\u4ee5\u77e5\u9053\u5176\u4e2d\u54ea\u4e00\u6761\u662f\u6700\u77ed\u7684\uff0c\u5047\u8bbeS-A1-B2\u662f\u6700\u77ed\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u77e5\u9053\u4e86\u7ecf\u8fc7B2\u7684\u6240\u6709\u8def\u5f84\u5f53\u4e2dS-A1-B2\u662f\u6700\u77ed\u7684\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u8def\u5f84S-A2-B2\u548cS-A3-B1\u4e5f\u53ef\u4ee5\u5220\u6389\u4e86\u3002\u7ecf\u8fc7B2\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\uff0c\u5982\u4e0b\u56fe\uff1a \u63a5\u4e0b\u6765\u6211\u4eec\u7ee7\u7eed\u770bB3\uff1a \u540c\u7406\uff0c\u5982\u4e0a\u56fe\uff0c\u7ecf\u8fc7B3\u7684\u8def\u5f84\u4e5f\u67093\u6761\uff1a S-A1-B3 S-A2-B3 S-A3-B3 \u8fd9\u4e09\u6761\u8def\u5f84\u4e2d\u6211\u4eec\u4e5f\u80af\u5b9a\u53ef\u4ee5\u7b97\u51fa\u5176\u4e2d\u54ea\u4e00\u6761\u662f\u6700\u77ed\u7684\uff0c\u5047\u8bbeS-A2-B3\u662f\u6700\u77ed\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u77e5\u9053\u4e86\u7ecf\u8fc7B3\u7684\u6240\u6709\u8def\u5f84\u5f53\u4e2dS-A2-B3\u662f\u6700\u77ed\u7684\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u8def\u5f84S-A1-B3\u548cS-A3-B3\u4e5f\u53ef\u4ee5\u5220\u6389\u4e86\u3002\u7ecf\u8fc7B3\u7684\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\uff0c\u5982\u4e0b\u56fe\uff1a \u73b0\u5728\u5bf9\u4e8eB\u5217\u7684\u6240\u6709\u8282\u70b9\u6211\u4eec\u90fd\u8fc7\u4e86\u4e00\u904d\uff0cB\u5217\u7684\u6bcf\u4e2a\u8282\u70b9\u6211\u4eec\u90fd\u5220\u9664\u4e86\u4e00\u4e9b\u4e0d\u53ef\u80fd\u662f\u7b54\u6848\u7684\u8def\u5f84\uff0c\u770b\u770b\u6211\u4eec\u5269\u4e0b\u54ea\u4e9b\u5907\u9009\u7684\u6700\u77ed\u8def\u5f84\uff0c\u5982\u4e0b\u56fe\uff1a \u4e0a\u56fe\u662f\u6211\u4eec\u5220\u6389\u4e86\u5176\u5b83\u4e0d\u53ef\u80fd\u662f\u6700\u77ed\u8def\u5f84\u7684\u60c5\u51b5\uff0c\u7559\u4e0b\u4e86\u4e09\u4e2a\u6709\u53ef\u80fd\u662f\u6700\u77ed\u7684\u8def\u5f84\uff1aS-A3-B1\u3001S-A1-B2\u3001S-A2-B3\u3002\u73b0\u5728\u6211\u4eec\u5c06\u8fd9\u4e09\u6761\u5907\u9009\u7684\u8def\u5f84\u653e\u5728\u4e00\u8d77\u6c47\u603b\u5230\u4e0b\u56fe\uff1a S-A3-B1\u3001S-A1-B2\u3001S-A2-B3\u90fd\u6709\u53ef\u80fd\u662f\u5168\u5c40\u7684\u6700\u77ed\u8def\u5f84\u7684\u5907\u9009\u8def\u5f84\uff0c\u6211\u4eec\u8fd8\u6ca1\u6709\u8db3\u591f\u7684\u4fe1\u606f\u5224\u65ad\u54ea\u4e00\u6761\u4e00\u5b9a\u662f\u5168\u5c40\u6700\u77ed\u8def\u5f84\u7684 \u5b50\u8def\u5f84 \u3002 \u63a5\u4e0b\u6765\u8bb2\u5230C\u5217\u4e86\uff0c\u7c7b\u4f3c\u4e0a\u9762\u8bf4\u7684B\u5217\uff0c\u6211\u4eec\u4eceC1\u3001C2\u3001C3\u4e00\u4e2a\u4e2a\u8282\u70b9\u5206\u6790\u3002 \u7ecf\u8fc7C1\u8282\u70b9\u7684\u8def\u5f84\u6709: S-A3-B1-C1\u3001S-A1-B2-C1\u3001S-A2-B3-C1 \u548cB\u5217\u7684\u505a\u6cd5\u4e00\u6837\uff0c\u4ece\u8fd9\u4e09\u6761\u8def\u5f84\u4e2d\u627e\u5230\u6700\u77ed\u7684\u90a3\u6761\uff08\u5047\u5b9a\u662fS-A3-B1-C1\uff09\uff0c\u5176\u5b83\u4e24\u6761\u8def\u5f84\u540c\u6837\u9053\u7406\u53ef\u4ee5\u5220\u6389\u4e86\u3002\u90a3\u4e48\u7ecf\u8fc7C1\u7684\u6240\u6709\u8def\u5f84\u53ea\u5269\u4e00\u6761\uff0c\u5982\u4e0b\u56fe\uff1a \u540c\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u7ecf\u8fc7C2\u548cC3\u8282\u70b9\u7684\u6700\u77ed\u8def\u5f84\uff0c\u6c47\u603b\u4e00\u4e0b\uff1a \u5230\u8fbeC\u5217\u65f6\u6700\u7ec8\u4e5f\u53ea\u52693\u6761\u5907\u9009\u7684\u6700\u77ed\u8def\u5f84\uff0c\u6211\u4eec\u4ecd\u7136\u6ca1\u6709\u8db3\u591f\u4fe1\u606f\u65ad\u5b9a\u54ea\u6761\u624d\u662f\u5168\u5c40\u6700\u77ed\u3002\u6700\u540e\uff0c\u6211\u4eec\u7ee7\u7eed\u770b E\u8282\u70b9 \uff0c\u624d\u80fd\u5f97\u51fa\u6700\u540e\u7684\u7ed3\u8bba\u3002 \u5230E\u7684\u8def\u5f84\u4e5f\u53ea\u67093\u79cd\u53ef\u80fd\u6027\uff1a E\u70b9\u5df2\u7ecf\u662f\u7ec8\u70b9\u4e86\uff0c\u6211\u4eec\u7a0d\u5fae\u5bf9\u6bd4\u4e00\u4e0b\u8fd9\u4e09\u6761\u8def\u5f84\u7684\u603b\u957f\u5ea6\u5c31\u80fd\u77e5\u9053\u54ea\u6761\u662f\u6700\u77ed\u8def\u5f84\u4e86\u3002 \u5728\u6548\u7387\u65b9\u9762\u76f8\u5bf9\u4e8e\u7c97\u66b4\u5730\u904d\u5386\u6240\u6709\u8def\u5f84\uff0cviterbi \u7ef4\u7279\u6bd4\u7b97\u6cd5\u5230\u8fbe\u6bcf\u4e00\u5217\u7684\u65f6\u5019\u90fd\u4f1a\u5220\u9664\u4e0d\u7b26\u5408\u6700\u77ed\u8def\u5f84\u8981\u6c42\u7684\u8def\u5f84\uff0c\u5927\u5927\u964d\u4f4e \u65f6\u95f4\u590d\u6742\u5ea6 \u3002","title":"Viterbi\u7b97\u6cd5\u539f\u7406"},{"location":"%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%AE%9E%E4%BD%93%E6%8A%BD%E5%8F%96/04-Veterbi%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D%28%E6%89%A9%E5%B1%95%E8%B5%84%E6%96%99%29.html#viterbi-vs","text":"\u524d\u5411\u7b97\u6cd5 \u76ee\u7684 \uff1a\u8ba1\u7b97\u7ed9\u5b9a\u89c2\u6d4b\u5e8f\u5217\u7684\u51fa\u73b0\u6982\u7387\u3002 \u8fc7\u7a0b \uff1a\u901a\u8fc7\u52a8\u6001\u89c4\u5212\u7684\u65b9\u6cd5\uff0c\u9010\u6b65\u8ba1\u7b97\u6bcf\u4e2a\u65f6\u523b\u6bcf\u4e2a\u72b6\u6001\u7684\u6982\u7387\uff0c\u5e76\u5c06\u8fd9\u4e9b\u6982\u7387\u7d2f\u52a0\uff0c\u4ee5\u5f97\u5230\u6700\u7ec8\u7684\u89c2\u6d4b\u5e8f\u5217\u6982\u7387\u3002 \u7279\u70b9 \uff1a\u5173\u6ce8\u6240\u6709\u53ef\u80fd\u7684\u72b6\u6001\u8def\u5f84\uff0c\u8ba1\u7b97\u7684\u662f\u6240\u6709\u8def\u5f84\u7684\u603b\u548c\u3002 Viterbi\u7b97\u6cd5 \u76ee\u7684 \uff1a\u5bfb\u627e\u7ed9\u5b9a\u89c2\u6d4b\u5e8f\u5217\u4e0b\u6700\u53ef\u80fd\u7684\u72b6\u6001\u5e8f\u5217\u3002 \u8fc7\u7a0b \uff1a\u540c\u6837\u4f7f\u7528\u52a8\u6001\u89c4\u5212\uff0c\u4f46\u5728\u6bcf\u4e00\u6b65\u4e2d\u53ea\u4fdd\u7559\u6700\u4f18\u8def\u5f84\uff08\u5373\u6700\u5927\u6982\u7387\u8def\u5f84\uff09\uff0c\u800c\u4e0d\u662f\u6240\u6709\u8def\u5f84\u7684\u603b\u548c\u3002 \u7279\u70b9 \uff1a\u5173\u6ce8\u6700\u4f18\u8def\u5f84\uff0c\u8ba1\u7b97\u7684\u662f\u6700\u5927\u503c\uff0c\u800c\u975e\u603b\u548c\u3002","title":"Viterbi vs \u524d\u5411\u7b97\u6cd5"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html","text":"\u9879\u76ee\u5e94\u7528\u5de5\u5177\u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3\u6574\u4f53\u9879\u76ee\u4e2d\u4f7f\u7528\u4e86\u54ea\u4e9b\u5de5\u5177 \u638c\u63e1\u5404\u4e2a\u5de5\u5177\u7684\u6982\u5ff5\u3001\u4f5c\u7528\u3001\u5b89\u88c5\u4ee5\u53ca\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5 \u6574\u4f53\u9879\u76ee\u4e2d\u4f7f\u7528\u7684\u5de5\u5177 \u00b6 Doccano\u6570\u636e\u6807\u6ce8\u5e73\u53f0 Flask web\u670d\u52a1\u6846\u67b6 Gunicorn\u670d\u52a1\u7ec4\u4ef6 Supervisor\u670d\u52a1\u76d1\u63a7\u5668 Neo4j\u56fe\u6570\u636e\u5e93 1 Doccano\u6570\u636e\u6807\u6ce8\u5e73\u53f0 \u00b6 Doccano\u662f\u4e00\u79cd\u7528\u4e8e\u6587\u672c\u6807\u6ce8\u7684\u5f00\u6e90\u5de5\u5177\uff0c\u65e8\u5728\u7b80\u5316\u548c\u52a0\u901f\u6807\u6ce8\u4efb\u52a1\u7684\u8fdb\u884c\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u76f4\u89c2\u7684\u7528\u6237\u754c\u9762\uff0c\u4f7f\u6807\u6ce8\u4eba\u5458\u80fd\u591f\u8f7b\u677e\u5730\u5bf9\u6587\u672c\u6570\u636e\u8fdb\u884c\u6807\u6ce8\uff0c\u5e76\u521b\u5efa\u9ad8\u8d28\u91cf\u7684\u8bad\u7ec3\u6570\u636e\u96c6\u7528\u4e8e\u673a\u5668\u5b66\u4e60\u548c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u3002 Doccano\u7684\u4e00\u4e9b\u4e3b\u8981\u7279\u70b9\u548c\u529f\u80fd\uff1a \u591a\u79cd\u6807\u6ce8\u7c7b\u578b\uff1aDoccano\u652f\u6301\u591a\u79cd\u5e38\u89c1\u7684\u6587\u672c\u6807\u6ce8\u4efb\u52a1\uff0c\u5982\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u3001\u6587\u672c\u5206\u7c7b\u3001\u5173\u7cfb\u62bd\u53d6\u7b49\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u4efb\u52a1\u7684\u9700\u6c42\u9009\u62e9\u9002\u5f53\u7684\u6807\u6ce8\u7c7b\u578b\u3002 \u534f\u4f5c\u6807\u6ce8\uff1a\u591a\u4e2a\u6807\u6ce8\u4eba\u5458\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528Doccano\u8fdb\u884c\u534f\u4f5c\u6807\u6ce8\u3002\u6807\u6ce8\u4eba\u5458\u53ef\u4ee5\u72ec\u7acb\u5730\u5bf9\u540c\u4e00\u4efd\u6570\u636e\u8fdb\u884c\u6807\u6ce8\uff0c\u5e76\u8fdb\u884c\u4ea4\u4e92\u548c\u8ba8\u8bba\uff0c\u4ee5\u63d0\u9ad8\u6807\u6ce8\u7684\u4e00\u81f4\u6027\u548c\u51c6\u786e\u6027\u3002 \u5feb\u901f\u5bfc\u5165\u548c\u5bfc\u51fa\uff1a\u60a8\u53ef\u4ee5\u5c06\u539f\u59cb\u6587\u672c\u6570\u636e\u4ee5\u5404\u79cd\u683c\u5f0f\uff08\u5982CSV\u3001JSON\u3001TXT\u7b49\uff09\u5bfc\u5165\u5230Doccano\u4e2d\u8fdb\u884c\u6807\u6ce8\u3002\u6807\u6ce8\u5b8c\u6210\u540e\uff0c\u60a8\u53ef\u4ee5\u5c06\u6807\u6ce8\u7ed3\u679c\u5bfc\u51fa\u4e3a\u5404\u79cd\u683c\u5f0f\uff0c\u65b9\u4fbf\u540e\u7eed\u7684\u6570\u636e\u5206\u6790\u548c\u6a21\u578b\u8bad\u7ec3\u3002 \u5177\u4f53\u6807\u6ce8\u65b9\u6cd5\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u8282\u8bfe\u8be6\u7ec6\u4ecb\u7ecd 2 Flask web\u670d\u52a1\u6846\u67b6 \u00b6 Flask\u6846\u67b6\u662f\u5f53\u4e0b\u6700\u53d7\u6b22\u8fce\u7684python\u8f7b\u91cf\u7ea7\u6846\u67b6\uff0c\u4e5f\u662fpytorch\u5b98\u7f51\u6307\u5b9a\u7684\u90e8\u7f72\u6846\u67b6\u3002 Flask\u7684\u57fa\u672c\u6a21\u5f0f\u4e3a\u5728\u7a0b\u5e8f\u91cc\u5c06\u4e00\u4e2a\u89c6\u56fe\u51fd\u6570\u5206\u914d\u7ed9\u4e00\u4e2aURL\uff0c\u6bcf\u5f53\u7528\u6237\u8bbf\u95ee\u8fd9\u4e2aURL\u65f6\uff0c\u7cfb\u7edf\u5c31\u4f1a\u6267\u884c\u7ed9\u8be5URL\u5206\u914d\u597d\u7684\u89c6\u56fe\u51fd\u6570\uff0c\u83b7\u53d6\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5176\u5de5\u4f5c\u8fc7\u7a0b\u89c1\u56fe\uff1a \u5728\u9879\u76ee\u4e2d\uff0cFlask\u6846\u67b6\u4e3b\u8981\u4f5c\u7528\u662f\u5bf9\u6a21\u578b\u7684\u5c01\u88c5\u548cAPI\u63a5\u53e3\u7684\u5236\u4f5c\u3002 \u5b89\u88c5\uff1a pip install flask \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff1a # \u5bfc\u5165Flask\u7c7b from flask import Flask # \u521b\u5efa\u4e00\u4e2a\u8be5\u7c7b\u7684\u5b9e\u4f8bapp, \u53c2\u6570\u4e3a__name__, \u8fd9\u4e2a\u53c2\u6570\u662f\u5fc5\u9700\u7684\uff0c # \u8fd9\u6837Flask\u624d\u80fd\u77e5\u9053\u5728\u54ea\u91cc\u53ef\u627e\u5230\u6a21\u677f\u548c\u9759\u6001\u6587\u4ef6\u7b49\u4e1c\u897f\u3002 app = Flask ( __name__ ) # \u4f7f\u7528route()\u88c5\u9970\u5668\u6765\u544a\u8bc9Flask\u89e6\u53d1\u51fd\u6570\u7684URL @app . route ( '/' ) def hello_world (): \"\"\"\u8bf7\u6c42\u6307\u5b9a\u7684url\u540e\uff0c\u6267\u884c\u7684\u4e3b\u8981\u903b\u8f91\u51fd\u6570\"\"\" # \u5728\u7528\u6237\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\u4fe1\u606f\uff1a'Hello, World!' return 'Hello, World!' if __name__ == '__main__' : app . run ( host = \"0.0.0.0\" , port = 5000 ) \u542f\u52a8\u670d\u52a1\uff1a python app . py \u542f\u52a8\u6548\u679c\uff1a \u901a\u8fc7\u6d4f\u89c8\u5668\u6253\u5f00\u5730\u5740http://0.0.0.0:5000\u53ef\u770b\u89c1\u6253\u5370\u4e86'Hello, World'. 3 Gunicorn\u670d\u52a1\u7ec4\u4ef6 \u00b6 \u7b80\u4ecb\uff1a Gunicorn\u662f\u4e00\u4e2a\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u9ad8\u6027\u80fd\u7684Python WSGI UNIX HTTP\u670d\u52a1\u7ec4\u4ef6(WSGI: Web Server Gateway Interface)\uff0c\u79fb\u690d\u81eaRuby\u7684\u72ec\u89d2\u517d\uff08Unicorn \uff09\u9879\u76ee\uff0c\u5177\u6709\u4f7f\u7528\u975e\u5e38\u7b80\u5355\uff0c\u8f7b\u91cf\u7ea7\u7684\u8d44\u6e90\u6d88\u8017\uff0c\u4ee5\u53ca\u9ad8\u6027\u80fd\u7b49\u7279\u70b9\u3002 \u4f5c\u7528\uff1a \u5728\u9879\u76ee\u4e2d\uff0cGunicorn\u548cFlask\u6846\u67b6\u4e00\u540c\u4f7f\u7528\uff0c\u80fd\u591f\u5f00\u542f\u670d\u52a1\uff0c\u5904\u7406\u8bf7\u6c42\uff0c\u56e0\u5176\u9ad8\u6027\u80fd\u7684\u7279\u70b9\u80fd\u591f\u6709\u6548\u51cf\u5c11\u670d\u52a1\u4e22\u5305\u7387\u3002 \u5b89\u88c5\uff1a # \u4f7f\u7528pip\u5b89\u88c5gunicorn pip install gunicorn \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff1a # \u4f7f\u7528\u5176\u542f\u52a8Flask\u670d\u52a1\uff1a gunicorn - w 1 - b 0.0.0.0 : 5000 app : app # -w \u4ee3\u8868\u5f00\u542f\u7684\u8fdb\u7a0b\u6570\uff0c\u6211\u4eec\u53ea\u5f00\u542f\u4e00\u4e2a\u8fdb\u7a0b # -b \u670d\u52a1\u7684IP\u5730\u5740\u548c\u7aef\u53e3 # app:app \u662f\u6307\u6267\u884c\u7684\u4e3b\u8981\u5bf9\u8c61\u4f4d\u7f6e\uff0c\u5728app.py\u4e2d\u7684app\u5bf9\u8c61 # \u5982\u679c\u4f7f\u5176\u5728\u540e\u53f0\u8fd0\u884c\u53ef\u4f7f\u7528\uff1a # nohup gunicorn -w 1 -b 0.0.0.0:5000 app:app 2>&1 & 4 Neo4j\u56fe\u6570\u636e\u5e93 \u00b6 \u56e0\u4e3a\u5728\u9879\u76ee\u4e2d\uff0cNeo4j\u56fe\u6570\u636e\u5e93\u4f5c\u4e3a\u6838\u5fc3\u7684\u5b58\u50a8\u548c\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u4f1a\u5728\u540e\u7eed\u7ae0\u8282\u5bf9\u5176\u8fdb\u884c\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u5b66\u4e60\u9879\u76ee\u67b6\u6784\u4e2d\u7528\u5230\u7684\u4e3b\u8981\u5de5\u5177: Doccano\u6807\u6ce8\u5e73\u53f0 \u4f5c\u7528\uff1a\u5728\u9879\u76ee\u4e2d\uff0c\u57fa\u4e8eDoccano\u5e73\u53f0\u5b8c\u6210\u6570\u636e\u7684\u6807\u6ce8\uff0c\u4f9b\u6a21\u578b\u8bad\u7ec3\u4f7f\u7528 Flask web\u670d\u52a1\u6846\u67b6 \u4f5c\u7528\uff1a\u5728\u9879\u76ee\u4e2d\uff0cFlask\u6846\u67b6\u662f\u4e3b\u903b\u8f91\u670d\u52a1\u548c\u53e5\u5b50\u76f8\u5173\u6a21\u578b\u670d\u52a1\u4f7f\u7528\u7684\u670d\u52a1\u6846\u67b6\u3002 Gunicorn\u670d\u52a1\u7ec4\u4ef6 \u4f5c\u7528\uff1a\u5728\u9879\u76ee\u4e2d\uff0cGunicorn\u548cFlask\u6846\u67b6\u4e00\u540c\u4f7f\u7528\uff0c\u80fd\u591f\u5f00\u542f\u670d\u52a1\uff0c\u5904\u7406\u8bf7\u6c42\uff0c\u56e0\u5176\u9ad8\u6027\u80fd\u7684\u7279\u70b9\u80fd\u591f\u6709\u6548\u51cf\u5c11\u670d\u52a1\u4e22\u5305\u7387\u3002 Neo4j\u56fe\u6570\u636e\u5e93","title":"2.1 \u9879\u76ee\u5e94\u7528\u5de5\u5177\u6982\u89c8"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#_1","text":"","title":"\u9879\u76ee\u5e94\u7528\u5de5\u5177\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#_2","text":"\u4e86\u89e3\u6574\u4f53\u9879\u76ee\u4e2d\u4f7f\u7528\u4e86\u54ea\u4e9b\u5de5\u5177 \u638c\u63e1\u5404\u4e2a\u5de5\u5177\u7684\u6982\u5ff5\u3001\u4f5c\u7528\u3001\u5b89\u88c5\u4ee5\u53ca\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#_3","text":"Doccano\u6570\u636e\u6807\u6ce8\u5e73\u53f0 Flask web\u670d\u52a1\u6846\u67b6 Gunicorn\u670d\u52a1\u7ec4\u4ef6 Supervisor\u670d\u52a1\u76d1\u63a7\u5668 Neo4j\u56fe\u6570\u636e\u5e93","title":"\u6574\u4f53\u9879\u76ee\u4e2d\u4f7f\u7528\u7684\u5de5\u5177"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#1-doccano","text":"Doccano\u662f\u4e00\u79cd\u7528\u4e8e\u6587\u672c\u6807\u6ce8\u7684\u5f00\u6e90\u5de5\u5177\uff0c\u65e8\u5728\u7b80\u5316\u548c\u52a0\u901f\u6807\u6ce8\u4efb\u52a1\u7684\u8fdb\u884c\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u76f4\u89c2\u7684\u7528\u6237\u754c\u9762\uff0c\u4f7f\u6807\u6ce8\u4eba\u5458\u80fd\u591f\u8f7b\u677e\u5730\u5bf9\u6587\u672c\u6570\u636e\u8fdb\u884c\u6807\u6ce8\uff0c\u5e76\u521b\u5efa\u9ad8\u8d28\u91cf\u7684\u8bad\u7ec3\u6570\u636e\u96c6\u7528\u4e8e\u673a\u5668\u5b66\u4e60\u548c\u81ea\u7136\u8bed\u8a00\u5904\u7406\u4efb\u52a1\u3002 Doccano\u7684\u4e00\u4e9b\u4e3b\u8981\u7279\u70b9\u548c\u529f\u80fd\uff1a \u591a\u79cd\u6807\u6ce8\u7c7b\u578b\uff1aDoccano\u652f\u6301\u591a\u79cd\u5e38\u89c1\u7684\u6587\u672c\u6807\u6ce8\u4efb\u52a1\uff0c\u5982\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\u3001\u6587\u672c\u5206\u7c7b\u3001\u5173\u7cfb\u62bd\u53d6\u7b49\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u4efb\u52a1\u7684\u9700\u6c42\u9009\u62e9\u9002\u5f53\u7684\u6807\u6ce8\u7c7b\u578b\u3002 \u534f\u4f5c\u6807\u6ce8\uff1a\u591a\u4e2a\u6807\u6ce8\u4eba\u5458\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528Doccano\u8fdb\u884c\u534f\u4f5c\u6807\u6ce8\u3002\u6807\u6ce8\u4eba\u5458\u53ef\u4ee5\u72ec\u7acb\u5730\u5bf9\u540c\u4e00\u4efd\u6570\u636e\u8fdb\u884c\u6807\u6ce8\uff0c\u5e76\u8fdb\u884c\u4ea4\u4e92\u548c\u8ba8\u8bba\uff0c\u4ee5\u63d0\u9ad8\u6807\u6ce8\u7684\u4e00\u81f4\u6027\u548c\u51c6\u786e\u6027\u3002 \u5feb\u901f\u5bfc\u5165\u548c\u5bfc\u51fa\uff1a\u60a8\u53ef\u4ee5\u5c06\u539f\u59cb\u6587\u672c\u6570\u636e\u4ee5\u5404\u79cd\u683c\u5f0f\uff08\u5982CSV\u3001JSON\u3001TXT\u7b49\uff09\u5bfc\u5165\u5230Doccano\u4e2d\u8fdb\u884c\u6807\u6ce8\u3002\u6807\u6ce8\u5b8c\u6210\u540e\uff0c\u60a8\u53ef\u4ee5\u5c06\u6807\u6ce8\u7ed3\u679c\u5bfc\u51fa\u4e3a\u5404\u79cd\u683c\u5f0f\uff0c\u65b9\u4fbf\u540e\u7eed\u7684\u6570\u636e\u5206\u6790\u548c\u6a21\u578b\u8bad\u7ec3\u3002 \u5177\u4f53\u6807\u6ce8\u65b9\u6cd5\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u8282\u8bfe\u8be6\u7ec6\u4ecb\u7ecd","title":"1 Doccano\u6570\u636e\u6807\u6ce8\u5e73\u53f0"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#2-flask-web","text":"Flask\u6846\u67b6\u662f\u5f53\u4e0b\u6700\u53d7\u6b22\u8fce\u7684python\u8f7b\u91cf\u7ea7\u6846\u67b6\uff0c\u4e5f\u662fpytorch\u5b98\u7f51\u6307\u5b9a\u7684\u90e8\u7f72\u6846\u67b6\u3002 Flask\u7684\u57fa\u672c\u6a21\u5f0f\u4e3a\u5728\u7a0b\u5e8f\u91cc\u5c06\u4e00\u4e2a\u89c6\u56fe\u51fd\u6570\u5206\u914d\u7ed9\u4e00\u4e2aURL\uff0c\u6bcf\u5f53\u7528\u6237\u8bbf\u95ee\u8fd9\u4e2aURL\u65f6\uff0c\u7cfb\u7edf\u5c31\u4f1a\u6267\u884c\u7ed9\u8be5URL\u5206\u914d\u597d\u7684\u89c6\u56fe\u51fd\u6570\uff0c\u83b7\u53d6\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5176\u5de5\u4f5c\u8fc7\u7a0b\u89c1\u56fe\uff1a \u5728\u9879\u76ee\u4e2d\uff0cFlask\u6846\u67b6\u4e3b\u8981\u4f5c\u7528\u662f\u5bf9\u6a21\u578b\u7684\u5c01\u88c5\u548cAPI\u63a5\u53e3\u7684\u5236\u4f5c\u3002 \u5b89\u88c5\uff1a pip install flask \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff1a # \u5bfc\u5165Flask\u7c7b from flask import Flask # \u521b\u5efa\u4e00\u4e2a\u8be5\u7c7b\u7684\u5b9e\u4f8bapp, \u53c2\u6570\u4e3a__name__, \u8fd9\u4e2a\u53c2\u6570\u662f\u5fc5\u9700\u7684\uff0c # \u8fd9\u6837Flask\u624d\u80fd\u77e5\u9053\u5728\u54ea\u91cc\u53ef\u627e\u5230\u6a21\u677f\u548c\u9759\u6001\u6587\u4ef6\u7b49\u4e1c\u897f\u3002 app = Flask ( __name__ ) # \u4f7f\u7528route()\u88c5\u9970\u5668\u6765\u544a\u8bc9Flask\u89e6\u53d1\u51fd\u6570\u7684URL @app . route ( '/' ) def hello_world (): \"\"\"\u8bf7\u6c42\u6307\u5b9a\u7684url\u540e\uff0c\u6267\u884c\u7684\u4e3b\u8981\u903b\u8f91\u51fd\u6570\"\"\" # \u5728\u7528\u6237\u6d4f\u89c8\u5668\u4e2d\u663e\u793a\u4fe1\u606f\uff1a'Hello, World!' return 'Hello, World!' if __name__ == '__main__' : app . run ( host = \"0.0.0.0\" , port = 5000 ) \u542f\u52a8\u670d\u52a1\uff1a python app . py \u542f\u52a8\u6548\u679c\uff1a \u901a\u8fc7\u6d4f\u89c8\u5668\u6253\u5f00\u5730\u5740http://0.0.0.0:5000\u53ef\u770b\u89c1\u6253\u5370\u4e86'Hello, World'.","title":"2 Flask web\u670d\u52a1\u6846\u67b6"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#3-gunicorn","text":"\u7b80\u4ecb\uff1a Gunicorn\u662f\u4e00\u4e2a\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u9ad8\u6027\u80fd\u7684Python WSGI UNIX HTTP\u670d\u52a1\u7ec4\u4ef6(WSGI: Web Server Gateway Interface)\uff0c\u79fb\u690d\u81eaRuby\u7684\u72ec\u89d2\u517d\uff08Unicorn \uff09\u9879\u76ee\uff0c\u5177\u6709\u4f7f\u7528\u975e\u5e38\u7b80\u5355\uff0c\u8f7b\u91cf\u7ea7\u7684\u8d44\u6e90\u6d88\u8017\uff0c\u4ee5\u53ca\u9ad8\u6027\u80fd\u7b49\u7279\u70b9\u3002 \u4f5c\u7528\uff1a \u5728\u9879\u76ee\u4e2d\uff0cGunicorn\u548cFlask\u6846\u67b6\u4e00\u540c\u4f7f\u7528\uff0c\u80fd\u591f\u5f00\u542f\u670d\u52a1\uff0c\u5904\u7406\u8bf7\u6c42\uff0c\u56e0\u5176\u9ad8\u6027\u80fd\u7684\u7279\u70b9\u80fd\u591f\u6709\u6548\u51cf\u5c11\u670d\u52a1\u4e22\u5305\u7387\u3002 \u5b89\u88c5\uff1a # \u4f7f\u7528pip\u5b89\u88c5gunicorn pip install gunicorn \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\uff1a # \u4f7f\u7528\u5176\u542f\u52a8Flask\u670d\u52a1\uff1a gunicorn - w 1 - b 0.0.0.0 : 5000 app : app # -w \u4ee3\u8868\u5f00\u542f\u7684\u8fdb\u7a0b\u6570\uff0c\u6211\u4eec\u53ea\u5f00\u542f\u4e00\u4e2a\u8fdb\u7a0b # -b \u670d\u52a1\u7684IP\u5730\u5740\u548c\u7aef\u53e3 # app:app \u662f\u6307\u6267\u884c\u7684\u4e3b\u8981\u5bf9\u8c61\u4f4d\u7f6e\uff0c\u5728app.py\u4e2d\u7684app\u5bf9\u8c61 # \u5982\u679c\u4f7f\u5176\u5728\u540e\u53f0\u8fd0\u884c\u53ef\u4f7f\u7528\uff1a # nohup gunicorn -w 1 -b 0.0.0.0:5000 app:app 2>&1 &","title":"3 Gunicorn\u670d\u52a1\u7ec4\u4ef6"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#4-neo4j","text":"\u56e0\u4e3a\u5728\u9879\u76ee\u4e2d\uff0cNeo4j\u56fe\u6570\u636e\u5e93\u4f5c\u4e3a\u6838\u5fc3\u7684\u5b58\u50a8\u548c\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u4f1a\u5728\u540e\u7eed\u7ae0\u8282\u5bf9\u5176\u8fdb\u884c\u8be6\u7ec6\u4ecb\u7ecd\u3002","title":"4 Neo4j\u56fe\u6570\u636e\u5e93"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/01-%E9%A1%B9%E7%9B%AE%E5%BA%94%E7%94%A8%E5%B7%A5%E5%85%B7.html#_4","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u5b66\u4e60\u9879\u76ee\u67b6\u6784\u4e2d\u7528\u5230\u7684\u4e3b\u8981\u5de5\u5177: Doccano\u6807\u6ce8\u5e73\u53f0 \u4f5c\u7528\uff1a\u5728\u9879\u76ee\u4e2d\uff0c\u57fa\u4e8eDoccano\u5e73\u53f0\u5b8c\u6210\u6570\u636e\u7684\u6807\u6ce8\uff0c\u4f9b\u6a21\u578b\u8bad\u7ec3\u4f7f\u7528 Flask web\u670d\u52a1\u6846\u67b6 \u4f5c\u7528\uff1a\u5728\u9879\u76ee\u4e2d\uff0cFlask\u6846\u67b6\u662f\u4e3b\u903b\u8f91\u670d\u52a1\u548c\u53e5\u5b50\u76f8\u5173\u6a21\u578b\u670d\u52a1\u4f7f\u7528\u7684\u670d\u52a1\u6846\u67b6\u3002 Gunicorn\u670d\u52a1\u7ec4\u4ef6 \u4f5c\u7528\uff1a\u5728\u9879\u76ee\u4e2d\uff0cGunicorn\u548cFlask\u6846\u67b6\u4e00\u540c\u4f7f\u7528\uff0c\u80fd\u591f\u5f00\u542f\u670d\u52a1\uff0c\u5904\u7406\u8bf7\u6c42\uff0c\u56e0\u5176\u9ad8\u6027\u80fd\u7684\u7279\u70b9\u80fd\u591f\u6709\u6548\u51cf\u5c11\u670d\u52a1\u4e22\u5305\u7387\u3002 Neo4j\u56fe\u6570\u636e\u5e93","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html","text":"\u6570\u636e\u6807\u6ce8\u5e73\u53f0doccano\u7684\u5b89\u88c5\u53ca\u4f7f\u7528 \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u638c\u63e1doccano\u7684\u5b89\u88c5\u8fc7\u7a0b \u638c\u63e1doccano\u7684\u4f7f\u7528\u65b9\u6cd5 Doccano\u5e73\u53f0\u4ecb\u7ecd \u00b6 Doccano\u662fdocumment anotation\u7684\u7f29\u5199\uff0c\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u6587\u672c\u6807\u6ce8\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5b83\u4e3aNLP\u4efb\u52a1\u7684\u8bed\u6599\u5e93\u8fdb\u884c\u6253\u6807\u3002\u5b83\u652f\u6301\u60c5\u611f\u5206\u6790\uff0c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0c\u6587\u672c\u6458\u8981\u7b49\u4efb\u52a1\u3002 \u5b83\u7684\u64cd\u4f5c\u975e\u5e38\u4fbf\u6377\uff0c\u5728\u5c0f\u578b\u8bed\u6599\u5e93\u4e0a\uff0c\u53ea\u8981\u6570\u5c0f\u65f6\u5c31\u80fd\u5b8c\u6210\u5168\u90e8\u7684\u6253\u6807\u5de5\u4f5c\u3002\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b\u5982\u4f55\u5b89\u88c5\u3001\u914d\u7f6e\u548c\u4f7f\u7528doccano\u3002 \u4e00\u3001doccano\u7684\u5b89\u88c5 \u00b6 doccano\u7684\u5b89\u88c5\u8981\u5728\u865a\u62df\u73af\u5883\u4e0b\u8fdb\u884c\uff01 \u8fdb\u5165\u4f60\u7528\u5230\u7684\u865a\u62df\u73af\u5883\u4e2d, \u5b89\u88c5doccano pip install doccano \u7136\u540e\uff0c\u5728\u7ec8\u7aef\u91cc\u8f93\u5165 # \u521d\u59cb\u5316\u6570\u636e\u5e93 doccano init # \u521b\u5efa\u4e00\u4e2asuper user\u3002\u8fd9\u91cc\u8981\u628apass\u6539\u6210\u4f60\u9700\u8981\u7684\u5bc6\u7801\u3002\u5f53\u7136\uff0c\u7528\u6237\u540d\u4e5f\u53ef\u4ee5\u6539\u6210\u522b\u7684\u3002 doccano createuser -- username admin -- password 1234 \u4e8c\u3001\u542f\u52a8doccano \u00b6 \u9996\u5148\uff0c\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u542f\u52a8WebServer # \u542f\u52a8webserver doccano webserver -- port 8000 \u7136\u540e\uff0c\u6253\u5f00**\u53e6\u4e00\u4e2a**\u7ec8\u7aef\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u4ee3\u7801\u542f\u52a8\u2014\u4efb\u52a1\u961f\u5217: # \u542f\u52a8\u4efb\u52a1\u961f\u5217 doccano task \u4e09\u3001\u8fd0\u884cdoccano\u4e0e\u521b\u5efa\u65b0\u7684\u6587\u672c\u6253\u6807\u9879\u76ee \u00b6 \u9996\u5148\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\uff08\u6700\u597d\u662fChrome\uff09\uff0c\u5728\u5730\u5740\u680f\u4e2d\u8f93\u5165http://127.0.0.1:8000/\u5e76\u56de\u8f66\u3002 \u7136\u540e\uff0c\u6211\u4eec\u70b9\u51fb\u4e2d\u95f4\u7684\u84dd\u8272\u6309\u94ae\u201c\u5feb\u901f\u5f00\u59cb\u201d\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u4f1a\u8df3\u8f6c\u5230\u767b\u9646\u7684\u754c\u9762\u3002\u8fd9\u91cc\uff0c\u6211\u4eec\u9700\u8981\u7528\u4e4b\u524d\u521b\u5efa\u7684\u8d85\u7ea7\u7528\u6237\u767b\u9646\u3002 \u5b8c\u6210\u767b\u9646\u540e\uff0c\u6211\u4eec\u4f1a\u6765\u5230\u201c\u9879\u76ee\u201d\u7684\u754c\u9762\u3002\u6211\u4eec\u53ef\u4ee5\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u521b\u5efa\u201d\u6309\u94ae\u6765\u521b\u5efa\u65b0\u7684\u9879\u76ee\uff1b\u4e5f\u53ef\u4ee5\u70b9\u51fb\u201c\u5220\u9664\u201d\u6309\u94ae\u6765\u5220\u9664\u5df2\u7ecf\u521b\u5efa\u7684\u9879\u76ee\u3002 \u6211\u4eec\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u521b\u5efa\u201d\u6309\u94ae\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u9879\u76ee\u3002 \u5bf9\u9879\u76ee\u8fdb\u884c\u57fa\u672c\u7684\u8bf4\u660e\uff0c\u5728\u586b\u5199\u5b8c\u8981\u6c42\u7684\u4fe1\u606f\u540e\uff0c\u70b9\u51fb\u521b\u5efa\uff0c\u6211\u4eec\u5c31\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684NLP\u6807\u6ce8\u9879\u76ee\u3002\u5728\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u9879\u76ee\u7684\u4e3b\u9875\u3002 \u8fdb\u5165\u6570\u636e\u6807\u6ce8\u5e73\u53f0 \u6700\u5de6\u4fa7\u662f\u4e00\u7cfb\u5217\u53ef\u4ee5\u9009\u62e9\u7684\u9875\u9762\u3002\u201c\u4e3b\u9875\u201d\u8fd9\u4e2a\u6807\u7b7e\u4e0b\u9762\u662fdoccano\u63d0\u4f9b\u7684\u4e00\u7cfb\u5217\u6559\u7a0b\uff0c\u5176\u4ed6\u7684\u9875\u9762\u53ef\u4ee5\u5bf9\u9879\u76ee\u8fdb\u884c\u8bbe\u7f6e\u3002 \u7a0d\u540e\uff0c\u6211\u4eec\u5c06\u5728\u4e0a\u56fe\u6240\u793a\u7684\u754c\u9762\u4e2d\u7684\u5b8c\u6210\u6587\u672c\u6253\u6807\u9879\u76ee\u7684\u5404\u9879\u8bbe\u7f6e\u3002\u6211\u4eec\u4f1a\u4f9d\u6b21\u70b9\u51fb\u5de6\u4fa7\u7684\u5404\u4e2a\u6807\u7b7e\uff0c\u4f9d\u6b21\u8fdb\u884c\u8bbe\u7f6e\u3002 \u56db\u3001\u6dfb\u52a0\u8bed\u6599\u5e93 \u00b6 \u6211\u4eec\u76f4\u63a5\u4ece\u201c\u6570\u636e\u96c6\u201d\u8fd9\u4e2a\u6807\u7b7e\u5f00\u59cb\u770b\u3002 \u5728\u201c\u6570\u636e\u96c6\u201d\u8fd9\u4e2a\u9875\u9762\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u51c6\u5907\u597d\u7684\u6587\u672c\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\uff0c\u4e3a\u5c06\u6765\u7684\u6253\u6807\u505a\u51c6\u5907\u3002 \u6211\u4eec\u9996\u5148\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u64cd\u4f5c\u201d\u2192\u201c\u5bfc\u5165\u6570\u636e\u96c6\u201c\u3002 \u6b64\u65f6\uff0c\u6211\u4eec\u4f1a\u6765\u5230\u201d\u4e0a\u4f20\u6570\u636e\u201d\u7684\u754c\u9762\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0cdoccano\u603b\u5171\u652f\u63014\u79cd\u683c\u5f0f\u7684\u6587\u672c\uff0c\u4ed6\u4eec\u7684\u533a\u522b\u5982\u4e0b\uff1a Textfile\uff1a\u8981\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6\u4e3atxt\u683c\u5f0f\uff0c\u5e76\u4e14\u5728\u6253\u6807\u7684\u65f6\u5019\uff0c\u4e00\u6574\u4e2atxt\u6587\u4ef6\u5728\u6253\u6807\u7684\u65f6\u5019\u663e\u793a\u4e3a\u4e00\u9875\u5185\u5bb9\uff1b Textline\uff1a\u8981\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6\u4e3atxt\u683c\u5f0f\uff0c\u5e76\u4e14\u5728\u6253\u6807\u7684\u65f6\u5019\uff0c\u8be5txt\u6587\u4ef6\u7684\u4e00\u884c\u6587\u5b57\u4f1a\u5728\u6253\u6807\u7684\u65f6\u5019\u663e\u793a\u4e3a\u4e00\u9875\u5185\u5bb9\uff1b JSONL\uff1a\u662fJSON Lines\u7684\u7b80\u5199\uff0c\u6bcf\u884c\u662f\u4e00\u4e2a\u6709\u6548\u7684 JSON\u503c \u3002 CoNLL\uff1a\u662f\u201c\u4e2d\u6587\u4f9d\u5b58\u8bed\u6599\u5e93\u201d\uff0c\u662f\u6839\u636e\u53e5\u5b50\u7684\u4f9d\u5b58\u7ed3\u6784\u800c\u5efa\u7acb\u7684\u6811\u5e93\u3002\u5176\u4e2d\uff0c\u4f9d\u5b58\u7ed3\u6784\u63cf\u8ff0\u7684\u662f\u53e5\u5b50\u4e2d\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u76f4\u63a5\u7684\u53e5\u6cd5\u5173\u7cfb\u3002\u5177\u4f53\u4ecb\u7ecd\u770b \u6c49\u8bed\u6811\u5e93 \u3002 \u6ce8\u610f\uff1a doccano\u5b98\u65b9\u63a8\u8350\u7684\u6587\u6863\u7f16\u7801\u683c\u5f0f\u4e3aUTF-8\u3002 \u5728\u4f7f\u7528JSONL\u683c\u5f0f\u7684\u65f6\u5019\uff0c\u6587\u5b57\u6570\u636e\u672c\u8eab\u8981\u7b26\u5408JSON\u683c\u5f0f\u7684\u89c4\u8303\u3002 \u6570\u636e\u96c6\u4e2d\u4e0d\u8981\u5305\u542b\u7a7a\u884c\u3002 \u8fd9\u91cc\u6211\u4eec\u4ee5Textline\u683c\u5f0f\u4e3e\u4f8b\u3002\u70b9\u51fb\u201cTextLine\u683c\u5f0f\u201d\u3002\u7136\u540e\u5728\u8df3\u8f6c\u5230\u7684\u754c\u9762\u91cc\uff0c\u8bbe\u7f6eFile Format\u548cEncoding\u3002\u7136\u540e\u70b9\u51fb\u4e0b\u56fe\u4e2d\u7684\u201cDrop files here\u2026\u201d\u6765\u4e0a\u4f20\u6587\u4ef6\uff0c\u6700\u540e\uff0c\u70b9\u51fb\u5bfc\u5165\u5373\u53ef\u3002 \u6b64\u65f6\uff0c\u518d\u70b9\u51fb\u201c\u6570\u636e\u96c6\u201d\u7684\u6807\u7b7e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230\u4e00\u6761\u4e00\u6761\u7684\u6587\u672c\u5df2\u7ecf\u88ab\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u4e86\u3002\u5c06\u6765\u6211\u4eec\u5c06\u5bf9\u8fd9\u4e9b\u6587\u672c\u8fdb\u884c\u6253\u6807\u3002 \u4e94\u3001\u6dfb\u52a0\u6807\u7b7e \u00b6 \u5728\u8fd9\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u8bb2\u89e3\u5982\u4f55\u5f80\u9879\u76ee\u4e2d\u6dfb\u52a0\u5728\u6253\u6807\u65f6\u53ef\u9009\u7684\u6807\u7b7e\u3002 \u5728NER\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6dfb\u52a0People\u3001Location\u3001Company\u7b49\uff1b\u5728\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6dfb\u52a0Positive\u3001Negative\u7b49\u6807\u7b7e\u4f5c\u4e3a\u6253\u6807\u65f6\u7684\u53ef\u9009\u6807\u7b7e\u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u53ea\u662f\u6dfb\u52a0\u5c06\u6765\u53ef\u4f9b\u9009\u62e9\u7684\u6807\u7b7e\uff0c\u662f\u9879\u76ee\u914d\u7f6e\u7684\u8fc7\u7a0b\uff0c\u800c\u4e0d\u662f\u8fdb\u884c\u6587\u672c\u6807\u6ce8\u3002 \u70b9\u51fb\u5de6\u4fa7\u7684\u201c\u6807\u7b7e\u201d\u6309\u94ae\uff0c\u5c31\u6765\u5230\u4e86\u6dfb\u52a0\u6807\u7b7e\u7684\u754c\u9762\u3002 \u7ee7\u7eed\u70b9\u51fb\u201c\u64cd\u4f5c\u201d\u6309\u94ae\uff0c\u5e76\u5728\u4e0b\u62c9\u83dc\u5355\u4e2d\u70b9\u51fb\u201c\u521b\u5efa\u6807\u7b7e\u201d\u6309\u94ae\u3002 \u5728\u5f39\u51fa\u7684\u201c\u521b\u5efa\u6807\u7b7e\u201d\u7a97\u53e3\u91cc\u9762\uff0c\u5728\u6807\u7b7e\u540d\u4e00\u680f\u5199\u4e0a\u6807\u7b7e\u7684\u540d\u5b57\uff0c\u952e\u503c\u4ee3\u8868\u5feb\u6377\u952e\u3002\u4f8b\u5982\u5728NER\u7684\u4f8b\u5b50\u4e2d\uff0c\u53ef\u4ee5\u5199People\u3001Location\u3001Company\u7b49\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u7ed9People\u8bbe\u7f6e\u7684\u5feb\u6377\u952e\u662fp\u3002\u5c06\u6765\u5728\u6253\u6807\u7684\u65f6\u5019\uff0c\u53f3\u624b\u7528\u9f20\u6807\u9009\u4e2d\u6bb5\u843d\u4e2d\u7684\u6587\u5b57\uff08\u4f8b\u5982\u201c\u767d\u5c45\u6613\u201d\uff09\uff0c\u5de6\u624b\u5728\u952e\u76d8\u6309\u4e0b\u5feb\u6377\u952ep\uff0c\u5c31\u53ef\u4ee5\u628a\u88ab\u9009\u4e2d\u7684\u6587\u5b57\u6253\u6807\u6210\u201cPeople\u201d\u3002 \u518d\u5f80\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u6807\u7b7e\u81ea\u5b9a\u4e49\u989c\u8272\u3002 \u5168\u90e8\u8bbe\u7f6e\u597d\u4ee5\u540e\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u201c\u4fdd\u5b58\u201d\u6309\u94ae\u3002 \u6b64\u65f6\uff0c\u4e00\u4e2a\u6807\u7b7e\u5c31\u6dfb\u52a0\u5b8c\u6210\u4e86\u3002\u6211\u4eec\u4ee5\u540c\u6837\u7684\u65b9\u6cd5\u6dfb\u52a0\u5176\u4ed6\u6240\u9700\u8981\u7684\u6807\u7b7e\u3002 \u516d\u3001\u6dfb\u52a0\u6210\u5458 \u00b6 \u5728\u4e3a\u673a\u5668\u5b66\u4e60\u7684\u8bed\u6599\u5e93\u6253\u6807\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u8bed\u6599\u5e93\u4e00\u822c\u6bd4\u8f83\u5927\uff0c\u5982\u679c\u8ba9\u4e00\u4e2a\u4eba\u7ed9\u6240\u6709\u7684\u6587\u672c\u6253\u6807\u7684\u8bdd\uff0c\u90a3\u5230\u5730\u8001\u5929\u8352\u90fd\u5b8c\u4e0d\u6210\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u591a\u4e2a\u4eba\u534f\u540c\u5b8c\u6210\u8bed\u6599\u5e93\u7684\u6253\u6807\u5de5\u4f5c\u3002 \u56de\u5fc6\u4e00\u4e0b\uff0c\u6b64\u65f6\u6211\u4eec\u7684\u9879\u76ee\u8fd8\u53ea\u6709\u4e00\u4e2a\u6210\u5458\uff0c\u4e5f\u5c31\u662f\u5728\u521d\u59cb\u914d\u7f6edoccano\u7684\u65f6\u5019\u521b\u5efa\u7684\u8d85\u7ea7\u7528\u6237admin\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u8ba9\u5176\u4ed6\u4eba\u53c2\u4e0e\u5230\u6253\u6807\u9879\u76ee\u4e2d\u6765\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u4e3a\u5176\u4ed6\u6210\u5458\u521b\u5efa\u8d26\u6237\u3002 \u6211\u4eec\u6253\u5f00\u7f51\u9875http://127.0.0.1:8000/admin/\uff0c\u6765\u5230\u6570\u636e\u5e93\u7684\u7ba1\u7406\u7cfb\u7edf\u9875\u9762Django administration \uff0c\u5e76\u7528\u8d85\u7ea7\u7528\u6237\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u9646\u8be5\u7ba1\u7406\u7cfb\u7edf\u3002 \u6b64\u65f6\uff0c\u6211\u4eec\u518d\u8fd4\u56de\u9879\u76ee\u7684\u8bbe\u7f6e\u9875\u9762\u3002\u70b9\u51fb\u5de6\u4fa7\u7684\u201c\u6210\u5458\u201d\u6807\u7b7e\uff0c\u70b9\u51fb\u9875\u9762\u4e0a\u7684\u201c\u6dfb\u52a0\u201d\u6309\u94ae\uff0c\u4f1a\u5f39\u51fa\u201c\u6dfb\u52a0\u6210\u5458\u201d\u7a97\u53e3\u3002 \u5176\u4e2d\uff0c\u5728\u201c\u7528\u6237\u641c\u7d22\u63a5\u53e3\u201d\u7684\u4e0b\u62c9\u83dc\u5355\u91cc\u9762\u53ef\u4ee5\u627e\u5230\u6211\u4eec\u521a\u6dfb\u52a0\u7684\u7528\u6237\u201c\u5c0f\u660e\u201d\u3002 \u6ce8\u610f\uff0c\u5728\u8fd9\u91cc\u53ea\u80fd\u627e\u5230\u5df2\u7ecf\u521b\u5efa\u5230\u7684\u7528\u6237\uff0c\u800c\u4e0d\u80fd\u521b\u5efa\u65b0\u7684\u7528\u6237\u3002\u5982\u679c\u8981\u65b0\u5efa\u7528\u6237\uff0c\u5fc5\u987b\u8981\u5230\u524d\u9762Django administration\u754c\u9762\u3002 \u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7684\u6210\u5458\u7684\u89d2\u8272\uff0c\u4e0d\u540c\u7684\u89d2\u8272\u5bf9\u5e94\u7740\u4e0d\u540c\u7684\u6743\u9650\u3002\u5982\u4e0b\u56fe\uff0c\u6211\u4eec\u628a\u5c0f\u660e\u8bbe\u7f6e\u4e3a\u201c\u6807\u6ce8\u5458\u201d\u3002\u5176\u4ed6\u89d2\u8272\u8fd8\u6709 \u9879\u76ee\u7ba1\u7406\u5458 \u548c\u5ba1\u67e5\u5458\u3002 \u4e03\u3001\u6dfb\u52a0\u6807\u6ce8\u6307\u5357 \u00b6 \u6211\u4eec\u53ef\u4ee5\u4e8b\u524d\u7ed9\u6807\u6ce8\u5458\u548c\u5ba1\u67e5\u5458\u51c6\u5907\u4e00\u4e9b\u6807\u6ce8\u6307\u5357\uff0c\u4fbf\u4e8e\u9879\u76ee\u6210\u5458\u7406\u89e3\u6211\u4eec\u6807\u6ce8\u7684\u8981\u6c42\u548c\u6ce8\u610f\u70b9\u3002 \u4f8b\u5982\uff0c\u5728\u5224\u65ad\u6587\u672c\u6b63\u8d1f\u9762\u503e\u5411\u7684\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u8981\u5177\u4f53\u8bf4\u660e\u5224\u65ad\u6b63\u8d1f\u9762\u7684\u6807\u51c6\uff0c\u4f8b\u5982\u6ee1\u8db3\u54ea\u4e9b\u8981\u6c42\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8ba4\u4e3a\u4e00\u4e2a\u672c\u6587\u662f\u6b63\u9762\u7684\u3002 \u56e0\u4e3a\u4e00\u4e07\u4e2a\u8bfb\u8005\u773c\u91cc\u6709\u4e00\u4e07\u4e2a\u54c8\u59c6\u96f7\u7279\uff0c\u4e0d\u540c\u4eba\u5bf9\u6587\u672c\u7684\u7406\u89e3\u548c\u5224\u65ad\u6b63\u8d1f\u9762\u7684\u5c3a\u5ea6\u662f\u4e0d\u4e00\u6837\u7684\u3002\u6211\u4eec\u53ea\u6709\u628a\u6807\u51c6\u5199\u5177\u4f53\u3001\u5199\u660e\u786e\u4e86\uff0c\u8ba9\u4eba\u4e0d\u7528\u52a8\u8111\u7b4b\u90fd\u80fd\u505a\u51fa\u7b26\u5408\u6211\u4eec\u8981\u6c42\u7684\u5224\u65ad\uff0c\u6211\u4eec\u624d\u80fd\u5f97\u5230\u4e00\u4e2a\u5c3a\u5ea6\u7edf\u4e00\u7684\u6570\u636e\u96c6\u3002\u6570\u636e\u96c6\u4e0a\u7684\u6253\u6807\u5c3a\u5ea6\u7edf\u4e00\uff0c\u662f\u673a\u5668\u5b66\u4e60\u83b7\u5f97\u597d\u7684\u6548\u679c\u7684\u524d\u63d0\u3002 \u6dfb\u52a0\u6307\u5357\u7684\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u516b\u3001\u5f00\u59cb\u7ed9\u6587\u672c\u6253\u6807 \u00b6 \u51c6\u5907\u5de5\u4f5c\u5fd9\u6d3b\u4e86\u8001\u534a\u5929\uff0c\u7ec8\u4e8e\u53ef\u4ee5\u8fdb\u5165\u6b63\u9898\u4e86----\u7ed9\u6587\u672c\u6253\u6807\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0a\u9762\u7684\u524d\u671f\u8bbe\u7f6e\u91cc\u9762\u5e76\u4e0d\u662f\u6240\u6709\u7684\u90fd\u662f\u5fc5\u987b\u7684\u3002\u5728\u6700\u7cbe\u7b80\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4ec5\u6dfb\u52a0\u4e86\u6570\u636e\u96c6\u4e0e\u6807\u7b7e\u540e\uff0c\u5c31\u5f00\u59cb\u7ed9\u6587\u672c\u6253\u6807\u3002 \u8fd9\u91cc\uff0c\u6211\u4eec\u7528\u6807\u6ce8\u5458\u5c0f\u660e\u7684\u8d26\u53f7\u767b\u9646\u6253\u6807\u7cfb\u7edf\u505a\u6f14\u793a\u3002\u540c\u6837\u662f\u6253\u5f00http://127.0.0.1:8000/\u5730\u5740\uff0c\u8f93\u5165\u5c0f\u660e\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u9646\u3002 \u548c\u4e4b\u524d\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u7531\u4e8e\u5c0f\u660e\u7684\u89d2\u8272\u662f\u201c\u6807\u6ce8\u5458\u201d\uff0c\u56e0\u6b64\u4ed6\u53ea\u6709\u6253\u6807\u7684\u6743\u9650\uff0c\u6ca1\u6709\u5bf9\u9879\u76ee\u8fdb\u884c\u5404\u9879\u8bbe\u7f6e\u7684\u6743\u9650\uff0c\u6240\u4ee5\u5728\u5de6\u4fa7\u5217\u8868\u6ca1\u6709\u7ba1\u7406\u5458\u7528\u6237\u7684\u5404\u9879\u8bbe\u7f6e\u9879\u76ee\u3002 \u8fd9\u91cc\u6211\u4eec\u76f4\u63a5\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u5f00\u59cb\u6807\u6ce8\u201d\u8fdb\u884c\u6253\u6807\u3002 \u4ee5NER\u4efb\u52a1\u4e3a\u4f8b\uff0c\u5728\u6253\u6807\u7684\u754c\u9762\u4e0b\uff0c\u6211\u4eec\u9009\u4e2d\u53e5\u5b50\u4e2d\u7684\u5b9e\u4f53\uff0c\u4f1a\u81ea\u52a8\u5f39\u51fa\u4e00\u4e2a\u4e0b\u62c9\u83dc\u5355\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9\u76f8\u5e94\u7684\u5b9e\u4f53\u7c7b\u578bPeople\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u952e\u76d8\u4e0a\u6309\u4e0bp\u952e\u3002 \u8fd9\u662f\u6dfb\u52a0\u6807\u7b7e\u4e4b\u540e\u7684\u6837\u5b50\u3002 \u4e5d\u3001\u5bfc\u51fa\u6253\u6807\u7ed3\u679c \u00b6 \u5f53\u6211\u4eec\u8981\u5bfc\u51fa\u6807\u6ce8\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u91cd\u65b0\u7528\u7ba1\u7406\u5458\u7528\u6237\u767b\u9646\uff0c\u5728\u201c\u6570\u636e\u96c6\u201d\u9875\u9762\u4e0b\uff0c\u70b9\u51fb\u201c\u64cd\u4f5c\u201d\u2192\u201c\u5bfc\u51fa\u6570\u636e\u96c6\u201d\u3002 \u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\uff0c\u6839\u636e\u6211\u4eec\u7684\u9700\u8981\u8fdb\u884c\u8bbe\u7f6e\u540e\uff0c\u70b9\u51fbExport\uff0c\u5373\u53ef\u5bfc\u51fa\u6807\u6ce8\u7ed3\u679c\u3002 \u4fdd\u5b58\u597d\u7684\u6587\u672c\u662f\u5b57\u5178\u7684\u683c\u5f0f\u3002 \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u4fdd\u5b58\u4e86\u53e5\u5b50\u7684ID\u3001\u53e5\u5b50\u539f\u6587\u3001\u5b9e\u4f53\u7684\u5728\u53e5\u5b50\u4e2d\u7684\u4f4d\u7f6e\u3001\u5b9e\u4f53\u7684\u7c7b\u578b\u3002 \u672c\u8282\u5c0f\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u7ed9\u5927\u5bb6\u4ecb\u7ecd\u4e86\u6570\u636e\u6807\u6ce8\u5de5\u5177doccano\u7684\u8be6\u7ec6\u4f7f\u7528\u6559\u7a0b\uff0c\u5927\u5bb6\u5728\u672a\u6765\u5de5\u4f5c\u4e2d\u5982\u679c\u9700\u8981\u6570\u636e\u6807\u6ce8\u53ef\u4ee5\u501f\u52a9\u6b64\u5e73\u53f0\u6765\u5b8c\u6210","title":"2.2 doccano\u6570\u636e\u6807\u6ce8\u5e73\u53f0"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#doccano","text":"","title":"\u6570\u636e\u6807\u6ce8\u5e73\u53f0doccano\u7684\u5b89\u88c5\u53ca\u4f7f\u7528"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_1","text":"\u638c\u63e1doccano\u7684\u5b89\u88c5\u8fc7\u7a0b \u638c\u63e1doccano\u7684\u4f7f\u7528\u65b9\u6cd5","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#doccano_1","text":"Doccano\u662fdocumment anotation\u7684\u7f29\u5199\uff0c\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u6587\u672c\u6807\u6ce8\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5b83\u4e3aNLP\u4efb\u52a1\u7684\u8bed\u6599\u5e93\u8fdb\u884c\u6253\u6807\u3002\u5b83\u652f\u6301\u60c5\u611f\u5206\u6790\uff0c\u547d\u540d\u5b9e\u4f53\u8bc6\u522b\uff0c\u6587\u672c\u6458\u8981\u7b49\u4efb\u52a1\u3002 \u5b83\u7684\u64cd\u4f5c\u975e\u5e38\u4fbf\u6377\uff0c\u5728\u5c0f\u578b\u8bed\u6599\u5e93\u4e0a\uff0c\u53ea\u8981\u6570\u5c0f\u65f6\u5c31\u80fd\u5b8c\u6210\u5168\u90e8\u7684\u6253\u6807\u5de5\u4f5c\u3002\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b\u5982\u4f55\u5b89\u88c5\u3001\u914d\u7f6e\u548c\u4f7f\u7528doccano\u3002","title":"Doccano\u5e73\u53f0\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#doccano_2","text":"doccano\u7684\u5b89\u88c5\u8981\u5728\u865a\u62df\u73af\u5883\u4e0b\u8fdb\u884c\uff01 \u8fdb\u5165\u4f60\u7528\u5230\u7684\u865a\u62df\u73af\u5883\u4e2d, \u5b89\u88c5doccano pip install doccano \u7136\u540e\uff0c\u5728\u7ec8\u7aef\u91cc\u8f93\u5165 # \u521d\u59cb\u5316\u6570\u636e\u5e93 doccano init # \u521b\u5efa\u4e00\u4e2asuper user\u3002\u8fd9\u91cc\u8981\u628apass\u6539\u6210\u4f60\u9700\u8981\u7684\u5bc6\u7801\u3002\u5f53\u7136\uff0c\u7528\u6237\u540d\u4e5f\u53ef\u4ee5\u6539\u6210\u522b\u7684\u3002 doccano createuser -- username admin -- password 1234","title":"\u4e00\u3001doccano\u7684\u5b89\u88c5"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#doccano_3","text":"\u9996\u5148\uff0c\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u542f\u52a8WebServer # \u542f\u52a8webserver doccano webserver -- port 8000 \u7136\u540e\uff0c\u6253\u5f00**\u53e6\u4e00\u4e2a**\u7ec8\u7aef\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u4ee3\u7801\u542f\u52a8\u2014\u4efb\u52a1\u961f\u5217: # \u542f\u52a8\u4efb\u52a1\u961f\u5217 doccano task","title":"\u4e8c\u3001\u542f\u52a8doccano"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#doccano_4","text":"\u9996\u5148\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\uff08\u6700\u597d\u662fChrome\uff09\uff0c\u5728\u5730\u5740\u680f\u4e2d\u8f93\u5165http://127.0.0.1:8000/\u5e76\u56de\u8f66\u3002 \u7136\u540e\uff0c\u6211\u4eec\u70b9\u51fb\u4e2d\u95f4\u7684\u84dd\u8272\u6309\u94ae\u201c\u5feb\u901f\u5f00\u59cb\u201d\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u4f1a\u8df3\u8f6c\u5230\u767b\u9646\u7684\u754c\u9762\u3002\u8fd9\u91cc\uff0c\u6211\u4eec\u9700\u8981\u7528\u4e4b\u524d\u521b\u5efa\u7684\u8d85\u7ea7\u7528\u6237\u767b\u9646\u3002 \u5b8c\u6210\u767b\u9646\u540e\uff0c\u6211\u4eec\u4f1a\u6765\u5230\u201c\u9879\u76ee\u201d\u7684\u754c\u9762\u3002\u6211\u4eec\u53ef\u4ee5\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u521b\u5efa\u201d\u6309\u94ae\u6765\u521b\u5efa\u65b0\u7684\u9879\u76ee\uff1b\u4e5f\u53ef\u4ee5\u70b9\u51fb\u201c\u5220\u9664\u201d\u6309\u94ae\u6765\u5220\u9664\u5df2\u7ecf\u521b\u5efa\u7684\u9879\u76ee\u3002 \u6211\u4eec\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u521b\u5efa\u201d\u6309\u94ae\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u9879\u76ee\u3002 \u5bf9\u9879\u76ee\u8fdb\u884c\u57fa\u672c\u7684\u8bf4\u660e\uff0c\u5728\u586b\u5199\u5b8c\u8981\u6c42\u7684\u4fe1\u606f\u540e\uff0c\u70b9\u51fb\u521b\u5efa\uff0c\u6211\u4eec\u5c31\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684NLP\u6807\u6ce8\u9879\u76ee\u3002\u5728\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u9879\u76ee\u7684\u4e3b\u9875\u3002 \u8fdb\u5165\u6570\u636e\u6807\u6ce8\u5e73\u53f0 \u6700\u5de6\u4fa7\u662f\u4e00\u7cfb\u5217\u53ef\u4ee5\u9009\u62e9\u7684\u9875\u9762\u3002\u201c\u4e3b\u9875\u201d\u8fd9\u4e2a\u6807\u7b7e\u4e0b\u9762\u662fdoccano\u63d0\u4f9b\u7684\u4e00\u7cfb\u5217\u6559\u7a0b\uff0c\u5176\u4ed6\u7684\u9875\u9762\u53ef\u4ee5\u5bf9\u9879\u76ee\u8fdb\u884c\u8bbe\u7f6e\u3002 \u7a0d\u540e\uff0c\u6211\u4eec\u5c06\u5728\u4e0a\u56fe\u6240\u793a\u7684\u754c\u9762\u4e2d\u7684\u5b8c\u6210\u6587\u672c\u6253\u6807\u9879\u76ee\u7684\u5404\u9879\u8bbe\u7f6e\u3002\u6211\u4eec\u4f1a\u4f9d\u6b21\u70b9\u51fb\u5de6\u4fa7\u7684\u5404\u4e2a\u6807\u7b7e\uff0c\u4f9d\u6b21\u8fdb\u884c\u8bbe\u7f6e\u3002","title":"\u4e09\u3001\u8fd0\u884cdoccano\u4e0e\u521b\u5efa\u65b0\u7684\u6587\u672c\u6253\u6807\u9879\u76ee"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_2","text":"\u6211\u4eec\u76f4\u63a5\u4ece\u201c\u6570\u636e\u96c6\u201d\u8fd9\u4e2a\u6807\u7b7e\u5f00\u59cb\u770b\u3002 \u5728\u201c\u6570\u636e\u96c6\u201d\u8fd9\u4e2a\u9875\u9762\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u51c6\u5907\u597d\u7684\u6587\u672c\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\uff0c\u4e3a\u5c06\u6765\u7684\u6253\u6807\u505a\u51c6\u5907\u3002 \u6211\u4eec\u9996\u5148\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u64cd\u4f5c\u201d\u2192\u201c\u5bfc\u5165\u6570\u636e\u96c6\u201c\u3002 \u6b64\u65f6\uff0c\u6211\u4eec\u4f1a\u6765\u5230\u201d\u4e0a\u4f20\u6570\u636e\u201d\u7684\u754c\u9762\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0cdoccano\u603b\u5171\u652f\u63014\u79cd\u683c\u5f0f\u7684\u6587\u672c\uff0c\u4ed6\u4eec\u7684\u533a\u522b\u5982\u4e0b\uff1a Textfile\uff1a\u8981\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6\u4e3atxt\u683c\u5f0f\uff0c\u5e76\u4e14\u5728\u6253\u6807\u7684\u65f6\u5019\uff0c\u4e00\u6574\u4e2atxt\u6587\u4ef6\u5728\u6253\u6807\u7684\u65f6\u5019\u663e\u793a\u4e3a\u4e00\u9875\u5185\u5bb9\uff1b Textline\uff1a\u8981\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6\u4e3atxt\u683c\u5f0f\uff0c\u5e76\u4e14\u5728\u6253\u6807\u7684\u65f6\u5019\uff0c\u8be5txt\u6587\u4ef6\u7684\u4e00\u884c\u6587\u5b57\u4f1a\u5728\u6253\u6807\u7684\u65f6\u5019\u663e\u793a\u4e3a\u4e00\u9875\u5185\u5bb9\uff1b JSONL\uff1a\u662fJSON Lines\u7684\u7b80\u5199\uff0c\u6bcf\u884c\u662f\u4e00\u4e2a\u6709\u6548\u7684 JSON\u503c \u3002 CoNLL\uff1a\u662f\u201c\u4e2d\u6587\u4f9d\u5b58\u8bed\u6599\u5e93\u201d\uff0c\u662f\u6839\u636e\u53e5\u5b50\u7684\u4f9d\u5b58\u7ed3\u6784\u800c\u5efa\u7acb\u7684\u6811\u5e93\u3002\u5176\u4e2d\uff0c\u4f9d\u5b58\u7ed3\u6784\u63cf\u8ff0\u7684\u662f\u53e5\u5b50\u4e2d\u8bcd\u4e0e\u8bcd\u4e4b\u95f4\u76f4\u63a5\u7684\u53e5\u6cd5\u5173\u7cfb\u3002\u5177\u4f53\u4ecb\u7ecd\u770b \u6c49\u8bed\u6811\u5e93 \u3002 \u6ce8\u610f\uff1a doccano\u5b98\u65b9\u63a8\u8350\u7684\u6587\u6863\u7f16\u7801\u683c\u5f0f\u4e3aUTF-8\u3002 \u5728\u4f7f\u7528JSONL\u683c\u5f0f\u7684\u65f6\u5019\uff0c\u6587\u5b57\u6570\u636e\u672c\u8eab\u8981\u7b26\u5408JSON\u683c\u5f0f\u7684\u89c4\u8303\u3002 \u6570\u636e\u96c6\u4e2d\u4e0d\u8981\u5305\u542b\u7a7a\u884c\u3002 \u8fd9\u91cc\u6211\u4eec\u4ee5Textline\u683c\u5f0f\u4e3e\u4f8b\u3002\u70b9\u51fb\u201cTextLine\u683c\u5f0f\u201d\u3002\u7136\u540e\u5728\u8df3\u8f6c\u5230\u7684\u754c\u9762\u91cc\uff0c\u8bbe\u7f6eFile Format\u548cEncoding\u3002\u7136\u540e\u70b9\u51fb\u4e0b\u56fe\u4e2d\u7684\u201cDrop files here\u2026\u201d\u6765\u4e0a\u4f20\u6587\u4ef6\uff0c\u6700\u540e\uff0c\u70b9\u51fb\u5bfc\u5165\u5373\u53ef\u3002 \u6b64\u65f6\uff0c\u518d\u70b9\u51fb\u201c\u6570\u636e\u96c6\u201d\u7684\u6807\u7b7e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230\u4e00\u6761\u4e00\u6761\u7684\u6587\u672c\u5df2\u7ecf\u88ab\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u4e86\u3002\u5c06\u6765\u6211\u4eec\u5c06\u5bf9\u8fd9\u4e9b\u6587\u672c\u8fdb\u884c\u6253\u6807\u3002","title":"\u56db\u3001\u6dfb\u52a0\u8bed\u6599\u5e93"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_3","text":"\u5728\u8fd9\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u8bb2\u89e3\u5982\u4f55\u5f80\u9879\u76ee\u4e2d\u6dfb\u52a0\u5728\u6253\u6807\u65f6\u53ef\u9009\u7684\u6807\u7b7e\u3002 \u5728NER\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6dfb\u52a0People\u3001Location\u3001Company\u7b49\uff1b\u5728\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6dfb\u52a0Positive\u3001Negative\u7b49\u6807\u7b7e\u4f5c\u4e3a\u6253\u6807\u65f6\u7684\u53ef\u9009\u6807\u7b7e\u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u53ea\u662f\u6dfb\u52a0\u5c06\u6765\u53ef\u4f9b\u9009\u62e9\u7684\u6807\u7b7e\uff0c\u662f\u9879\u76ee\u914d\u7f6e\u7684\u8fc7\u7a0b\uff0c\u800c\u4e0d\u662f\u8fdb\u884c\u6587\u672c\u6807\u6ce8\u3002 \u70b9\u51fb\u5de6\u4fa7\u7684\u201c\u6807\u7b7e\u201d\u6309\u94ae\uff0c\u5c31\u6765\u5230\u4e86\u6dfb\u52a0\u6807\u7b7e\u7684\u754c\u9762\u3002 \u7ee7\u7eed\u70b9\u51fb\u201c\u64cd\u4f5c\u201d\u6309\u94ae\uff0c\u5e76\u5728\u4e0b\u62c9\u83dc\u5355\u4e2d\u70b9\u51fb\u201c\u521b\u5efa\u6807\u7b7e\u201d\u6309\u94ae\u3002 \u5728\u5f39\u51fa\u7684\u201c\u521b\u5efa\u6807\u7b7e\u201d\u7a97\u53e3\u91cc\u9762\uff0c\u5728\u6807\u7b7e\u540d\u4e00\u680f\u5199\u4e0a\u6807\u7b7e\u7684\u540d\u5b57\uff0c\u952e\u503c\u4ee3\u8868\u5feb\u6377\u952e\u3002\u4f8b\u5982\u5728NER\u7684\u4f8b\u5b50\u4e2d\uff0c\u53ef\u4ee5\u5199People\u3001Location\u3001Company\u7b49\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u7ed9People\u8bbe\u7f6e\u7684\u5feb\u6377\u952e\u662fp\u3002\u5c06\u6765\u5728\u6253\u6807\u7684\u65f6\u5019\uff0c\u53f3\u624b\u7528\u9f20\u6807\u9009\u4e2d\u6bb5\u843d\u4e2d\u7684\u6587\u5b57\uff08\u4f8b\u5982\u201c\u767d\u5c45\u6613\u201d\uff09\uff0c\u5de6\u624b\u5728\u952e\u76d8\u6309\u4e0b\u5feb\u6377\u952ep\uff0c\u5c31\u53ef\u4ee5\u628a\u88ab\u9009\u4e2d\u7684\u6587\u5b57\u6253\u6807\u6210\u201cPeople\u201d\u3002 \u518d\u5f80\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u6807\u7b7e\u81ea\u5b9a\u4e49\u989c\u8272\u3002 \u5168\u90e8\u8bbe\u7f6e\u597d\u4ee5\u540e\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u201c\u4fdd\u5b58\u201d\u6309\u94ae\u3002 \u6b64\u65f6\uff0c\u4e00\u4e2a\u6807\u7b7e\u5c31\u6dfb\u52a0\u5b8c\u6210\u4e86\u3002\u6211\u4eec\u4ee5\u540c\u6837\u7684\u65b9\u6cd5\u6dfb\u52a0\u5176\u4ed6\u6240\u9700\u8981\u7684\u6807\u7b7e\u3002","title":"\u4e94\u3001\u6dfb\u52a0\u6807\u7b7e"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_4","text":"\u5728\u4e3a\u673a\u5668\u5b66\u4e60\u7684\u8bed\u6599\u5e93\u6253\u6807\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u8bed\u6599\u5e93\u4e00\u822c\u6bd4\u8f83\u5927\uff0c\u5982\u679c\u8ba9\u4e00\u4e2a\u4eba\u7ed9\u6240\u6709\u7684\u6587\u672c\u6253\u6807\u7684\u8bdd\uff0c\u90a3\u5230\u5730\u8001\u5929\u8352\u90fd\u5b8c\u4e0d\u6210\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u591a\u4e2a\u4eba\u534f\u540c\u5b8c\u6210\u8bed\u6599\u5e93\u7684\u6253\u6807\u5de5\u4f5c\u3002 \u56de\u5fc6\u4e00\u4e0b\uff0c\u6b64\u65f6\u6211\u4eec\u7684\u9879\u76ee\u8fd8\u53ea\u6709\u4e00\u4e2a\u6210\u5458\uff0c\u4e5f\u5c31\u662f\u5728\u521d\u59cb\u914d\u7f6edoccano\u7684\u65f6\u5019\u521b\u5efa\u7684\u8d85\u7ea7\u7528\u6237admin\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u8ba9\u5176\u4ed6\u4eba\u53c2\u4e0e\u5230\u6253\u6807\u9879\u76ee\u4e2d\u6765\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u4e3a\u5176\u4ed6\u6210\u5458\u521b\u5efa\u8d26\u6237\u3002 \u6211\u4eec\u6253\u5f00\u7f51\u9875http://127.0.0.1:8000/admin/\uff0c\u6765\u5230\u6570\u636e\u5e93\u7684\u7ba1\u7406\u7cfb\u7edf\u9875\u9762Django administration \uff0c\u5e76\u7528\u8d85\u7ea7\u7528\u6237\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u9646\u8be5\u7ba1\u7406\u7cfb\u7edf\u3002 \u6b64\u65f6\uff0c\u6211\u4eec\u518d\u8fd4\u56de\u9879\u76ee\u7684\u8bbe\u7f6e\u9875\u9762\u3002\u70b9\u51fb\u5de6\u4fa7\u7684\u201c\u6210\u5458\u201d\u6807\u7b7e\uff0c\u70b9\u51fb\u9875\u9762\u4e0a\u7684\u201c\u6dfb\u52a0\u201d\u6309\u94ae\uff0c\u4f1a\u5f39\u51fa\u201c\u6dfb\u52a0\u6210\u5458\u201d\u7a97\u53e3\u3002 \u5176\u4e2d\uff0c\u5728\u201c\u7528\u6237\u641c\u7d22\u63a5\u53e3\u201d\u7684\u4e0b\u62c9\u83dc\u5355\u91cc\u9762\u53ef\u4ee5\u627e\u5230\u6211\u4eec\u521a\u6dfb\u52a0\u7684\u7528\u6237\u201c\u5c0f\u660e\u201d\u3002 \u6ce8\u610f\uff0c\u5728\u8fd9\u91cc\u53ea\u80fd\u627e\u5230\u5df2\u7ecf\u521b\u5efa\u5230\u7684\u7528\u6237\uff0c\u800c\u4e0d\u80fd\u521b\u5efa\u65b0\u7684\u7528\u6237\u3002\u5982\u679c\u8981\u65b0\u5efa\u7528\u6237\uff0c\u5fc5\u987b\u8981\u5230\u524d\u9762Django administration\u754c\u9762\u3002 \u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7684\u6210\u5458\u7684\u89d2\u8272\uff0c\u4e0d\u540c\u7684\u89d2\u8272\u5bf9\u5e94\u7740\u4e0d\u540c\u7684\u6743\u9650\u3002\u5982\u4e0b\u56fe\uff0c\u6211\u4eec\u628a\u5c0f\u660e\u8bbe\u7f6e\u4e3a\u201c\u6807\u6ce8\u5458\u201d\u3002\u5176\u4ed6\u89d2\u8272\u8fd8\u6709 \u9879\u76ee\u7ba1\u7406\u5458 \u548c\u5ba1\u67e5\u5458\u3002","title":"\u516d\u3001\u6dfb\u52a0\u6210\u5458"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_5","text":"\u6211\u4eec\u53ef\u4ee5\u4e8b\u524d\u7ed9\u6807\u6ce8\u5458\u548c\u5ba1\u67e5\u5458\u51c6\u5907\u4e00\u4e9b\u6807\u6ce8\u6307\u5357\uff0c\u4fbf\u4e8e\u9879\u76ee\u6210\u5458\u7406\u89e3\u6211\u4eec\u6807\u6ce8\u7684\u8981\u6c42\u548c\u6ce8\u610f\u70b9\u3002 \u4f8b\u5982\uff0c\u5728\u5224\u65ad\u6587\u672c\u6b63\u8d1f\u9762\u503e\u5411\u7684\u6587\u672c\u5206\u7c7b\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u8981\u5177\u4f53\u8bf4\u660e\u5224\u65ad\u6b63\u8d1f\u9762\u7684\u6807\u51c6\uff0c\u4f8b\u5982\u6ee1\u8db3\u54ea\u4e9b\u8981\u6c42\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8ba4\u4e3a\u4e00\u4e2a\u672c\u6587\u662f\u6b63\u9762\u7684\u3002 \u56e0\u4e3a\u4e00\u4e07\u4e2a\u8bfb\u8005\u773c\u91cc\u6709\u4e00\u4e07\u4e2a\u54c8\u59c6\u96f7\u7279\uff0c\u4e0d\u540c\u4eba\u5bf9\u6587\u672c\u7684\u7406\u89e3\u548c\u5224\u65ad\u6b63\u8d1f\u9762\u7684\u5c3a\u5ea6\u662f\u4e0d\u4e00\u6837\u7684\u3002\u6211\u4eec\u53ea\u6709\u628a\u6807\u51c6\u5199\u5177\u4f53\u3001\u5199\u660e\u786e\u4e86\uff0c\u8ba9\u4eba\u4e0d\u7528\u52a8\u8111\u7b4b\u90fd\u80fd\u505a\u51fa\u7b26\u5408\u6211\u4eec\u8981\u6c42\u7684\u5224\u65ad\uff0c\u6211\u4eec\u624d\u80fd\u5f97\u5230\u4e00\u4e2a\u5c3a\u5ea6\u7edf\u4e00\u7684\u6570\u636e\u96c6\u3002\u6570\u636e\u96c6\u4e0a\u7684\u6253\u6807\u5c3a\u5ea6\u7edf\u4e00\uff0c\u662f\u673a\u5668\u5b66\u4e60\u83b7\u5f97\u597d\u7684\u6548\u679c\u7684\u524d\u63d0\u3002 \u6dfb\u52a0\u6307\u5357\u7684\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\u3002","title":"\u4e03\u3001\u6dfb\u52a0\u6807\u6ce8\u6307\u5357"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_6","text":"\u51c6\u5907\u5de5\u4f5c\u5fd9\u6d3b\u4e86\u8001\u534a\u5929\uff0c\u7ec8\u4e8e\u53ef\u4ee5\u8fdb\u5165\u6b63\u9898\u4e86----\u7ed9\u6587\u672c\u6253\u6807\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0a\u9762\u7684\u524d\u671f\u8bbe\u7f6e\u91cc\u9762\u5e76\u4e0d\u662f\u6240\u6709\u7684\u90fd\u662f\u5fc5\u987b\u7684\u3002\u5728\u6700\u7cbe\u7b80\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4ec5\u6dfb\u52a0\u4e86\u6570\u636e\u96c6\u4e0e\u6807\u7b7e\u540e\uff0c\u5c31\u5f00\u59cb\u7ed9\u6587\u672c\u6253\u6807\u3002 \u8fd9\u91cc\uff0c\u6211\u4eec\u7528\u6807\u6ce8\u5458\u5c0f\u660e\u7684\u8d26\u53f7\u767b\u9646\u6253\u6807\u7cfb\u7edf\u505a\u6f14\u793a\u3002\u540c\u6837\u662f\u6253\u5f00http://127.0.0.1:8000/\u5730\u5740\uff0c\u8f93\u5165\u5c0f\u660e\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u9646\u3002 \u548c\u4e4b\u524d\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u7531\u4e8e\u5c0f\u660e\u7684\u89d2\u8272\u662f\u201c\u6807\u6ce8\u5458\u201d\uff0c\u56e0\u6b64\u4ed6\u53ea\u6709\u6253\u6807\u7684\u6743\u9650\uff0c\u6ca1\u6709\u5bf9\u9879\u76ee\u8fdb\u884c\u5404\u9879\u8bbe\u7f6e\u7684\u6743\u9650\uff0c\u6240\u4ee5\u5728\u5de6\u4fa7\u5217\u8868\u6ca1\u6709\u7ba1\u7406\u5458\u7528\u6237\u7684\u5404\u9879\u8bbe\u7f6e\u9879\u76ee\u3002 \u8fd9\u91cc\u6211\u4eec\u76f4\u63a5\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u201c\u5f00\u59cb\u6807\u6ce8\u201d\u8fdb\u884c\u6253\u6807\u3002 \u4ee5NER\u4efb\u52a1\u4e3a\u4f8b\uff0c\u5728\u6253\u6807\u7684\u754c\u9762\u4e0b\uff0c\u6211\u4eec\u9009\u4e2d\u53e5\u5b50\u4e2d\u7684\u5b9e\u4f53\uff0c\u4f1a\u81ea\u52a8\u5f39\u51fa\u4e00\u4e2a\u4e0b\u62c9\u83dc\u5355\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9\u76f8\u5e94\u7684\u5b9e\u4f53\u7c7b\u578bPeople\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u952e\u76d8\u4e0a\u6309\u4e0bp\u952e\u3002 \u8fd9\u662f\u6dfb\u52a0\u6807\u7b7e\u4e4b\u540e\u7684\u6837\u5b50\u3002","title":"\u516b\u3001\u5f00\u59cb\u7ed9\u6587\u672c\u6253\u6807"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_7","text":"\u5f53\u6211\u4eec\u8981\u5bfc\u51fa\u6807\u6ce8\u7ed3\u679c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u91cd\u65b0\u7528\u7ba1\u7406\u5458\u7528\u6237\u767b\u9646\uff0c\u5728\u201c\u6570\u636e\u96c6\u201d\u9875\u9762\u4e0b\uff0c\u70b9\u51fb\u201c\u64cd\u4f5c\u201d\u2192\u201c\u5bfc\u51fa\u6570\u636e\u96c6\u201d\u3002 \u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\uff0c\u6839\u636e\u6211\u4eec\u7684\u9700\u8981\u8fdb\u884c\u8bbe\u7f6e\u540e\uff0c\u70b9\u51fbExport\uff0c\u5373\u53ef\u5bfc\u51fa\u6807\u6ce8\u7ed3\u679c\u3002 \u4fdd\u5b58\u597d\u7684\u6587\u672c\u662f\u5b57\u5178\u7684\u683c\u5f0f\u3002 \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u4fdd\u5b58\u4e86\u53e5\u5b50\u7684ID\u3001\u53e5\u5b50\u539f\u6587\u3001\u5b9e\u4f53\u7684\u5728\u53e5\u5b50\u4e2d\u7684\u4f4d\u7f6e\u3001\u5b9e\u4f53\u7684\u7c7b\u578b\u3002","title":"\u4e5d\u3001\u5bfc\u51fa\u6253\u6807\u7ed3\u679c"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/02-doccano%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8%E5%B9%B3%E5%8F%B0.html#_8","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u7ed9\u5927\u5bb6\u4ecb\u7ecd\u4e86\u6570\u636e\u6807\u6ce8\u5de5\u5177doccano\u7684\u8be6\u7ec6\u4f7f\u7528\u6559\u7a0b\uff0c\u5927\u5bb6\u5728\u672a\u6765\u5de5\u4f5c\u4e2d\u5982\u679c\u9700\u8981\u6570\u636e\u6807\u6ce8\u53ef\u4ee5\u501f\u52a9\u6b64\u5e73\u53f0\u6765\u5b8c\u6210","title":"\u672c\u8282\u5c0f\u7ed3"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html","text":"\u77e5\u8bc6\u67e5\u8be2\u8bed\u8a00\u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3\u77e5\u8bc6\u67e5\u8be2\u7684\u4e3b\u6d41\u8bed\u8a00. \u638c\u63e1Cypher\u8bed\u8a00\u7684\u8bed\u6cd5 \u77e5\u8bc6\u67e5\u8be2\u4e3b\u6d41\u8bed\u8a00 \u00b6 \u67e5\u8be2\u4e0e\u68c0\u7d22\u662f\u77e5\u8bc6\u56fe\u8c31\u7684\u91cd\u8981\u4f7f\u7528\u65b9\u5f0f, \u4e5f\u662f\u77e5\u8bc6\u56fe\u8c31\u6570\u636e\u7ba1\u7406\u7cfb\u7edf\u7684\u6838\u5fc3\u80fd\u529b\u4e4b\u4e00. 1 SQL \u00b6 SQL: \u8ba1\u7b97\u673a\u5de5\u7a0b\u5e08\u6700\u719f\u6089\u7684\u67e5\u8be2\u8bed\u8a00\u83ab\u8fc7\u4e8eSQL. \u5728SQL\u5e94\u7528\u4e2d, \u6570\u636e\u4ee5\u8868\u7684\u5f62\u5f0f\u5b58\u5728, \u6709\u6bd4\u8f83\u5f3a\u7684schema\u5b9a\u4e49, \u8868\u548c\u8868\u4e4b\u95f4\u7684\u6570\u636e\u5173\u8054\u4ee5join\u7684\u65b9\u5f0f\u5b9e\u73b0. \u4f46\u662fSQL\u6709\u4e00\u4e2a\u91cd\u5927\u7684\u7f3a\u9677: \u5c5e\u6027\u503c\u5e76\u4e0d\u603b\u662f\u5355\u4e00\u503c. \u9488\u5bf9\u6bcf\u4e00\u4e2a\u591a\u503c\u5c5e\u6027\u9700\u8981\u8fdb\u884c\u989d\u5916\u7684\u62c6\u8868\u64cd\u4f5c, \u8fd9\u5bf9\u4e8e\u8868\u6570\u636e\u7684\u7ba1\u7406\u5e26\u6765\u5de8\u5927\u6311\u6218. \u5c24\u5176\u662f\u9700\u8981\u9ad8\u901f\u9ad8\u9891\u7684\u8fdb\u884c\u591a\u8868\u8fde\u63a5\u64cd\u4f5c\u7684\u573a\u666f, \u5bf9\u4e8e\u6570\u636e\u5e93\u6027\u80fd\u4e5f\u662f\u6781\u5927\u7684\u6311\u6218! \u5bf9\u4e8e\u77e5\u8bc6\u56fe\u8c31\u4e2d\u6700\u4e3b\u6d41\u7684\u4e09\u5143\u7ec4\u5f62\u5f0f, \u591a\u8df3\u5173\u8054\u67e5\u8be2\u7684\u5f62\u5f0f, \u663e\u7136SQL\u4e0d\u5177\u5907\u4f18\u52bf. 2 SPARQL \u00b6 SPARQL: \u56fd\u9645\u6807\u51c6\u5316\u7ec4\u7ec7W3C\u63d0\u51fa\u4e86\u9488\u5bf9\u4e8eRDF\u77e5\u8bc6\u56fe\u8c31\u7684\u6807\u51c6\u5316\u67e5\u8be2\u8bed\u8a00SPARQL. \u4f5c\u4e3a\u4e00\u79cd\u56fe\u6570\u636e, SPARQL\u67e5\u8be2\u7684\u6267\u884c\u53ef\u4ee5\u901a\u8fc7\u56fe\u5339\u914d\u7684\u65b9\u5f0f\u5b9e\u73b0. SPARQL\u662f\u4e00\u79cd\u9488\u5bf9RDF\u6570\u636e\u7684\u67e5\u8be2\u8bed\u8a00, 2008\u5e74\u6b63\u5f0f\u6210\u4e3aW3C\u63a8\u8350\u7684\u9488\u5bf9RDF\u6570\u636e\u7684\u6807\u51c6\u67e5\u8be2\u8bed\u8a00. \u548cSQL\u4e00\u6837, SPARQL\u4e5f\u662f\u4e00\u79cd\u58f0\u660e\u5f0f\u7684\u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00, \u5373\u7528\u6237\u53ea\u9700\u8981\u6309\u7167SPARQL\u5b9a\u4e49\u7684\u8bed\u6cd5\u89c4\u5219\u63cf\u8ff0\u5176\u60f3\u67e5\u8be2\u7684\u4fe1\u606f\u5373\u53ef, \u4e0d\u9700\u8981\u660e\u786e\u6307\u5b9a\u8ba1\u7b97\u673a\u5b9e\u73b0\u67e5\u8be2\u7684\u6b65\u9aa4. SPARQL\u8bed\u8a00\u501f\u9274\u4e86SQL\u7684\u90e8\u5206\u8bed\u6cd5, \u66f4\u52a0\u5173\u6ce8\u76ee\u6807\u6570\u636e\u56fe\u7684\u5339\u914d, \u603b\u4f53\u6765\u8bf4\u8bed\u8a00\u89c4\u5219\u4e0d\u7b97\u590d\u6742, \u6bd4\u8f83\u5bb9\u6613\u5b66: # \u6bd4\u5982\u5229\u7528SPARQL\u67e5\u8be2\u4ece\u4e09\u5143\u7ec4<org:book, dc:title, \"Knowledge graph\">\u4e2d\u67e5\u8be2book\u8fd9\u672c\u4e66\u7684\u540d\u5b57 Q: \u67e5\u8be2\u56fe\u4e66\u540d\u79f0 SELECT ?title WHERE { org:book dc:title ?title .} \u8003\u8651\u5230\u9879\u76ee\u540e\u7eed\u4f7f\u7528\u7684\u56fe\u6570\u636e\u5e93neo4j\u5b9e\u9645\u7528\u7684\u662fCypher\u8bed\u8a00, \u5728\u6b64\u4ec5\u4f5c\u4ecb\u7ecd, \u540e\u9762\u8bfe\u7a0b\u4e2d\u5c06\u8be6\u7ec6\u4e3a\u540c\u5b66\u4eec\u8bb2\u6388Cypher\u67e5\u8be2\u8bed\u8a00. 3 Gremlin \u00b6 Gremlin: \u662fApache\u65d7\u4e0b\u7684Java\u9879\u76ee, \u4e5f\u662f\u4e00\u6b3e\u8457\u540d\u7684\u56fe\u6570\u636e\u5e93\u67e5\u8be2\u8bed\u8a00. \u6570\u636e\u4ee5\u5c5e\u6027\u56fe\u7684\u5f62\u5f0f\u5b58\u5728, \u53ef\u4ee5\u8ba4\u4e3a\u662fSQL\u548cSPARQL\u7684\u6df7\u5408\u4f53. \u5b9e\u4f53\u7684\u5c5e\u6027\u4ecd\u7136\u5728\u8868\u4e2d, \u4f46\u662f\u8fde\u63a5\u5173\u7cfb\u662f\u76f4\u63a5\u4ee5\u6307\u9488\u7684\u5f62\u5f0f\u5b58\u5728\u7684. Gremlin\u7684\u67e5\u8be2\u672c\u8d28\u662f\u56fe\u904d\u5386, \u64c5\u957f\u89e3\u51b3\u6c42\u56fe\u7684\u76f4\u5f84, \u70b9\u5230\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u7b49, \u6bd4\u5982\u5218\u5fb7\u534e\u8fde\u63a5\u5965\u5df4\u9a6c\u9700\u8981\u51e0\u5ea6\u5173\u7cfb. \u793a\u4f8b: \u67e5\u8be2gremlin\u7684\u670b\u53cb\u7684\u670b\u53cb\u7684\u59d3\u540d. # \u67e5\u8be2\u5f88\u76f4\u89c2: \u901a\u8fc7has\u9009\u62e9gremlin, out\u8868\u793a\u5173\u7cfb\u670b\u53cb, \u56e0\u4e3a\u4e24\u5c42\u5173\u7cfb\u6240\u4ee5\u6709\u4e24\u4e2a, values\u8868\u793a\u8fd4\u56de\u7684\u7ed3\u679c\u5c5e\u6027 g.V().has(\"name\", \"gremlin\").out(\"knows\").out(\"knows\").values(\"name\") \u5bf9Gremlin\u67e5\u8be2\u8bed\u8a00\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u5b98\u7f51 http://tinkerpop.apache.org 4 Cypher \u00b6 Cypher: Cypher\u662f\u4e00\u79cd\u58f0\u660e\u5f0f\u56fe\u5f62\u67e5\u8be2\u8bed\u8a00, \u53ef\u7528\u4e8e\u56fe\u7ed3\u6784\u9ad8\u6548\u7684\u67e5\u8be2\u66f4\u65b0\u548c\u7ba1\u7406. \u4ece\u8bed\u6cd5\u89c4\u5219\u4e0a\u770b, Cypher\u65e2\u53d7\u5230SQL\u7684\u542f\u53d1, \u53c8\u5728\u6a21\u5f0f\u5339\u914d\u4e0a\u501f\u9274\u4e86SPARQL\u7684\u8868\u8fbe\u65b9\u6cd5, \u67d0\u4e9b\u5217\u8868\u8bed\u4e49\u5219\u662f\u4eceHaskell\u548cPython\u7b49\u8bed\u8a00\u4e2d\u501f\u7528\u7684. \u7efc\u5408\u6765\u770bCypher\u662f\u4e00\u79cd\u7b80\u4ecb, \u5f3a\u5927, \u4e13\u4e3a\u56fe\u6570\u636e\u5e93\u800c\u751f\u7684\u65b0\u5174\u67e5\u8be2\u8bed\u8a00, \u662fAI\u65b0\u65f6\u4ee3\u7684\u6770\u51fa\u8bed\u8a00. Cypher\u662f\u4e13\u95e8\u4e3a\u56fe\u5f62\u6570\u636e\u800c\u904d\u5386\u8bbe\u8ba1\u548c\u4f18\u5316\u7684, \u88abneo4j\u91c7\u7528\u4e3a\u5b98\u65b9\u67e5\u8be2\u8bed\u8a00, \u5728\u540e\u7eed\u7684\u8bfe\u7a0b\u4e2d\u4f1a\u8be6\u7ec6\u8bb2\u89e3! \u5c0f\u8282\u603b\u7ed3 \u00b6 \u9996\u5148\u5b66\u4e60\u4e86\u77e5\u8bc6\u67e5\u8be2\u76844\u4e2a\u4e3b\u6d41\u8bed\u8a00: SQL SPARQL Gremlin Cypher \u4e3b\u8981\u9488\u5bf9Cypher\u8bed\u8a00\uff0c\u5b9e\u73b0\u5bf9Neo4j\u6570\u636e\u5e93\u7684\u589e\u5220\u6539\u67e5","title":"2.3 \u77e5\u8bc6\u67e5\u8be2\u8bed\u8a00"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#_1","text":"","title":"\u77e5\u8bc6\u67e5\u8be2\u8bed\u8a00\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#_2","text":"\u4e86\u89e3\u77e5\u8bc6\u67e5\u8be2\u7684\u4e3b\u6d41\u8bed\u8a00. \u638c\u63e1Cypher\u8bed\u8a00\u7684\u8bed\u6cd5","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#_3","text":"\u67e5\u8be2\u4e0e\u68c0\u7d22\u662f\u77e5\u8bc6\u56fe\u8c31\u7684\u91cd\u8981\u4f7f\u7528\u65b9\u5f0f, \u4e5f\u662f\u77e5\u8bc6\u56fe\u8c31\u6570\u636e\u7ba1\u7406\u7cfb\u7edf\u7684\u6838\u5fc3\u80fd\u529b\u4e4b\u4e00.","title":"\u77e5\u8bc6\u67e5\u8be2\u4e3b\u6d41\u8bed\u8a00"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#1-sql","text":"SQL: \u8ba1\u7b97\u673a\u5de5\u7a0b\u5e08\u6700\u719f\u6089\u7684\u67e5\u8be2\u8bed\u8a00\u83ab\u8fc7\u4e8eSQL. \u5728SQL\u5e94\u7528\u4e2d, \u6570\u636e\u4ee5\u8868\u7684\u5f62\u5f0f\u5b58\u5728, \u6709\u6bd4\u8f83\u5f3a\u7684schema\u5b9a\u4e49, \u8868\u548c\u8868\u4e4b\u95f4\u7684\u6570\u636e\u5173\u8054\u4ee5join\u7684\u65b9\u5f0f\u5b9e\u73b0. \u4f46\u662fSQL\u6709\u4e00\u4e2a\u91cd\u5927\u7684\u7f3a\u9677: \u5c5e\u6027\u503c\u5e76\u4e0d\u603b\u662f\u5355\u4e00\u503c. \u9488\u5bf9\u6bcf\u4e00\u4e2a\u591a\u503c\u5c5e\u6027\u9700\u8981\u8fdb\u884c\u989d\u5916\u7684\u62c6\u8868\u64cd\u4f5c, \u8fd9\u5bf9\u4e8e\u8868\u6570\u636e\u7684\u7ba1\u7406\u5e26\u6765\u5de8\u5927\u6311\u6218. \u5c24\u5176\u662f\u9700\u8981\u9ad8\u901f\u9ad8\u9891\u7684\u8fdb\u884c\u591a\u8868\u8fde\u63a5\u64cd\u4f5c\u7684\u573a\u666f, \u5bf9\u4e8e\u6570\u636e\u5e93\u6027\u80fd\u4e5f\u662f\u6781\u5927\u7684\u6311\u6218! \u5bf9\u4e8e\u77e5\u8bc6\u56fe\u8c31\u4e2d\u6700\u4e3b\u6d41\u7684\u4e09\u5143\u7ec4\u5f62\u5f0f, \u591a\u8df3\u5173\u8054\u67e5\u8be2\u7684\u5f62\u5f0f, \u663e\u7136SQL\u4e0d\u5177\u5907\u4f18\u52bf.","title":"1 SQL"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#2-sparql","text":"SPARQL: \u56fd\u9645\u6807\u51c6\u5316\u7ec4\u7ec7W3C\u63d0\u51fa\u4e86\u9488\u5bf9\u4e8eRDF\u77e5\u8bc6\u56fe\u8c31\u7684\u6807\u51c6\u5316\u67e5\u8be2\u8bed\u8a00SPARQL. \u4f5c\u4e3a\u4e00\u79cd\u56fe\u6570\u636e, SPARQL\u67e5\u8be2\u7684\u6267\u884c\u53ef\u4ee5\u901a\u8fc7\u56fe\u5339\u914d\u7684\u65b9\u5f0f\u5b9e\u73b0. SPARQL\u662f\u4e00\u79cd\u9488\u5bf9RDF\u6570\u636e\u7684\u67e5\u8be2\u8bed\u8a00, 2008\u5e74\u6b63\u5f0f\u6210\u4e3aW3C\u63a8\u8350\u7684\u9488\u5bf9RDF\u6570\u636e\u7684\u6807\u51c6\u67e5\u8be2\u8bed\u8a00. \u548cSQL\u4e00\u6837, SPARQL\u4e5f\u662f\u4e00\u79cd\u58f0\u660e\u5f0f\u7684\u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00, \u5373\u7528\u6237\u53ea\u9700\u8981\u6309\u7167SPARQL\u5b9a\u4e49\u7684\u8bed\u6cd5\u89c4\u5219\u63cf\u8ff0\u5176\u60f3\u67e5\u8be2\u7684\u4fe1\u606f\u5373\u53ef, \u4e0d\u9700\u8981\u660e\u786e\u6307\u5b9a\u8ba1\u7b97\u673a\u5b9e\u73b0\u67e5\u8be2\u7684\u6b65\u9aa4. SPARQL\u8bed\u8a00\u501f\u9274\u4e86SQL\u7684\u90e8\u5206\u8bed\u6cd5, \u66f4\u52a0\u5173\u6ce8\u76ee\u6807\u6570\u636e\u56fe\u7684\u5339\u914d, \u603b\u4f53\u6765\u8bf4\u8bed\u8a00\u89c4\u5219\u4e0d\u7b97\u590d\u6742, \u6bd4\u8f83\u5bb9\u6613\u5b66: # \u6bd4\u5982\u5229\u7528SPARQL\u67e5\u8be2\u4ece\u4e09\u5143\u7ec4<org:book, dc:title, \"Knowledge graph\">\u4e2d\u67e5\u8be2book\u8fd9\u672c\u4e66\u7684\u540d\u5b57 Q: \u67e5\u8be2\u56fe\u4e66\u540d\u79f0 SELECT ?title WHERE { org:book dc:title ?title .} \u8003\u8651\u5230\u9879\u76ee\u540e\u7eed\u4f7f\u7528\u7684\u56fe\u6570\u636e\u5e93neo4j\u5b9e\u9645\u7528\u7684\u662fCypher\u8bed\u8a00, \u5728\u6b64\u4ec5\u4f5c\u4ecb\u7ecd, \u540e\u9762\u8bfe\u7a0b\u4e2d\u5c06\u8be6\u7ec6\u4e3a\u540c\u5b66\u4eec\u8bb2\u6388Cypher\u67e5\u8be2\u8bed\u8a00.","title":"2 SPARQL"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#3-gremlin","text":"Gremlin: \u662fApache\u65d7\u4e0b\u7684Java\u9879\u76ee, \u4e5f\u662f\u4e00\u6b3e\u8457\u540d\u7684\u56fe\u6570\u636e\u5e93\u67e5\u8be2\u8bed\u8a00. \u6570\u636e\u4ee5\u5c5e\u6027\u56fe\u7684\u5f62\u5f0f\u5b58\u5728, \u53ef\u4ee5\u8ba4\u4e3a\u662fSQL\u548cSPARQL\u7684\u6df7\u5408\u4f53. \u5b9e\u4f53\u7684\u5c5e\u6027\u4ecd\u7136\u5728\u8868\u4e2d, \u4f46\u662f\u8fde\u63a5\u5173\u7cfb\u662f\u76f4\u63a5\u4ee5\u6307\u9488\u7684\u5f62\u5f0f\u5b58\u5728\u7684. Gremlin\u7684\u67e5\u8be2\u672c\u8d28\u662f\u56fe\u904d\u5386, \u64c5\u957f\u89e3\u51b3\u6c42\u56fe\u7684\u76f4\u5f84, \u70b9\u5230\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u7b49, \u6bd4\u5982\u5218\u5fb7\u534e\u8fde\u63a5\u5965\u5df4\u9a6c\u9700\u8981\u51e0\u5ea6\u5173\u7cfb. \u793a\u4f8b: \u67e5\u8be2gremlin\u7684\u670b\u53cb\u7684\u670b\u53cb\u7684\u59d3\u540d. # \u67e5\u8be2\u5f88\u76f4\u89c2: \u901a\u8fc7has\u9009\u62e9gremlin, out\u8868\u793a\u5173\u7cfb\u670b\u53cb, \u56e0\u4e3a\u4e24\u5c42\u5173\u7cfb\u6240\u4ee5\u6709\u4e24\u4e2a, values\u8868\u793a\u8fd4\u56de\u7684\u7ed3\u679c\u5c5e\u6027 g.V().has(\"name\", \"gremlin\").out(\"knows\").out(\"knows\").values(\"name\") \u5bf9Gremlin\u67e5\u8be2\u8bed\u8a00\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u5b98\u7f51 http://tinkerpop.apache.org","title":"3 Gremlin"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#4-cypher","text":"Cypher: Cypher\u662f\u4e00\u79cd\u58f0\u660e\u5f0f\u56fe\u5f62\u67e5\u8be2\u8bed\u8a00, \u53ef\u7528\u4e8e\u56fe\u7ed3\u6784\u9ad8\u6548\u7684\u67e5\u8be2\u66f4\u65b0\u548c\u7ba1\u7406. \u4ece\u8bed\u6cd5\u89c4\u5219\u4e0a\u770b, Cypher\u65e2\u53d7\u5230SQL\u7684\u542f\u53d1, \u53c8\u5728\u6a21\u5f0f\u5339\u914d\u4e0a\u501f\u9274\u4e86SPARQL\u7684\u8868\u8fbe\u65b9\u6cd5, \u67d0\u4e9b\u5217\u8868\u8bed\u4e49\u5219\u662f\u4eceHaskell\u548cPython\u7b49\u8bed\u8a00\u4e2d\u501f\u7528\u7684. \u7efc\u5408\u6765\u770bCypher\u662f\u4e00\u79cd\u7b80\u4ecb, \u5f3a\u5927, \u4e13\u4e3a\u56fe\u6570\u636e\u5e93\u800c\u751f\u7684\u65b0\u5174\u67e5\u8be2\u8bed\u8a00, \u662fAI\u65b0\u65f6\u4ee3\u7684\u6770\u51fa\u8bed\u8a00. Cypher\u662f\u4e13\u95e8\u4e3a\u56fe\u5f62\u6570\u636e\u800c\u904d\u5386\u8bbe\u8ba1\u548c\u4f18\u5316\u7684, \u88abneo4j\u91c7\u7528\u4e3a\u5b98\u65b9\u67e5\u8be2\u8bed\u8a00, \u5728\u540e\u7eed\u7684\u8bfe\u7a0b\u4e2d\u4f1a\u8be6\u7ec6\u8bb2\u89e3!","title":"4 Cypher"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/03-%E7%9F%A5%E8%AF%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80.html#_4","text":"\u9996\u5148\u5b66\u4e60\u4e86\u77e5\u8bc6\u67e5\u8be2\u76844\u4e2a\u4e3b\u6d41\u8bed\u8a00: SQL SPARQL Gremlin Cypher \u4e3b\u8981\u9488\u5bf9Cypher\u8bed\u8a00\uff0c\u5b9e\u73b0\u5bf9Neo4j\u6570\u636e\u5e93\u7684\u589e\u5220\u6539\u67e5","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html","text":"Neo4j \u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3Neo4j\u56fe\u6570\u636e\u5e93\u7684\u7b80\u4ecb\u3001\u7248\u672c\u8bf4\u660e \u4e86\u89e3\u8282\u70b9, \u5173\u7cfb, \u5c5e\u6027, \u6807\u7b7e\u7684\u6709\u5173\u6982\u5ff5 \u638c\u63e1Cypher\u8bed\u53e5\u7684\u57fa\u672c\u547d\u4ee4\u548c\u8bed\u6cd5 \u638c\u63e1py2neo\u5de5\u5177\u5bf9Neo4j\u56fe\u6570\u636e\u5e93\u7684\u64cd\u4f5c Neo4j \u4ecb\u7ecd \u00b6 Neo4j\u662f\u7531Java\u5b9e\u73b0\u7684\u5f00\u6e90NoSQL\u56fe\u6570\u636e\u5e93. \u81ea\u4ece2003\u5e74\u5f00\u59cb\u7814\u53d1, \u52302007\u5e74\u53d1\u5e03\u7b2c\u4e00\u7248. neo4j\u73b0\u5982\u4eca\u5df2\u7ecf\u88ab\u5404\u884c\u5404\u4e1a\u7684\u6570\u5341\u4e07\u5bb6\u516c\u53f8\u548c\u7ec4\u7ec7\u91c7\u7528. Neo4j\u5b9e\u73b0\u4e86\u4e13\u4e1a\u6570\u636e\u5e93\u7ea7\u522b\u7684\u56fe\u6570\u636e\u6a21\u578b\u7684\u5b58\u50a8. \u4e0e\u666e\u901a\u7684\u56fe\u5904\u7406\u6216\u5185\u5b58\u7ea7\u6570\u636e\u5e93\u4e0d\u540c, neo4j\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u6570\u636e\u5e93\u7279\u6027, \u5305\u62ecACID\u4e8b\u7269\u7684\u652f\u6301, \u96c6\u7fa4\u652f\u6301, \u5907\u4efd\u4e0e\u6545\u969c\u8f6c\u79fb\u7b49. \u8fd9\u4f7f\u5176\u9002\u5408\u4e8e\u4f01\u4e1a\u7ea7\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u5404\u79cd\u5e94\u7528. Neo4j\u7684\u7248\u672c\u8bf4\u660e: \u4f01\u4e1a\u7248: \u9700\u8981\u9ad8\u989d\u7684\u4ed8\u8d39\u83b7\u5f97\u6388\u6743, \u63d0\u4f9b\u9ad8\u53ef\u7528, \u70ed\u5907\u4efd\u7b49\u6027\u80fd. \u793e\u533a\u5f00\u6e90\u7248: \u514d\u8d39\u4f7f\u7528, \u4f46\u53ea\u80fd\u5355\u70b9\u8fd0\u884c. Neo4j \u56fe\u6570\u636e\u5e93\u6982\u5ff5 \u00b6 \u8282\u70b9 \u8282\u70b9\u662f\u4e3b\u8981\u7684\u6570\u636e\u5143\u7d20, \u8282\u70b9\u901a\u8fc7\u5173\u7cfb\u8fde\u63a5\u5230\u5176\u4ed6\u8282\u70b9, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027 (\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684\u5c5e\u6027), \u8282\u70b9\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u6807\u7b7e, \u7528\u4e8e\u63cf\u8ff0\u5176\u5728\u56fe\u8868\u4e2d\u7684\u4f5c\u7528. \u793a\u4f8b: Person>\u8282\u70b9. \u53ef\u4ee5\u5c06\u8282\u70b9\u7c7b\u6bd4\u4e3a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u8868, \u5bf9\u5e94\u7684\u6807\u7b7e\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u4e0d\u540c\u7684\u8868\u540d, \u5c5e\u6027\u5c31\u662f\u8868\u4e2d\u7684\u5217. \u5173\u7cfb \u5173\u7cfb\u8fde\u63a5\u4e24\u4e2a\u8282\u70b9, \u5173\u7cfb\u662f\u65b9\u5411\u6027\u7684, \u5173\u7cfb\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027(\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684 \u5c5e\u6027). \u5c5e\u6027 \u5c5e\u6027\u662f\u547d\u540d\u503c, \u5176\u4e2d\u540d\u79f0(\u6216\u952e)\u662f\u5b57\u7b26\u4e32, \u5c5e\u6027\u53ef\u4ee5\u88ab\u7d22\u5f15\u548c\u7ea6\u675f, \u53ef\u4ee5\u4ece\u591a\u4e2a\u5c5e\u6027\u521b \u5efa\u590d\u5408\u7d22\u5f15. \u6807\u7b7e \u6807\u7b7e\u7528\u4e8e\u7ec4\u8282\u70b9\u5230\u96c6, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u591a\u4e2a\u6807\u7b7e, \u5bf9\u6807\u7b7e\u8fdb\u884c\u7d22\u5f15\u4ee5\u52a0\u901f\u5728\u56fe\u4e2d\u67e5\u627e\u8282\u70b9 Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5 \u00b6 \u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecdwindows\u4e0bNeo4j\u56fe\u6570\u636e\u5e93\u662f\u5982\u4f55\u5b89\u88c5\u7684 \u7b2c\u4e00\u6b65: \u5b89\u88c5JAVA SE \u7684 JDK \u4e0b\u8f7d\u5730\u5740: https://www.oracle.com/java/technologies/downloads/#java11 (\u6ce8\u610f: \u5728\u70b9\u51fb\u4e0b\u8f7d\u7684\u8fc7\u7a0b\u4e2d, \u53ef\u80fd\u9700\u8981\u9700\u8981oracle\u8d26\u6237, \u76f4\u63a5\u6ce8\u518c\u767b\u5f55\u5373\u53ef\u4e0b\u8f7d) \u4e0b\u8f7d\u5b89\u88c5\u5b8c\u4e4b\u540e, \u6253\u5f00windows\u7ec8\u7aef, \u8f93\u5165java --version\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u597d \u7b2c\u4e8c\u6b65: \u4e0b\u8f7d\u5b89\u88c5Neo4j \u4ece\u5b98\u7f51\u4e0b\u8f7d\u793e\u533a\u7248\u672c, \u4e0b\u8f7d\u5730\u5740: https://neo4j.com/download-center/#community \u8fd9\u91cc\u6ce8\u610f, \u56e0\u4e3aJDK\u4e3a11\u7248\u672c, \u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u5bf9\u5e94\u4e0b\u8f7dNeo4j 4.0\u7248\u672c \u4e0b\u8f7d\u597d\u540e, \u89e3\u538b\u5230\u81ea\u5df1\u60f3\u653e\u7684\u76d8\u91cc\uff08\u6ce8\u610f, \u8def\u5f84\u4e0d\u8981\u51fa\u73b0\u4e2d\u6587, \u4ee5\u514d\u62a5\u9519\uff09. \u4f8b\u5982: C:\\Program Files (x86)\\neo4j-community-4.4.18 \u7b2c\u4e09\u6b65: \u5bf9Neo4j\u8fdb\u884c\u73af\u5883\u53d8\u91cf\u914d\u7f6e \u521b\u5efa\u7cfb\u7edf\u73af\u5883\u53d8\u91cf \u8fc7\u7a0b: \u7535\u8111--->\u5c5e\u6027--->\u9ad8\u7ea7\u7cfb\u7edf\u8bbe\u7f6e--->\u73af\u5883\u53d8\u91cf--->\u65b0\u5efa \u624b\u52a8\u6dfb\u52a0\u53d8\u91cf\u540d\u79f0\u548c\u53d8\u91cf\u503c\uff08\u6ce8\u610f\u53d8\u91cf\u503c\u662f\u4f60\u5b58\u653e\u6587\u4ef6\u7684\u8def\u5f84\uff09 \u5728path\u8def\u5f84\u4e2d\u5c06\u53d8\u91cf\u6dfb\u52a0\u8fdb\u53bb \u7b2c\u56db\u6b65: \u542f\u52a8neo4j\u6570\u636e\u5e93 \u6253\u5f00cmd, \u8f93\u5165: neo4j console \u6d4f\u89c8\u5668\u9875\u9762\u5c55\u793a \u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7b2c\u4e00\u6b21\u5b89\u88c5\u767b\u5f55\u6210\u529f, \u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\uff08\u9ed8\u8ba4\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e00\u81f4\u90fd\u662f: neo4j\uff09. \u7b2c\u4e00\u6b21\u767b\u5f55\u9700\u8981\u66f4\u6539\u5bc6\u7801. Cypher\u4ecb\u7ecd\u4e0e\u4f7f\u7528 \u00b6 1 create\u547d\u4ee4 \u00b6 \u521b\u5efa\u56fe\u6570\u636e\u4e2d\u7684\u8282\u70b9 \u6f14\u793a: # \u521b\u5efa\u547d\u4ee4\u683c\u5f0f : # \u6b64\u5904 create\u662f\u5173\u952e\u5b57 , \u521b\u5efa\u8282\u70b9\u540d\u79f0 node_name , \u8282\u70b9\u6807\u7b7e Node_Label , \u653e\u5728\u5c0f\u62ec\u53f7\u91cc\u9762 () # \u540e\u9762\u628a\u6240\u6709\u5c5e\u4e8e\u8282\u70b9\u6807\u7b7e\u7684\u5c5e\u6027\u653e\u5728\u5927\u62ec\u53f7 '{}' \u91cc\u9762 , \u4f9d\u6b21\u5199\u51fa\u5c5e\u6027\u540d\u79f0 : \u5c5e\u6027\u503c , \u4e0d\u540c\u5c5e\u6027\u7528\u9017\u53f7 ',' \u5206\u9694 # \u4f8b\u5982\u4e0b\u9762\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u8282\u70b9 e , \u8282\u70b9\u6807\u7b7e\u662f Employee , \u62e5\u6709 id , name , salary , deptnp\u56db\u4e2a\u5c5e\u6027 : CREATE ( e : Employee { id : 222 , name : 'Bob' , salary : 6000 , deptnp : 12 }\uff09 \u6548\u679c 2 match\u547d\u4ee4 \u00b6 \u5339\u914d(\u67e5\u8be2)\u5df2\u6709\u6570\u636e \u6f14\u793a: # match\u547d\u4ee4\u4e13\u95e8\u7528\u6765\u5339\u914d\u67e5\u8be2 , \u8282\u70b9\u540d\u79f0 : \u8282\u70b9\u6807\u7b7e , \u4f9d\u7136\u653e\u5728\u5c0f\u62ec\u53f7\u5185 , \u7136\u540e\u4f7f\u7528 return\u8bed\u53e5\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c , \u548c SQL\u5f88\u76f8\u4f3c . MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno MATCH ( n ) return n # \u67e5\u8be2\u6240\u6709\u7ed3\u70b9 \u6548\u679c 3 merge\u547d\u4ee4 \u00b6 \u82e5\u8282\u70b9\u5b58\u5728, \u5219\u7b49\u6548\u4e0ematch\u547d\u4ee4; \u8282\u70b9\u4e0d\u5b58\u5728, \u5219\u7b49\u6548\u4e8ecreate\u547d\u4ee4. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c: \u7136\u540e\u518d\u6b21\u7528merge\u67e5\u8be2, \u53d1\u73b0\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5e76\u6ca1\u6709\u589e\u52a0, \u56e0\u4e3a\u5df2\u7ecf\u5b58\u5728\u76f8\u540c\u7684\u6570\u636e\u4e86, merge\u5339\u914d\u6210\u529f. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c: 4 \u4f7f\u7528create\u521b\u5efa\u5173\u7cfb \u00b6 \u5fc5\u987b\u521b\u5efa\u6709\u65b9\u5411\u6027\u7684\u5173\u7cfb, \u5426\u5219\u62a5\u9519. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u6709\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3aBuy , \u4ee3\u8868 p1\u8d2d\u4e70\u4e86p2 , \u65b9\u5411\u4e3a p1\u6307\u5411p2 CREATE ( p1 : Profile1 ) - [ r : Buy ] -> ( p2 : Profile2 ) \u6548\u679c: 5 \u4f7f\u7528merge\u521b\u5efa\u5173\u7cfb \u00b6 \u53ef\u4ee5\u521b\u5efa\u6709/\u65e0\u65b9\u5411\u6027\u7684\u5173\u7cfb. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u65e0\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3amiss , \u4ee3\u8868 p1 - miss - p2 , \u65b9\u5411\u4e3a\u76f8\u4e92\u7684 MERGE ( p1 : Profile1 ) - [ r : miss ] - ( p2 : Profile2 ) - \u6548\u679c: 6 where\u547d\u4ee4 \u00b6 \u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684\u6dfb\u52a0\u67e5\u8be2\u6761\u4ef6. \u6f14\u793a: # \u67e5\u8be2\u8282\u70b9 Employee\u4e2d , id\u503c\u7b49\u4e8e123\u7684\u90a3\u4e2a\u8282\u70b9 MATCH ( e : Employee ) WHERE e . id = 123 RETURN e - \u6548\u679c: 7 delete\u547d\u4ee4 \u00b6 \u5220\u9664\u8282\u70b9/\u5173\u7cfb\u53ca\u5176\u5173\u8054\u7684\u5c5e\u6027. \u6f14\u793a: # \u6ce8\u610f : \u5220\u9664\u8282\u70b9\u7684\u540c\u65f6 , \u4e5f\u8981\u5220\u9664\u5173\u8054\u7684\u5173\u7cfb\u8fb9 MATCH ( p1 : Profile1 ) - [ r ] - ( p2 : Profile2 ) DELETE p1 , r , p2 - \u6548\u679c: 8 sort\u547d\u4ee4 \u00b6 Cypher\u547d\u4ee4\u4e2d\u7684\u6392\u5e8f\u4f7f\u7528\u7684\u662forder by. \u6f14\u793a: # \u5339\u914d\u67e5\u8be2\u6807\u7b7e Employee , \u5c06\u6240\u6709\u5339\u914d\u7ed3\u679c\u6309\u7167 id\u503c\u5347\u5e8f\u6392\u5217\u540e\u8fd4\u56de\u7ed3\u679c MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . id # \u5982\u679c\u8981\u6309\u7167\u964d\u5e8f\u6392\u5e8f , \u53ea\u9700\u8981\u5c06 ORDER BY e . salary\u6539\u5199\u4e3aORDER BY e . salary DESC MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . salary DESC - \u6548\u679c: 9 \u5b57\u7b26\u4e32\u51fd\u6570: \u00b6 1 toUpper()\u51fd\u6570 \u00b6 \u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toUpper ( e . name ), e . salary , e . deptno \u6548\u679c: 2 toLower()\u51fd\u6570 \u00b6 \u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5c0f\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toLower ( e . name ), e . salary , e . deptno - \u6548\u679c: 3 substring()\u51fd\u6570 \u00b6 \u8fd4\u56de\u4e00\u4e2a\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u8fd4\u56de\u4ece\u7d22\u5f15 start_index\u5f00\u59cb , \u5230 end_index - 1 \u7ed3\u675f\u7684\u5b50\u5b57\u7b26\u4e32 substring ( input_str , start_index , end_index ) # \u793a\u4f8b\u4ee3\u7801 , \u8fd4\u56de\u5458\u5de5\u540d\u5b57\u7684\u524d\u4e24\u4e2a\u5b57\u6bcd MATCH ( e : Employee ) RETURN e . id , substring ( e . name , 0 , 2 ), e . salary , e . deptno - \u6548\u679c: 4 replace()\u51fd\u6570 \u00b6 \u66ff\u6362\u6389\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u5c06\u8f93\u5165\u5b57\u7b26\u4e32\u4e2d\u7b26\u5408 origin_str\u7684\u90e8\u5206 , \u66ff\u6362\u6210 new_str replace ( input_str , origin_str , new_str ) # \u793a\u4f8b\u4ee3\u7801 , \u5c06\u5458\u5de5\u540d\u5b57\u66ff\u6362\u4e3a\u6dfb\u52a0\u540e\u7f00 _HelloWorld MATCH ( e : Employee ) RETURN e . id , replace ( e . name , e . name , e . name + \"_HelloWorld\" ), e . salary , e . deptno # \u8fd8\u539f MATCH ( e : Employee ) RETURN e . id , replace ( e . name , \"_HelloWorld\" , \"\" ), e . salary , e . deptno - \u6548\u679c: 10 \u805a\u5408\u51fd\u6570 \u00b6 1 count()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u6761\u6570. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2a\u6570 MATCH ( e : Employee ) RETURN count ( * ) - \u6548\u679c: 2 max()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5927\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u9ad8\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN max ( e . salary ) - \u6548\u679c: 3 min()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5c0f\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u4f4e\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN min ( e . salary ) - \u6548\u679c: 4 sum()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5168\u90e8\u52a0\u548c\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u548c MATCH ( e : Employee ) RETURN sum ( e . salary ) - \u6548\u679c: 5 avg()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5e73\u5747\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u5e73\u5747\u503c MATCH ( e : Employee ) RETURN avg ( e . salary ) - \u6548\u679c: 11 \u7d22\u5f15index \u00b6 Neo4j\u652f\u6301\u5728\u8282\u70b9\u6216\u5173\u7cfb\u5c5e\u6027\u4e0a\u7684\u7d22\u5f15, \u4ee5\u63d0\u9ad8\u67e5\u8be2\u7684\u6027\u80fd. \u53ef\u4ee5\u4e3a\u5177\u6709\u76f8\u540c\u6807\u7b7e\u540d\u79f0\u7684\u6240\u6709\u8282\u70b9\u7684\u5c5e\u6027\u521b\u5efa\u7d22\u5f15. 1 \u521b\u5efa\u7d22\u5f15 \u00b6 \u4f7f\u7528create index on\u6765\u521b\u5efa\u7d22\u5f15. \u6f14\u793a: # \u521b\u5efa\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 CREATE INDEX ON : Employee ( id ) - \u6548\u679c: 2 \u5220\u9664\u7d22\u5f15 \u00b6 \u4f7f\u7528drop index on\u6765\u5220\u9664\u7d22\u5f15. \u6f14\u793a: # \u5220\u9664\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 DROP INDEX ON : Employee ( id ) - \u6548\u679c: \u5c0f\u8282\u603b\u7ed3 \u00b6 \u5b66\u4e60\u4e86 Neo4j \u56fe\u6570\u636e\u5e93\u7684\u76f8\u5173\u6982\u5ff5\u548c\u4ea7\u54c1\u4ecb\u7ecd, \u4ee5\u53ca Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5\u548c\u4f7f\u7528 \u5b66\u4e60\u4e86Cypher\u8bed\u53e5\u7684\u57fa\u672c\u7528\u6cd5 (\u4e00\u79cd\u7528\u4e8eneo4j\u56fe\u6570\u636e\u5e93\u7684\u67e5\u8be2\u8bed\u8a00)","title":"2.4 Neo4j\u56fe\u6570\u636e\u5e93"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j","text":"","title":"Neo4j \u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#_1","text":"\u4e86\u89e3Neo4j\u56fe\u6570\u636e\u5e93\u7684\u7b80\u4ecb\u3001\u7248\u672c\u8bf4\u660e \u4e86\u89e3\u8282\u70b9, \u5173\u7cfb, \u5c5e\u6027, \u6807\u7b7e\u7684\u6709\u5173\u6982\u5ff5 \u638c\u63e1Cypher\u8bed\u53e5\u7684\u57fa\u672c\u547d\u4ee4\u548c\u8bed\u6cd5 \u638c\u63e1py2neo\u5de5\u5177\u5bf9Neo4j\u56fe\u6570\u636e\u5e93\u7684\u64cd\u4f5c","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j_1","text":"Neo4j\u662f\u7531Java\u5b9e\u73b0\u7684\u5f00\u6e90NoSQL\u56fe\u6570\u636e\u5e93. \u81ea\u4ece2003\u5e74\u5f00\u59cb\u7814\u53d1, \u52302007\u5e74\u53d1\u5e03\u7b2c\u4e00\u7248. neo4j\u73b0\u5982\u4eca\u5df2\u7ecf\u88ab\u5404\u884c\u5404\u4e1a\u7684\u6570\u5341\u4e07\u5bb6\u516c\u53f8\u548c\u7ec4\u7ec7\u91c7\u7528. Neo4j\u5b9e\u73b0\u4e86\u4e13\u4e1a\u6570\u636e\u5e93\u7ea7\u522b\u7684\u56fe\u6570\u636e\u6a21\u578b\u7684\u5b58\u50a8. \u4e0e\u666e\u901a\u7684\u56fe\u5904\u7406\u6216\u5185\u5b58\u7ea7\u6570\u636e\u5e93\u4e0d\u540c, neo4j\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u6570\u636e\u5e93\u7279\u6027, \u5305\u62ecACID\u4e8b\u7269\u7684\u652f\u6301, \u96c6\u7fa4\u652f\u6301, \u5907\u4efd\u4e0e\u6545\u969c\u8f6c\u79fb\u7b49. \u8fd9\u4f7f\u5176\u9002\u5408\u4e8e\u4f01\u4e1a\u7ea7\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u5404\u79cd\u5e94\u7528. Neo4j\u7684\u7248\u672c\u8bf4\u660e: \u4f01\u4e1a\u7248: \u9700\u8981\u9ad8\u989d\u7684\u4ed8\u8d39\u83b7\u5f97\u6388\u6743, \u63d0\u4f9b\u9ad8\u53ef\u7528, \u70ed\u5907\u4efd\u7b49\u6027\u80fd. \u793e\u533a\u5f00\u6e90\u7248: \u514d\u8d39\u4f7f\u7528, \u4f46\u53ea\u80fd\u5355\u70b9\u8fd0\u884c.","title":"Neo4j \u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j_2","text":"\u8282\u70b9 \u8282\u70b9\u662f\u4e3b\u8981\u7684\u6570\u636e\u5143\u7d20, \u8282\u70b9\u901a\u8fc7\u5173\u7cfb\u8fde\u63a5\u5230\u5176\u4ed6\u8282\u70b9, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027 (\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684\u5c5e\u6027), \u8282\u70b9\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u6807\u7b7e, \u7528\u4e8e\u63cf\u8ff0\u5176\u5728\u56fe\u8868\u4e2d\u7684\u4f5c\u7528. \u793a\u4f8b: Person>\u8282\u70b9. \u53ef\u4ee5\u5c06\u8282\u70b9\u7c7b\u6bd4\u4e3a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u8868, \u5bf9\u5e94\u7684\u6807\u7b7e\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u4e0d\u540c\u7684\u8868\u540d, \u5c5e\u6027\u5c31\u662f\u8868\u4e2d\u7684\u5217. \u5173\u7cfb \u5173\u7cfb\u8fde\u63a5\u4e24\u4e2a\u8282\u70b9, \u5173\u7cfb\u662f\u65b9\u5411\u6027\u7684, \u5173\u7cfb\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027(\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684 \u5c5e\u6027). \u5c5e\u6027 \u5c5e\u6027\u662f\u547d\u540d\u503c, \u5176\u4e2d\u540d\u79f0(\u6216\u952e)\u662f\u5b57\u7b26\u4e32, \u5c5e\u6027\u53ef\u4ee5\u88ab\u7d22\u5f15\u548c\u7ea6\u675f, \u53ef\u4ee5\u4ece\u591a\u4e2a\u5c5e\u6027\u521b \u5efa\u590d\u5408\u7d22\u5f15. \u6807\u7b7e \u6807\u7b7e\u7528\u4e8e\u7ec4\u8282\u70b9\u5230\u96c6, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u591a\u4e2a\u6807\u7b7e, \u5bf9\u6807\u7b7e\u8fdb\u884c\u7d22\u5f15\u4ee5\u52a0\u901f\u5728\u56fe\u4e2d\u67e5\u627e\u8282\u70b9","title":"Neo4j \u56fe\u6570\u636e\u5e93\u6982\u5ff5"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j_3","text":"\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecdwindows\u4e0bNeo4j\u56fe\u6570\u636e\u5e93\u662f\u5982\u4f55\u5b89\u88c5\u7684 \u7b2c\u4e00\u6b65: \u5b89\u88c5JAVA SE \u7684 JDK \u4e0b\u8f7d\u5730\u5740: https://www.oracle.com/java/technologies/downloads/#java11 (\u6ce8\u610f: \u5728\u70b9\u51fb\u4e0b\u8f7d\u7684\u8fc7\u7a0b\u4e2d, \u53ef\u80fd\u9700\u8981\u9700\u8981oracle\u8d26\u6237, \u76f4\u63a5\u6ce8\u518c\u767b\u5f55\u5373\u53ef\u4e0b\u8f7d) \u4e0b\u8f7d\u5b89\u88c5\u5b8c\u4e4b\u540e, \u6253\u5f00windows\u7ec8\u7aef, \u8f93\u5165java --version\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u597d \u7b2c\u4e8c\u6b65: \u4e0b\u8f7d\u5b89\u88c5Neo4j \u4ece\u5b98\u7f51\u4e0b\u8f7d\u793e\u533a\u7248\u672c, \u4e0b\u8f7d\u5730\u5740: https://neo4j.com/download-center/#community \u8fd9\u91cc\u6ce8\u610f, \u56e0\u4e3aJDK\u4e3a11\u7248\u672c, \u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u5bf9\u5e94\u4e0b\u8f7dNeo4j 4.0\u7248\u672c \u4e0b\u8f7d\u597d\u540e, \u89e3\u538b\u5230\u81ea\u5df1\u60f3\u653e\u7684\u76d8\u91cc\uff08\u6ce8\u610f, \u8def\u5f84\u4e0d\u8981\u51fa\u73b0\u4e2d\u6587, \u4ee5\u514d\u62a5\u9519\uff09. \u4f8b\u5982: C:\\Program Files (x86)\\neo4j-community-4.4.18 \u7b2c\u4e09\u6b65: \u5bf9Neo4j\u8fdb\u884c\u73af\u5883\u53d8\u91cf\u914d\u7f6e \u521b\u5efa\u7cfb\u7edf\u73af\u5883\u53d8\u91cf \u8fc7\u7a0b: \u7535\u8111--->\u5c5e\u6027--->\u9ad8\u7ea7\u7cfb\u7edf\u8bbe\u7f6e--->\u73af\u5883\u53d8\u91cf--->\u65b0\u5efa \u624b\u52a8\u6dfb\u52a0\u53d8\u91cf\u540d\u79f0\u548c\u53d8\u91cf\u503c\uff08\u6ce8\u610f\u53d8\u91cf\u503c\u662f\u4f60\u5b58\u653e\u6587\u4ef6\u7684\u8def\u5f84\uff09 \u5728path\u8def\u5f84\u4e2d\u5c06\u53d8\u91cf\u6dfb\u52a0\u8fdb\u53bb \u7b2c\u56db\u6b65: \u542f\u52a8neo4j\u6570\u636e\u5e93 \u6253\u5f00cmd, \u8f93\u5165: neo4j console \u6d4f\u89c8\u5668\u9875\u9762\u5c55\u793a \u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7b2c\u4e00\u6b21\u5b89\u88c5\u767b\u5f55\u6210\u529f, \u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\uff08\u9ed8\u8ba4\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e00\u81f4\u90fd\u662f: neo4j\uff09. \u7b2c\u4e00\u6b21\u767b\u5f55\u9700\u8981\u66f4\u6539\u5bc6\u7801.","title":"Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#cypher","text":"","title":"Cypher\u4ecb\u7ecd\u4e0e\u4f7f\u7528"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1-create","text":"\u521b\u5efa\u56fe\u6570\u636e\u4e2d\u7684\u8282\u70b9 \u6f14\u793a: # \u521b\u5efa\u547d\u4ee4\u683c\u5f0f : # \u6b64\u5904 create\u662f\u5173\u952e\u5b57 , \u521b\u5efa\u8282\u70b9\u540d\u79f0 node_name , \u8282\u70b9\u6807\u7b7e Node_Label , \u653e\u5728\u5c0f\u62ec\u53f7\u91cc\u9762 () # \u540e\u9762\u628a\u6240\u6709\u5c5e\u4e8e\u8282\u70b9\u6807\u7b7e\u7684\u5c5e\u6027\u653e\u5728\u5927\u62ec\u53f7 '{}' \u91cc\u9762 , \u4f9d\u6b21\u5199\u51fa\u5c5e\u6027\u540d\u79f0 : \u5c5e\u6027\u503c , \u4e0d\u540c\u5c5e\u6027\u7528\u9017\u53f7 ',' \u5206\u9694 # \u4f8b\u5982\u4e0b\u9762\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u8282\u70b9 e , \u8282\u70b9\u6807\u7b7e\u662f Employee , \u62e5\u6709 id , name , salary , deptnp\u56db\u4e2a\u5c5e\u6027 : CREATE ( e : Employee { id : 222 , name : 'Bob' , salary : 6000 , deptnp : 12 }\uff09 \u6548\u679c","title":"1 create\u547d\u4ee4"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2-match","text":"\u5339\u914d(\u67e5\u8be2)\u5df2\u6709\u6570\u636e \u6f14\u793a: # match\u547d\u4ee4\u4e13\u95e8\u7528\u6765\u5339\u914d\u67e5\u8be2 , \u8282\u70b9\u540d\u79f0 : \u8282\u70b9\u6807\u7b7e , \u4f9d\u7136\u653e\u5728\u5c0f\u62ec\u53f7\u5185 , \u7136\u540e\u4f7f\u7528 return\u8bed\u53e5\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c , \u548c SQL\u5f88\u76f8\u4f3c . MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno MATCH ( n ) return n # \u67e5\u8be2\u6240\u6709\u7ed3\u70b9 \u6548\u679c","title":"2 match\u547d\u4ee4"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#3-merge","text":"\u82e5\u8282\u70b9\u5b58\u5728, \u5219\u7b49\u6548\u4e0ematch\u547d\u4ee4; \u8282\u70b9\u4e0d\u5b58\u5728, \u5219\u7b49\u6548\u4e8ecreate\u547d\u4ee4. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c: \u7136\u540e\u518d\u6b21\u7528merge\u67e5\u8be2, \u53d1\u73b0\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5e76\u6ca1\u6709\u589e\u52a0, \u56e0\u4e3a\u5df2\u7ecf\u5b58\u5728\u76f8\u540c\u7684\u6570\u636e\u4e86, merge\u5339\u914d\u6210\u529f. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c:","title":"3 merge\u547d\u4ee4"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#4-create","text":"\u5fc5\u987b\u521b\u5efa\u6709\u65b9\u5411\u6027\u7684\u5173\u7cfb, \u5426\u5219\u62a5\u9519. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u6709\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3aBuy , \u4ee3\u8868 p1\u8d2d\u4e70\u4e86p2 , \u65b9\u5411\u4e3a p1\u6307\u5411p2 CREATE ( p1 : Profile1 ) - [ r : Buy ] -> ( p2 : Profile2 ) \u6548\u679c:","title":"4 \u4f7f\u7528create\u521b\u5efa\u5173\u7cfb"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#5-merge","text":"\u53ef\u4ee5\u521b\u5efa\u6709/\u65e0\u65b9\u5411\u6027\u7684\u5173\u7cfb. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u65e0\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3amiss , \u4ee3\u8868 p1 - miss - p2 , \u65b9\u5411\u4e3a\u76f8\u4e92\u7684 MERGE ( p1 : Profile1 ) - [ r : miss ] - ( p2 : Profile2 ) - \u6548\u679c:","title":"5 \u4f7f\u7528merge\u521b\u5efa\u5173\u7cfb"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#6-where","text":"\u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684\u6dfb\u52a0\u67e5\u8be2\u6761\u4ef6. \u6f14\u793a: # \u67e5\u8be2\u8282\u70b9 Employee\u4e2d , id\u503c\u7b49\u4e8e123\u7684\u90a3\u4e2a\u8282\u70b9 MATCH ( e : Employee ) WHERE e . id = 123 RETURN e - \u6548\u679c:","title":"6 where\u547d\u4ee4"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#7-delete","text":"\u5220\u9664\u8282\u70b9/\u5173\u7cfb\u53ca\u5176\u5173\u8054\u7684\u5c5e\u6027. \u6f14\u793a: # \u6ce8\u610f : \u5220\u9664\u8282\u70b9\u7684\u540c\u65f6 , \u4e5f\u8981\u5220\u9664\u5173\u8054\u7684\u5173\u7cfb\u8fb9 MATCH ( p1 : Profile1 ) - [ r ] - ( p2 : Profile2 ) DELETE p1 , r , p2 - \u6548\u679c:","title":"7 delete\u547d\u4ee4"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#8-sort","text":"Cypher\u547d\u4ee4\u4e2d\u7684\u6392\u5e8f\u4f7f\u7528\u7684\u662forder by. \u6f14\u793a: # \u5339\u914d\u67e5\u8be2\u6807\u7b7e Employee , \u5c06\u6240\u6709\u5339\u914d\u7ed3\u679c\u6309\u7167 id\u503c\u5347\u5e8f\u6392\u5217\u540e\u8fd4\u56de\u7ed3\u679c MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . id # \u5982\u679c\u8981\u6309\u7167\u964d\u5e8f\u6392\u5e8f , \u53ea\u9700\u8981\u5c06 ORDER BY e . salary\u6539\u5199\u4e3aORDER BY e . salary DESC MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . salary DESC - \u6548\u679c:","title":"8 sort\u547d\u4ee4"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#9","text":"","title":"9 \u5b57\u7b26\u4e32\u51fd\u6570:"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1-toupper","text":"\u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toUpper ( e . name ), e . salary , e . deptno \u6548\u679c:","title":"1 toUpper()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2-tolower","text":"\u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5c0f\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toLower ( e . name ), e . salary , e . deptno - \u6548\u679c:","title":"2 toLower()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#3-substring","text":"\u8fd4\u56de\u4e00\u4e2a\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u8fd4\u56de\u4ece\u7d22\u5f15 start_index\u5f00\u59cb , \u5230 end_index - 1 \u7ed3\u675f\u7684\u5b50\u5b57\u7b26\u4e32 substring ( input_str , start_index , end_index ) # \u793a\u4f8b\u4ee3\u7801 , \u8fd4\u56de\u5458\u5de5\u540d\u5b57\u7684\u524d\u4e24\u4e2a\u5b57\u6bcd MATCH ( e : Employee ) RETURN e . id , substring ( e . name , 0 , 2 ), e . salary , e . deptno - \u6548\u679c:","title":"3 substring()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#4-replace","text":"\u66ff\u6362\u6389\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u5c06\u8f93\u5165\u5b57\u7b26\u4e32\u4e2d\u7b26\u5408 origin_str\u7684\u90e8\u5206 , \u66ff\u6362\u6210 new_str replace ( input_str , origin_str , new_str ) # \u793a\u4f8b\u4ee3\u7801 , \u5c06\u5458\u5de5\u540d\u5b57\u66ff\u6362\u4e3a\u6dfb\u52a0\u540e\u7f00 _HelloWorld MATCH ( e : Employee ) RETURN e . id , replace ( e . name , e . name , e . name + \"_HelloWorld\" ), e . salary , e . deptno # \u8fd8\u539f MATCH ( e : Employee ) RETURN e . id , replace ( e . name , \"_HelloWorld\" , \"\" ), e . salary , e . deptno - \u6548\u679c:","title":"4 replace()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#10","text":"","title":"10 \u805a\u5408\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1-count","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u6761\u6570. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2a\u6570 MATCH ( e : Employee ) RETURN count ( * ) - \u6548\u679c:","title":"1 count()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2-max","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5927\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u9ad8\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN max ( e . salary ) - \u6548\u679c:","title":"2 max()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#3-min","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5c0f\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u4f4e\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN min ( e . salary ) - \u6548\u679c:","title":"3 min()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#4-sum","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5168\u90e8\u52a0\u548c\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u548c MATCH ( e : Employee ) RETURN sum ( e . salary ) - \u6548\u679c:","title":"4 sum()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#5-avg","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5e73\u5747\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u5e73\u5747\u503c MATCH ( e : Employee ) RETURN avg ( e . salary ) - \u6548\u679c:","title":"5 avg()\u51fd\u6570"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#11-index","text":"Neo4j\u652f\u6301\u5728\u8282\u70b9\u6216\u5173\u7cfb\u5c5e\u6027\u4e0a\u7684\u7d22\u5f15, \u4ee5\u63d0\u9ad8\u67e5\u8be2\u7684\u6027\u80fd. \u53ef\u4ee5\u4e3a\u5177\u6709\u76f8\u540c\u6807\u7b7e\u540d\u79f0\u7684\u6240\u6709\u8282\u70b9\u7684\u5c5e\u6027\u521b\u5efa\u7d22\u5f15.","title":"11 \u7d22\u5f15index"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1","text":"\u4f7f\u7528create index on\u6765\u521b\u5efa\u7d22\u5f15. \u6f14\u793a: # \u521b\u5efa\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 CREATE INDEX ON : Employee ( id ) - \u6548\u679c:","title":"1 \u521b\u5efa\u7d22\u5f15"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2","text":"\u4f7f\u7528drop index on\u6765\u5220\u9664\u7d22\u5f15. \u6f14\u793a: # \u5220\u9664\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 DROP INDEX ON : Employee ( id ) - \u6548\u679c:","title":"2 \u5220\u9664\u7d22\u5f15"},{"location":"%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E5%B7%A5%E5%85%B7/04-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#_2","text":"\u5b66\u4e60\u4e86 Neo4j \u56fe\u6570\u636e\u5e93\u7684\u76f8\u5173\u6982\u5ff5\u548c\u4ea7\u54c1\u4ecb\u7ecd, \u4ee5\u53ca Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5\u548c\u4f7f\u7528 \u5b66\u4e60\u4e86Cypher\u8bed\u53e5\u7684\u57fa\u672c\u7528\u6cd5 (\u4e00\u79cd\u7528\u4e8eneo4j\u56fe\u6570\u636e\u5e93\u7684\u67e5\u8be2\u8bed\u8a00)","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html","text":"\u77e5\u8bc6\u878d\u5408\u4e3b\u8981\u65b9\u6cd5 \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3\u4ec0\u4e48\u662f\u77e5\u8bc6\u878d\u5408 \u7406\u89e3\u77e5\u8bc6\u878d\u5408\u7684\u4e3b\u8981\u6280\u672f\u539f\u7406 1 \u77e5\u8bc6\u878d\u5408\uff08Knowledge Fusion\uff09 \u00b6 \u77e5\u8bc6\u878d\u5408\uff0c\u7b80\u5355\u7406\u89e3\u662f\u5c06\u6765\u81ea\u4e0d\u540c\u6765\u6e90\u3001\u683c\u5f0f\u3001\u7ed3\u6784\u7684\u5f02\u6784\u6570\u636e\u7edf\u4e00\u6574\u5408\u5230\u4e00\u4e2a\u4e00\u81f4\u7684\u77e5\u8bc6\u56fe\u8c31\u4e2d\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u8981\u89e3\u51b3\u4ee5\u4e0b\u95ee\u9898\uff1a \u6d88\u9664\u5197\u4f59\uff1a\u591a\u4e2a\u6765\u6e90\u53ef\u80fd\u63cf\u8ff0\u76f8\u540c\u7684\u5b9e\u4f53\u6216\u5173\u7cfb\uff0c\u77e5\u8bc6\u878d\u5408\u8981\u6d88\u9664\u91cd\u590d\u9879\uff0c\u5e76\u786e\u4fdd\u56fe\u8c31\u7684\u7cbe\u7b80\u6027\u3002 \u7edf\u4e00\u8868\u8fbe\uff1a\u4e0d\u540c\u6765\u6e90\u4e2d\u7684\u5b9e\u4f53\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\u3001\u683c\u5f0f\u6216\u7ed3\u6784\u8868\u793a\u76f8\u540c\u7684\u6982\u5ff5\u6216\u5173\u7cfb\uff0c\u878d\u5408\u9700\u8981\u5c06\u5b83\u4eec\u7edf\u4e00\u4e3a\u4e00\u81f4\u7684\u8868\u793a\u65b9\u5f0f\u3002 \u89e3\u51b3\u51b2\u7a81\uff1a\u4e0d\u540c\u6570\u636e\u6e90\u5bf9\u540c\u4e00\u4e2a\u5b9e\u4f53\u6216\u5173\u7cfb\u7684\u63cf\u8ff0\u53ef\u80fd\u5b58\u5728\u51b2\u7a81\uff0c\u77e5\u8bc6\u878d\u5408\u9700\u8981\u5728\u8fd9\u4e9b\u51b2\u7a81\u4e2d\u627e\u5230\u4e00\u81f4\u6027\uff0c\u6216\u901a\u8fc7\u53ef\u4fe1\u5ea6\u8bc4\u4f30\u51b3\u5b9a\u4fdd\u7559\u54ea\u4e2a\u7248\u672c\u3002 \u77e5\u8bc6\u6269\u5c55\uff1a\u878d\u5408\u8fc7\u7a0b\u53ef\u4ee5\u4ece\u591a\u4e2a\u6765\u6e90\u4e2d\u6316\u6398\u65b0\u77e5\u8bc6\uff0c\u4e30\u5bcc\u77e5\u8bc6\u56fe\u8c31\u7684\u5185\u5bb9\uff0c\u63d0\u5347\u77e5\u8bc6\u7684\u5168\u9762\u6027\u548c\u5b8c\u6574\u6027\u3002 \u4e3b\u8981\u5173\u952e\u6280\u672f\u5305\u542b\u6307\u4ee3\u6d88\u89e3\u3001\u5b9e\u4f53\u6d88\u6b67\uff08\u5b9e\u4f53\u94fe\u63a5\uff09\u3001\u5b9e\u4f53\u7edf\u4e00\uff08\u5b9e\u4f53\u5bf9\u9f50\uff09\u3001\u5173\u7cfb\u5bf9\u9f50\u7b49\u3002 \u6307\u4ee3\u6d88\u89e3\uff08Coreference Resolution\uff09 \u4e00\u822c\u5728\u8bed\u8a00\u5b66\u53ca\u6211\u4eec\u65e5\u5e38\u7528\u8bed\u5f53\u4e2d\uff0c\u5728\u4e0b\u6587\u91c7\u7528\u7b80\u79f0\u6216\u4ee3\u79f0\u6765\u4ee3\u66ff\u4e0a\u6587\u5df2\u7ecf\u51fa\u73b0\u7684\u67d0\u4e00\u8bcd\u8bed\uff0c\u8bed\u8a00\u5b66\u4e2d\u628a\u8fd9\u79cd\u60c5\u51b5\u79f0\u4e3a\u201c\u6307\u4ee3\u73b0\u8c61\u201d\uff0c\u4e5f\u5373\u662f\u6307\u4ee3\u3002\u6307\u4ee3\u73b0\u8c61\u80fd\u591f\u907f\u514d\u540c\u4e00\u8bcd\u8bed\u91cd\u590d\u51fa\u73b0\u6240\u9020\u6210\u7684\u8bed\u53e5\u81c3\u80bf\u3001\u8d58\u8ff0\u7b49\u95ee\u9898\uff1b\u4f46\u4e5f\u56e0\u4e3a\u8fd9\u79cd\u7701\u7565\u9020\u6210\u201c\u6307\u4ee3\u4e0d\u660e\u201d\u7684\u95ee\u9898\u3002\u5f62\u5f0f\u4e0a\uff0c\u5c06\u4ee3\u8868\u540c\u4e00\u5b9e\u4f53\uff08Entity\uff09\u7684\u4e0d\u540c\u6307\u79f0\uff08Mention\uff09\u5212\u5206\u5230\u4e00\u4e2a\u7b49\u4ef7\u96c6\u5408\u7684\u8fc7\u7a0b\u79f0\u4e3a\u6307\u4ee3\u6d88\u89e3\u3002 \u4f5c\u7528\uff1a\u786e\u4fdd\u6570\u636e\u4e00\u81f4\u6027\uff0c\u907f\u514d\u5728\u56fe\u8c31\u4e2d\u751f\u6210\u6eb6\u4e8e\u6216\u8005\u77db\u76fe\u7684\u8282\u70b9\u3002 \u5b9e\u4f53\u6d88\u6b67\uff08Entity Disambiguation\uff09 \u5b9e\u4f53\u6d88\u6b67\u662f\u6307\u6839\u636e\u4e0a\u4e0b\u6587\u4fe1\u606f\u6765\u89e3\u51b3\u540c\u4e00\u540d\u79f0\u53ef\u80fd\u6307\u4ee3\u591a\u4e2a\u4e0d\u540c\u5bf9\u8c61\u7684\u95ee\u9898\u3002\u5176\u4e3b\u8981\u76ee\u6807\u662f\u786e\u5b9a\u6587\u672c\u4e2d\u63d0\u5230\u7684\u5177\u4f53\u5bf9\u8c61\uff0c\u4ee5\u6d88\u9664\u6b67\u4e49\u3002 \u6838\u5fc3\u4efb\u52a1\u5c31\u662f\u89e3\u51b3\"\u4e00\u8bcd\u591a\u4e49\"\u7684\u95ee\u9898! \u4f5c\u7528\uff1a\u5c06\u4e0d\u540c\u6765\u6e90\u7684\u76f8\u540c\u5b9e\u4f53\u5408\u5e76\uff0c\u907f\u514d\u5728\u77e5\u8bc6\u56fe\u8c31\u4e2d\u751f\u6210\u91cd\u590d\u7684\u8282\u70b9\uff1b\u786e\u4fdd\u540c\u4e00\u5b9e\u4f53\u5728\u4e0d\u540c\u4e0a\u4e0b\u6587\u4e2d\u7684\u4e00\u81f4\u6027\uff0c\u63d0\u9ad8\u6570\u636e\u8d28\u91cf\u3002 \u5b9e\u4f53\u7edf\u4e00\uff08Entity Normalization\uff09 \u5b9e\u4f53\u7edf\u4e00\u662f\u6307\u5224\u65ad\u591a\u4e2a\u5b9e\u4f53\u662f\u4e0d\u662f\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f53\uff0c\u76ee\u7684\u662f\u5c06\u6765\u81ea\u4e0d\u540c\u6570\u636e\u6e90\u4e2d\u7684\u540c\u4e00\u5b9e\u4f53\u8fdb\u884c\u8bc6\u522b\u548c\u5408\u5e76\u3002 \u4f5c\u7528\uff1a\u786e\u4fdd\u5728\u77e5\u8bc6\u56fe\u8c31\u4e2d\u540c\u4e00\u5b9e\u4f53\u4ec5\u6709\u4e00\u4e2a\u8868\u793a\u3002 \u5173\u7cfb\u5bf9\u9f50\uff08Relation Alignment\uff09 \u4e0d\u540c\u6570\u636e\u6e90\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u63cf\u8ff0\u76f8\u540c\u7684\u5173\u7cfb\uff0c\u5173\u7cfb\u5bf9\u9f50\u7684\u76ee\u7684\uff1a\u5c06\u4e0d\u540c\u6570\u636e\u6e90\u4e2d\u8868\u793a\u76f8\u540c\u7684\u5173\u7cfb\u8fdb\u884c\u5bf9\u9f50\u548c\u878d\u5408\u3002 \u4f5c\u7528\uff1a\u907f\u514d\u5728\u77e5\u8bc6\u56fe\u8c31\u4e2d\u76f8\u540c\u5173\u7cfb\u95f4\u6570\u636e\u91cd\u590d\u3002 2 \u5b9e\u4f53\u6d88\u5c90 \u00b6 \u5b9e\u4f53\u6d88\u6b67\u7684\u672c\u8d28\u5728\u4e8e\u4e00\u4e2a\u5355\u8bcd\u5f88\u53ef\u80fd\u6709\u591a\u4e2a\u610f\u601d\uff0c\u4e5f\u5c31\u662f\u5728\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u4e2d\u6240\u8868\u8fbe\u7684\u542b\u4e49\u53ef\u80fd\u4e0d\u592a\u4e00\u6837\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u9996\u5148\u6211\u4eec\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u8fd9\u79cd\u5b9e\u4f53\u5e93\uff1a id \u5b9e\u4f53\u540d\u79f0 \u5b9e\u4f53\u63cf\u8ff0 1001 \u82f9\u679c \u82f9\u679c\u516c\u53f8\u6ca1\u51e0\u5e74 1002 \u82f9\u679c \u6c34\u679c\u7684\u4e00\u79cd\uff0c\u4e00\u822c\u4ea7\u81ea\u4e8e\u3002\u3002\u3002 \u5f53\u6211\u4eec\u62ff\u5230text\u65f6\uff0c\u6bd4\u5982\u201c\u4eca\u5929\u82f9\u679c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a\u201d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b9e\u4f53\u5e93\u4e2d\u7684\u5b9e\u4f53\u63cf\u8ff0\uff0c\u5168\u90e8\u8f6c\u6362\u4e3a\u5411\u91cf\u3002 [\u4eca\u5929\uff0c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a] \u21d2 \u5411\u91cf(tf-idf) \uff1b \u6c34\u679c\u4e2d\u7684\u4e00\u79cd,\u4e00\u822c\u4ea7\u81ea\u4e8e \u21d2 \u5411\u91cf(tf-idf)\uff1b \u7f8e\u56fd\u4e00\u5bb6\u9ad8\u79d1\u6280\u516c\u53f8\uff0c\u7ecf\u5178\u7684\u4ea7\u54c1\u6709iphone \u624b\u673a \u21d2 \u5411\u91cf(tf-idf) \u57fa\u4e8e\u4e0a\u8ff0\u5411\u91cf\u505a\u76f8\u4f3c\u5ea6\u7684\u8ba1\u7b97\uff0c\u5982\u679cS1>S2 \u5206\u7c7b\u6210Fruit, \u53cd\u4e4b\u5206\u7c7b\u6210\u82f9\u679c\u516c\u53f8 3 \u5b9e\u4f53\u7edf\u4e00 \u00b6 \u5b9e\u4f53\u7edf\u4e00\u662f\u6307\u5224\u65ad\u591a\u4e2a\u5b9e\u4f53\u662f\u4e0d\u662f\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f53\uff0c\u5176\u5b9e\u8fd9\u79cd\u60c5\u51b5\u4e5f\u6bd4\u8f83\u5e38\u89c1\uff0c\u6bd4\u5982\u5927\u5bb6\u5728\u586b\u5199\u5730\u5740\u7684\u65f6\u5019\uff0c\u6709\u5f88\u591a\u79cd\u5199\u6cd5\u4f46\u6307\u7684\u662f\u540c\u4e00\u4e2a\u5730\u5740\uff0c\u8fd9\u4e9b\u90fd\u662f\u5b9e\u4f53\u7edf\u4e00\u8981\u505a\u7684\u5de5\u4f5c\u3002 \u5b9e\u73b0\u65b9\u6cd5\uff1a 1.\u8ba1\u7b97\u4e24\u4e2a\u5b9e\u4f53\uff08\u5b57\u7b26\u4e32\uff09\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\uff0c\u4e00\u822c\u4f7f\u7528\u7f16\u8f91\u8ddd\u79bb\u5373\u53ef\uff0c\u8bbe\u5b9a\u9608\u503c\uff0c\u5224\u65ad\u662f\u5426\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f53\u3002 2.\u57fa\u4e8e\u89c4\u5219\uff1a\u6839\u636e\u9886\u57df\u4e13\u5bb6\u63d0\u4f9b\u7684\u89c4\u5219\uff0c\u5982\u5bf9\u540c\u4e49\u8bcd\u6216\u7f29\u5199\u7684\u6620\u5c04\u3002 3.\u57fa\u4e8e\u6709\u76d1\u7763\u7684\u5b66\u4e60\u65b9\u6cd5\uff1a\u8bad\u7ec3\u6a21\u578b\u81ea\u52a8\u5224\u65ad\u5b9e\u4f53\u662f\u5426\u76f8\u540c\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff08\u57fa\u4e8e\u89c4\u5219\uff09 \u5047\u8bbe\u4ece \u4e0d\u540c\u6570\u636e\u6e90\u62bd\u53d6\u51fa\u4e24\u4e2a\u5b9e\u4f53 \u6570\u636e\u6e901: \u767e\u5ea6\u6709\u9650\u516c\u53f8 \u6570\u636e\u6e902: \u767e\u5ea6\u79d1\u6280\u6709\u9650\u516c\u53f8 \u5b9e\u4f53\u7edf\u4e00\u6b65\u9aa4\uff1a \u6211\u4eec\u901a\u8fc7\u4eba\u5de5\u7684\u8bbe\u8ba1\u4e00\u4e9b\u5e93\uff0c\u6216\u8005\u8bf4\u662f\u4e00\u4e9b\u8bcd\u5178\uff0c\u8fd9\u4e9b\u5e93\u5305\u542b\u76f8\u540c\u5b9e\u4f53\u7684\u7279\u70b9\uff1a \u8bcd\u51781\uff1a\u516c\u53f8\u3001\u6709\u9650\u516c\u53f8\u3001\u5206\u516c\u53f8\u2026 \u8bcd\u51782\uff1a\u5317\u4eac\uff0c\u5929\u6d25\uff0c\u4e0a\u6d77\u2026 \u8bcd\u51783\uff1a\u79d1\u6280\uff0c\u6280\u672f\u2026 \u5982\u679c\u5b9e\u4f53\u4e2d\u7684\u8bcd\u51fa\u73b0\u5728\u5e93\u4e2d\u5c06\u5176\u5220\u6389 1\u3001\u767e\u5ea6\u6709\u9650\u516c\u53f8\u2014\u2014\u4f5c\u4e3a\u539f\u578b\uff0c\u5220\u6389\u51fa\u73b0\u5728\u8bcd\u5178\u4e2d\u7684\u8bcd\u540e\u4e3a\uff1a\u767e\u5ea6 2\u3001\u767e\u5ea6\u79d1\u6280\u6709\u9650\u516c\u53f8 \u2014\u5220\u6389\u51fa\u73b0\u8bcd\u5178\u4e2d\u7684\u8bcd\u540e\u4e3a\uff1a\u767e\u5ea6 3\u3001\u5224\u5b9a\u76f8\u540c\u5b9e\u4f53 3.\u57fa\u4e8e\u6709\u76d1\u7763\u7684\u5b66\u4e60\u65b9\u6cd5\uff1a\u8bad\u7ec3\u6a21\u578b\u81ea\u52a8\u5224\u65ad\u5b9e\u4f53\u662f\u5426\u76f8\u540c\u3002 \u76f4\u63a5\u8bad\u7ec3\u6a21\u578b\u8fdb\u884c\u4e8c\u5206\u7c7b\uff0c\u5224\u65ad\u662f\u5426\u76f8\u5173 4 \u5173\u7cfb\u5bf9\u9f50 \u00b6 \u4e0d\u540c\u6570\u636e\u6e90\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u63cf\u8ff0\u76f8\u540c\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u9700\u8981\u5c06\u4e0d\u540c\u6570\u636e\u6e90\u4e2d\u8868\u793a\u76f8\u540c\u7684\u5173\u7cfb\u8fdb\u884c\u5bf9\u9f50\u548c\u878d\u5408\u3002 \u5b9e\u73b0\u65b9\u6cd5 \u5173\u7cfb\u540c\u4e49\u8bcd\u6620\u5c04\uff1a\u6839\u636e\u5df2\u77e5\u7684\u540c\u4e49\u8bcd\u8868\u6216\u901a\u8fc7\u4e0a\u4e0b\u6587\u5206\u6790\uff0c\u7edf\u4e00\u8868\u793a\u76f8\u540c\u7684\u5173\u7cfb\u3002 \u57fa\u4e8e\u4e0a\u4e0b\u6587\u7684\u5173\u7cfb\u5bf9\u9f50\uff1a\u901a\u8fc7\u5206\u6790\u5173\u7cfb\u7684\u4e0a\u4e0b\u6587\uff0c\u5982\u4e0e\u54ea\u4e9b\u5b9e\u4f53\u53d1\u751f\u5173\u7cfb\uff0c\u6765\u63a8\u65ad\u4e24\u4e2a\u5173\u7cfb\u662f\u5426\u7b49\u4ef7\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u5047\u8bbe\u4ece\u4e0d\u540c\u6570\u636e\u6e90\u83b7\u53d6\u5230\u4e24\u6761\u5173\u7cfb\uff1a \u6570\u636e\u6e901\uff1a <John, is married to, Jane> \u6570\u636e\u6e902\uff1a <John, spouse of, Jane> \u5bf9\u9f50\u6b65\u9aa4\uff1a \u540c\u4e49\u8bcd\u6620\u5c04\uff1a\u901a\u8fc7\u5173\u7cfb\u540c\u4e49\u8bcd\u8868\uff0c\u8bc6\u522b\u51fa\u201cis married to\u201d\u548c\u201cspouse of\u201d\u662f\u540c\u4e49\u8bcd\uff0c\u8868\u793a\u76f8\u540c\u7684\u5a5a\u59fb\u5173\u7cfb\u3002 \u4e0a\u4e0b\u6587\u5206\u6790\uff1a\u68c0\u67e5\u4e24\u6761\u5173\u7cfb\u4e2d\u7684\u5b9e\u4f53\uff0c\u53d1\u73b0\u4e24\u6761\u5173\u7cfb\u6d89\u53ca\u76f8\u540c\u7684\u5b9e\u4f53\u201cJohn\u201d\u548c\u201cJane\u201d\u3002 \u7ed3\u679c\uff1a\u4e24\u6761\u5173\u7cfb\u88ab\u5408\u5e76\u4e3a <John, is married to, Jane> \u3002 \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5728\u77e5\u8bc6\u878d\u5408\u76f8\u5173\u77e5\u8bc6\uff0c\u77e5\u8bc6\u878d\u5408\u76ee\u7684\u662f\u89e3\u51b3\u5f02\u6784\u6570\u636e\u6e90\u4e4b\u95f4\u7684\u51b2\u7a81\u548c\u4e0d\u4e00\u81f4\uff0c\u786e\u4fdd\u6700\u7ec8\u7684\u77e5\u8bc6\u56fe\u8c31\u5177\u6709\u4e00\u81f4\u6027\u3001\u5b8c\u6574\u6027\u548c\u51c6\u786e\u6027\u3002\u901a\u8fc7\u5b9e\u4f53\u5bf9\u9f50\u3001\u5173\u7cfb\u5bf9\u9f50\u3001\u6570\u636e\u51b2\u7a81\u89e3\u51b3\u3001\u8bed\u4e49\u4e00\u81f4\u6027\u7ef4\u62a4\u7b49\u6280\u672f\u624b\u6bb5\uff0c\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u4ece\u591a\u4e2a\u6570\u636e\u6e90\u4e2d\u63d0\u53d6\u548c\u878d\u5408\u77e5\u8bc6\uff0c\u5e76\u901a\u8fc7\u63a8\u7406\u53d1\u73b0\u65b0\u77e5\u8bc6\uff0c\u5b9e\u73b0\u77e5\u8bc6\u7684\u5168\u9762\u6574\u5408\u4e0e\u5e94\u7528\u3002","title":"5.1 \u77e5\u8bc6\u878d\u5408\u57fa\u672c\u77e5\u8bc6"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#_1","text":"","title":"\u77e5\u8bc6\u878d\u5408\u4e3b\u8981\u65b9\u6cd5"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#_2","text":"\u4e86\u89e3\u4ec0\u4e48\u662f\u77e5\u8bc6\u878d\u5408 \u7406\u89e3\u77e5\u8bc6\u878d\u5408\u7684\u4e3b\u8981\u6280\u672f\u539f\u7406","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#1-knowledge-fusion","text":"\u77e5\u8bc6\u878d\u5408\uff0c\u7b80\u5355\u7406\u89e3\u662f\u5c06\u6765\u81ea\u4e0d\u540c\u6765\u6e90\u3001\u683c\u5f0f\u3001\u7ed3\u6784\u7684\u5f02\u6784\u6570\u636e\u7edf\u4e00\u6574\u5408\u5230\u4e00\u4e2a\u4e00\u81f4\u7684\u77e5\u8bc6\u56fe\u8c31\u4e2d\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u8981\u89e3\u51b3\u4ee5\u4e0b\u95ee\u9898\uff1a \u6d88\u9664\u5197\u4f59\uff1a\u591a\u4e2a\u6765\u6e90\u53ef\u80fd\u63cf\u8ff0\u76f8\u540c\u7684\u5b9e\u4f53\u6216\u5173\u7cfb\uff0c\u77e5\u8bc6\u878d\u5408\u8981\u6d88\u9664\u91cd\u590d\u9879\uff0c\u5e76\u786e\u4fdd\u56fe\u8c31\u7684\u7cbe\u7b80\u6027\u3002 \u7edf\u4e00\u8868\u8fbe\uff1a\u4e0d\u540c\u6765\u6e90\u4e2d\u7684\u5b9e\u4f53\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u540d\u79f0\u3001\u683c\u5f0f\u6216\u7ed3\u6784\u8868\u793a\u76f8\u540c\u7684\u6982\u5ff5\u6216\u5173\u7cfb\uff0c\u878d\u5408\u9700\u8981\u5c06\u5b83\u4eec\u7edf\u4e00\u4e3a\u4e00\u81f4\u7684\u8868\u793a\u65b9\u5f0f\u3002 \u89e3\u51b3\u51b2\u7a81\uff1a\u4e0d\u540c\u6570\u636e\u6e90\u5bf9\u540c\u4e00\u4e2a\u5b9e\u4f53\u6216\u5173\u7cfb\u7684\u63cf\u8ff0\u53ef\u80fd\u5b58\u5728\u51b2\u7a81\uff0c\u77e5\u8bc6\u878d\u5408\u9700\u8981\u5728\u8fd9\u4e9b\u51b2\u7a81\u4e2d\u627e\u5230\u4e00\u81f4\u6027\uff0c\u6216\u901a\u8fc7\u53ef\u4fe1\u5ea6\u8bc4\u4f30\u51b3\u5b9a\u4fdd\u7559\u54ea\u4e2a\u7248\u672c\u3002 \u77e5\u8bc6\u6269\u5c55\uff1a\u878d\u5408\u8fc7\u7a0b\u53ef\u4ee5\u4ece\u591a\u4e2a\u6765\u6e90\u4e2d\u6316\u6398\u65b0\u77e5\u8bc6\uff0c\u4e30\u5bcc\u77e5\u8bc6\u56fe\u8c31\u7684\u5185\u5bb9\uff0c\u63d0\u5347\u77e5\u8bc6\u7684\u5168\u9762\u6027\u548c\u5b8c\u6574\u6027\u3002 \u4e3b\u8981\u5173\u952e\u6280\u672f\u5305\u542b\u6307\u4ee3\u6d88\u89e3\u3001\u5b9e\u4f53\u6d88\u6b67\uff08\u5b9e\u4f53\u94fe\u63a5\uff09\u3001\u5b9e\u4f53\u7edf\u4e00\uff08\u5b9e\u4f53\u5bf9\u9f50\uff09\u3001\u5173\u7cfb\u5bf9\u9f50\u7b49\u3002 \u6307\u4ee3\u6d88\u89e3\uff08Coreference Resolution\uff09 \u4e00\u822c\u5728\u8bed\u8a00\u5b66\u53ca\u6211\u4eec\u65e5\u5e38\u7528\u8bed\u5f53\u4e2d\uff0c\u5728\u4e0b\u6587\u91c7\u7528\u7b80\u79f0\u6216\u4ee3\u79f0\u6765\u4ee3\u66ff\u4e0a\u6587\u5df2\u7ecf\u51fa\u73b0\u7684\u67d0\u4e00\u8bcd\u8bed\uff0c\u8bed\u8a00\u5b66\u4e2d\u628a\u8fd9\u79cd\u60c5\u51b5\u79f0\u4e3a\u201c\u6307\u4ee3\u73b0\u8c61\u201d\uff0c\u4e5f\u5373\u662f\u6307\u4ee3\u3002\u6307\u4ee3\u73b0\u8c61\u80fd\u591f\u907f\u514d\u540c\u4e00\u8bcd\u8bed\u91cd\u590d\u51fa\u73b0\u6240\u9020\u6210\u7684\u8bed\u53e5\u81c3\u80bf\u3001\u8d58\u8ff0\u7b49\u95ee\u9898\uff1b\u4f46\u4e5f\u56e0\u4e3a\u8fd9\u79cd\u7701\u7565\u9020\u6210\u201c\u6307\u4ee3\u4e0d\u660e\u201d\u7684\u95ee\u9898\u3002\u5f62\u5f0f\u4e0a\uff0c\u5c06\u4ee3\u8868\u540c\u4e00\u5b9e\u4f53\uff08Entity\uff09\u7684\u4e0d\u540c\u6307\u79f0\uff08Mention\uff09\u5212\u5206\u5230\u4e00\u4e2a\u7b49\u4ef7\u96c6\u5408\u7684\u8fc7\u7a0b\u79f0\u4e3a\u6307\u4ee3\u6d88\u89e3\u3002 \u4f5c\u7528\uff1a\u786e\u4fdd\u6570\u636e\u4e00\u81f4\u6027\uff0c\u907f\u514d\u5728\u56fe\u8c31\u4e2d\u751f\u6210\u6eb6\u4e8e\u6216\u8005\u77db\u76fe\u7684\u8282\u70b9\u3002 \u5b9e\u4f53\u6d88\u6b67\uff08Entity Disambiguation\uff09 \u5b9e\u4f53\u6d88\u6b67\u662f\u6307\u6839\u636e\u4e0a\u4e0b\u6587\u4fe1\u606f\u6765\u89e3\u51b3\u540c\u4e00\u540d\u79f0\u53ef\u80fd\u6307\u4ee3\u591a\u4e2a\u4e0d\u540c\u5bf9\u8c61\u7684\u95ee\u9898\u3002\u5176\u4e3b\u8981\u76ee\u6807\u662f\u786e\u5b9a\u6587\u672c\u4e2d\u63d0\u5230\u7684\u5177\u4f53\u5bf9\u8c61\uff0c\u4ee5\u6d88\u9664\u6b67\u4e49\u3002 \u6838\u5fc3\u4efb\u52a1\u5c31\u662f\u89e3\u51b3\"\u4e00\u8bcd\u591a\u4e49\"\u7684\u95ee\u9898! \u4f5c\u7528\uff1a\u5c06\u4e0d\u540c\u6765\u6e90\u7684\u76f8\u540c\u5b9e\u4f53\u5408\u5e76\uff0c\u907f\u514d\u5728\u77e5\u8bc6\u56fe\u8c31\u4e2d\u751f\u6210\u91cd\u590d\u7684\u8282\u70b9\uff1b\u786e\u4fdd\u540c\u4e00\u5b9e\u4f53\u5728\u4e0d\u540c\u4e0a\u4e0b\u6587\u4e2d\u7684\u4e00\u81f4\u6027\uff0c\u63d0\u9ad8\u6570\u636e\u8d28\u91cf\u3002 \u5b9e\u4f53\u7edf\u4e00\uff08Entity Normalization\uff09 \u5b9e\u4f53\u7edf\u4e00\u662f\u6307\u5224\u65ad\u591a\u4e2a\u5b9e\u4f53\u662f\u4e0d\u662f\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f53\uff0c\u76ee\u7684\u662f\u5c06\u6765\u81ea\u4e0d\u540c\u6570\u636e\u6e90\u4e2d\u7684\u540c\u4e00\u5b9e\u4f53\u8fdb\u884c\u8bc6\u522b\u548c\u5408\u5e76\u3002 \u4f5c\u7528\uff1a\u786e\u4fdd\u5728\u77e5\u8bc6\u56fe\u8c31\u4e2d\u540c\u4e00\u5b9e\u4f53\u4ec5\u6709\u4e00\u4e2a\u8868\u793a\u3002 \u5173\u7cfb\u5bf9\u9f50\uff08Relation Alignment\uff09 \u4e0d\u540c\u6570\u636e\u6e90\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u63cf\u8ff0\u76f8\u540c\u7684\u5173\u7cfb\uff0c\u5173\u7cfb\u5bf9\u9f50\u7684\u76ee\u7684\uff1a\u5c06\u4e0d\u540c\u6570\u636e\u6e90\u4e2d\u8868\u793a\u76f8\u540c\u7684\u5173\u7cfb\u8fdb\u884c\u5bf9\u9f50\u548c\u878d\u5408\u3002 \u4f5c\u7528\uff1a\u907f\u514d\u5728\u77e5\u8bc6\u56fe\u8c31\u4e2d\u76f8\u540c\u5173\u7cfb\u95f4\u6570\u636e\u91cd\u590d\u3002","title":"1 \u77e5\u8bc6\u878d\u5408\uff08Knowledge Fusion\uff09"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#2","text":"\u5b9e\u4f53\u6d88\u6b67\u7684\u672c\u8d28\u5728\u4e8e\u4e00\u4e2a\u5355\u8bcd\u5f88\u53ef\u80fd\u6709\u591a\u4e2a\u610f\u601d\uff0c\u4e5f\u5c31\u662f\u5728\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u4e2d\u6240\u8868\u8fbe\u7684\u542b\u4e49\u53ef\u80fd\u4e0d\u592a\u4e00\u6837\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u9996\u5148\u6211\u4eec\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u8fd9\u79cd\u5b9e\u4f53\u5e93\uff1a id \u5b9e\u4f53\u540d\u79f0 \u5b9e\u4f53\u63cf\u8ff0 1001 \u82f9\u679c \u82f9\u679c\u516c\u53f8\u6ca1\u51e0\u5e74 1002 \u82f9\u679c \u6c34\u679c\u7684\u4e00\u79cd\uff0c\u4e00\u822c\u4ea7\u81ea\u4e8e\u3002\u3002\u3002 \u5f53\u6211\u4eec\u62ff\u5230text\u65f6\uff0c\u6bd4\u5982\u201c\u4eca\u5929\u82f9\u679c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a\u201d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b9e\u4f53\u5e93\u4e2d\u7684\u5b9e\u4f53\u63cf\u8ff0\uff0c\u5168\u90e8\u8f6c\u6362\u4e3a\u5411\u91cf\u3002 [\u4eca\u5929\uff0c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a] \u21d2 \u5411\u91cf(tf-idf) \uff1b \u6c34\u679c\u4e2d\u7684\u4e00\u79cd,\u4e00\u822c\u4ea7\u81ea\u4e8e \u21d2 \u5411\u91cf(tf-idf)\uff1b \u7f8e\u56fd\u4e00\u5bb6\u9ad8\u79d1\u6280\u516c\u53f8\uff0c\u7ecf\u5178\u7684\u4ea7\u54c1\u6709iphone \u624b\u673a \u21d2 \u5411\u91cf(tf-idf) \u57fa\u4e8e\u4e0a\u8ff0\u5411\u91cf\u505a\u76f8\u4f3c\u5ea6\u7684\u8ba1\u7b97\uff0c\u5982\u679cS1>S2 \u5206\u7c7b\u6210Fruit, \u53cd\u4e4b\u5206\u7c7b\u6210\u82f9\u679c\u516c\u53f8","title":"2 \u5b9e\u4f53\u6d88\u5c90"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#3","text":"\u5b9e\u4f53\u7edf\u4e00\u662f\u6307\u5224\u65ad\u591a\u4e2a\u5b9e\u4f53\u662f\u4e0d\u662f\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f53\uff0c\u5176\u5b9e\u8fd9\u79cd\u60c5\u51b5\u4e5f\u6bd4\u8f83\u5e38\u89c1\uff0c\u6bd4\u5982\u5927\u5bb6\u5728\u586b\u5199\u5730\u5740\u7684\u65f6\u5019\uff0c\u6709\u5f88\u591a\u79cd\u5199\u6cd5\u4f46\u6307\u7684\u662f\u540c\u4e00\u4e2a\u5730\u5740\uff0c\u8fd9\u4e9b\u90fd\u662f\u5b9e\u4f53\u7edf\u4e00\u8981\u505a\u7684\u5de5\u4f5c\u3002 \u5b9e\u73b0\u65b9\u6cd5\uff1a 1.\u8ba1\u7b97\u4e24\u4e2a\u5b9e\u4f53\uff08\u5b57\u7b26\u4e32\uff09\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\uff0c\u4e00\u822c\u4f7f\u7528\u7f16\u8f91\u8ddd\u79bb\u5373\u53ef\uff0c\u8bbe\u5b9a\u9608\u503c\uff0c\u5224\u65ad\u662f\u5426\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f53\u3002 2.\u57fa\u4e8e\u89c4\u5219\uff1a\u6839\u636e\u9886\u57df\u4e13\u5bb6\u63d0\u4f9b\u7684\u89c4\u5219\uff0c\u5982\u5bf9\u540c\u4e49\u8bcd\u6216\u7f29\u5199\u7684\u6620\u5c04\u3002 3.\u57fa\u4e8e\u6709\u76d1\u7763\u7684\u5b66\u4e60\u65b9\u6cd5\uff1a\u8bad\u7ec3\u6a21\u578b\u81ea\u52a8\u5224\u65ad\u5b9e\u4f53\u662f\u5426\u76f8\u540c\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff08\u57fa\u4e8e\u89c4\u5219\uff09 \u5047\u8bbe\u4ece \u4e0d\u540c\u6570\u636e\u6e90\u62bd\u53d6\u51fa\u4e24\u4e2a\u5b9e\u4f53 \u6570\u636e\u6e901: \u767e\u5ea6\u6709\u9650\u516c\u53f8 \u6570\u636e\u6e902: \u767e\u5ea6\u79d1\u6280\u6709\u9650\u516c\u53f8 \u5b9e\u4f53\u7edf\u4e00\u6b65\u9aa4\uff1a \u6211\u4eec\u901a\u8fc7\u4eba\u5de5\u7684\u8bbe\u8ba1\u4e00\u4e9b\u5e93\uff0c\u6216\u8005\u8bf4\u662f\u4e00\u4e9b\u8bcd\u5178\uff0c\u8fd9\u4e9b\u5e93\u5305\u542b\u76f8\u540c\u5b9e\u4f53\u7684\u7279\u70b9\uff1a \u8bcd\u51781\uff1a\u516c\u53f8\u3001\u6709\u9650\u516c\u53f8\u3001\u5206\u516c\u53f8\u2026 \u8bcd\u51782\uff1a\u5317\u4eac\uff0c\u5929\u6d25\uff0c\u4e0a\u6d77\u2026 \u8bcd\u51783\uff1a\u79d1\u6280\uff0c\u6280\u672f\u2026 \u5982\u679c\u5b9e\u4f53\u4e2d\u7684\u8bcd\u51fa\u73b0\u5728\u5e93\u4e2d\u5c06\u5176\u5220\u6389 1\u3001\u767e\u5ea6\u6709\u9650\u516c\u53f8\u2014\u2014\u4f5c\u4e3a\u539f\u578b\uff0c\u5220\u6389\u51fa\u73b0\u5728\u8bcd\u5178\u4e2d\u7684\u8bcd\u540e\u4e3a\uff1a\u767e\u5ea6 2\u3001\u767e\u5ea6\u79d1\u6280\u6709\u9650\u516c\u53f8 \u2014\u5220\u6389\u51fa\u73b0\u8bcd\u5178\u4e2d\u7684\u8bcd\u540e\u4e3a\uff1a\u767e\u5ea6 3\u3001\u5224\u5b9a\u76f8\u540c\u5b9e\u4f53 3.\u57fa\u4e8e\u6709\u76d1\u7763\u7684\u5b66\u4e60\u65b9\u6cd5\uff1a\u8bad\u7ec3\u6a21\u578b\u81ea\u52a8\u5224\u65ad\u5b9e\u4f53\u662f\u5426\u76f8\u540c\u3002 \u76f4\u63a5\u8bad\u7ec3\u6a21\u578b\u8fdb\u884c\u4e8c\u5206\u7c7b\uff0c\u5224\u65ad\u662f\u5426\u76f8\u5173","title":"3 \u5b9e\u4f53\u7edf\u4e00"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#4","text":"\u4e0d\u540c\u6570\u636e\u6e90\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u63cf\u8ff0\u76f8\u540c\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u9700\u8981\u5c06\u4e0d\u540c\u6570\u636e\u6e90\u4e2d\u8868\u793a\u76f8\u540c\u7684\u5173\u7cfb\u8fdb\u884c\u5bf9\u9f50\u548c\u878d\u5408\u3002 \u5b9e\u73b0\u65b9\u6cd5 \u5173\u7cfb\u540c\u4e49\u8bcd\u6620\u5c04\uff1a\u6839\u636e\u5df2\u77e5\u7684\u540c\u4e49\u8bcd\u8868\u6216\u901a\u8fc7\u4e0a\u4e0b\u6587\u5206\u6790\uff0c\u7edf\u4e00\u8868\u793a\u76f8\u540c\u7684\u5173\u7cfb\u3002 \u57fa\u4e8e\u4e0a\u4e0b\u6587\u7684\u5173\u7cfb\u5bf9\u9f50\uff1a\u901a\u8fc7\u5206\u6790\u5173\u7cfb\u7684\u4e0a\u4e0b\u6587\uff0c\u5982\u4e0e\u54ea\u4e9b\u5b9e\u4f53\u53d1\u751f\u5173\u7cfb\uff0c\u6765\u63a8\u65ad\u4e24\u4e2a\u5173\u7cfb\u662f\u5426\u7b49\u4ef7\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u5047\u8bbe\u4ece\u4e0d\u540c\u6570\u636e\u6e90\u83b7\u53d6\u5230\u4e24\u6761\u5173\u7cfb\uff1a \u6570\u636e\u6e901\uff1a <John, is married to, Jane> \u6570\u636e\u6e902\uff1a <John, spouse of, Jane> \u5bf9\u9f50\u6b65\u9aa4\uff1a \u540c\u4e49\u8bcd\u6620\u5c04\uff1a\u901a\u8fc7\u5173\u7cfb\u540c\u4e49\u8bcd\u8868\uff0c\u8bc6\u522b\u51fa\u201cis married to\u201d\u548c\u201cspouse of\u201d\u662f\u540c\u4e49\u8bcd\uff0c\u8868\u793a\u76f8\u540c\u7684\u5a5a\u59fb\u5173\u7cfb\u3002 \u4e0a\u4e0b\u6587\u5206\u6790\uff1a\u68c0\u67e5\u4e24\u6761\u5173\u7cfb\u4e2d\u7684\u5b9e\u4f53\uff0c\u53d1\u73b0\u4e24\u6761\u5173\u7cfb\u6d89\u53ca\u76f8\u540c\u7684\u5b9e\u4f53\u201cJohn\u201d\u548c\u201cJane\u201d\u3002 \u7ed3\u679c\uff1a\u4e24\u6761\u5173\u7cfb\u88ab\u5408\u5e76\u4e3a <John, is married to, Jane> \u3002","title":"4 \u5173\u7cfb\u5bf9\u9f50"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/01-%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#_3","text":"\u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5728\u77e5\u8bc6\u878d\u5408\u76f8\u5173\u77e5\u8bc6\uff0c\u77e5\u8bc6\u878d\u5408\u76ee\u7684\u662f\u89e3\u51b3\u5f02\u6784\u6570\u636e\u6e90\u4e4b\u95f4\u7684\u51b2\u7a81\u548c\u4e0d\u4e00\u81f4\uff0c\u786e\u4fdd\u6700\u7ec8\u7684\u77e5\u8bc6\u56fe\u8c31\u5177\u6709\u4e00\u81f4\u6027\u3001\u5b8c\u6574\u6027\u548c\u51c6\u786e\u6027\u3002\u901a\u8fc7\u5b9e\u4f53\u5bf9\u9f50\u3001\u5173\u7cfb\u5bf9\u9f50\u3001\u6570\u636e\u51b2\u7a81\u89e3\u51b3\u3001\u8bed\u4e49\u4e00\u81f4\u6027\u7ef4\u62a4\u7b49\u6280\u672f\u624b\u6bb5\uff0c\u77e5\u8bc6\u56fe\u8c31\u53ef\u4ee5\u4ece\u591a\u4e2a\u6570\u636e\u6e90\u4e2d\u63d0\u53d6\u548c\u878d\u5408\u77e5\u8bc6\uff0c\u5e76\u901a\u8fc7\u63a8\u7406\u53d1\u73b0\u65b0\u77e5\u8bc6\uff0c\u5b9e\u73b0\u77e5\u8bc6\u7684\u5168\u9762\u6574\u5408\u4e0e\u5e94\u7528\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/02-%E5%AE%9E%E4%BD%93%E6%B6%88%E6%AD%A7%E4%BB%BB%E5%8A%A1.html","text":"\u5b9e\u4f53\u6d88\u6b67\u5e94\u7528 \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3\u5b9e\u4f53\u6d88\u6b67\u7684\u601d\u60f3\u548c\u539f\u7406 \u638c\u63e1\u5b9e\u73b0\u5b9e\u4f53\u6d88\u6b67\u7684\u4ee3\u7801 1 \u5b9e\u4f53\u6d88\u5c90 \u00b6 \u5b9e\u4f53\u6d88\u6b67\u7684\u672c\u8d28\u5728\u4e8e\u4e00\u4e2a\u5355\u8bcd\u5f88\u53ef\u80fd\u6709\u591a\u4e2a\u610f\u601d\uff0c\u4e5f\u5c31\u662f\u5728\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u4e2d\u6240\u8868\u8fbe\u7684\u542b\u4e49\u53ef\u80fd\u4e0d\u592a\u4e00\u6837\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u9996\u5148\u6211\u4eec\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u8fd9\u79cd\u5b9e\u4f53\u5e93\uff1a id \u5b9e\u4f53\u540d\u79f0 \u5b9e\u4f53\u63cf\u8ff0 1001 \u82f9\u679c \u82f9\u679c\u516c\u53f8\u6ca1\u51e0\u5e74 1002 \u82f9\u679c \u6c34\u679c\u7684\u4e00\u79cd\uff0c\u4e00\u822c\u4ea7\u81ea\u4e8e\u3002\u3002\u3002 \u5f53\u6211\u4eec\u62ff\u5230text\u65f6\uff0c\u6bd4\u5982\u201c\u4eca\u5929\u82f9\u679c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a\u201d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b9e\u4f53\u5e93\u4e2d\u7684\u5b9e\u4f53\u63cf\u8ff0\uff0c\u5168\u90e8\u8f6c\u6362\u4e3a\u5411\u91cf\u3002 [\u4eca\u5929\uff0c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a] \u21d2 \u5411\u91cf(tf-idf) \uff1b\u6c34\u679c\u4e2d\u7684\u4e00\u79cd,\u4e00\u822c\u4ea7\u81ea\u4e8e \u21d2 \u5411\u91cf(tf-idf)\uff1b\u7f8e\u56fd\u4e00\u5bb6\u9ad8\u79d1\u6280\u516c\u53f8\uff0c\u7ecf\u5178\u7684\u4ea7\u54c1\u6709iphone \u624b\u673a \u21d2 \u5411\u91cf(tf-idf) \u57fa\u4e8e\u4e0a\u8ff0\u5411\u91cf\u505a\u76f8\u4f3c\u5ea6\u7684\u8ba1\u7b97\uff0c\u5982\u679cS1>S2 \u5206\u7c7b\u6210Fruit, \u53cd\u4e4b\u5206\u7c7b\u6210\u82f9\u679c\u516c\u53f8 2 \u6848\u4f8b\u4ecb\u7ecd \u00b6 \u5c06\u53e5\u4e2d\u8bc6\u522b\u7684\u5b9e\u4f53\u4e0e\u77e5\u8bc6\u5e93\u4e2d\u5b9e\u4f53\u8fdb\u884c\u5339\u914d\uff0c\u89e3\u51b3\u5b9e\u4f53\u6b67\u4e49\u95ee\u9898\u3002 \u6570\u636e\u4ecb\u7ecd \u5728data/entity_disambiguation\u76ee\u5f55\u4e2d\uff0c\u6709\u4e24\u4e2acsv\u6587\u4ef6\uff0c\u5176\u4e2dentity_list.csv\u662f\u5df2\u7ecf\u5b58\u5728\u7684\u771f\u5b9e\u5b9e\u4f53\u4fe1\u606f\uff0cvalid_data.csv\u662f\u9700\u8981\u6d88\u6b67\u7684\u8bed\u53e5\u3002 entity_list.csv\u6570\u636e\u683c\u5f0f entity_id,entity_name,desc 1001,\u5c0f\u7c73|\u5c0f\u7c73\u516c\u53f8|\u5c0f\u7c73\u79d1\u6280\u6709\u9650\u8d23\u4efb\u516c\u53f8|XIAOMI,\"\u5317\u4eac\u5c0f\u7c73\u79d1\u6280\u6709\u9650\u8d23\u4efb\u516c\u53f8\u6210\u7acb\u4e8e2010\u5e743\u67083\u65e5 [1] \uff0c\u662f\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u667a\u80fd\u786c\u4ef6\u548c\u7535\u5b50\u4ea7\u54c1\u7814\u53d1\u7684\u79fb\u52a8\u4e92\u8054\u7f51\u516c\u53f8\uff0c\u540c\u65f6\u4e5f\u662f\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u9ad8\u7aef\u667a\u80fd\u624b\u673a\u3001\u4e92\u8054\u7f51\u7535\u89c6\u4ee5\u53ca\u667a\u80fd\u5bb6\u5c45\u751f\u6001\u94fe\u5efa\u8bbe\u7684\u521b\u65b0\u578b\u79d1\u6280\u4f01\u4e1a\u3002 [2] \u4e3a\u53d1\u70e7\u800c\u751f\u201d\u662f\u5c0f\u7c73\u7684\u4ea7\u54c1\u6982\u5ff5\u3002\u5c0f\u7c73\u516c\u53f8\u521b\u9020\u4e86\u7528\u4e92\u8054\u7f51\u6a21\u5f0f\u5f00\u53d1\u624b\u673a\u64cd\u4f5c\u7cfb\u7edf\u3001\u53d1\u70e7\u53cb\u53c2\u4e0e\u5f00\u53d1\u6539\u8fdb\u7684\u6a21\u5f0f\u3002\u5c0f\u7c73\u8fd8\u662f\u7ee7\u82f9\u679c\u3001\u4e09\u661f\u3001\u534e\u4e3a\u4e4b\u540e\u7b2c\u56db\u5bb6\u62e5\u6709\u624b\u673a\u82af\u7247\u81ea\u7814\u80fd\u529b\u7684\u79d1\u6280\u516c\u53f8\u3002\" 1002,\u5c0f\u7c73,\u5c0f\u7c73\uff0c\u539f\u540d\uff1a\u7c9f\uff0c\u4e5f\u79f0\u4f5c\u7cb1\u3001\u72d7\u5c3e\u8349\u3001\u9ec4\u7c9f\u3001\u7c9f\u7c73\uff0c\u62c9\u4e01\u6587\u540d\uff1aSetaria italica (L.) Beauv. var. germanica (Mill.) Schrad. \u79be\u672c\u79d1\u3001\u72d7\u5c3e\u8349\u5c5e\u4e00\u5e74\u751f\u8349\u672c\uff0c\u987b\u6839\u7c97\u5927\uff0c\u79c6\u7c97\u58ee\uff0c\u7c9f\u662f\u8c37\u5b50\u53bb\u76ae\u540e\u7684\u7ed3\u679c\uff0c\u8c37\u5b50\u662f\u8c37\u7c7b\u690d\u7269\uff0c\u79be\u6728\u672c\u7684\u4e00\u79cd\uff0c\u7c9f\u7684\u8425\u517b\u4ef7\u503c\u5f88\u9ad8\uff0c\u542b\u4e30\u5bcc\u7684\u86cb\u767d\u8d28\u548c\u8102\u80aa\u548c\u7ef4\u751f\u7d20\uff0c\u5b83\u4e0d\u4ec5\u4f9b\u98df\u7528\uff0c\u5165\u836f\u6709\u6e05\u70ed\u3001\u6e05\u6e34\uff0c\u6ecb\u9634\uff0c\u8865\u813e\u80be\u548c\u80a0\u80c3\uff0c\u5229\u5c0f\u4fbf\u3001\u6cbb\u6c34\u6cfb\u7b49\u529f\u6548\uff0c\u53c8\u53ef\u917f\u9152\u3002\u5176\u830e\u53f6\u53c8\u662f\u7272\u755c\u7684\u4f18\u7b49\u9972\u6599\uff0c\u5b83\u542b\u7c97\u86cb\u767d\u8d285-7%\uff0c\u8d85\u8fc7\u4e00\u822c\u7267\u8349\u7684\u542b\u91cf1.5-2\u500d\uff0c\u800c\u4e14\u7ea4\u7ef4\u7d20\u5c11\uff0c\u8d28\u5730\u8f83\u67d4\u8f6f\uff0c\u4e3a\u9aa1\u3001\u9a6c\u6240\u559c\u98df\uff1b\u5176\u8c37\u7ce0\u53c8\u662f\u732a\u3001\u9e21\u7684\u826f\u597d\u9972\u6599\u3002 1003,\u5c0f\u7c73,\u5c0f\u7c73\u662f\u5728\u7535\u89c6\u5267\u300a\u6b66\u6797\u5916\u4f20\u300b\u4e2d\u767b\u573a\u7684\u6b21\u8981\u4eba\u7269\uff0c\u540c\u798f\u5ba2\u6808\u95e8\u53e3\u7684\u4e5e\u4e10\uff0c\u4e10\u5e2e\u56db\u888b\u5f1f\u5b50\u3002\u4ed6\u662f\u4e00\u4e2a\u6709\u4f11\u606f\u65e5\u7684\u4e5e\u4e10\uff0c\u6bcf\u9022\u521d\u4e00\u5341\u4e94\uff0c\u5c0f\u7c73\u81ea\u5df1\u7ed9\u81ea\u5df1\u653e\u5047\uff0c\u5982\u679c\u4f60\u628a\u94dc\u677f\u6254\u5230\u4ed6\u7684\u7834\u7897\u91cc\uff0c\u4ed6\u4f1a\u6beb\u4e0d\u72b9\u8c6b\u8fd8\u7ed9\u4f60\u3002\u4e0d\u8fc7\u4f60\u53ef\u522b\u4ee5\u4e3a\u4ed6\u5c31\u8fd9\u4e48\u4e0d\u8981\u4e86\uff0c\u54c8\u54c8\uff0c\u5f53\u4f11\u606f\u65e5\u4e00\u8fc7\uff0c\u5c0f\u7c73\u53c8\u5f00\u5de5\u65f6\uff0c\u4ed6\u53ef\u662f\u4f1a\u62a2\u56de\u672c\u5c5e\u4e8e\u81ea\u5df1\u7684\u94dc\u677f\u7684\u54e6\uff01 1004,\u82f9\u679c|apple,\"\u82f9\u679c\u662f\u6c34\u679c\u4e2d\u7684\u4e00\u79cd\uff0c\u662f\u8537\u8587\u79d1\u82f9\u679c\u4e9a\u79d1\u82f9\u679c\u5c5e\u690d\u7269\uff0c\u5176\u6811\u4e3a\u843d\u53f6\u4e54\u6728\u3002\u82f9\u679c\u7684\u679c\u5b9e\u5bcc\u542b\u77ff\u7269\u8d28\u548c\u7ef4\u751f\u7d20\uff0c\u662f\u4eba\u4eec\u7ecf\u5e38\u98df\u7528\u7684\u6c34\u679c\u4e4b\u4e00\u3002 entity_list.csv\u683c\u5f0f\u5206\u4e3a\u4e09\u5217\uff0c\u7b2c\u4e00\u5217entity_id\u4ee3\u8868\u5b9e\u4f53\u7684\u7f16\u53f7\uff1b\u7b2c\u4e8c\u5217entity_name\u4e3a\u5b9e\u4f53\u540d\u79f0\uff0c\u7b2c\u4e09\u5217desc\u4e3a\u5b9e\u4f53\u7684\u63cf\u8ff0\u4fe1\u606f\uff0c\u4e0d\u540c\u5217\u4e4b\u95f4\u7528\",\"\u5206\u9694\u5f00\u3002 valid_data.csv\u6570\u636e\u683c\u5f0f id,sentence 1,\"\u4e00\u8bf4\u5230\u534e\u76db\u987f\u7279\u533a\uff08Washington, D.C.\uff09\uff0c\u5927\u5bb6\u5fc3\u4e2d\u6d6e\u73b0\u7684\u4e00\u5b9a\u662f\u6c14\u52bf\u6062\u5b8f\u7684\u7f8e\u56fd\u603b\u7edf\u5b98\u90b8\u2500\u767d\u5bab\uff08White House\uff09\uff0c\u8fd9\u4e2a\u638c\u63a7\u7f8e\u56fd\u3001\u7275\u52a8\u5168\u7403\u653f\u7ecf\u6d3b\u52a8\u7684\u767d\u8272\u5efa\u7b51\uff0c\u4e0d\u4ec5\u5728\u5386\u53f2\u4e0a\u5360\u6709\u4e3e\u8db3\u8f7b\u91cd\u7684\u5730\u4f4d\uff0c\u66f4\u662f\u6bcf\u4e2a\u4eba\u6765\u5230\u534e\u76db\u987f\u7279\u533a\u975e\u53bb\u4e0d\u53ef\u7684\u666f\u70b9\u4e4b\u4e00\u3002\u5230\u8fd9\u91cc\u9664\u4e86\u8ddf\u767d\u5bab\u5408\u7167\uff0c\u7559\u4e0b\u5230\u6b64\u4e00\u6e38\u7684\u8bc1\u636e\u5916\uff0c\u8fd8\u6709\u8bb8\u591a\u91cd\u8981\u5730\u6807\u4e0e\u85cf\u54c1\u4e30\u5bcc\u7684\u535a\u7269\u9986\uff0c\u9519\u8fc7\u8fd9\u4e9b\u666f\u70b9\uff0c\u867d\u4e0d\u81f3\u4e8e\u9057\u61be\u7ec8\u8eab\uff0c\u4f46\u53ef\u80fd\u4e0d\u7b97\u5230\u8fc7\u534e\u76db\u987f\u5594\uff01\" 2,\"\u5f88\u591a\u7684\u7f51\u53cb\u90fd\u4f1a\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u95ee\u9898,\u660e\u660e\u534e\u76db\u987f\u548c\u4e7e\u9686\u6b7b\u5728\u4e86\u540c\u4e00\u5e74,\u4e3a\u4f55\u5374\u7ed9\u4eba\u7684\u611f\u89c9\u4e0d\u662f\u4e00\u4e2a\u65f6\u4ee3\u7684\u4eba\u5462?\" 3,\"1799\u5e7412\u670814\u65e5,\u7f8e\u5229\u575a\u5408\u4f17\u56fd\u7684\u5f00\u56fd\u5143\u52cb\u534e\u76db\u987f\u6e98\u7136\u957f\u901d\u3002\u7136\u540e,\u7f8e\u56fd\u4eba\u5bf9\u5f53\u5e74\u534e\u76db\u987f\u7684\u6b7b\u56e0,\u4ecd\u7136\u5fc3\u5b58\u7591\u8651,\u4e8b\u9694200\u591a\u5e74\u540e,\u4eba\u4eec\u5bf9\u4ed6\u7684\u6b7b\u56e0\u53c8\u6709\u65b0\u7684\u53d1\u73b0\u3002\" valid_data.csv\u683c\u5f0f\u5206\u4e3a\u4e24\u5217\uff0c\u7b2c\u4e00\u5217id\u4ee3\u8868\u8981\u6d88\u5c90\u7684\u5b9e\u4f53\u7f16\u7801id\uff1b\u7b2c\u4e8c\u5217sentence\u63cf\u8ff0\u5b9e\u4f53\u7684\u539f\u59cb\u53e5\u5b50\uff0c\u4e0d\u540c\u5217\u4e4b\u95f4\u7528\",\"\u5206\u5272\u5f00\u3002 \u5b9e\u73b0\u6b65\u9aa4\uff1a \u8bfb\u53d6\u6570\u636e\uff1a\u9996\u5148\u8bfb\u53d6\u5305\u542b\u5b9e\u4f53\u5217\u8868\u7684 entity_list.csv \u548c\u5305\u542b\u5f85\u5904\u7406\u53e5\u5b50\u7684 valid_data.csv \u3002 \u5904\u7406\u5b9e\u4f53\u540d\u79f0\uff1a\u5c06 entity_list.csv \u4e2d\u7684\u5b9e\u4f53\u540d\u79f0\u6dfb\u52a0\u5230\u5206\u8bcd\u8bcd\u5178\u4e2d\uff0c\u786e\u4fdd\u53ef\u4ee5\u5728\u540e\u7eed\u5206\u8bcd\u548c\u5339\u914d\u8fc7\u7a0b\u4e2d\u8bc6\u522b\u8fd9\u4e9b\u5b9e\u4f53\u3002 \u8ba1\u7b97TF-IDF\u7279\u5f81\u77e9\u9635\uff1a\u5c06\u6bcf\u4e2a\u5b9e\u4f53\u7684\u63cf\u8ff0\u901a\u8fc7\u5206\u8bcd\u5904\u7406\u540e\u751f\u6210TF-IDF\u7279\u5f81\u77e9\u9635\uff0c\u7528\u4e8e\u540e\u7eed\u7684\u76f8\u4f3c\u5ea6\u8ba1\u7b97\u3002 \u5339\u914d\u53e5\u5b50\u4e2d\u7684\u5b9e\u4f53\uff1a\u5728 valid_data.csv \u4e2d\u7684\u53e5\u5b50\u4e2d\u627e\u5230\u5173\u952e\u8bcd\uff0c\u5e76\u901a\u8fc7TF-IDF\u76f8\u4f3c\u5ea6\u8ba1\u7b97\u627e\u5230\u4e0e\u5173\u952e\u8bcd\u5339\u914d\u7684\u5b9e\u4f53ID\u3002 \u8f93\u51fa\u7ed3\u679c\uff1a\u5c06\u53e5\u5b50\u4e2d\u5339\u914d\u5230\u7684\u5b9e\u4f53\u53ca\u5176\u4f4d\u7f6e\u4e0e\u5bf9\u5e94\u7684\u5b9e\u4f53ID\u5b58\u50a8\u4e3a\u65b0\u7684CSV\u6587\u4ef6\u3002 \u4ee3\u7801\u5b9e\u73b0 import pandas as pd import numpy as np import os import collections import jieba from sklearn.feature_extraction.text import TfidfVectorizer from sklearn.metrics.pairwise import cosine_similarity # \u83b7\u53d6\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u8def\u5f84 bast_path = os . getcwd () # TODO\uff1a\u5c06entity_list.csv\u4e2d\u5df2\u77e5\u5b9e\u4f53\u7684\u540d\u79f0\u5bfc\u5165\u5206\u8bcd\u8bcd\u5178 # \u8bfb\u53d6\u5b9e\u4f53\u5217\u8868\u6587\u4ef6\uff08entity_list.csv\uff09\uff0c\u5305\u542b\u5b9e\u4f53\u540d\u79f0\u548c\u63cf\u8ff0\u4fe1\u606f entity_data = pd . read_csv ( os . path . join ( bast_path , 'data/entity_disambiguation/entity_list.csv' ), encoding = 'utf-8' ) print ( f 'entity_data--\u300b { entity_data . head () } ' ) # TODO\uff1a\u5bf9\u6bcf\u53e5\u53e5\u5b50\u8bc6\u522b\u5e76\u5339\u914d\u5b9e\u4f53 # \u8bfb\u53d6\u5305\u542b\u5f85\u5904\u7406\u53e5\u5b50\u7684\u6587\u4ef6\uff08valid_data.csv\uff09 valid_data = pd . read_csv ( os . path . join ( bast_path , 'data/entity_disambiguation/valid_data.csv' ), encoding = 'gb18030' ) print ( f 'valid_data--\u300b { valid_data . head () } ' ) # \u5c06\u5b9e\u4f53\u540d\u79f0\u62fc\u63a5\u6210\u4e00\u4e2a\u957f\u5b57\u7b26\u4e32\uff0c\u5e76\u7528'|'\u5206\u9694\uff0c\u7528\u4e8e\u7edf\u8ba1\u5b9e\u4f53\u540d\u79f0\u7684\u51fa\u73b0\u6b21\u6570 s = '' keyword_list = [] for i in entity_data [ 'entity_name' ] . values . tolist (): s += i + '|' # \u7edf\u8ba1\u5b9e\u4f53\u540d\u79f0\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u5982\u679c\u67d0\u4e2a\u540d\u79f0\u51fa\u73b0\u6b21\u6570\u8d85\u8fc7\u4e00\u6b21\uff0c\u5219\u5c06\u5176\u52a0\u5165keyword_list\uff08\u5173\u952e\u8bcd\u5217\u8868\uff09 for k , v in collections . Counter ( s . split ( '|' )) . items (): if v > 1 : keyword_list . append ( k ) # \u751f\u6210TF-IDF\u77e9\u9635 # \u5bf9\u5b9e\u4f53\u7684\u63cf\u8ff0\u4fe1\u606f\u8fdb\u884c\u5206\u8bcd\uff0c\u5c06\u6bcf\u4e2a\u5b9e\u4f53\u63cf\u8ff0\u5206\u8bcd\u540e\u7684\u7ed3\u679c\u5b58\u5165train_sentence\u5217\u8868\u4e2d train_sentence = [] for i in entity_data [ 'desc' ] . values : train_sentence . append ( ' ' . join ( jieba . cut ( i ))) print ( len ( train_sentence )) # \u521d\u59cb\u5316TF-IDF\u5411\u91cf\u5316\u5de5\u5177 vectorizer = TfidfVectorizer () # \u5c06\u5b9e\u4f53\u63cf\u8ff0\u4fe1\u606f\u8f6c\u6362\u4e3aTF-IDF\u7279\u5f81\u77e9\u9635 X = vectorizer . fit_transform ( train_sentence ) print ( X ) print ( X . toarray () . shape ) # \u5b9a\u4e49\u83b7\u53d6\u5b9e\u4f53ID\u7684\u51fd\u6570\uff0c\u6839\u636e\u7ed9\u5b9a\u7684\u53e5\u5b50\u8ba1\u7b97\u5176\u4e0e\u5b9e\u4f53\u63cf\u8ff0\u7684TF-IDF\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff0c\u8fd4\u56de\u6700\u76f8\u4f3c\u7684\u5b9e\u4f53ID def get_entityid ( sentence ): id_start = 1001 # \u5047\u8bbe\u5b9e\u4f53ID\u4ece1001\u5f00\u59cb a_list = [ ' ' . join ( jieba . cut ( sentence ))] # \u5bf9\u8f93\u5165\u53e5\u5b50\u5206\u8bcd print ( f 'a_list--\u300b { a_list } ' ) print ( vectorizer . transform ( a_list )) # \u5c06\u53e5\u5b50\u8f6c\u6362\u4e3aTF-IDF\u7279\u5f81 print ( cosine_similarity ( vectorizer . transform ( a_list ), X )) # \u8ba1\u7b97\u53e5\u5b50\u4e0e\u6240\u6709\u5b9e\u4f53\u63cf\u8ff0\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6 res = cosine_similarity ( vectorizer . transform ( a_list ), X )[ 0 ] # \u83b7\u53d6\u76f8\u4f3c\u5ea6\u7ed3\u679c top_idx = np . argsort ( res )[ - 1 ] # \u83b7\u53d6\u6700\u76f8\u4f3c\u7684\u5b9e\u4f53\u5728TF-IDF\u77e9\u9635\u4e2d\u7684\u7d22\u5f15 print ( f 'np.argsort(res)==> { np . argsort ( res ) } ' ) return id_start + top_idx # \u8fd4\u56de\u5b9e\u4f53ID # TODO\uff1a\u5c06\u8ba1\u7b97\u7ed3\u679c\u5b58\u5165\u6587\u4ef6 print ( f 'keyword_list--\u300b { keyword_list } ' ) # \u521d\u59cb\u5316\u884c\u8ba1\u6570\u5668\u548c\u7ed3\u679c\u5217\u8868 row = 0 result_data = [] neighbor_sentence = '' # \u904d\u5386valid_data\u4e2d\u7684\u6bcf\u4e00\u4e2a\u53e5\u5b50\uff0c\u5904\u7406\u5176\u4e2d\u7684\u5173\u952e\u8bcd for sentence in valid_data [ 'sentence' ]: print ( f 'sentence--\u300b { sentence } ' ) res = [ row ] # \u521d\u59cb\u5316\u7ed3\u679c\u5217\u8868\uff0c\u9996\u5148\u6dfb\u52a0\u5f53\u524d\u884c\u53f7 for keyword in keyword_list : if keyword in sentence : # \u5982\u679c\u53e5\u5b50\u4e2d\u5305\u542b\u5173\u952e\u8bcd print ( f 'keyword--\u300b { keyword } ' ) k_len = len ( keyword ) # \u8ba1\u7b97\u5173\u952e\u8bcd\u7684\u957f\u5ea6 print ( f 'k_len--\u300b { k_len } ' ) ss = '' for i in range ( len ( sentence ) - k_len + 1 ): if sentence [ i : i + k_len ] == keyword : # \u5982\u679c\u5728\u53e5\u5b50\u4e2d\u627e\u5230\u5173\u952e\u8bcd s = str ( i ) + '-' + str ( i + k_len ) + ':' # \u83b7\u53d6\u5173\u952e\u8bcd\u5728\u53e5\u5b50\u4e2d\u7684\u4f4d\u7f6e\uff08\u5982\"0-5\"\uff09 print ( f 's--> { s } ' ) # \u83b7\u53d6\u5305\u542b\u5173\u952e\u8bcd\u7684\u90bb\u8fd1\u53e5\u5b50\uff0c\u7528\u4e8e\u8ba1\u7b97\u5b9e\u4f53\u76f8\u4f3c\u5ea6 if i > 10 and i + k_len < len ( sentence ) - 9 : neighbor_sentence = sentence [ i - 10 : i + k_len + 9 ] elif i < 10 : neighbor_sentence = sentence [: 20 ] elif i + k_len > len ( sentence ) - 9 : neighbor_sentence = sentence [ - 20 :] # \u8c03\u7528get_entityid\u51fd\u6570\uff0c\u83b7\u53d6\u4e0e\u90bb\u8fd1\u53e5\u5b50\u6700\u76f8\u4f3c\u7684\u5b9e\u4f53ID s += str ( get_entityid ( neighbor_sentence )) ss += s + '|' # \u5c06\u4f4d\u7f6e\u548c\u5b9e\u4f53ID\u62fc\u63a5\u6210\u5b57\u7b26\u4e32 res . append ( ss [: - 1 ]) # \u5c06\u5904\u7406\u7ed3\u679c\u52a0\u5165\u5230\u5f53\u524d\u884c\u7684\u7ed3\u679c\u4e2d break result_data . append ( res ) # \u5c06\u5f53\u524d\u53e5\u5b50\u7684\u5904\u7406\u7ed3\u679c\u52a0\u5165\u7ed3\u679c\u5217\u8868 row += 1 # \u884c\u8ba1\u6570\u5668\u52a01 # \u5c06\u7ed3\u679c\u4fdd\u5b58\u4e3aCSV\u6587\u4ef6\uff0c\u6587\u4ef6\u8def\u5f84\u4e3a'entity_disambiguation_submit.csv' pd . DataFrame ( result_data ) . to_csv ( 'entity_disambiguation_submit.csv' , index = False ) \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5b9e\u4f53\u6d88\u5c90\u7684\u539f\u7406\uff0c\u4ee5\u53ca\u5982\u4f55\u901a\u8fc7\u4ee3\u7801\u5b9e\u73b0\u5b9e\u4f53\u6d88\u5c90\u4efb\u52a1\u3002","title":"5.2 \u5b9e\u4f53\u6d88\u6b67\u4efb\u52a1"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/02-%E5%AE%9E%E4%BD%93%E6%B6%88%E6%AD%A7%E4%BB%BB%E5%8A%A1.html#_1","text":"","title":"\u5b9e\u4f53\u6d88\u6b67\u5e94\u7528"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/02-%E5%AE%9E%E4%BD%93%E6%B6%88%E6%AD%A7%E4%BB%BB%E5%8A%A1.html#_2","text":"\u7406\u89e3\u5b9e\u4f53\u6d88\u6b67\u7684\u601d\u60f3\u548c\u539f\u7406 \u638c\u63e1\u5b9e\u73b0\u5b9e\u4f53\u6d88\u6b67\u7684\u4ee3\u7801","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/02-%E5%AE%9E%E4%BD%93%E6%B6%88%E6%AD%A7%E4%BB%BB%E5%8A%A1.html#1","text":"\u5b9e\u4f53\u6d88\u6b67\u7684\u672c\u8d28\u5728\u4e8e\u4e00\u4e2a\u5355\u8bcd\u5f88\u53ef\u80fd\u6709\u591a\u4e2a\u610f\u601d\uff0c\u4e5f\u5c31\u662f\u5728\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u4e2d\u6240\u8868\u8fbe\u7684\u542b\u4e49\u53ef\u80fd\u4e0d\u592a\u4e00\u6837\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a \u9996\u5148\u6211\u4eec\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u8fd9\u79cd\u5b9e\u4f53\u5e93\uff1a id \u5b9e\u4f53\u540d\u79f0 \u5b9e\u4f53\u63cf\u8ff0 1001 \u82f9\u679c \u82f9\u679c\u516c\u53f8\u6ca1\u51e0\u5e74 1002 \u82f9\u679c \u6c34\u679c\u7684\u4e00\u79cd\uff0c\u4e00\u822c\u4ea7\u81ea\u4e8e\u3002\u3002\u3002 \u5f53\u6211\u4eec\u62ff\u5230text\u65f6\uff0c\u6bd4\u5982\u201c\u4eca\u5929\u82f9\u679c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a\u201d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b9e\u4f53\u5e93\u4e2d\u7684\u5b9e\u4f53\u63cf\u8ff0\uff0c\u5168\u90e8\u8f6c\u6362\u4e3a\u5411\u91cf\u3002 [\u4eca\u5929\uff0c\u53d1\u5e03\u4e86\u65b0\u7684\u624b\u673a] \u21d2 \u5411\u91cf(tf-idf) \uff1b\u6c34\u679c\u4e2d\u7684\u4e00\u79cd,\u4e00\u822c\u4ea7\u81ea\u4e8e \u21d2 \u5411\u91cf(tf-idf)\uff1b\u7f8e\u56fd\u4e00\u5bb6\u9ad8\u79d1\u6280\u516c\u53f8\uff0c\u7ecf\u5178\u7684\u4ea7\u54c1\u6709iphone \u624b\u673a \u21d2 \u5411\u91cf(tf-idf) \u57fa\u4e8e\u4e0a\u8ff0\u5411\u91cf\u505a\u76f8\u4f3c\u5ea6\u7684\u8ba1\u7b97\uff0c\u5982\u679cS1>S2 \u5206\u7c7b\u6210Fruit, \u53cd\u4e4b\u5206\u7c7b\u6210\u82f9\u679c\u516c\u53f8","title":"1 \u5b9e\u4f53\u6d88\u5c90"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/02-%E5%AE%9E%E4%BD%93%E6%B6%88%E6%AD%A7%E4%BB%BB%E5%8A%A1.html#2","text":"\u5c06\u53e5\u4e2d\u8bc6\u522b\u7684\u5b9e\u4f53\u4e0e\u77e5\u8bc6\u5e93\u4e2d\u5b9e\u4f53\u8fdb\u884c\u5339\u914d\uff0c\u89e3\u51b3\u5b9e\u4f53\u6b67\u4e49\u95ee\u9898\u3002 \u6570\u636e\u4ecb\u7ecd \u5728data/entity_disambiguation\u76ee\u5f55\u4e2d\uff0c\u6709\u4e24\u4e2acsv\u6587\u4ef6\uff0c\u5176\u4e2dentity_list.csv\u662f\u5df2\u7ecf\u5b58\u5728\u7684\u771f\u5b9e\u5b9e\u4f53\u4fe1\u606f\uff0cvalid_data.csv\u662f\u9700\u8981\u6d88\u6b67\u7684\u8bed\u53e5\u3002 entity_list.csv\u6570\u636e\u683c\u5f0f entity_id,entity_name,desc 1001,\u5c0f\u7c73|\u5c0f\u7c73\u516c\u53f8|\u5c0f\u7c73\u79d1\u6280\u6709\u9650\u8d23\u4efb\u516c\u53f8|XIAOMI,\"\u5317\u4eac\u5c0f\u7c73\u79d1\u6280\u6709\u9650\u8d23\u4efb\u516c\u53f8\u6210\u7acb\u4e8e2010\u5e743\u67083\u65e5 [1] \uff0c\u662f\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u667a\u80fd\u786c\u4ef6\u548c\u7535\u5b50\u4ea7\u54c1\u7814\u53d1\u7684\u79fb\u52a8\u4e92\u8054\u7f51\u516c\u53f8\uff0c\u540c\u65f6\u4e5f\u662f\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u9ad8\u7aef\u667a\u80fd\u624b\u673a\u3001\u4e92\u8054\u7f51\u7535\u89c6\u4ee5\u53ca\u667a\u80fd\u5bb6\u5c45\u751f\u6001\u94fe\u5efa\u8bbe\u7684\u521b\u65b0\u578b\u79d1\u6280\u4f01\u4e1a\u3002 [2] \u4e3a\u53d1\u70e7\u800c\u751f\u201d\u662f\u5c0f\u7c73\u7684\u4ea7\u54c1\u6982\u5ff5\u3002\u5c0f\u7c73\u516c\u53f8\u521b\u9020\u4e86\u7528\u4e92\u8054\u7f51\u6a21\u5f0f\u5f00\u53d1\u624b\u673a\u64cd\u4f5c\u7cfb\u7edf\u3001\u53d1\u70e7\u53cb\u53c2\u4e0e\u5f00\u53d1\u6539\u8fdb\u7684\u6a21\u5f0f\u3002\u5c0f\u7c73\u8fd8\u662f\u7ee7\u82f9\u679c\u3001\u4e09\u661f\u3001\u534e\u4e3a\u4e4b\u540e\u7b2c\u56db\u5bb6\u62e5\u6709\u624b\u673a\u82af\u7247\u81ea\u7814\u80fd\u529b\u7684\u79d1\u6280\u516c\u53f8\u3002\" 1002,\u5c0f\u7c73,\u5c0f\u7c73\uff0c\u539f\u540d\uff1a\u7c9f\uff0c\u4e5f\u79f0\u4f5c\u7cb1\u3001\u72d7\u5c3e\u8349\u3001\u9ec4\u7c9f\u3001\u7c9f\u7c73\uff0c\u62c9\u4e01\u6587\u540d\uff1aSetaria italica (L.) Beauv. var. germanica (Mill.) Schrad. \u79be\u672c\u79d1\u3001\u72d7\u5c3e\u8349\u5c5e\u4e00\u5e74\u751f\u8349\u672c\uff0c\u987b\u6839\u7c97\u5927\uff0c\u79c6\u7c97\u58ee\uff0c\u7c9f\u662f\u8c37\u5b50\u53bb\u76ae\u540e\u7684\u7ed3\u679c\uff0c\u8c37\u5b50\u662f\u8c37\u7c7b\u690d\u7269\uff0c\u79be\u6728\u672c\u7684\u4e00\u79cd\uff0c\u7c9f\u7684\u8425\u517b\u4ef7\u503c\u5f88\u9ad8\uff0c\u542b\u4e30\u5bcc\u7684\u86cb\u767d\u8d28\u548c\u8102\u80aa\u548c\u7ef4\u751f\u7d20\uff0c\u5b83\u4e0d\u4ec5\u4f9b\u98df\u7528\uff0c\u5165\u836f\u6709\u6e05\u70ed\u3001\u6e05\u6e34\uff0c\u6ecb\u9634\uff0c\u8865\u813e\u80be\u548c\u80a0\u80c3\uff0c\u5229\u5c0f\u4fbf\u3001\u6cbb\u6c34\u6cfb\u7b49\u529f\u6548\uff0c\u53c8\u53ef\u917f\u9152\u3002\u5176\u830e\u53f6\u53c8\u662f\u7272\u755c\u7684\u4f18\u7b49\u9972\u6599\uff0c\u5b83\u542b\u7c97\u86cb\u767d\u8d285-7%\uff0c\u8d85\u8fc7\u4e00\u822c\u7267\u8349\u7684\u542b\u91cf1.5-2\u500d\uff0c\u800c\u4e14\u7ea4\u7ef4\u7d20\u5c11\uff0c\u8d28\u5730\u8f83\u67d4\u8f6f\uff0c\u4e3a\u9aa1\u3001\u9a6c\u6240\u559c\u98df\uff1b\u5176\u8c37\u7ce0\u53c8\u662f\u732a\u3001\u9e21\u7684\u826f\u597d\u9972\u6599\u3002 1003,\u5c0f\u7c73,\u5c0f\u7c73\u662f\u5728\u7535\u89c6\u5267\u300a\u6b66\u6797\u5916\u4f20\u300b\u4e2d\u767b\u573a\u7684\u6b21\u8981\u4eba\u7269\uff0c\u540c\u798f\u5ba2\u6808\u95e8\u53e3\u7684\u4e5e\u4e10\uff0c\u4e10\u5e2e\u56db\u888b\u5f1f\u5b50\u3002\u4ed6\u662f\u4e00\u4e2a\u6709\u4f11\u606f\u65e5\u7684\u4e5e\u4e10\uff0c\u6bcf\u9022\u521d\u4e00\u5341\u4e94\uff0c\u5c0f\u7c73\u81ea\u5df1\u7ed9\u81ea\u5df1\u653e\u5047\uff0c\u5982\u679c\u4f60\u628a\u94dc\u677f\u6254\u5230\u4ed6\u7684\u7834\u7897\u91cc\uff0c\u4ed6\u4f1a\u6beb\u4e0d\u72b9\u8c6b\u8fd8\u7ed9\u4f60\u3002\u4e0d\u8fc7\u4f60\u53ef\u522b\u4ee5\u4e3a\u4ed6\u5c31\u8fd9\u4e48\u4e0d\u8981\u4e86\uff0c\u54c8\u54c8\uff0c\u5f53\u4f11\u606f\u65e5\u4e00\u8fc7\uff0c\u5c0f\u7c73\u53c8\u5f00\u5de5\u65f6\uff0c\u4ed6\u53ef\u662f\u4f1a\u62a2\u56de\u672c\u5c5e\u4e8e\u81ea\u5df1\u7684\u94dc\u677f\u7684\u54e6\uff01 1004,\u82f9\u679c|apple,\"\u82f9\u679c\u662f\u6c34\u679c\u4e2d\u7684\u4e00\u79cd\uff0c\u662f\u8537\u8587\u79d1\u82f9\u679c\u4e9a\u79d1\u82f9\u679c\u5c5e\u690d\u7269\uff0c\u5176\u6811\u4e3a\u843d\u53f6\u4e54\u6728\u3002\u82f9\u679c\u7684\u679c\u5b9e\u5bcc\u542b\u77ff\u7269\u8d28\u548c\u7ef4\u751f\u7d20\uff0c\u662f\u4eba\u4eec\u7ecf\u5e38\u98df\u7528\u7684\u6c34\u679c\u4e4b\u4e00\u3002 entity_list.csv\u683c\u5f0f\u5206\u4e3a\u4e09\u5217\uff0c\u7b2c\u4e00\u5217entity_id\u4ee3\u8868\u5b9e\u4f53\u7684\u7f16\u53f7\uff1b\u7b2c\u4e8c\u5217entity_name\u4e3a\u5b9e\u4f53\u540d\u79f0\uff0c\u7b2c\u4e09\u5217desc\u4e3a\u5b9e\u4f53\u7684\u63cf\u8ff0\u4fe1\u606f\uff0c\u4e0d\u540c\u5217\u4e4b\u95f4\u7528\",\"\u5206\u9694\u5f00\u3002 valid_data.csv\u6570\u636e\u683c\u5f0f id,sentence 1,\"\u4e00\u8bf4\u5230\u534e\u76db\u987f\u7279\u533a\uff08Washington, D.C.\uff09\uff0c\u5927\u5bb6\u5fc3\u4e2d\u6d6e\u73b0\u7684\u4e00\u5b9a\u662f\u6c14\u52bf\u6062\u5b8f\u7684\u7f8e\u56fd\u603b\u7edf\u5b98\u90b8\u2500\u767d\u5bab\uff08White House\uff09\uff0c\u8fd9\u4e2a\u638c\u63a7\u7f8e\u56fd\u3001\u7275\u52a8\u5168\u7403\u653f\u7ecf\u6d3b\u52a8\u7684\u767d\u8272\u5efa\u7b51\uff0c\u4e0d\u4ec5\u5728\u5386\u53f2\u4e0a\u5360\u6709\u4e3e\u8db3\u8f7b\u91cd\u7684\u5730\u4f4d\uff0c\u66f4\u662f\u6bcf\u4e2a\u4eba\u6765\u5230\u534e\u76db\u987f\u7279\u533a\u975e\u53bb\u4e0d\u53ef\u7684\u666f\u70b9\u4e4b\u4e00\u3002\u5230\u8fd9\u91cc\u9664\u4e86\u8ddf\u767d\u5bab\u5408\u7167\uff0c\u7559\u4e0b\u5230\u6b64\u4e00\u6e38\u7684\u8bc1\u636e\u5916\uff0c\u8fd8\u6709\u8bb8\u591a\u91cd\u8981\u5730\u6807\u4e0e\u85cf\u54c1\u4e30\u5bcc\u7684\u535a\u7269\u9986\uff0c\u9519\u8fc7\u8fd9\u4e9b\u666f\u70b9\uff0c\u867d\u4e0d\u81f3\u4e8e\u9057\u61be\u7ec8\u8eab\uff0c\u4f46\u53ef\u80fd\u4e0d\u7b97\u5230\u8fc7\u534e\u76db\u987f\u5594\uff01\" 2,\"\u5f88\u591a\u7684\u7f51\u53cb\u90fd\u4f1a\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u95ee\u9898,\u660e\u660e\u534e\u76db\u987f\u548c\u4e7e\u9686\u6b7b\u5728\u4e86\u540c\u4e00\u5e74,\u4e3a\u4f55\u5374\u7ed9\u4eba\u7684\u611f\u89c9\u4e0d\u662f\u4e00\u4e2a\u65f6\u4ee3\u7684\u4eba\u5462?\" 3,\"1799\u5e7412\u670814\u65e5,\u7f8e\u5229\u575a\u5408\u4f17\u56fd\u7684\u5f00\u56fd\u5143\u52cb\u534e\u76db\u987f\u6e98\u7136\u957f\u901d\u3002\u7136\u540e,\u7f8e\u56fd\u4eba\u5bf9\u5f53\u5e74\u534e\u76db\u987f\u7684\u6b7b\u56e0,\u4ecd\u7136\u5fc3\u5b58\u7591\u8651,\u4e8b\u9694200\u591a\u5e74\u540e,\u4eba\u4eec\u5bf9\u4ed6\u7684\u6b7b\u56e0\u53c8\u6709\u65b0\u7684\u53d1\u73b0\u3002\" valid_data.csv\u683c\u5f0f\u5206\u4e3a\u4e24\u5217\uff0c\u7b2c\u4e00\u5217id\u4ee3\u8868\u8981\u6d88\u5c90\u7684\u5b9e\u4f53\u7f16\u7801id\uff1b\u7b2c\u4e8c\u5217sentence\u63cf\u8ff0\u5b9e\u4f53\u7684\u539f\u59cb\u53e5\u5b50\uff0c\u4e0d\u540c\u5217\u4e4b\u95f4\u7528\",\"\u5206\u5272\u5f00\u3002 \u5b9e\u73b0\u6b65\u9aa4\uff1a \u8bfb\u53d6\u6570\u636e\uff1a\u9996\u5148\u8bfb\u53d6\u5305\u542b\u5b9e\u4f53\u5217\u8868\u7684 entity_list.csv \u548c\u5305\u542b\u5f85\u5904\u7406\u53e5\u5b50\u7684 valid_data.csv \u3002 \u5904\u7406\u5b9e\u4f53\u540d\u79f0\uff1a\u5c06 entity_list.csv \u4e2d\u7684\u5b9e\u4f53\u540d\u79f0\u6dfb\u52a0\u5230\u5206\u8bcd\u8bcd\u5178\u4e2d\uff0c\u786e\u4fdd\u53ef\u4ee5\u5728\u540e\u7eed\u5206\u8bcd\u548c\u5339\u914d\u8fc7\u7a0b\u4e2d\u8bc6\u522b\u8fd9\u4e9b\u5b9e\u4f53\u3002 \u8ba1\u7b97TF-IDF\u7279\u5f81\u77e9\u9635\uff1a\u5c06\u6bcf\u4e2a\u5b9e\u4f53\u7684\u63cf\u8ff0\u901a\u8fc7\u5206\u8bcd\u5904\u7406\u540e\u751f\u6210TF-IDF\u7279\u5f81\u77e9\u9635\uff0c\u7528\u4e8e\u540e\u7eed\u7684\u76f8\u4f3c\u5ea6\u8ba1\u7b97\u3002 \u5339\u914d\u53e5\u5b50\u4e2d\u7684\u5b9e\u4f53\uff1a\u5728 valid_data.csv \u4e2d\u7684\u53e5\u5b50\u4e2d\u627e\u5230\u5173\u952e\u8bcd\uff0c\u5e76\u901a\u8fc7TF-IDF\u76f8\u4f3c\u5ea6\u8ba1\u7b97\u627e\u5230\u4e0e\u5173\u952e\u8bcd\u5339\u914d\u7684\u5b9e\u4f53ID\u3002 \u8f93\u51fa\u7ed3\u679c\uff1a\u5c06\u53e5\u5b50\u4e2d\u5339\u914d\u5230\u7684\u5b9e\u4f53\u53ca\u5176\u4f4d\u7f6e\u4e0e\u5bf9\u5e94\u7684\u5b9e\u4f53ID\u5b58\u50a8\u4e3a\u65b0\u7684CSV\u6587\u4ef6\u3002 \u4ee3\u7801\u5b9e\u73b0 import pandas as pd import numpy as np import os import collections import jieba from sklearn.feature_extraction.text import TfidfVectorizer from sklearn.metrics.pairwise import cosine_similarity # \u83b7\u53d6\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u8def\u5f84 bast_path = os . getcwd () # TODO\uff1a\u5c06entity_list.csv\u4e2d\u5df2\u77e5\u5b9e\u4f53\u7684\u540d\u79f0\u5bfc\u5165\u5206\u8bcd\u8bcd\u5178 # \u8bfb\u53d6\u5b9e\u4f53\u5217\u8868\u6587\u4ef6\uff08entity_list.csv\uff09\uff0c\u5305\u542b\u5b9e\u4f53\u540d\u79f0\u548c\u63cf\u8ff0\u4fe1\u606f entity_data = pd . read_csv ( os . path . join ( bast_path , 'data/entity_disambiguation/entity_list.csv' ), encoding = 'utf-8' ) print ( f 'entity_data--\u300b { entity_data . head () } ' ) # TODO\uff1a\u5bf9\u6bcf\u53e5\u53e5\u5b50\u8bc6\u522b\u5e76\u5339\u914d\u5b9e\u4f53 # \u8bfb\u53d6\u5305\u542b\u5f85\u5904\u7406\u53e5\u5b50\u7684\u6587\u4ef6\uff08valid_data.csv\uff09 valid_data = pd . read_csv ( os . path . join ( bast_path , 'data/entity_disambiguation/valid_data.csv' ), encoding = 'gb18030' ) print ( f 'valid_data--\u300b { valid_data . head () } ' ) # \u5c06\u5b9e\u4f53\u540d\u79f0\u62fc\u63a5\u6210\u4e00\u4e2a\u957f\u5b57\u7b26\u4e32\uff0c\u5e76\u7528'|'\u5206\u9694\uff0c\u7528\u4e8e\u7edf\u8ba1\u5b9e\u4f53\u540d\u79f0\u7684\u51fa\u73b0\u6b21\u6570 s = '' keyword_list = [] for i in entity_data [ 'entity_name' ] . values . tolist (): s += i + '|' # \u7edf\u8ba1\u5b9e\u4f53\u540d\u79f0\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u5982\u679c\u67d0\u4e2a\u540d\u79f0\u51fa\u73b0\u6b21\u6570\u8d85\u8fc7\u4e00\u6b21\uff0c\u5219\u5c06\u5176\u52a0\u5165keyword_list\uff08\u5173\u952e\u8bcd\u5217\u8868\uff09 for k , v in collections . Counter ( s . split ( '|' )) . items (): if v > 1 : keyword_list . append ( k ) # \u751f\u6210TF-IDF\u77e9\u9635 # \u5bf9\u5b9e\u4f53\u7684\u63cf\u8ff0\u4fe1\u606f\u8fdb\u884c\u5206\u8bcd\uff0c\u5c06\u6bcf\u4e2a\u5b9e\u4f53\u63cf\u8ff0\u5206\u8bcd\u540e\u7684\u7ed3\u679c\u5b58\u5165train_sentence\u5217\u8868\u4e2d train_sentence = [] for i in entity_data [ 'desc' ] . values : train_sentence . append ( ' ' . join ( jieba . cut ( i ))) print ( len ( train_sentence )) # \u521d\u59cb\u5316TF-IDF\u5411\u91cf\u5316\u5de5\u5177 vectorizer = TfidfVectorizer () # \u5c06\u5b9e\u4f53\u63cf\u8ff0\u4fe1\u606f\u8f6c\u6362\u4e3aTF-IDF\u7279\u5f81\u77e9\u9635 X = vectorizer . fit_transform ( train_sentence ) print ( X ) print ( X . toarray () . shape ) # \u5b9a\u4e49\u83b7\u53d6\u5b9e\u4f53ID\u7684\u51fd\u6570\uff0c\u6839\u636e\u7ed9\u5b9a\u7684\u53e5\u5b50\u8ba1\u7b97\u5176\u4e0e\u5b9e\u4f53\u63cf\u8ff0\u7684TF-IDF\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff0c\u8fd4\u56de\u6700\u76f8\u4f3c\u7684\u5b9e\u4f53ID def get_entityid ( sentence ): id_start = 1001 # \u5047\u8bbe\u5b9e\u4f53ID\u4ece1001\u5f00\u59cb a_list = [ ' ' . join ( jieba . cut ( sentence ))] # \u5bf9\u8f93\u5165\u53e5\u5b50\u5206\u8bcd print ( f 'a_list--\u300b { a_list } ' ) print ( vectorizer . transform ( a_list )) # \u5c06\u53e5\u5b50\u8f6c\u6362\u4e3aTF-IDF\u7279\u5f81 print ( cosine_similarity ( vectorizer . transform ( a_list ), X )) # \u8ba1\u7b97\u53e5\u5b50\u4e0e\u6240\u6709\u5b9e\u4f53\u63cf\u8ff0\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6 res = cosine_similarity ( vectorizer . transform ( a_list ), X )[ 0 ] # \u83b7\u53d6\u76f8\u4f3c\u5ea6\u7ed3\u679c top_idx = np . argsort ( res )[ - 1 ] # \u83b7\u53d6\u6700\u76f8\u4f3c\u7684\u5b9e\u4f53\u5728TF-IDF\u77e9\u9635\u4e2d\u7684\u7d22\u5f15 print ( f 'np.argsort(res)==> { np . argsort ( res ) } ' ) return id_start + top_idx # \u8fd4\u56de\u5b9e\u4f53ID # TODO\uff1a\u5c06\u8ba1\u7b97\u7ed3\u679c\u5b58\u5165\u6587\u4ef6 print ( f 'keyword_list--\u300b { keyword_list } ' ) # \u521d\u59cb\u5316\u884c\u8ba1\u6570\u5668\u548c\u7ed3\u679c\u5217\u8868 row = 0 result_data = [] neighbor_sentence = '' # \u904d\u5386valid_data\u4e2d\u7684\u6bcf\u4e00\u4e2a\u53e5\u5b50\uff0c\u5904\u7406\u5176\u4e2d\u7684\u5173\u952e\u8bcd for sentence in valid_data [ 'sentence' ]: print ( f 'sentence--\u300b { sentence } ' ) res = [ row ] # \u521d\u59cb\u5316\u7ed3\u679c\u5217\u8868\uff0c\u9996\u5148\u6dfb\u52a0\u5f53\u524d\u884c\u53f7 for keyword in keyword_list : if keyword in sentence : # \u5982\u679c\u53e5\u5b50\u4e2d\u5305\u542b\u5173\u952e\u8bcd print ( f 'keyword--\u300b { keyword } ' ) k_len = len ( keyword ) # \u8ba1\u7b97\u5173\u952e\u8bcd\u7684\u957f\u5ea6 print ( f 'k_len--\u300b { k_len } ' ) ss = '' for i in range ( len ( sentence ) - k_len + 1 ): if sentence [ i : i + k_len ] == keyword : # \u5982\u679c\u5728\u53e5\u5b50\u4e2d\u627e\u5230\u5173\u952e\u8bcd s = str ( i ) + '-' + str ( i + k_len ) + ':' # \u83b7\u53d6\u5173\u952e\u8bcd\u5728\u53e5\u5b50\u4e2d\u7684\u4f4d\u7f6e\uff08\u5982\"0-5\"\uff09 print ( f 's--> { s } ' ) # \u83b7\u53d6\u5305\u542b\u5173\u952e\u8bcd\u7684\u90bb\u8fd1\u53e5\u5b50\uff0c\u7528\u4e8e\u8ba1\u7b97\u5b9e\u4f53\u76f8\u4f3c\u5ea6 if i > 10 and i + k_len < len ( sentence ) - 9 : neighbor_sentence = sentence [ i - 10 : i + k_len + 9 ] elif i < 10 : neighbor_sentence = sentence [: 20 ] elif i + k_len > len ( sentence ) - 9 : neighbor_sentence = sentence [ - 20 :] # \u8c03\u7528get_entityid\u51fd\u6570\uff0c\u83b7\u53d6\u4e0e\u90bb\u8fd1\u53e5\u5b50\u6700\u76f8\u4f3c\u7684\u5b9e\u4f53ID s += str ( get_entityid ( neighbor_sentence )) ss += s + '|' # \u5c06\u4f4d\u7f6e\u548c\u5b9e\u4f53ID\u62fc\u63a5\u6210\u5b57\u7b26\u4e32 res . append ( ss [: - 1 ]) # \u5c06\u5904\u7406\u7ed3\u679c\u52a0\u5165\u5230\u5f53\u524d\u884c\u7684\u7ed3\u679c\u4e2d break result_data . append ( res ) # \u5c06\u5f53\u524d\u53e5\u5b50\u7684\u5904\u7406\u7ed3\u679c\u52a0\u5165\u7ed3\u679c\u5217\u8868 row += 1 # \u884c\u8ba1\u6570\u5668\u52a01 # \u5c06\u7ed3\u679c\u4fdd\u5b58\u4e3aCSV\u6587\u4ef6\uff0c\u6587\u4ef6\u8def\u5f84\u4e3a'entity_disambiguation_submit.csv' pd . DataFrame ( result_data ) . to_csv ( 'entity_disambiguation_submit.csv' , index = False )","title":"2 \u6848\u4f8b\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E7%9F%A5%E8%AF%86%E8%9E%8D%E5%90%88/02-%E5%AE%9E%E4%BD%93%E6%B6%88%E6%AD%A7%E4%BB%BB%E5%8A%A1.html#_3","text":"\u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5b9e\u4f53\u6d88\u5c90\u7684\u539f\u7406\uff0c\u4ee5\u53ca\u5982\u4f55\u901a\u8fc7\u4ee3\u7801\u5b9e\u73b0\u5b9e\u4f53\u6d88\u5c90\u4efb\u52a1\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html","text":"Neo4j \u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u4e86\u89e3Neo4j\u56fe\u6570\u636e\u5e93\u7684\u7b80\u4ecb\u3001\u7248\u672c\u8bf4\u660e \u4e86\u89e3\u8282\u70b9, \u5173\u7cfb, \u5c5e\u6027, \u6807\u7b7e\u7684\u6709\u5173\u6982\u5ff5 \u638c\u63e1Cypher\u8bed\u53e5\u7684\u57fa\u672c\u547d\u4ee4\u548c\u8bed\u6cd5 Neo4j \u4ecb\u7ecd \u00b6 Neo4j\u662f\u7531Java\u5b9e\u73b0\u7684\u5f00\u6e90NoSQL\u56fe\u6570\u636e\u5e93. \u81ea\u4ece2003\u5e74\u5f00\u59cb\u7814\u53d1, \u52302007\u5e74\u53d1\u5e03\u7b2c\u4e00\u7248. neo4j\u73b0\u5982\u4eca\u5df2\u7ecf\u88ab\u5404\u884c\u5404\u4e1a\u7684\u6570\u5341\u4e07\u5bb6\u516c\u53f8\u548c\u7ec4\u7ec7\u91c7\u7528. Neo4j\u5b9e\u73b0\u4e86\u4e13\u4e1a\u6570\u636e\u5e93\u7ea7\u522b\u7684\u56fe\u6570\u636e\u6a21\u578b\u7684\u5b58\u50a8. \u4e0e\u666e\u901a\u7684\u56fe\u5904\u7406\u6216\u5185\u5b58\u7ea7\u6570\u636e\u5e93\u4e0d\u540c, neo4j\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u6570\u636e\u5e93\u7279\u6027, \u5305\u62ecACID\u4e8b\u7269\u7684\u652f\u6301, \u96c6\u7fa4\u652f\u6301, \u5907\u4efd\u4e0e\u6545\u969c\u8f6c\u79fb\u7b49. \u8fd9\u4f7f\u5176\u9002\u5408\u4e8e\u4f01\u4e1a\u7ea7\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u5404\u79cd\u5e94\u7528. Neo4j\u7684\u7248\u672c\u8bf4\u660e: \u4f01\u4e1a\u7248: \u9700\u8981\u9ad8\u989d\u7684\u4ed8\u8d39\u83b7\u5f97\u6388\u6743, \u63d0\u4f9b\u9ad8\u53ef\u7528, \u70ed\u5907\u4efd\u7b49\u6027\u80fd. \u793e\u533a\u5f00\u6e90\u7248: \u514d\u8d39\u4f7f\u7528, \u4f46\u53ea\u80fd\u5355\u70b9\u8fd0\u884c. Neo4j \u56fe\u6570\u636e\u5e93\u6982\u5ff5 \u00b6 \u8282\u70b9 \u8282\u70b9\u662f\u4e3b\u8981\u7684\u6570\u636e\u5143\u7d20, \u8282\u70b9\u901a\u8fc7\u5173\u7cfb\u8fde\u63a5\u5230\u5176\u4ed6\u8282\u70b9, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027 (\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684\u5c5e\u6027), \u8282\u70b9\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u6807\u7b7e, \u7528\u4e8e\u63cf\u8ff0\u5176\u5728\u56fe\u8868\u4e2d\u7684\u4f5c\u7528. \u793a\u4f8b: Person>\u8282\u70b9. \u53ef\u4ee5\u5c06\u8282\u70b9\u7c7b\u6bd4\u4e3a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u8868, \u5bf9\u5e94\u7684\u6807\u7b7e\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u4e0d\u540c\u7684\u8868\u540d, \u5c5e\u6027\u5c31\u662f\u8868\u4e2d\u7684\u5217. \u5173\u7cfb \u5173\u7cfb\u8fde\u63a5\u4e24\u4e2a\u8282\u70b9, \u5173\u7cfb\u662f\u65b9\u5411\u6027\u7684, \u5173\u7cfb\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027(\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684 \u5c5e\u6027). \u5c5e\u6027 \u5c5e\u6027\u662f\u547d\u540d\u503c, \u5176\u4e2d\u540d\u79f0(\u6216\u952e)\u662f\u5b57\u7b26\u4e32, \u5c5e\u6027\u53ef\u4ee5\u88ab\u7d22\u5f15\u548c\u7ea6\u675f, \u53ef\u4ee5\u4ece\u591a\u4e2a\u5c5e\u6027\u521b \u5efa\u590d\u5408\u7d22\u5f15. \u6807\u7b7e \u6807\u7b7e\u7528\u4e8e\u7ec4\u8282\u70b9\u5230\u96c6, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u591a\u4e2a\u6807\u7b7e, \u5bf9\u6807\u7b7e\u8fdb\u884c\u7d22\u5f15\u4ee5\u52a0\u901f\u5728\u56fe\u4e2d\u67e5\u627e\u8282\u70b9 Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5 \u00b6 \u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecdwindows\u4e0bNeo4j\u56fe\u6570\u636e\u5e93\u662f\u5982\u4f55\u5b89\u88c5\u7684 \u7b2c\u4e00\u6b65: \u5b89\u88c5JAVA SE \u7684 JDK \u4e0b\u8f7d\u5730\u5740: https://www.oracle.com/java/technologies/downloads/#java11 (\u6ce8\u610f: \u5728\u70b9\u51fb\u4e0b\u8f7d\u7684\u8fc7\u7a0b\u4e2d, \u53ef\u80fd\u9700\u8981\u9700\u8981oracle\u8d26\u6237, \u76f4\u63a5\u6ce8\u518c\u767b\u5f55\u5373\u53ef\u4e0b\u8f7d) \u4e0b\u8f7d\u5b89\u88c5\u5b8c\u4e4b\u540e, \u6253\u5f00windows\u7ec8\u7aef, \u8f93\u5165java --version\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u597d \u7b2c\u4e8c\u6b65: \u4e0b\u8f7d\u5b89\u88c5Neo4j \u4ece\u5b98\u7f51\u4e0b\u8f7d\u793e\u533a\u7248\u672c, \u4e0b\u8f7d\u5730\u5740: https://neo4j.com/download-center/#community \u8fd9\u91cc\u6ce8\u610f, \u56e0\u4e3aJDK\u4e3a11\u7248\u672c, \u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u5bf9\u5e94\u4e0b\u8f7dNeo4j 4.0\u7248\u672c \u4e0b\u8f7d\u597d\u540e, \u89e3\u538b\u5230\u81ea\u5df1\u60f3\u653e\u7684\u76d8\u91cc\uff08\u6ce8\u610f, \u8def\u5f84\u4e0d\u8981\u51fa\u73b0\u4e2d\u6587, \u4ee5\u514d\u62a5\u9519\uff09. \u4f8b\u5982: C:\\Program Files (x86)\\neo4j-community-4.4.18 \u7b2c\u4e09\u6b65: \u5bf9Neo4j\u8fdb\u884c\u73af\u5883\u53d8\u91cf\u914d\u7f6e \u521b\u5efa\u7cfb\u7edf\u73af\u5883\u53d8\u91cf \u8fc7\u7a0b: \u7535\u8111--->\u5c5e\u6027--->\u9ad8\u7ea7\u7cfb\u7edf\u8bbe\u7f6e--->\u73af\u5883\u53d8\u91cf--->\u65b0\u5efa \u624b\u52a8\u6dfb\u52a0\u53d8\u91cf\u540d\u79f0\u548c\u53d8\u91cf\u503c\uff08\u6ce8\u610f\u53d8\u91cf\u503c\u662f\u4f60\u5b58\u653e\u6587\u4ef6\u7684\u8def\u5f84\uff09 \u5728path\u8def\u5f84\u4e2d\u5c06\u53d8\u91cf\u6dfb\u52a0\u8fdb\u53bb \u7b2c\u56db\u6b65: \u542f\u52a8neo4j\u6570\u636e\u5e93 \u6253\u5f00cmd, \u8f93\u5165: neo4j console \u6d4f\u89c8\u5668\u9875\u9762\u5c55\u793a \u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7b2c\u4e00\u6b21\u5b89\u88c5\u767b\u5f55\u6210\u529f, \u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\uff08\u9ed8\u8ba4\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e00\u81f4\u90fd\u662f: neo4j\uff09. \u7b2c\u4e00\u6b21\u767b\u5f55\u9700\u8981\u66f4\u6539\u5bc6\u7801. Cypher\u4ecb\u7ecd\u4e0e\u4f7f\u7528 \u00b6 1 create\u547d\u4ee4 \u00b6 \u521b\u5efa\u56fe\u6570\u636e\u4e2d\u7684\u8282\u70b9 \u6f14\u793a: # \u521b\u5efa\u547d\u4ee4\u683c\u5f0f : # \u6b64\u5904 create\u662f\u5173\u952e\u5b57 , \u521b\u5efa\u8282\u70b9\u540d\u79f0 node_name , \u8282\u70b9\u6807\u7b7e Node_Label , \u653e\u5728\u5c0f\u62ec\u53f7\u91cc\u9762 () # \u540e\u9762\u628a\u6240\u6709\u5c5e\u4e8e\u8282\u70b9\u6807\u7b7e\u7684\u5c5e\u6027\u653e\u5728\u5927\u62ec\u53f7 '{}' \u91cc\u9762 , \u4f9d\u6b21\u5199\u51fa\u5c5e\u6027\u540d\u79f0 : \u5c5e\u6027\u503c , \u4e0d\u540c\u5c5e\u6027\u7528\u9017\u53f7 ',' \u5206\u9694 # \u4f8b\u5982\u4e0b\u9762\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u8282\u70b9 e , \u8282\u70b9\u6807\u7b7e\u662f Employee , \u62e5\u6709 id , name , salary , deptnp\u56db\u4e2a\u5c5e\u6027 : CREATE ( e : Employee { id : 222 , name : 'Bob' , salary : 6000 , deptnp : 12 }\uff09 \u6548\u679c 2 match\u547d\u4ee4 \u00b6 \u5339\u914d(\u67e5\u8be2)\u5df2\u6709\u6570\u636e \u6f14\u793a: # match\u547d\u4ee4\u4e13\u95e8\u7528\u6765\u5339\u914d\u67e5\u8be2 , \u8282\u70b9\u540d\u79f0 : \u8282\u70b9\u6807\u7b7e , \u4f9d\u7136\u653e\u5728\u5c0f\u62ec\u53f7\u5185 , \u7136\u540e\u4f7f\u7528 return\u8bed\u53e5\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c , \u548c SQL\u5f88\u76f8\u4f3c . MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno MATCH ( n ) return n # \u67e5\u8be2\u6240\u6709\u7ed3\u70b9 \u6548\u679c 3 merge\u547d\u4ee4 \u00b6 \u82e5\u8282\u70b9\u5b58\u5728, \u5219\u7b49\u6548\u4e0ematch\u547d\u4ee4; \u8282\u70b9\u4e0d\u5b58\u5728, \u5219\u7b49\u6548\u4e8ecreate\u547d\u4ee4. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c: \u7136\u540e\u518d\u6b21\u7528merge\u67e5\u8be2, \u53d1\u73b0\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5e76\u6ca1\u6709\u589e\u52a0, \u56e0\u4e3a\u5df2\u7ecf\u5b58\u5728\u76f8\u540c\u7684\u6570\u636e\u4e86, merge\u5339\u914d\u6210\u529f. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c: 4 \u4f7f\u7528create\u521b\u5efa\u5173\u7cfb \u00b6 \u5fc5\u987b\u521b\u5efa\u6709\u65b9\u5411\u6027\u7684\u5173\u7cfb, \u5426\u5219\u62a5\u9519. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u6709\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3aBuy , \u4ee3\u8868 p1\u8d2d\u4e70\u4e86p2 , \u65b9\u5411\u4e3a p1\u6307\u5411p2 CREATE ( p1 : Profile1 ) - [ r : Buy ] -> ( p2 : Profile2 ) \u6548\u679c: 5 \u4f7f\u7528merge\u521b\u5efa\u5173\u7cfb \u00b6 \u53ef\u4ee5\u521b\u5efa\u6709/\u65e0\u65b9\u5411\u6027\u7684\u5173\u7cfb. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u65e0\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3amiss , \u4ee3\u8868 p1 - miss - p2 , \u65b9\u5411\u4e3a\u76f8\u4e92\u7684 MERGE ( p1 : Profile1 ) - [ r : miss ] - ( p2 : Profile2 ) - \u6548\u679c: 6 where\u547d\u4ee4 \u00b6 \u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684\u6dfb\u52a0\u67e5\u8be2\u6761\u4ef6. \u6f14\u793a: # \u67e5\u8be2\u8282\u70b9 Employee\u4e2d , id\u503c\u7b49\u4e8e123\u7684\u90a3\u4e2a\u8282\u70b9 MATCH ( e : Employee ) WHERE e . id = 123 RETURN e - \u6548\u679c: 7 delete\u547d\u4ee4 \u00b6 \u5220\u9664\u8282\u70b9/\u5173\u7cfb\u53ca\u5176\u5173\u8054\u7684\u5c5e\u6027. \u6f14\u793a: # \u6ce8\u610f : \u5220\u9664\u8282\u70b9\u7684\u540c\u65f6 , \u4e5f\u8981\u5220\u9664\u5173\u8054\u7684\u5173\u7cfb\u8fb9 MATCH ( p1 : Profile1 ) - [ r ] - ( p2 : Profile2 ) DELETE p1 , r , p2 - \u6548\u679c: 8 sort\u547d\u4ee4 \u00b6 Cypher\u547d\u4ee4\u4e2d\u7684\u6392\u5e8f\u4f7f\u7528\u7684\u662forder by. \u6f14\u793a: # \u5339\u914d\u67e5\u8be2\u6807\u7b7e Employee , \u5c06\u6240\u6709\u5339\u914d\u7ed3\u679c\u6309\u7167 id\u503c\u5347\u5e8f\u6392\u5217\u540e\u8fd4\u56de\u7ed3\u679c MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . id # \u5982\u679c\u8981\u6309\u7167\u964d\u5e8f\u6392\u5e8f , \u53ea\u9700\u8981\u5c06 ORDER BY e . salary\u6539\u5199\u4e3aORDER BY e . salary DESC MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . salary DESC - \u6548\u679c: 9 \u5b57\u7b26\u4e32\u51fd\u6570: \u00b6 1 toUpper()\u51fd\u6570 \u00b6 \u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toUpper ( e . name ), e . salary , e . deptno \u6548\u679c: 2 toLower()\u51fd\u6570 \u00b6 \u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5c0f\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toLower ( e . name ), e . salary , e . deptno - \u6548\u679c: 3 substring()\u51fd\u6570 \u00b6 \u8fd4\u56de\u4e00\u4e2a\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u8fd4\u56de\u4ece\u7d22\u5f15 start_index\u5f00\u59cb , \u5230 end_index - 1 \u7ed3\u675f\u7684\u5b50\u5b57\u7b26\u4e32 substring ( input_str , start_index , end_index ) # \u793a\u4f8b\u4ee3\u7801 , \u8fd4\u56de\u5458\u5de5\u540d\u5b57\u7684\u524d\u4e24\u4e2a\u5b57\u6bcd MATCH ( e : Employee ) RETURN e . id , substring ( e . name , 0 , 2 ), e . salary , e . deptno - \u6548\u679c: 4 replace()\u51fd\u6570 \u00b6 \u66ff\u6362\u6389\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u5c06\u8f93\u5165\u5b57\u7b26\u4e32\u4e2d\u7b26\u5408 origin_str\u7684\u90e8\u5206 , \u66ff\u6362\u6210 new_str replace ( input_str , origin_str , new_str ) # \u793a\u4f8b\u4ee3\u7801 , \u5c06\u5458\u5de5\u540d\u5b57\u66ff\u6362\u4e3a\u6dfb\u52a0\u540e\u7f00 _HelloWorld MATCH ( e : Employee ) RETURN e . id , replace ( e . name , e . name , e . name + \"_HelloWorld\" ), e . salary , e . deptno # \u8fd8\u539f MATCH ( e : Employee ) RETURN e . id , replace ( e . name , \"_HelloWorld\" , \"\" ), e . salary , e . deptno - \u6548\u679c: 10 \u805a\u5408\u51fd\u6570 \u00b6 1 count()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u6761\u6570. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2a\u6570 MATCH ( e : Employee ) RETURN count ( * ) - \u6548\u679c: 2 max()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5927\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u9ad8\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN max ( e . salary ) - \u6548\u679c: 3 min()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5c0f\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u4f4e\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN min ( e . salary ) - \u6548\u679c: 4 sum()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5168\u90e8\u52a0\u548c\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u548c MATCH ( e : Employee ) RETURN sum ( e . salary ) - \u6548\u679c: 5 avg()\u51fd\u6570 \u00b6 \u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5e73\u5747\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u5e73\u5747\u503c MATCH ( e : Employee ) RETURN avg ( e . salary ) - \u6548\u679c: 11 \u7d22\u5f15index \u00b6 Neo4j\u652f\u6301\u5728\u8282\u70b9\u6216\u5173\u7cfb\u5c5e\u6027\u4e0a\u7684\u7d22\u5f15, \u4ee5\u63d0\u9ad8\u67e5\u8be2\u7684\u6027\u80fd. \u53ef\u4ee5\u4e3a\u5177\u6709\u76f8\u540c\u6807\u7b7e\u540d\u79f0\u7684\u6240\u6709\u8282\u70b9\u7684\u5c5e\u6027\u521b\u5efa\u7d22\u5f15. 1 \u521b\u5efa\u7d22\u5f15 \u00b6 \u4f7f\u7528create index on\u6765\u521b\u5efa\u7d22\u5f15. \u6f14\u793a: # \u521b\u5efa\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 CREATE INDEX ON : Employee ( id ) - \u6548\u679c: 2 \u5220\u9664\u7d22\u5f15 \u00b6 \u4f7f\u7528drop index on\u6765\u5220\u9664\u7d22\u5f15. \u6f14\u793a: # \u5220\u9664\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 DROP INDEX ON : Employee ( id ) - \u6548\u679c: \u5c0f\u8282\u603b\u7ed3 \u00b6 \u5b66\u4e60\u4e86 Neo4j \u56fe\u6570\u636e\u5e93\u7684\u76f8\u5173\u6982\u5ff5\u548c\u4ea7\u54c1\u4ecb\u7ecd, \u4ee5\u53ca Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5\u548c\u4f7f\u7528 \u5b66\u4e60\u4e86Cypher\u8bed\u53e5\u7684\u57fa\u672c\u7528\u6cd5 (\u4e00\u79cd\u7528\u4e8eneo4j\u56fe\u6570\u636e\u5e93\u7684\u67e5\u8be2\u8bed\u8a00)","title":"6.1 Neo4j\u56fe\u6570\u636e\u5e93"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j","text":"","title":"Neo4j \u4ecb\u7ecd"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#_1","text":"\u4e86\u89e3Neo4j\u56fe\u6570\u636e\u5e93\u7684\u7b80\u4ecb\u3001\u7248\u672c\u8bf4\u660e \u4e86\u89e3\u8282\u70b9, \u5173\u7cfb, \u5c5e\u6027, \u6807\u7b7e\u7684\u6709\u5173\u6982\u5ff5 \u638c\u63e1Cypher\u8bed\u53e5\u7684\u57fa\u672c\u547d\u4ee4\u548c\u8bed\u6cd5","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j_1","text":"Neo4j\u662f\u7531Java\u5b9e\u73b0\u7684\u5f00\u6e90NoSQL\u56fe\u6570\u636e\u5e93. \u81ea\u4ece2003\u5e74\u5f00\u59cb\u7814\u53d1, \u52302007\u5e74\u53d1\u5e03\u7b2c\u4e00\u7248. neo4j\u73b0\u5982\u4eca\u5df2\u7ecf\u88ab\u5404\u884c\u5404\u4e1a\u7684\u6570\u5341\u4e07\u5bb6\u516c\u53f8\u548c\u7ec4\u7ec7\u91c7\u7528. Neo4j\u5b9e\u73b0\u4e86\u4e13\u4e1a\u6570\u636e\u5e93\u7ea7\u522b\u7684\u56fe\u6570\u636e\u6a21\u578b\u7684\u5b58\u50a8. \u4e0e\u666e\u901a\u7684\u56fe\u5904\u7406\u6216\u5185\u5b58\u7ea7\u6570\u636e\u5e93\u4e0d\u540c, neo4j\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u6570\u636e\u5e93\u7279\u6027, \u5305\u62ecACID\u4e8b\u7269\u7684\u652f\u6301, \u96c6\u7fa4\u652f\u6301, \u5907\u4efd\u4e0e\u6545\u969c\u8f6c\u79fb\u7b49. \u8fd9\u4f7f\u5176\u9002\u5408\u4e8e\u4f01\u4e1a\u7ea7\u751f\u4ea7\u73af\u5883\u4e0b\u7684\u5404\u79cd\u5e94\u7528. Neo4j\u7684\u7248\u672c\u8bf4\u660e: \u4f01\u4e1a\u7248: \u9700\u8981\u9ad8\u989d\u7684\u4ed8\u8d39\u83b7\u5f97\u6388\u6743, \u63d0\u4f9b\u9ad8\u53ef\u7528, \u70ed\u5907\u4efd\u7b49\u6027\u80fd. \u793e\u533a\u5f00\u6e90\u7248: \u514d\u8d39\u4f7f\u7528, \u4f46\u53ea\u80fd\u5355\u70b9\u8fd0\u884c.","title":"Neo4j \u4ecb\u7ecd"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j_2","text":"\u8282\u70b9 \u8282\u70b9\u662f\u4e3b\u8981\u7684\u6570\u636e\u5143\u7d20, \u8282\u70b9\u901a\u8fc7\u5173\u7cfb\u8fde\u63a5\u5230\u5176\u4ed6\u8282\u70b9, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027 (\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684\u5c5e\u6027), \u8282\u70b9\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u6807\u7b7e, \u7528\u4e8e\u63cf\u8ff0\u5176\u5728\u56fe\u8868\u4e2d\u7684\u4f5c\u7528. \u793a\u4f8b: Person>\u8282\u70b9. \u53ef\u4ee5\u5c06\u8282\u70b9\u7c7b\u6bd4\u4e3a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u8868, \u5bf9\u5e94\u7684\u6807\u7b7e\u53ef\u4ee5\u7c7b\u6bd4\u4e3a\u4e0d\u540c\u7684\u8868\u540d, \u5c5e\u6027\u5c31\u662f\u8868\u4e2d\u7684\u5217. \u5173\u7cfb \u5173\u7cfb\u8fde\u63a5\u4e24\u4e2a\u8282\u70b9, \u5173\u7cfb\u662f\u65b9\u5411\u6027\u7684, \u5173\u7cfb\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u5c5e\u6027(\u5373\u5b58\u50a8\u4e3a\u952e/\u503c\u5bf9\u7684 \u5c5e\u6027). \u5c5e\u6027 \u5c5e\u6027\u662f\u547d\u540d\u503c, \u5176\u4e2d\u540d\u79f0(\u6216\u952e)\u662f\u5b57\u7b26\u4e32, \u5c5e\u6027\u53ef\u4ee5\u88ab\u7d22\u5f15\u548c\u7ea6\u675f, \u53ef\u4ee5\u4ece\u591a\u4e2a\u5c5e\u6027\u521b \u5efa\u590d\u5408\u7d22\u5f15. \u6807\u7b7e \u6807\u7b7e\u7528\u4e8e\u7ec4\u8282\u70b9\u5230\u96c6, \u8282\u70b9\u53ef\u4ee5\u5177\u6709\u591a\u4e2a\u6807\u7b7e, \u5bf9\u6807\u7b7e\u8fdb\u884c\u7d22\u5f15\u4ee5\u52a0\u901f\u5728\u56fe\u4e2d\u67e5\u627e\u8282\u70b9","title":"Neo4j \u56fe\u6570\u636e\u5e93\u6982\u5ff5"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#neo4j_3","text":"\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecdwindows\u4e0bNeo4j\u56fe\u6570\u636e\u5e93\u662f\u5982\u4f55\u5b89\u88c5\u7684 \u7b2c\u4e00\u6b65: \u5b89\u88c5JAVA SE \u7684 JDK \u4e0b\u8f7d\u5730\u5740: https://www.oracle.com/java/technologies/downloads/#java11 (\u6ce8\u610f: \u5728\u70b9\u51fb\u4e0b\u8f7d\u7684\u8fc7\u7a0b\u4e2d, \u53ef\u80fd\u9700\u8981\u9700\u8981oracle\u8d26\u6237, \u76f4\u63a5\u6ce8\u518c\u767b\u5f55\u5373\u53ef\u4e0b\u8f7d) \u4e0b\u8f7d\u5b89\u88c5\u5b8c\u4e4b\u540e, \u6253\u5f00windows\u7ec8\u7aef, \u8f93\u5165java --version\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u597d \u7b2c\u4e8c\u6b65: \u4e0b\u8f7d\u5b89\u88c5Neo4j \u4ece\u5b98\u7f51\u4e0b\u8f7d\u793e\u533a\u7248\u672c, \u4e0b\u8f7d\u5730\u5740: https://neo4j.com/download-center/#community \u8fd9\u91cc\u6ce8\u610f, \u56e0\u4e3aJDK\u4e3a11\u7248\u672c, \u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u5bf9\u5e94\u4e0b\u8f7dNeo4j 4.0\u7248\u672c \u4e0b\u8f7d\u597d\u540e, \u89e3\u538b\u5230\u81ea\u5df1\u60f3\u653e\u7684\u76d8\u91cc\uff08\u6ce8\u610f, \u8def\u5f84\u4e0d\u8981\u51fa\u73b0\u4e2d\u6587, \u4ee5\u514d\u62a5\u9519\uff09. \u4f8b\u5982: C:\\Program Files (x86)\\neo4j-community-4.4.18 \u7b2c\u4e09\u6b65: \u5bf9Neo4j\u8fdb\u884c\u73af\u5883\u53d8\u91cf\u914d\u7f6e \u521b\u5efa\u7cfb\u7edf\u73af\u5883\u53d8\u91cf \u8fc7\u7a0b: \u7535\u8111--->\u5c5e\u6027--->\u9ad8\u7ea7\u7cfb\u7edf\u8bbe\u7f6e--->\u73af\u5883\u53d8\u91cf--->\u65b0\u5efa \u624b\u52a8\u6dfb\u52a0\u53d8\u91cf\u540d\u79f0\u548c\u53d8\u91cf\u503c\uff08\u6ce8\u610f\u53d8\u91cf\u503c\u662f\u4f60\u5b58\u653e\u6587\u4ef6\u7684\u8def\u5f84\uff09 \u5728path\u8def\u5f84\u4e2d\u5c06\u53d8\u91cf\u6dfb\u52a0\u8fdb\u53bb \u7b2c\u56db\u6b65: \u542f\u52a8neo4j\u6570\u636e\u5e93 \u6253\u5f00cmd, \u8f93\u5165: neo4j console \u6d4f\u89c8\u5668\u9875\u9762\u5c55\u793a \u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7b2c\u4e00\u6b21\u5b89\u88c5\u767b\u5f55\u6210\u529f, \u9700\u8981\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\uff08\u9ed8\u8ba4\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e00\u81f4\u90fd\u662f: neo4j\uff09. \u7b2c\u4e00\u6b21\u767b\u5f55\u9700\u8981\u66f4\u6539\u5bc6\u7801.","title":"Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#cypher","text":"","title":"Cypher\u4ecb\u7ecd\u4e0e\u4f7f\u7528"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1-create","text":"\u521b\u5efa\u56fe\u6570\u636e\u4e2d\u7684\u8282\u70b9 \u6f14\u793a: # \u521b\u5efa\u547d\u4ee4\u683c\u5f0f : # \u6b64\u5904 create\u662f\u5173\u952e\u5b57 , \u521b\u5efa\u8282\u70b9\u540d\u79f0 node_name , \u8282\u70b9\u6807\u7b7e Node_Label , \u653e\u5728\u5c0f\u62ec\u53f7\u91cc\u9762 () # \u540e\u9762\u628a\u6240\u6709\u5c5e\u4e8e\u8282\u70b9\u6807\u7b7e\u7684\u5c5e\u6027\u653e\u5728\u5927\u62ec\u53f7 '{}' \u91cc\u9762 , \u4f9d\u6b21\u5199\u51fa\u5c5e\u6027\u540d\u79f0 : \u5c5e\u6027\u503c , \u4e0d\u540c\u5c5e\u6027\u7528\u9017\u53f7 ',' \u5206\u9694 # \u4f8b\u5982\u4e0b\u9762\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u8282\u70b9 e , \u8282\u70b9\u6807\u7b7e\u662f Employee , \u62e5\u6709 id , name , salary , deptnp\u56db\u4e2a\u5c5e\u6027 : CREATE ( e : Employee { id : 222 , name : 'Bob' , salary : 6000 , deptnp : 12 }\uff09 \u6548\u679c","title":"1 create\u547d\u4ee4"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2-match","text":"\u5339\u914d(\u67e5\u8be2)\u5df2\u6709\u6570\u636e \u6f14\u793a: # match\u547d\u4ee4\u4e13\u95e8\u7528\u6765\u5339\u914d\u67e5\u8be2 , \u8282\u70b9\u540d\u79f0 : \u8282\u70b9\u6807\u7b7e , \u4f9d\u7136\u653e\u5728\u5c0f\u62ec\u53f7\u5185 , \u7136\u540e\u4f7f\u7528 return\u8bed\u53e5\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c , \u548c SQL\u5f88\u76f8\u4f3c . MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno MATCH ( n ) return n # \u67e5\u8be2\u6240\u6709\u7ed3\u70b9 \u6548\u679c","title":"2 match\u547d\u4ee4"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#3-merge","text":"\u82e5\u8282\u70b9\u5b58\u5728, \u5219\u7b49\u6548\u4e0ematch\u547d\u4ee4; \u8282\u70b9\u4e0d\u5b58\u5728, \u5219\u7b49\u6548\u4e8ecreate\u547d\u4ee4. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c: \u7136\u540e\u518d\u6b21\u7528merge\u67e5\u8be2, \u53d1\u73b0\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5e76\u6ca1\u6709\u589e\u52a0, \u56e0\u4e3a\u5df2\u7ecf\u5b58\u5728\u76f8\u540c\u7684\u6570\u636e\u4e86, merge\u5339\u914d\u6210\u529f. \u6f14\u793a: MERGE ( e : Employee { id : 146 , name : 'Lucer' , salary : 3500 , deptno : 16 } ) - \u6548\u679c:","title":"3 merge\u547d\u4ee4"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#4-create","text":"\u5fc5\u987b\u521b\u5efa\u6709\u65b9\u5411\u6027\u7684\u5173\u7cfb, \u5426\u5219\u62a5\u9519. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u6709\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3aBuy , \u4ee3\u8868 p1\u8d2d\u4e70\u4e86p2 , \u65b9\u5411\u4e3a p1\u6307\u5411p2 CREATE ( p1 : Profile1 ) - [ r : Buy ] -> ( p2 : Profile2 ) \u6548\u679c:","title":"4 \u4f7f\u7528create\u521b\u5efa\u5173\u7cfb"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#5-merge","text":"\u53ef\u4ee5\u521b\u5efa\u6709/\u65e0\u65b9\u5411\u6027\u7684\u5173\u7cfb. \u6f14\u793a: # \u521b\u5efa\u4e00\u4e2a\u8282\u70b9 p1\u5230p2\u7684\u65e0\u65b9\u5411\u5173\u7cfb , \u8fd9\u4e2a\u5173\u7cfb r\u7684\u6807\u7b7e\u4e3amiss , \u4ee3\u8868 p1 - miss - p2 , \u65b9\u5411\u4e3a\u76f8\u4e92\u7684 MERGE ( p1 : Profile1 ) - [ r : miss ] - ( p2 : Profile2 ) - \u6548\u679c:","title":"5 \u4f7f\u7528merge\u521b\u5efa\u5173\u7cfb"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#6-where","text":"\u7c7b\u4f3c\u4e8eSQL\u4e2d\u7684\u6dfb\u52a0\u67e5\u8be2\u6761\u4ef6. \u6f14\u793a: # \u67e5\u8be2\u8282\u70b9 Employee\u4e2d , id\u503c\u7b49\u4e8e123\u7684\u90a3\u4e2a\u8282\u70b9 MATCH ( e : Employee ) WHERE e . id = 123 RETURN e - \u6548\u679c:","title":"6 where\u547d\u4ee4"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#7-delete","text":"\u5220\u9664\u8282\u70b9/\u5173\u7cfb\u53ca\u5176\u5173\u8054\u7684\u5c5e\u6027. \u6f14\u793a: # \u6ce8\u610f : \u5220\u9664\u8282\u70b9\u7684\u540c\u65f6 , \u4e5f\u8981\u5220\u9664\u5173\u8054\u7684\u5173\u7cfb\u8fb9 MATCH ( p1 : Profile1 ) - [ r ] - ( p2 : Profile2 ) DELETE p1 , r , p2 - \u6548\u679c:","title":"7 delete\u547d\u4ee4"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#8-sort","text":"Cypher\u547d\u4ee4\u4e2d\u7684\u6392\u5e8f\u4f7f\u7528\u7684\u662forder by. \u6f14\u793a: # \u5339\u914d\u67e5\u8be2\u6807\u7b7e Employee , \u5c06\u6240\u6709\u5339\u914d\u7ed3\u679c\u6309\u7167 id\u503c\u5347\u5e8f\u6392\u5217\u540e\u8fd4\u56de\u7ed3\u679c MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . id # \u5982\u679c\u8981\u6309\u7167\u964d\u5e8f\u6392\u5e8f , \u53ea\u9700\u8981\u5c06 ORDER BY e . salary\u6539\u5199\u4e3aORDER BY e . salary DESC MATCH ( e : Employee ) RETURN e . id , e . name , e . salary , e . deptno ORDER BY e . salary DESC - \u6548\u679c:","title":"8 sort\u547d\u4ee4"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#9","text":"","title":"9 \u5b57\u7b26\u4e32\u51fd\u6570:"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1-toupper","text":"\u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toUpper ( e . name ), e . salary , e . deptno \u6548\u679c:","title":"1 toUpper()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2-tolower","text":"\u5c06\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5c0f\u5199\u5b57\u6bcd. \u6f14\u793a: MATCH ( e : Employee ) RETURN e . id , toLower ( e . name ), e . salary , e . deptno - \u6548\u679c:","title":"2 toLower()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#3-substring","text":"\u8fd4\u56de\u4e00\u4e2a\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u8fd4\u56de\u4ece\u7d22\u5f15 start_index\u5f00\u59cb , \u5230 end_index - 1 \u7ed3\u675f\u7684\u5b50\u5b57\u7b26\u4e32 substring ( input_str , start_index , end_index ) # \u793a\u4f8b\u4ee3\u7801 , \u8fd4\u56de\u5458\u5de5\u540d\u5b57\u7684\u524d\u4e24\u4e2a\u5b57\u6bcd MATCH ( e : Employee ) RETURN e . id , substring ( e . name , 0 , 2 ), e . salary , e . deptno - \u6548\u679c:","title":"3 substring()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#4-replace","text":"\u66ff\u6362\u6389\u5b50\u5b57\u7b26\u4e32. \u6f14\u793a: # \u8f93\u5165\u5b57\u7b26\u4e32\u4e3a input_str , \u5c06\u8f93\u5165\u5b57\u7b26\u4e32\u4e2d\u7b26\u5408 origin_str\u7684\u90e8\u5206 , \u66ff\u6362\u6210 new_str replace ( input_str , origin_str , new_str ) # \u793a\u4f8b\u4ee3\u7801 , \u5c06\u5458\u5de5\u540d\u5b57\u66ff\u6362\u4e3a\u6dfb\u52a0\u540e\u7f00 _HelloWorld MATCH ( e : Employee ) RETURN e . id , replace ( e . name , e . name , e . name + \"_HelloWorld\" ), e . salary , e . deptno # \u8fd8\u539f MATCH ( e : Employee ) RETURN e . id , replace ( e . name , \"_HelloWorld\" , \"\" ), e . salary , e . deptno - \u6548\u679c:","title":"4 replace()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#10","text":"","title":"10 \u805a\u5408\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1-count","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u6761\u6570. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2a\u6570 MATCH ( e : Employee ) RETURN count ( * ) - \u6548\u679c:","title":"1 count()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2-max","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5927\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u9ad8\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN max ( e . salary ) - \u6548\u679c:","title":"2 max()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#3-min","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u7684\u6700\u5c0f\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6700\u4f4e\u7684\u5de5\u8d44\u6570\u5b57 MATCH ( e : Employee ) RETURN min ( e . salary ) - \u6548\u679c:","title":"3 min()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#4-sum","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5168\u90e8\u52a0\u548c\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u548c MATCH ( e : Employee ) RETURN sum ( e . salary ) - \u6548\u679c:","title":"4 sum()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#5-avg","text":"\u8fd4\u56de\u7531match\u547d\u4ee4\u5339\u914d\u6210\u529f\u7684\u8bb0\u5f55\u4e2d\u67d0\u5b57\u6bb5\u7684\u5e73\u5747\u503c. \u6f14\u793a: # \u8fd4\u56de\u5339\u914d\u6807\u7b7e Employee\u6210\u529f\u7684\u8bb0\u5f55\u4e2d , \u6240\u6709\u5458\u5de5\u5de5\u8d44\u7684\u5e73\u5747\u503c MATCH ( e : Employee ) RETURN avg ( e . salary ) - \u6548\u679c:","title":"5 avg()\u51fd\u6570"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#11-index","text":"Neo4j\u652f\u6301\u5728\u8282\u70b9\u6216\u5173\u7cfb\u5c5e\u6027\u4e0a\u7684\u7d22\u5f15, \u4ee5\u63d0\u9ad8\u67e5\u8be2\u7684\u6027\u80fd. \u53ef\u4ee5\u4e3a\u5177\u6709\u76f8\u540c\u6807\u7b7e\u540d\u79f0\u7684\u6240\u6709\u8282\u70b9\u7684\u5c5e\u6027\u521b\u5efa\u7d22\u5f15.","title":"11 \u7d22\u5f15index"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#1","text":"\u4f7f\u7528create index on\u6765\u521b\u5efa\u7d22\u5f15. \u6f14\u793a: # \u521b\u5efa\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 CREATE INDEX ON : Employee ( id ) - \u6548\u679c:","title":"1 \u521b\u5efa\u7d22\u5f15"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#2","text":"\u4f7f\u7528drop index on\u6765\u5220\u9664\u7d22\u5f15. \u6f14\u793a: # \u5220\u9664\u8282\u70b9 Employee\u4e0a\u9762\u5c5e\u6027id\u7684\u7d22\u5f15 DROP INDEX ON : Employee ( id ) - \u6548\u679c:","title":"2 \u5220\u9664\u7d22\u5f15"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/01-Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93.html#_2","text":"\u5b66\u4e60\u4e86 Neo4j \u56fe\u6570\u636e\u5e93\u7684\u76f8\u5173\u6982\u5ff5\u548c\u4ea7\u54c1\u4ecb\u7ecd, \u4ee5\u53ca Neo4j \u56fe\u6570\u636e\u5e93\u7684\u5b89\u88c5\u548c\u4f7f\u7528 \u5b66\u4e60\u4e86Cypher\u8bed\u53e5\u7684\u57fa\u672c\u7528\u6cd5 (\u4e00\u79cd\u7528\u4e8eneo4j\u56fe\u6570\u636e\u5e93\u7684\u67e5\u8be2\u8bed\u8a00)","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html","text":"\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u642d\u5efa \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3\u5982\u4f55\u901a\u8fc7\u56fe\u6570\u636e\u5e93\u6784\u5efa\u533b\u7597\u77e5\u8bc6\u56fe\u8c31 \u5b66\u4f1a\u5982\u4f55\u5c06\u7ed3\u6784\u5316\u7684\u533b\u7597\u6570\u636e\u8f6c\u5316\u4e3a\u77e5\u8bc6\u56fe\u8c31 \u638c\u63e1\u5982\u4f55\u4f7f\u7528Python\u4ee3\u7801\u4e0eNeo4j\u4ea4\u4e92\uff0c\u6784\u5efa\u5b9e\u4f53\u548c\u5173\u7cfb \u642d\u5efa\u56fe\u8c31\u7684\u57fa\u672c\u6b65\u9aa4 \u00b6 \u6b65\u9aa41: \u9009\u62e9\u56fe\u6570\u636e\u5e93 \u6b65\u9aa42: \u56fe\u8c31\u642d\u5efa \u6b65\u9aa43: \u56fe\u8c31\u5c55\u793a 1 \u9009\u62e9\u56fe\u6570\u636e\u5e93 \u00b6 \u56fe\u6570\u636e\u5e93\u662f\u5b58\u50a8\u548c\u7ba1\u7406\u77e5\u8bc6\u56fe\u8c31\u7684\u6838\u5fc3\u3002\u9009\u62e9\u5408\u9002\u7684\u6570\u636e\u5e93\u5de5\u5177\u5bf9\u56fe\u8c31\u7684\u6548\u7387\u548c\u53ef\u6269\u5c55\u6027\u6709\u91cd\u8981\u5f71\u3002 Neo4j\uff1a\u6700\u5e38\u7528\u7684\u56fe\u6570\u636e\u5e93\uff0c\u652f\u6301Cypher\u67e5\u8be2\u8bed\u8a00\uff0c\u9002\u5408\u5927\u89c4\u6a21\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u6784\u5efa\u548c\u67e5\u8be2\u3002 RDF-based\u6570\u636e\u5e93\uff08\u4e86\u89e3\uff09\uff1a\u5982GraphDB\u3001Virtuoso\uff0c\u9002\u5408\u5904\u7406\u8bed\u4e49\u7f51\u6807\u51c6\u7684\u77e5\u8bc6\u56fe\u8c31\uff0c\u5982\u4f7f\u7528RDF\u3001OWL\u7b49\u683c\u5f0f\u3002 \u76f8\u6bd4\u4f20\u7edfMysql\u7b49\u6570\u636e\uff0c\u56fe\u6570\u636e\u5e93\u7684\u4f18\u52bf\uff1a Neo4j\u56fe\u6570\u636e\u5e93\u80fd\u9ad8\u6548\u5904\u7406\u590d\u6742\u5173\u7cfb\u3001\u7075\u6d3b\u7684\u6570\u636e\u7ed3\u6784\u3001\u7b80\u6d01\u7684\u67e5\u8be2\u8bed\u8a00\u3001\u9002\u5408\u5927\u89c4\u6a21\u56fe\u6570\u636e\u548c\u63a8\u7406\u80fd\u529b\u7b49\u7279\u70b9\u3002\u800cMySQL\u7b49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5728\u9762\u5bf9\u591a\u5c42\u6b21\u3001\u52a8\u6001\u53d8\u5316\u7684\u590d\u6742\u5173\u8054\u65f6\uff0c\u8868\u73b0\u4e0d\u4f73\uff0c\u67e5\u8be2\u6027\u80fd\u8f83\u5dee\uff0c\u4e14\u6a21\u578b\u7684\u6269\u5c55\u6027\u8f83\u4f4e\u3002\u56e0\u6b64\uff0c\u6784\u5efa\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u65f6\uff0c\u9009\u62e9Neo4j\u8fd9\u6837\u7684\u56fe\u6570\u636e\u5e93\u4f1a\u66f4\u6709\u4f18\u52bf\u3002 2 \u56fe\u8c31\u642d\u5efa \u00b6 \u524d\u9762\u7ae0\u8282\uff0c\u6211\u4eec\u5df2\u7ecf\u5b66\u4e60\u4e86\u5982\u4f55\u4ece\u6587\u672c\u4e2d\u62bd\u53d6\u5b9e\u4f53\u3001\u4ee5\u53ca\u5173\u7cfb\u3002\u90a3\u4e48\u5982\u679c\u8981\u60f3\u642d\u5efa\u56fe\u8c31\uff0c\u9700\u8981\u63d0\u524d\u51c6\u5907\u597d\u76f8\u5e94\u7684\u5b9e\u4f53\u548c\u5173\u7cfb\u7b49\u6570\u636e\u3002 \u8bf4\u660e\uff1a \u7531\u4e8e\u4f01\u4e1a\u6570\u636e\u9690\u79c1\u6027\uff0c\u672c\u6b21\u642d\u5efa\u56fe\u8c31\u6211\u4eec\u5c06\u57fa\u4e8e\u4e00\u4e2a\u5f00\u6e90\u7684\u533b\u7597\u6570\u636e\u96c6\u6765\u5b9e\u73b0\u56fe\u8c31\u7684\u642d\u5efa\u3002\u8be5\u6570\u636e\u96c6\u540d\u79f0\u4e3a\uff1amedical.json\uff0c\u5bf9\u5e94\u5b58\u653e\u4f4d\u7f6e\uff1a./NLP/MedicalKB/graph_data/medical.json \u6574\u4e2a\u56fe\u8c31\u642d\u5efa\u7684\u4ee3\u7801\u5b9e\u73b0\u96c6\u4e2d\u4e8e\u4e00\u4e2apy\u811a\u672c\uff0c\u8be5\u811a\u672c\u4e2d\u5171\u5305\u542b\uff1a\u4e00\u4e2a\u65b9\u6cd5\u548c\u4e00\u4e2a\u7c7b\uff1b \u65b9\u6cd5\uff1a\u7528\u4e8e\u67e5\u8be2medical.json\u7684\u6570\u91cf\u4ee5\u53ca\u6570\u636e\u683c\u5f0f \u7c7b\uff1a\u7528\u4e8e\u5b9e\u73b0\u4e09\u5143\u7ec4\u62bd\u53d6\u3001\u5b9e\u4f53\u63d2\u5165\u3001\u5173\u7cfb\u63d2\u5165\u7b49 \u4ee3\u7801\u8def\u5f84\uff1a./NLP/MedicalKB/build_kg_utils.py 2.1 \u6570\u636e\u89e3\u6790 \u00b6 \u76ee\u6807\uff1a\u8bfb\u53d6\u5e76\u7406\u89e3\u539f\u59cb\u533b\u7597\u6570\u636e\uff08\u5982JSON\u6587\u4ef6\u4e2d\u7684\u75be\u75c5\u3001\u75c7\u72b6\u3001\u836f\u54c1\u7b49\u4fe1\u606f\uff09\u3002 \u4efb\u52a1\uff1a\u89e3\u6790 medical.json \u6587\u4ef6\uff0c\u5c55\u793a\u6570\u636e\u7684\u7ed3\u6784\uff0c\u51c6\u5907\u597d\u7528\u4e8e\u6784\u5efa\u56fe\u8c31\u7684\u5b9e\u4f53\u548c\u5173\u7cfb\u3002 \u6784\u9020\u65b9\u6cd5\uff1aprint_data_info() \u4ee3\u7801\u5b9e\u73b0\uff1a def print_data_info ( data_path ): ''' \u5c55\u793a\u6570\u636e\u683c\u5f0f ''' i = 0 with open ( data_path , 'r' , encoding = 'utf8' ) as f : lines = f . readlines () print ( f '\u6570\u636e\u957f\u5ea6\uff1a { len ( lines ) } ' ) # 8808\u6761\u6837\u672c for line in lines : data = json . loads ( line ) print ( json . dumps ( data , sort_keys = True , indent = 4 , separators = ( ', ' , ': ' ), ensure_ascii = False )) i += 1 if i >= 5 : break # \u8fd0\u884c\u8be5\u51fd\u6570\uff0c\u5c55\u793a\u6570\u636e\u5185\u5bb9\uff1a data_path = \"./graph_data/medical.json\" print_data_info ( data_path ) \u7ed3\u679c\u5c55\u793a\uff1a medical.json\u5171\u5305\u542b8808\u6761\u6837\u672c\uff0c\u6bcf\u4e2a\u6837\u672c\u683c\u5f0f\u4e3a\u5b57\u5178\u6837\u5f0f\uff0c\u6bcf\u4e2a\u952e\u90fd\u4ee3\u8868\u4e86\u4e0e\u533b\u7597\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5b83\u4eec\u7684\u4e2d\u6587\u610f\u4e49\u89e3\u91ca\u5982\u4e0b\uff1a { # \u6570\u636e\u5e93\u4e2d\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002 \"_id\" : { \"$oid\" : \"5bb578b6831b973a137e3ee8\" }, # \u4f34\u968f\u75be\u75c5\u6216\u5e76\u53d1\u75c7\u3002 \"acompany\" : [ \"\u8d2b\u8840\" ], # \u75be\u75c5\u7684\u5206\u7c7b\uff0c\u8868\u660e\u75be\u75c5\u6240\u5c5e\u7684\u7c7b\u522b\u548c\u79d1\u5ba4\u3002 \"category\" : [ \"\u75be\u75c5\u767e\u79d1\" , \"\u6025\u8bca\u79d1\" ], # \u75be\u75c5\u7684\u75c5\u56e0 \"cause\" : \"\u5438\u5165\u82ef\u84b8\u6c14\u6216\u76ae\u80a4\u63a5\u89e6\u82ef\u800c\u5f15\u8d77\u7684\u4e2d\u6bd2\uff0c\u6709\u6025\u6027\u3001\u6162\u6027\u4e4b\u5206\u3002\u6025\u6027\u82ef\u4e2d\u6bd2\u4e3b\u8981\u5bf9\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u4ea7\u751f\u9ebb\u9189\u4f5c\u7528\uff0c\u51fa\u73b0\u660f\u8ff7\u548c\u808c\u8089\u62bd\u6410\uff1b\u9ad8\u6d53\u5ea6\u7684\u82ef\u5bf9\u76ae\u80a4\u6709\u523a\u6fc0\u4f5c\u7528\u3002\u957f\u671f\u63a5\u89d2\u4f4e\u6d53\u5ea6\u7684\u82ef\u53ef\u5f15\u8d77\u6162\u6027\u82ef\u4e2d\u6bd2\uff0c\u51fa\u73b0\u9020\u8840\u969c\u788d\uff0c\u65e9\u671f\u5e38\u89c1\u8840\u767d\u7ec6\u80de\u6570\u51cf\u4f4e\uff0c\u8fdb\u800c\u51fa\u73b0\u8840\u5c0f\u677f\u6570\u51cf\u5c11\u548c\u8d2b\u8840\u3002\u60a3\u8005\u53ef\u6709\u9f3b\u51fa\u8840\u3001\u7259\u9f88\u51fa\u8840\u3001\u76ae\u4e0b\u51fa\u8840\u3001\u6708\u7ecf\u8fc7\u591a\u7b49\u4e34\u5e8a\u8868\u73b0\u3002\\n\u6025\u6027\u82ef\u4e2d\u6bd2\u591a\u4e3a\u8bef\u670d\u6216\u6025\u6027\u5438\u5165\u542b\u82ef\u7684\u6709\u673a\u6eb6\u5242\u6240\u81f4\u3002\u8fd9\u4e9b\u6709\u673a\u6eb6\u5242\u5305\u62ec\u6cb9\u6f06\u3001\u7a00\u6599\u3001\u5de5\u4e1a\u80f6\u6c34\u7b49\u3002\u6162\u6027\u82ef\u4e2d\u6bd2\u662f\u957f\u671f\u5438\u5165\u4f4e\u6d53\u5ea6\u82ef\u53ca\u4ee3\u8c22\u4ea7\u7269\u915a\u7c7b\u6240\u81f4\u3002\" , # \u68c0\u67e5\u65b9\u6cd5\uff0c\u5217\u51fa\u786e\u8bca\u8be5\u75be\u75c5\u9700\u8981\u8fdb\u884c\u7684\u533b\u5b66\u68c0\u67e5\u9879\u76ee\u3002 \"check\" : [ \"\u8840\u5e38\u89c4\" , \"\u9aa8\u9ad3\u8c61\u5206\u6790\" , \"\u5148\u4ee4\u6c0f\u6307\u6570\" ], # \u63a8\u8350\u836f\u54c1 \"common_drug\" : [ \"\u5e03\u7f8e\u4ed6\u5c3c\u7247\" , \"\u5341\u4e00\u5473\u91d1\u8272\u4e38\" ], # \u6cbb\u7597\u8d39\u7528\uff0c\u8868\u793a\u5728\u4e0d\u540c\u533b\u9662\u6cbb\u7597\u6b64\u75be\u75c5\u7684\u8d39\u7528\u8303\u56f4\u3002 \"cost_money\" : \"\u6839\u636e\u4e0d\u540c\u75c5\u60c5\uff0c\u4e0d\u540c\u533b\u9662\uff0c\u6536\u8d39\u6807\u51c6\u4e0d\u4e00\u81f4\uff0c\u5e02\u4e09\u7532\u533b\u9662\u7ea6\uff085000\u2014\u20148000\u5143\uff09\" , # \u6cbb\u7597\u79d1\u5ba4\uff0c\u5217\u51fa\u63a8\u8350\u6cbb\u7597\u8be5\u75be\u75c5\u7684\u533b\u9662\u79d1\u5ba4 \"cure_department\" : [ \"\u6025\u8bca\u79d1\" ], # \u6cbb\u7597\u6301\u7eed\u65f6\u95f4\uff0c\u8868\u793a\u4ece\u8bca\u65ad\u5230\u6cbb\u6108\u6240\u9700\u7684\u5927\u6982\u65f6\u95f4\u3002 \"cure_lasttime\" : \"\u6839\u636e\u4e0d\u540c\u75c5\u60c5\u4e00\u822c\u4e3a2-4\u5468\" , # \u6cbb\u7597\u65b9\u5f0f\uff0c\u5217\u51fa\u5e38\u7528\u7684\u6cbb\u7597\u65b9\u6848\u6216\u65b9\u6cd5\u3002 \"cure_way\" : [ \"\u836f\u7269\u6cbb\u7597\" , \"\u652f\u6301\u6027\u6cbb\u7597\" ], # \u6cbb\u6108\u6982\u7387\uff0c\u6307\u6cbb\u6108\u8be5\u75be\u75c5\u7684\u9884\u671f\u6210\u529f\u7387\u3002 \"cured_prob\" : \"\u7ea675%\" , # \u75be\u75c5\u63cf\u8ff0\uff0c\u7b80\u8981\u8bf4\u660e\u8be5\u75be\u75c5\u7684\u6982\u51b5\u548c\u7279\u5f81\u3002 \"desc\" : \"\u82ef(benzene)\u662f\u4ece\u7164\u7126\u6cb9\u5206\u998f\u53ca\u77f3\u6cb9\u88c2\u89e3\u6240\u5f97\u7684\u4e00\u79cd\u82b3\u9999\u70c3\u5316\u5408\u7269\uff0c\u7cfb\u65e0\u8272\u6709\u82b3\u9999\u6c14\u5473\u7684\u6cb9\u72b6\u6db2\u4f53\u3002\u6325\u53d1\u751a\u901f\uff0c\u6613\u71c3\u6613\u7206\u3002\u5de5\u4e1a\u4e0a\u7528\u4f5c\u6eb6\u5242\u3001\u7a00\u91ca\u5242\u548c\u5316\u5de5\u539f\u6599\u3002\u82ef\u5c5e\u4e2d\u7b49\u6bd2\u7c7b\uff0c\u53ef\u5f15\u8d77\u6025\u6027\u6216\u6162\u6027\u4e2d\u6bd2\u3002\\n\u6025\u6027\u82ef\u4e2d\u6bd2\u662f\u6307\u53e3\u670d\u542b\u82ef\u7684\u6709\u673a\u6eb6\u5242\u6216\u5438\u5165\u9ad8\u6d53\u5ea6\u82ef\u84b8\u6c14\u540e\uff0c\u51fa\u73b0\u4ee5\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u9ebb\u9189\u4f5c\u7528\u4e3a\u4e3b\u8981\u8868\u73b0\u7684\u75c5\u7406\u751f\u7406\u8fc7\u7a0b\uff0c\u4e3b\u8981\u75c7\u72b6\u8f7b\u8005\u4e3a\u9189\u9152\u72b6\uff0c\u6b65\u6001\u4e0d\u7a33\uff0c\u54ed\u7b11\u5931\u5e38\uff0c\u91cd\u8005\u610f\u8bc6\u4e27\u5931\uff0c\u62bd\u6410\uff0c\u53ef\u56e0\u547c\u5438\u4e2d\u67a2\u9ebb\u75f9\u6216\u5faa\u73af\u8870\u7aed\u6b7b\u4ea1\u3002\u6162\u6027\u82ef\u4e2d\u6bd2\u662f\u6307\u82ef\u53ca\u5176\u4ee3\u8c22\u4ea7\u7269\u915a\u7c7b\u5f71\u54cd\u4e86\u9aa8\u9ad3\u7684\u9020\u8840\u529f\u80fd\uff0c\u4e34\u5e8a\u8868\u73b0\u4e3a\u767d\u7ec6\u80de\u8ba1\u6570\u548c\u8840\u5c0f\u677f\u7acb\u79cb\u6301\u7eed\u51cf\u5c11\uff0c\u6700\u7ec8\u53d1\u5c55\u4e3a\u518d\u751f\u969c\u788d\u6027\u8d2b\u8840\u6216\u767d\u8840\u75c5\u3002\u4e5f\u53ef\u5f71\u54cd\u795e\u7ecf\u7cfb\u7edf\uff0c\u8868\u73b0\u4e3a\u795e\u7ecf\u8870\u5f31\u548c\u81ea\u4e3b\u795e\u7ecf\u529f\u80fd\u7d0a\u4e71\u3002\" , # \u6613\u5403\u98df\u7269 \"do_eat\" : [ \"\u9e21\u86cb\" , \"\u5927\u8c46\" , \"\u732a\u8089(\u7626)\" , \"\u6a31\u6843\u756a\u8304\" ], # \u836f\u7269\u8be6\u60c5\uff0c\u5217\u51fa\u8be5\u75be\u75c5\u76f8\u5173\u7684\u63a8\u8350\u836f\u7269\u3002 \"drug_detail\" : [ \"\u6842\u6797\u5357\u836f\u5e03\u7f8e\u4ed6\u5c3c\u7247(\u5e03\u7f8e\u4ed6\u5c3c\u7247)\" , \"\u96c4\u5df4\u62c9\u66f2\u795e\u6c34\u5341\u4e00\u5473\u91d1\u8272\u4e38(\u5341\u4e00\u5473\u91d1\u8272\u4e38)\" , \"\u897f\u85cf\u7518\u9732\u4ec1\u9752\u8292\u89c9(\u4ec1\u9752\u8292\u89c9)\" , \"\u91d1\u8bc3\u85cf\u836f\u5927\u6708\u6676\u4e38(\u5927\u6708\u6676\u4e38)\" , \"\u91d1\u8bc3\u85cf\u836f\u4ec1\u9752\u8292\u89c9(\u4ec1\u9752\u8292\u89c9)\" ] # \u5bb9\u6613\u60a3\u75c5 \"easy_get\" : \"\u591a\u89c1\u4e8e\u5236\u978b\u5de5\u4eba\u53ca\u63a5\u89e6\u5316\u5de5\u67d3\u6599\u7684\u5de5\u4eba\" , # \u60a3\u75c5\u6982\u7387\uff0c\u6307\u8be5\u75be\u75c5\u5728\u4eba\u7fa4\u4e2d\u7684\u53d1\u751f\u6982\u7387\u3002 \"get_prob\" : \"0.065%\" , # \u4f20\u64ad\u9014\u5f84\uff0c\u63cf\u8ff0\u8be5\u75be\u75c5\u7684\u4f20\u67d3\u6027\u548c\u4f20\u64ad\u65b9\u5f0f\u3002 \"get_way\" : \"\u65e0\u4f20\u67d3\u6027\" , # \u75be\u75c5\u540d\u79f0\uff0c\u8868\u793a\u8be5\u75be\u75c5\u7684\u6b63\u5f0f\u540d\u79f0\u3002 \"name\" : \"\u82ef\u4e2d\u6bd2\" , # \u5fcc\u5403\u98df\u7269 \"not_eat\" : [ \"\u6d77\u87f9\" , \"\u6d77\u867e\" , \"\u6d77\u53c2\uff08\u6c34\u6d78\uff09\" , \"\u8fa3\u6912(\u9752\u3001\u5c16)\" ], # \u9884\u9632\u63aa\u65bd\uff0c\u5217\u51fa\u9884\u9632\u8be5\u75be\u75c5\u7684\u5efa\u8bae\u6216\u6ce8\u610f\u4e8b\u9879\u3002 \"prevent\" : \"\u5bf9\u4e8e\u6025\u6027\u4e2d\u6bd2\u60a3\u8005\uff0c\u53ef\u4ee5\u7acb\u5373\u8131\u79bb\u73b0\u573a\u81f3\u7a7a\u6c14\u65b0\u9c9c\u5904\uff0c\u8131\u53bb\u6c61\u67d3\u7684\u8863\u7740\uff0c\u5e76\u7528\u80a5\u7682\u6c34\u6216\u6e05\u6c34\u51b2\u6d17\u6c61\u67d3\u7684\u76ae\u80a4\u3002\u53e3\u670d\u4e2d\u6bd2\u8005\uff0c\u8981\u7ed9\u60a3\u8005\u6d17\u80c3\uff0c\u4e2d\u6bd2\u8005\u5e94\u5367\u5e8a\u9759\u606f\uff0c\u5e76\u63a5\u53d7\u5bf9\u75c7\u3001\u652f\u6301\u6cbb\u7597\uff0c\u53ef\u7ed9\u4e88\u8461\u8404\u7cd6\u919b\u9178\u3002\u8981\u6ce8\u610f\u9632\u6b62\u60a3\u8005\u51fa\u73b0\u8111\u6c34\u80bf\uff0c\u5207\u8bb0\u52ff\u7ed9\u5fc3\u640f\u672a\u505c\u8005\u4f7f\u7528\u80be\u4e0a\u817a\u7d20\uff0c\u5bf9\u7531\u4e8e\u82ef\u4e2d\u6bd2\u5f15\u8d77\u7684\u518d\u751f\u969c\u788d\u6027\u8d2b\u8840\u75c7\u60a3\u8005\uff0c\u53ef\u7ed9\u4e88\u5c0f\u91cf\u591a\u6b21\u8f93\u8840\u53ca\u7cd6\u76ae\u8d28\u6fc0\u7d20\u6cbb\u7597\u3002\" , # \u63a8\u8350\u836f\u7269\uff0c\u5217\u51fa\u6cbb\u7597\u8be5\u75be\u75c5\u7684\u5e38\u7528\u836f\u7269\u3002 \"recommand_drug\" : [ \"\u5e03\u7f8e\u4ed6\u5c3c\u7247\" , \"\u5341\u4e00\u5473\u91d1\u8272\u4e38\" , \"\u6ce8\u5c04\u7528\u5e03\u7f8e\u4ed6\u5c3c\" , \"\u6ce8\u5c04\u7528\u544b\u585e\u7c73\" , \"\u76d0\u9178\u5229\u591a\u5361\u56e0\u6ce8\u5c04\u6db2\" ] # \u63a8\u8350\u98df\u7269 \"recommand_eat\" : [ \"\u8c46\u8150\u5e72\u7092\u97ed\u83dc\" , \"\u7d20\u7092\u5c0f\u767d\u83dc\" , \"\u767d\u83dc\u86cb\u82b1\u7ca5\" ], # \u75c7\u72b6\uff0c\u5217\u51fa\u8be5\u75be\u75c5\u7684\u5178\u578b\u4e34\u5e8a\u75c7\u72b6\u3002 \"symptom\" : [ \"\u6076\u5fc3\" , \"\u62bd\u6410\" , \"\u611f\u89c9\u969c\u788d\" ], # \u533b\u4fdd\u72b6\u6001\uff0c\u6307\u8be5\u75be\u75c5\u7684\u6cbb\u7597\u662f\u5426\u88ab\u7eb3\u5165\u533b\u4fdd\u3002 \"yibao_status\" : \"\u5426\" } 2.2 \u4e09\u5143\u7ec4\u63d0\u53d6 \u00b6 \u4efb\u52a1\uff1a\u4ece\u6570\u636e\u4e2d\u63d0\u53d6\u5b9e\u4f53\u53ca\u5bf9\u5e94\u7684\u5173\u7cfb \u6784\u9020\u7c7b\uff1aclass MedicalExtractor() \u8bf4\u660e\uff1a\u672c\u6b21\u6211\u4eec\u57fa\u4e8emedical.json\u6570\u636e\uff0c\u63d0\u53d6\u4e864\u79cd\u5b9e\u4f53\uff0c\u4ee5\u53ca4\u79cd\u5173\u7cfb\u3002 \u5b9e\u4f53\u7c7b\u578b\uff1a \u75be\u75c5 : diseases \u75c7\u72b6 : symptoms \u98df\u7269 : foods \u836f\u54c1 : drugs \u5173\u7cfb\u7c7b\u578b \u75be\u75c5-\u75c7\u72b6 : [disease,'has_symptom', symptom] \u75be\u75c5\uff0d\u5fcc\u5403\u98df\u7269 : [disease,'not_eat', food] \u75be\u75c5\uff0d\u6613\u5403\u98df\u7269 : [disease,'do_eat', food] \u75be\u75c5\uff0d\u63a8\u8350\u836f\u54c1 : [disease,'recommand_drug', drug] \u4ee3\u7801\u5b9e\u73b0\uff1a class MedicalExtractor ( object ): def __init__ ( self ): super ( MedicalExtractor , self ) . __init__ () self . graph = Graph ( \"http://localhost:7474\" , auth = ( \"neo4j\" , \"12345\" )) # \u51714\u7c7b\u8282\u70b9 self . drugs = [] # \u836f\u54c1 self . foods = [] #\u3000\u98df\u7269 self . diseases = [] #\u75be\u75c5 self . symptoms = [] #\u75c7\u72b6 # \u6784\u5efa\u8282\u70b9\u5b9e\u4f53\u5173\u7cfb self . rels_noteat = [] # \u75be\u75c5\uff0d\u5fcc\u5403\u98df\u7269\u5173\u7cfb self . rels_doeat = [] # \u75be\u75c5\uff0d\u5b9c\u5403\u98df\u7269\u5173\u7cfb self . rels_recommanddrug = [] # \u75be\u75c5\uff0d\u70ed\u95e8\u836f\u54c1\u5173\u7cfb self . rels_symptom = [] # \u75be\u75c5\u75c7\u72b6\u5173\u7cfb def extract_triples ( self , data_path ): print ( \"\u4ecejson\u6587\u4ef6\u4e2d\u8f6c\u6362\u62bd\u53d6\u4e09\u5143\u7ec4\" ) with open ( data_path , 'r' , encoding = 'utf8' ) as f : for line in tqdm ( f . readlines (), ncols = 80 ): data_json = json . loads ( line ) disease = data_json [ 'name' ] self . diseases . append ( disease ) if 'symptom' in data_json : self . symptoms += data_json [ 'symptom' ] for symptom in data_json [ 'symptom' ]: self . rels_symptom . append ([ disease , 'has_symptom' , symptom ]) if 'acompany' in data_json : for acompany in data_json [ 'acompany' ]: self . diseases . append ( acompany ) if 'recommand_drug' in data_json : recommand_drug = data_json [ 'recommand_drug' ] self . drugs += recommand_drug for drug in recommand_drug : self . rels_recommanddrug . append ([ disease , 'recommand_drug' , drug ]) if 'not_eat' in data_json : not_eat = data_json [ 'not_eat' ] for _not in not_eat : self . rels_noteat . append ([ disease , 'not_eat' , _not ]) self . foods += not_eat do_eat = data_json [ 'do_eat' ] for _do in do_eat : self . rels_doeat . append ([ disease , 'do_eat' , _do ]) self . foods += do_eat if 'drug_detail' in data_json : for det in data_json [ 'drug_detail' ]: det_spilt = det . split ( '(' ) if len ( det_spilt ) == 2 : p , d = det_spilt d = d . rstrip ( ')' ) self . drugs . append ( d ) else : d = det_spilt [ 0 ] self . drugs . append ( d ) 2.3 \u5b9e\u4f53\u63d2\u5165 \u00b6 \u4efb\u52a1\uff1a\u5c06\u63d0\u53d6\u7684\u5b9e\u4f53\u63d2\u5165\u5230Neo4j\u56fe\u6570\u636e\u5e93 \u6784\u9020\u65b9\u6cd5\uff1a\u5728\u4e0a\u8ff0\u5b9a\u4e49\u7684\u7c7b\u5185\uff0c\u6784\u9020\u4e24\u4e2a\u51fd\u6570\u5206\u522b\u4e3awrite_nodes() \u548ccreate_nodes() write_nodes\u51fd\u6570\u5b9e\u73b0\uff1a \u7528\u4e8e\u6784\u9020cypher\u8bed\u53e5\uff0c\u5c06\u5b9e\u4f53\u5199\u5165\u6570\u636e\u5e93 def write_nodes ( self , entitys , entity_type ): print ( \"\u5199\u5165 {0} \u5b9e\u4f53\" . format ( entity_type )) for node in tqdm ( set ( entitys ), ncols = 80 ): cql = \"\"\"MERGE(n: {label} {{name:' {entity_name} '}})\"\"\" . format ( label = entity_type , entity_name = node . replace ( \"'\" , \"\" )) try : self . graph . run ( cql ) except Exception as e : print ( e ) print ( cql ) create_nodes\u51fd\u6570\u5b9e\u73b0 \u8c03\u7528wirte_nodes\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u6240\u6709\u5b9e\u4f53\u7edf\u4e00\u5199\u5165\u6570\u636e\u5e93 def create_entitys ( self ): self . write_nodes ( self . drugs , '\u836f\u54c1' ) self . write_nodes ( self . symptoms , '\u83dc\u8c31' ) self . write_nodes ( self . foods , '\u98df\u7269' ) self . write_nodes ( self . diseases , '\u75be\u75c5' ) 2.4 \u5173\u7cfb\u63d2\u5165 \u00b6 \u4efb\u52a1\uff1a\u5c06\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u63d2\u5165\u5230Neo4j\u56fe\u6570\u636e\u5e93\u3002 \u6784\u9020\u65b9\u6cd5\uff1a\u5728\u4e0a\u8ff0\u5b9a\u4e49\u7684\u7c7b\u5185\uff0c\u6784\u9020\u4e24\u4e2a\u51fd\u6570\u5206\u522b\u4e3awrite_edges() \u548c create_relations() write_edges\u51fd\u6570\u5b9e\u73b0\uff1a \u7528\u4e8e\u6784\u9020cypher\u8bed\u53e5\uff0c\u5c06\u5b9e\u4f53\u5bf9\u5e94\u5173\u7cfb\u5199\u5165\u6570\u636e\u5e93 def write_edges ( self , triples , head_type , tail_type ): print ( \"\u5199\u5165 {0} \u5173\u7cfb\" . format ( triples [ 0 ][ 1 ])) for head , relation , tail in tqdm ( triples , ncols = 80 ): cql = \"\"\"MATCH(p: {head_type} ),(q: {tail_type} ) WHERE p.name=' {head} ' AND q.name=' {tail} ' MERGE (p)-[r: {relation} ]->(q)\"\"\" . format ( head_type = head_type , tail_type = tail_type , head = head . replace ( \"'\" , \"\" ), tail = tail . replace ( \"'\" , \"\" ), relation = relation ) try : self . graph . run ( cql ) except Exception as e : print ( e ) print ( cql ) create_relations()\u51fd\u6570\u5b9e\u73b0\uff1a \u8c03\u7528write_edges\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u6240\u6709\u5b9e\u4f53\u5173\u7cfb\u7edf\u4e00\u5199\u5165\u6570\u636e\u5e93 def create_relations ( self ): self . write_edges ( self . rels_noteat , '\u75be\u75c5' , '\u98df\u7269' ) self . write_edges ( self . rels_doeat , '\u75be\u75c5' , '\u98df\u7269' ) self . write_edges ( self . rels_symptom , '\u75be\u75c5' , '\u75c7\u72b6' ) self . write_edges ( self . rels_recommanddrug , '\u75be\u75c5' , '\u836f\u54c1' ) 3 \u56fe\u8c31\u5c55\u793a \u00b6 \u4e0b\u56fe\u662f\u57fa\u4e8eNeo4j\u6570\u636e\u5e93\u5bfc\u5165SPO\u4e09\u5143\u7ec4\u540e\u5c55\u793a\u6548\u679c\uff1a \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u5c0f\u8282\u8bb2\u89e3\u4e86\u5982\u4f55\u9009\u62e9\u56fe\u6570\u636e\u5e93\u6784\u5efa\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\uff0c\u5e76\u901a\u8fc7\u5b9a\u4e49\u5b9e\u4f53\u548c\u5173\u7cfb\u3001\u5bfc\u5165\u6570\u636e\u53ca\u4f7f\u7528\u67e5\u8be2\u8bed\u8a00\u8fdb\u884c\u64cd\u4f5c\uff0c\u5b8c\u6210\u56fe\u8c31\u7684\u642d\u5efa\u548c\u5c55\u793a\u3002","title":"6.2 \u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u642d\u5efa"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#_1","text":"","title":"\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u642d\u5efa"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#_2","text":"\u7406\u89e3\u5982\u4f55\u901a\u8fc7\u56fe\u6570\u636e\u5e93\u6784\u5efa\u533b\u7597\u77e5\u8bc6\u56fe\u8c31 \u5b66\u4f1a\u5982\u4f55\u5c06\u7ed3\u6784\u5316\u7684\u533b\u7597\u6570\u636e\u8f6c\u5316\u4e3a\u77e5\u8bc6\u56fe\u8c31 \u638c\u63e1\u5982\u4f55\u4f7f\u7528Python\u4ee3\u7801\u4e0eNeo4j\u4ea4\u4e92\uff0c\u6784\u5efa\u5b9e\u4f53\u548c\u5173\u7cfb","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#_3","text":"\u6b65\u9aa41: \u9009\u62e9\u56fe\u6570\u636e\u5e93 \u6b65\u9aa42: \u56fe\u8c31\u642d\u5efa \u6b65\u9aa43: \u56fe\u8c31\u5c55\u793a","title":"\u642d\u5efa\u56fe\u8c31\u7684\u57fa\u672c\u6b65\u9aa4"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#1","text":"\u56fe\u6570\u636e\u5e93\u662f\u5b58\u50a8\u548c\u7ba1\u7406\u77e5\u8bc6\u56fe\u8c31\u7684\u6838\u5fc3\u3002\u9009\u62e9\u5408\u9002\u7684\u6570\u636e\u5e93\u5de5\u5177\u5bf9\u56fe\u8c31\u7684\u6548\u7387\u548c\u53ef\u6269\u5c55\u6027\u6709\u91cd\u8981\u5f71\u3002 Neo4j\uff1a\u6700\u5e38\u7528\u7684\u56fe\u6570\u636e\u5e93\uff0c\u652f\u6301Cypher\u67e5\u8be2\u8bed\u8a00\uff0c\u9002\u5408\u5927\u89c4\u6a21\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u7684\u6784\u5efa\u548c\u67e5\u8be2\u3002 RDF-based\u6570\u636e\u5e93\uff08\u4e86\u89e3\uff09\uff1a\u5982GraphDB\u3001Virtuoso\uff0c\u9002\u5408\u5904\u7406\u8bed\u4e49\u7f51\u6807\u51c6\u7684\u77e5\u8bc6\u56fe\u8c31\uff0c\u5982\u4f7f\u7528RDF\u3001OWL\u7b49\u683c\u5f0f\u3002 \u76f8\u6bd4\u4f20\u7edfMysql\u7b49\u6570\u636e\uff0c\u56fe\u6570\u636e\u5e93\u7684\u4f18\u52bf\uff1a Neo4j\u56fe\u6570\u636e\u5e93\u80fd\u9ad8\u6548\u5904\u7406\u590d\u6742\u5173\u7cfb\u3001\u7075\u6d3b\u7684\u6570\u636e\u7ed3\u6784\u3001\u7b80\u6d01\u7684\u67e5\u8be2\u8bed\u8a00\u3001\u9002\u5408\u5927\u89c4\u6a21\u56fe\u6570\u636e\u548c\u63a8\u7406\u80fd\u529b\u7b49\u7279\u70b9\u3002\u800cMySQL\u7b49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5728\u9762\u5bf9\u591a\u5c42\u6b21\u3001\u52a8\u6001\u53d8\u5316\u7684\u590d\u6742\u5173\u8054\u65f6\uff0c\u8868\u73b0\u4e0d\u4f73\uff0c\u67e5\u8be2\u6027\u80fd\u8f83\u5dee\uff0c\u4e14\u6a21\u578b\u7684\u6269\u5c55\u6027\u8f83\u4f4e\u3002\u56e0\u6b64\uff0c\u6784\u5efa\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\u65f6\uff0c\u9009\u62e9Neo4j\u8fd9\u6837\u7684\u56fe\u6570\u636e\u5e93\u4f1a\u66f4\u6709\u4f18\u52bf\u3002","title":"1 \u9009\u62e9\u56fe\u6570\u636e\u5e93"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#2","text":"\u524d\u9762\u7ae0\u8282\uff0c\u6211\u4eec\u5df2\u7ecf\u5b66\u4e60\u4e86\u5982\u4f55\u4ece\u6587\u672c\u4e2d\u62bd\u53d6\u5b9e\u4f53\u3001\u4ee5\u53ca\u5173\u7cfb\u3002\u90a3\u4e48\u5982\u679c\u8981\u60f3\u642d\u5efa\u56fe\u8c31\uff0c\u9700\u8981\u63d0\u524d\u51c6\u5907\u597d\u76f8\u5e94\u7684\u5b9e\u4f53\u548c\u5173\u7cfb\u7b49\u6570\u636e\u3002 \u8bf4\u660e\uff1a \u7531\u4e8e\u4f01\u4e1a\u6570\u636e\u9690\u79c1\u6027\uff0c\u672c\u6b21\u642d\u5efa\u56fe\u8c31\u6211\u4eec\u5c06\u57fa\u4e8e\u4e00\u4e2a\u5f00\u6e90\u7684\u533b\u7597\u6570\u636e\u96c6\u6765\u5b9e\u73b0\u56fe\u8c31\u7684\u642d\u5efa\u3002\u8be5\u6570\u636e\u96c6\u540d\u79f0\u4e3a\uff1amedical.json\uff0c\u5bf9\u5e94\u5b58\u653e\u4f4d\u7f6e\uff1a./NLP/MedicalKB/graph_data/medical.json \u6574\u4e2a\u56fe\u8c31\u642d\u5efa\u7684\u4ee3\u7801\u5b9e\u73b0\u96c6\u4e2d\u4e8e\u4e00\u4e2apy\u811a\u672c\uff0c\u8be5\u811a\u672c\u4e2d\u5171\u5305\u542b\uff1a\u4e00\u4e2a\u65b9\u6cd5\u548c\u4e00\u4e2a\u7c7b\uff1b \u65b9\u6cd5\uff1a\u7528\u4e8e\u67e5\u8be2medical.json\u7684\u6570\u91cf\u4ee5\u53ca\u6570\u636e\u683c\u5f0f \u7c7b\uff1a\u7528\u4e8e\u5b9e\u73b0\u4e09\u5143\u7ec4\u62bd\u53d6\u3001\u5b9e\u4f53\u63d2\u5165\u3001\u5173\u7cfb\u63d2\u5165\u7b49 \u4ee3\u7801\u8def\u5f84\uff1a./NLP/MedicalKB/build_kg_utils.py","title":"2 \u56fe\u8c31\u642d\u5efa"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#21","text":"\u76ee\u6807\uff1a\u8bfb\u53d6\u5e76\u7406\u89e3\u539f\u59cb\u533b\u7597\u6570\u636e\uff08\u5982JSON\u6587\u4ef6\u4e2d\u7684\u75be\u75c5\u3001\u75c7\u72b6\u3001\u836f\u54c1\u7b49\u4fe1\u606f\uff09\u3002 \u4efb\u52a1\uff1a\u89e3\u6790 medical.json \u6587\u4ef6\uff0c\u5c55\u793a\u6570\u636e\u7684\u7ed3\u6784\uff0c\u51c6\u5907\u597d\u7528\u4e8e\u6784\u5efa\u56fe\u8c31\u7684\u5b9e\u4f53\u548c\u5173\u7cfb\u3002 \u6784\u9020\u65b9\u6cd5\uff1aprint_data_info() \u4ee3\u7801\u5b9e\u73b0\uff1a def print_data_info ( data_path ): ''' \u5c55\u793a\u6570\u636e\u683c\u5f0f ''' i = 0 with open ( data_path , 'r' , encoding = 'utf8' ) as f : lines = f . readlines () print ( f '\u6570\u636e\u957f\u5ea6\uff1a { len ( lines ) } ' ) # 8808\u6761\u6837\u672c for line in lines : data = json . loads ( line ) print ( json . dumps ( data , sort_keys = True , indent = 4 , separators = ( ', ' , ': ' ), ensure_ascii = False )) i += 1 if i >= 5 : break # \u8fd0\u884c\u8be5\u51fd\u6570\uff0c\u5c55\u793a\u6570\u636e\u5185\u5bb9\uff1a data_path = \"./graph_data/medical.json\" print_data_info ( data_path ) \u7ed3\u679c\u5c55\u793a\uff1a medical.json\u5171\u5305\u542b8808\u6761\u6837\u672c\uff0c\u6bcf\u4e2a\u6837\u672c\u683c\u5f0f\u4e3a\u5b57\u5178\u6837\u5f0f\uff0c\u6bcf\u4e2a\u952e\u90fd\u4ee3\u8868\u4e86\u4e0e\u533b\u7597\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5b83\u4eec\u7684\u4e2d\u6587\u610f\u4e49\u89e3\u91ca\u5982\u4e0b\uff1a { # \u6570\u636e\u5e93\u4e2d\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002 \"_id\" : { \"$oid\" : \"5bb578b6831b973a137e3ee8\" }, # \u4f34\u968f\u75be\u75c5\u6216\u5e76\u53d1\u75c7\u3002 \"acompany\" : [ \"\u8d2b\u8840\" ], # \u75be\u75c5\u7684\u5206\u7c7b\uff0c\u8868\u660e\u75be\u75c5\u6240\u5c5e\u7684\u7c7b\u522b\u548c\u79d1\u5ba4\u3002 \"category\" : [ \"\u75be\u75c5\u767e\u79d1\" , \"\u6025\u8bca\u79d1\" ], # \u75be\u75c5\u7684\u75c5\u56e0 \"cause\" : \"\u5438\u5165\u82ef\u84b8\u6c14\u6216\u76ae\u80a4\u63a5\u89e6\u82ef\u800c\u5f15\u8d77\u7684\u4e2d\u6bd2\uff0c\u6709\u6025\u6027\u3001\u6162\u6027\u4e4b\u5206\u3002\u6025\u6027\u82ef\u4e2d\u6bd2\u4e3b\u8981\u5bf9\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u4ea7\u751f\u9ebb\u9189\u4f5c\u7528\uff0c\u51fa\u73b0\u660f\u8ff7\u548c\u808c\u8089\u62bd\u6410\uff1b\u9ad8\u6d53\u5ea6\u7684\u82ef\u5bf9\u76ae\u80a4\u6709\u523a\u6fc0\u4f5c\u7528\u3002\u957f\u671f\u63a5\u89d2\u4f4e\u6d53\u5ea6\u7684\u82ef\u53ef\u5f15\u8d77\u6162\u6027\u82ef\u4e2d\u6bd2\uff0c\u51fa\u73b0\u9020\u8840\u969c\u788d\uff0c\u65e9\u671f\u5e38\u89c1\u8840\u767d\u7ec6\u80de\u6570\u51cf\u4f4e\uff0c\u8fdb\u800c\u51fa\u73b0\u8840\u5c0f\u677f\u6570\u51cf\u5c11\u548c\u8d2b\u8840\u3002\u60a3\u8005\u53ef\u6709\u9f3b\u51fa\u8840\u3001\u7259\u9f88\u51fa\u8840\u3001\u76ae\u4e0b\u51fa\u8840\u3001\u6708\u7ecf\u8fc7\u591a\u7b49\u4e34\u5e8a\u8868\u73b0\u3002\\n\u6025\u6027\u82ef\u4e2d\u6bd2\u591a\u4e3a\u8bef\u670d\u6216\u6025\u6027\u5438\u5165\u542b\u82ef\u7684\u6709\u673a\u6eb6\u5242\u6240\u81f4\u3002\u8fd9\u4e9b\u6709\u673a\u6eb6\u5242\u5305\u62ec\u6cb9\u6f06\u3001\u7a00\u6599\u3001\u5de5\u4e1a\u80f6\u6c34\u7b49\u3002\u6162\u6027\u82ef\u4e2d\u6bd2\u662f\u957f\u671f\u5438\u5165\u4f4e\u6d53\u5ea6\u82ef\u53ca\u4ee3\u8c22\u4ea7\u7269\u915a\u7c7b\u6240\u81f4\u3002\" , # \u68c0\u67e5\u65b9\u6cd5\uff0c\u5217\u51fa\u786e\u8bca\u8be5\u75be\u75c5\u9700\u8981\u8fdb\u884c\u7684\u533b\u5b66\u68c0\u67e5\u9879\u76ee\u3002 \"check\" : [ \"\u8840\u5e38\u89c4\" , \"\u9aa8\u9ad3\u8c61\u5206\u6790\" , \"\u5148\u4ee4\u6c0f\u6307\u6570\" ], # \u63a8\u8350\u836f\u54c1 \"common_drug\" : [ \"\u5e03\u7f8e\u4ed6\u5c3c\u7247\" , \"\u5341\u4e00\u5473\u91d1\u8272\u4e38\" ], # \u6cbb\u7597\u8d39\u7528\uff0c\u8868\u793a\u5728\u4e0d\u540c\u533b\u9662\u6cbb\u7597\u6b64\u75be\u75c5\u7684\u8d39\u7528\u8303\u56f4\u3002 \"cost_money\" : \"\u6839\u636e\u4e0d\u540c\u75c5\u60c5\uff0c\u4e0d\u540c\u533b\u9662\uff0c\u6536\u8d39\u6807\u51c6\u4e0d\u4e00\u81f4\uff0c\u5e02\u4e09\u7532\u533b\u9662\u7ea6\uff085000\u2014\u20148000\u5143\uff09\" , # \u6cbb\u7597\u79d1\u5ba4\uff0c\u5217\u51fa\u63a8\u8350\u6cbb\u7597\u8be5\u75be\u75c5\u7684\u533b\u9662\u79d1\u5ba4 \"cure_department\" : [ \"\u6025\u8bca\u79d1\" ], # \u6cbb\u7597\u6301\u7eed\u65f6\u95f4\uff0c\u8868\u793a\u4ece\u8bca\u65ad\u5230\u6cbb\u6108\u6240\u9700\u7684\u5927\u6982\u65f6\u95f4\u3002 \"cure_lasttime\" : \"\u6839\u636e\u4e0d\u540c\u75c5\u60c5\u4e00\u822c\u4e3a2-4\u5468\" , # \u6cbb\u7597\u65b9\u5f0f\uff0c\u5217\u51fa\u5e38\u7528\u7684\u6cbb\u7597\u65b9\u6848\u6216\u65b9\u6cd5\u3002 \"cure_way\" : [ \"\u836f\u7269\u6cbb\u7597\" , \"\u652f\u6301\u6027\u6cbb\u7597\" ], # \u6cbb\u6108\u6982\u7387\uff0c\u6307\u6cbb\u6108\u8be5\u75be\u75c5\u7684\u9884\u671f\u6210\u529f\u7387\u3002 \"cured_prob\" : \"\u7ea675%\" , # \u75be\u75c5\u63cf\u8ff0\uff0c\u7b80\u8981\u8bf4\u660e\u8be5\u75be\u75c5\u7684\u6982\u51b5\u548c\u7279\u5f81\u3002 \"desc\" : \"\u82ef(benzene)\u662f\u4ece\u7164\u7126\u6cb9\u5206\u998f\u53ca\u77f3\u6cb9\u88c2\u89e3\u6240\u5f97\u7684\u4e00\u79cd\u82b3\u9999\u70c3\u5316\u5408\u7269\uff0c\u7cfb\u65e0\u8272\u6709\u82b3\u9999\u6c14\u5473\u7684\u6cb9\u72b6\u6db2\u4f53\u3002\u6325\u53d1\u751a\u901f\uff0c\u6613\u71c3\u6613\u7206\u3002\u5de5\u4e1a\u4e0a\u7528\u4f5c\u6eb6\u5242\u3001\u7a00\u91ca\u5242\u548c\u5316\u5de5\u539f\u6599\u3002\u82ef\u5c5e\u4e2d\u7b49\u6bd2\u7c7b\uff0c\u53ef\u5f15\u8d77\u6025\u6027\u6216\u6162\u6027\u4e2d\u6bd2\u3002\\n\u6025\u6027\u82ef\u4e2d\u6bd2\u662f\u6307\u53e3\u670d\u542b\u82ef\u7684\u6709\u673a\u6eb6\u5242\u6216\u5438\u5165\u9ad8\u6d53\u5ea6\u82ef\u84b8\u6c14\u540e\uff0c\u51fa\u73b0\u4ee5\u4e2d\u67a2\u795e\u7ecf\u7cfb\u7edf\u9ebb\u9189\u4f5c\u7528\u4e3a\u4e3b\u8981\u8868\u73b0\u7684\u75c5\u7406\u751f\u7406\u8fc7\u7a0b\uff0c\u4e3b\u8981\u75c7\u72b6\u8f7b\u8005\u4e3a\u9189\u9152\u72b6\uff0c\u6b65\u6001\u4e0d\u7a33\uff0c\u54ed\u7b11\u5931\u5e38\uff0c\u91cd\u8005\u610f\u8bc6\u4e27\u5931\uff0c\u62bd\u6410\uff0c\u53ef\u56e0\u547c\u5438\u4e2d\u67a2\u9ebb\u75f9\u6216\u5faa\u73af\u8870\u7aed\u6b7b\u4ea1\u3002\u6162\u6027\u82ef\u4e2d\u6bd2\u662f\u6307\u82ef\u53ca\u5176\u4ee3\u8c22\u4ea7\u7269\u915a\u7c7b\u5f71\u54cd\u4e86\u9aa8\u9ad3\u7684\u9020\u8840\u529f\u80fd\uff0c\u4e34\u5e8a\u8868\u73b0\u4e3a\u767d\u7ec6\u80de\u8ba1\u6570\u548c\u8840\u5c0f\u677f\u7acb\u79cb\u6301\u7eed\u51cf\u5c11\uff0c\u6700\u7ec8\u53d1\u5c55\u4e3a\u518d\u751f\u969c\u788d\u6027\u8d2b\u8840\u6216\u767d\u8840\u75c5\u3002\u4e5f\u53ef\u5f71\u54cd\u795e\u7ecf\u7cfb\u7edf\uff0c\u8868\u73b0\u4e3a\u795e\u7ecf\u8870\u5f31\u548c\u81ea\u4e3b\u795e\u7ecf\u529f\u80fd\u7d0a\u4e71\u3002\" , # \u6613\u5403\u98df\u7269 \"do_eat\" : [ \"\u9e21\u86cb\" , \"\u5927\u8c46\" , \"\u732a\u8089(\u7626)\" , \"\u6a31\u6843\u756a\u8304\" ], # \u836f\u7269\u8be6\u60c5\uff0c\u5217\u51fa\u8be5\u75be\u75c5\u76f8\u5173\u7684\u63a8\u8350\u836f\u7269\u3002 \"drug_detail\" : [ \"\u6842\u6797\u5357\u836f\u5e03\u7f8e\u4ed6\u5c3c\u7247(\u5e03\u7f8e\u4ed6\u5c3c\u7247)\" , \"\u96c4\u5df4\u62c9\u66f2\u795e\u6c34\u5341\u4e00\u5473\u91d1\u8272\u4e38(\u5341\u4e00\u5473\u91d1\u8272\u4e38)\" , \"\u897f\u85cf\u7518\u9732\u4ec1\u9752\u8292\u89c9(\u4ec1\u9752\u8292\u89c9)\" , \"\u91d1\u8bc3\u85cf\u836f\u5927\u6708\u6676\u4e38(\u5927\u6708\u6676\u4e38)\" , \"\u91d1\u8bc3\u85cf\u836f\u4ec1\u9752\u8292\u89c9(\u4ec1\u9752\u8292\u89c9)\" ] # \u5bb9\u6613\u60a3\u75c5 \"easy_get\" : \"\u591a\u89c1\u4e8e\u5236\u978b\u5de5\u4eba\u53ca\u63a5\u89e6\u5316\u5de5\u67d3\u6599\u7684\u5de5\u4eba\" , # \u60a3\u75c5\u6982\u7387\uff0c\u6307\u8be5\u75be\u75c5\u5728\u4eba\u7fa4\u4e2d\u7684\u53d1\u751f\u6982\u7387\u3002 \"get_prob\" : \"0.065%\" , # \u4f20\u64ad\u9014\u5f84\uff0c\u63cf\u8ff0\u8be5\u75be\u75c5\u7684\u4f20\u67d3\u6027\u548c\u4f20\u64ad\u65b9\u5f0f\u3002 \"get_way\" : \"\u65e0\u4f20\u67d3\u6027\" , # \u75be\u75c5\u540d\u79f0\uff0c\u8868\u793a\u8be5\u75be\u75c5\u7684\u6b63\u5f0f\u540d\u79f0\u3002 \"name\" : \"\u82ef\u4e2d\u6bd2\" , # \u5fcc\u5403\u98df\u7269 \"not_eat\" : [ \"\u6d77\u87f9\" , \"\u6d77\u867e\" , \"\u6d77\u53c2\uff08\u6c34\u6d78\uff09\" , \"\u8fa3\u6912(\u9752\u3001\u5c16)\" ], # \u9884\u9632\u63aa\u65bd\uff0c\u5217\u51fa\u9884\u9632\u8be5\u75be\u75c5\u7684\u5efa\u8bae\u6216\u6ce8\u610f\u4e8b\u9879\u3002 \"prevent\" : \"\u5bf9\u4e8e\u6025\u6027\u4e2d\u6bd2\u60a3\u8005\uff0c\u53ef\u4ee5\u7acb\u5373\u8131\u79bb\u73b0\u573a\u81f3\u7a7a\u6c14\u65b0\u9c9c\u5904\uff0c\u8131\u53bb\u6c61\u67d3\u7684\u8863\u7740\uff0c\u5e76\u7528\u80a5\u7682\u6c34\u6216\u6e05\u6c34\u51b2\u6d17\u6c61\u67d3\u7684\u76ae\u80a4\u3002\u53e3\u670d\u4e2d\u6bd2\u8005\uff0c\u8981\u7ed9\u60a3\u8005\u6d17\u80c3\uff0c\u4e2d\u6bd2\u8005\u5e94\u5367\u5e8a\u9759\u606f\uff0c\u5e76\u63a5\u53d7\u5bf9\u75c7\u3001\u652f\u6301\u6cbb\u7597\uff0c\u53ef\u7ed9\u4e88\u8461\u8404\u7cd6\u919b\u9178\u3002\u8981\u6ce8\u610f\u9632\u6b62\u60a3\u8005\u51fa\u73b0\u8111\u6c34\u80bf\uff0c\u5207\u8bb0\u52ff\u7ed9\u5fc3\u640f\u672a\u505c\u8005\u4f7f\u7528\u80be\u4e0a\u817a\u7d20\uff0c\u5bf9\u7531\u4e8e\u82ef\u4e2d\u6bd2\u5f15\u8d77\u7684\u518d\u751f\u969c\u788d\u6027\u8d2b\u8840\u75c7\u60a3\u8005\uff0c\u53ef\u7ed9\u4e88\u5c0f\u91cf\u591a\u6b21\u8f93\u8840\u53ca\u7cd6\u76ae\u8d28\u6fc0\u7d20\u6cbb\u7597\u3002\" , # \u63a8\u8350\u836f\u7269\uff0c\u5217\u51fa\u6cbb\u7597\u8be5\u75be\u75c5\u7684\u5e38\u7528\u836f\u7269\u3002 \"recommand_drug\" : [ \"\u5e03\u7f8e\u4ed6\u5c3c\u7247\" , \"\u5341\u4e00\u5473\u91d1\u8272\u4e38\" , \"\u6ce8\u5c04\u7528\u5e03\u7f8e\u4ed6\u5c3c\" , \"\u6ce8\u5c04\u7528\u544b\u585e\u7c73\" , \"\u76d0\u9178\u5229\u591a\u5361\u56e0\u6ce8\u5c04\u6db2\" ] # \u63a8\u8350\u98df\u7269 \"recommand_eat\" : [ \"\u8c46\u8150\u5e72\u7092\u97ed\u83dc\" , \"\u7d20\u7092\u5c0f\u767d\u83dc\" , \"\u767d\u83dc\u86cb\u82b1\u7ca5\" ], # \u75c7\u72b6\uff0c\u5217\u51fa\u8be5\u75be\u75c5\u7684\u5178\u578b\u4e34\u5e8a\u75c7\u72b6\u3002 \"symptom\" : [ \"\u6076\u5fc3\" , \"\u62bd\u6410\" , \"\u611f\u89c9\u969c\u788d\" ], # \u533b\u4fdd\u72b6\u6001\uff0c\u6307\u8be5\u75be\u75c5\u7684\u6cbb\u7597\u662f\u5426\u88ab\u7eb3\u5165\u533b\u4fdd\u3002 \"yibao_status\" : \"\u5426\" }","title":"2.1 \u6570\u636e\u89e3\u6790"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#22","text":"\u4efb\u52a1\uff1a\u4ece\u6570\u636e\u4e2d\u63d0\u53d6\u5b9e\u4f53\u53ca\u5bf9\u5e94\u7684\u5173\u7cfb \u6784\u9020\u7c7b\uff1aclass MedicalExtractor() \u8bf4\u660e\uff1a\u672c\u6b21\u6211\u4eec\u57fa\u4e8emedical.json\u6570\u636e\uff0c\u63d0\u53d6\u4e864\u79cd\u5b9e\u4f53\uff0c\u4ee5\u53ca4\u79cd\u5173\u7cfb\u3002 \u5b9e\u4f53\u7c7b\u578b\uff1a \u75be\u75c5 : diseases \u75c7\u72b6 : symptoms \u98df\u7269 : foods \u836f\u54c1 : drugs \u5173\u7cfb\u7c7b\u578b \u75be\u75c5-\u75c7\u72b6 : [disease,'has_symptom', symptom] \u75be\u75c5\uff0d\u5fcc\u5403\u98df\u7269 : [disease,'not_eat', food] \u75be\u75c5\uff0d\u6613\u5403\u98df\u7269 : [disease,'do_eat', food] \u75be\u75c5\uff0d\u63a8\u8350\u836f\u54c1 : [disease,'recommand_drug', drug] \u4ee3\u7801\u5b9e\u73b0\uff1a class MedicalExtractor ( object ): def __init__ ( self ): super ( MedicalExtractor , self ) . __init__ () self . graph = Graph ( \"http://localhost:7474\" , auth = ( \"neo4j\" , \"12345\" )) # \u51714\u7c7b\u8282\u70b9 self . drugs = [] # \u836f\u54c1 self . foods = [] #\u3000\u98df\u7269 self . diseases = [] #\u75be\u75c5 self . symptoms = [] #\u75c7\u72b6 # \u6784\u5efa\u8282\u70b9\u5b9e\u4f53\u5173\u7cfb self . rels_noteat = [] # \u75be\u75c5\uff0d\u5fcc\u5403\u98df\u7269\u5173\u7cfb self . rels_doeat = [] # \u75be\u75c5\uff0d\u5b9c\u5403\u98df\u7269\u5173\u7cfb self . rels_recommanddrug = [] # \u75be\u75c5\uff0d\u70ed\u95e8\u836f\u54c1\u5173\u7cfb self . rels_symptom = [] # \u75be\u75c5\u75c7\u72b6\u5173\u7cfb def extract_triples ( self , data_path ): print ( \"\u4ecejson\u6587\u4ef6\u4e2d\u8f6c\u6362\u62bd\u53d6\u4e09\u5143\u7ec4\" ) with open ( data_path , 'r' , encoding = 'utf8' ) as f : for line in tqdm ( f . readlines (), ncols = 80 ): data_json = json . loads ( line ) disease = data_json [ 'name' ] self . diseases . append ( disease ) if 'symptom' in data_json : self . symptoms += data_json [ 'symptom' ] for symptom in data_json [ 'symptom' ]: self . rels_symptom . append ([ disease , 'has_symptom' , symptom ]) if 'acompany' in data_json : for acompany in data_json [ 'acompany' ]: self . diseases . append ( acompany ) if 'recommand_drug' in data_json : recommand_drug = data_json [ 'recommand_drug' ] self . drugs += recommand_drug for drug in recommand_drug : self . rels_recommanddrug . append ([ disease , 'recommand_drug' , drug ]) if 'not_eat' in data_json : not_eat = data_json [ 'not_eat' ] for _not in not_eat : self . rels_noteat . append ([ disease , 'not_eat' , _not ]) self . foods += not_eat do_eat = data_json [ 'do_eat' ] for _do in do_eat : self . rels_doeat . append ([ disease , 'do_eat' , _do ]) self . foods += do_eat if 'drug_detail' in data_json : for det in data_json [ 'drug_detail' ]: det_spilt = det . split ( '(' ) if len ( det_spilt ) == 2 : p , d = det_spilt d = d . rstrip ( ')' ) self . drugs . append ( d ) else : d = det_spilt [ 0 ] self . drugs . append ( d )","title":"2.2 \u4e09\u5143\u7ec4\u63d0\u53d6"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#23","text":"\u4efb\u52a1\uff1a\u5c06\u63d0\u53d6\u7684\u5b9e\u4f53\u63d2\u5165\u5230Neo4j\u56fe\u6570\u636e\u5e93 \u6784\u9020\u65b9\u6cd5\uff1a\u5728\u4e0a\u8ff0\u5b9a\u4e49\u7684\u7c7b\u5185\uff0c\u6784\u9020\u4e24\u4e2a\u51fd\u6570\u5206\u522b\u4e3awrite_nodes() \u548ccreate_nodes() write_nodes\u51fd\u6570\u5b9e\u73b0\uff1a \u7528\u4e8e\u6784\u9020cypher\u8bed\u53e5\uff0c\u5c06\u5b9e\u4f53\u5199\u5165\u6570\u636e\u5e93 def write_nodes ( self , entitys , entity_type ): print ( \"\u5199\u5165 {0} \u5b9e\u4f53\" . format ( entity_type )) for node in tqdm ( set ( entitys ), ncols = 80 ): cql = \"\"\"MERGE(n: {label} {{name:' {entity_name} '}})\"\"\" . format ( label = entity_type , entity_name = node . replace ( \"'\" , \"\" )) try : self . graph . run ( cql ) except Exception as e : print ( e ) print ( cql ) create_nodes\u51fd\u6570\u5b9e\u73b0 \u8c03\u7528wirte_nodes\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u6240\u6709\u5b9e\u4f53\u7edf\u4e00\u5199\u5165\u6570\u636e\u5e93 def create_entitys ( self ): self . write_nodes ( self . drugs , '\u836f\u54c1' ) self . write_nodes ( self . symptoms , '\u83dc\u8c31' ) self . write_nodes ( self . foods , '\u98df\u7269' ) self . write_nodes ( self . diseases , '\u75be\u75c5' )","title":"2.3 \u5b9e\u4f53\u63d2\u5165"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#24","text":"\u4efb\u52a1\uff1a\u5c06\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u63d2\u5165\u5230Neo4j\u56fe\u6570\u636e\u5e93\u3002 \u6784\u9020\u65b9\u6cd5\uff1a\u5728\u4e0a\u8ff0\u5b9a\u4e49\u7684\u7c7b\u5185\uff0c\u6784\u9020\u4e24\u4e2a\u51fd\u6570\u5206\u522b\u4e3awrite_edges() \u548c create_relations() write_edges\u51fd\u6570\u5b9e\u73b0\uff1a \u7528\u4e8e\u6784\u9020cypher\u8bed\u53e5\uff0c\u5c06\u5b9e\u4f53\u5bf9\u5e94\u5173\u7cfb\u5199\u5165\u6570\u636e\u5e93 def write_edges ( self , triples , head_type , tail_type ): print ( \"\u5199\u5165 {0} \u5173\u7cfb\" . format ( triples [ 0 ][ 1 ])) for head , relation , tail in tqdm ( triples , ncols = 80 ): cql = \"\"\"MATCH(p: {head_type} ),(q: {tail_type} ) WHERE p.name=' {head} ' AND q.name=' {tail} ' MERGE (p)-[r: {relation} ]->(q)\"\"\" . format ( head_type = head_type , tail_type = tail_type , head = head . replace ( \"'\" , \"\" ), tail = tail . replace ( \"'\" , \"\" ), relation = relation ) try : self . graph . run ( cql ) except Exception as e : print ( e ) print ( cql ) create_relations()\u51fd\u6570\u5b9e\u73b0\uff1a \u8c03\u7528write_edges\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u6240\u6709\u5b9e\u4f53\u5173\u7cfb\u7edf\u4e00\u5199\u5165\u6570\u636e\u5e93 def create_relations ( self ): self . write_edges ( self . rels_noteat , '\u75be\u75c5' , '\u98df\u7269' ) self . write_edges ( self . rels_doeat , '\u75be\u75c5' , '\u98df\u7269' ) self . write_edges ( self . rels_symptom , '\u75be\u75c5' , '\u75c7\u72b6' ) self . write_edges ( self . rels_recommanddrug , '\u75be\u75c5' , '\u836f\u54c1' )","title":"2.4 \u5173\u7cfb\u63d2\u5165"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#3","text":"\u4e0b\u56fe\u662f\u57fa\u4e8eNeo4j\u6570\u636e\u5e93\u5bfc\u5165SPO\u4e09\u5143\u7ec4\u540e\u5c55\u793a\u6548\u679c\uff1a","title":"3 \u56fe\u8c31\u5c55\u793a"},{"location":"%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E5%9B%BE%E8%B0%B1%E6%90%AD%E5%BB%BA/02-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%9A%84%E6%90%AD%E5%BB%BA.html#_4","text":"\u672c\u5c0f\u8282\u8bb2\u89e3\u4e86\u5982\u4f55\u9009\u62e9\u56fe\u6570\u636e\u5e93\u6784\u5efa\u533b\u7597\u77e5\u8bc6\u56fe\u8c31\uff0c\u5e76\u901a\u8fc7\u5b9a\u4e49\u5b9e\u4f53\u548c\u5173\u7cfb\u3001\u5bfc\u5165\u6570\u636e\u53ca\u4f7f\u7528\u67e5\u8be2\u8bed\u8a00\u8fdb\u884c\u64cd\u4f5c\uff0c\u5b8c\u6210\u56fe\u8c31\u7684\u642d\u5efa\u548c\u5c55\u793a\u3002","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html","text":"\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3\u5173\u7cfb\u62bd\u53d6\u6982\u5ff5 \u4e86\u89e3\u5173\u7cfb\u62bd\u53d6\u7684\u4efb\u52a1\u7279\u70b9. \u638c\u63e1\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u7684\u8bc4\u4ef7\u6307\u6807. \u638c\u63e1\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u5e38\u7528\u65b9\u6cd5 1 \u5173\u7cfb\u62bd\u53d6\u6982\u5ff5 \u00b6 \u5173\u7cfb\u62bd\u53d6\u5c31\u662f\u4ece\u4e00\u6bb5\u6587\u672c\u4e2d\u62bd\u53d6\u51fa (\u4e3b\u4f53\uff0c\u5173\u7cfb\uff0c\u5ba2\u4f53) \u8fd9\u6837\u7684\u4e09\u5143\u7ec4\uff0c\u7528\u82f1\u6587\u8868\u793a\u5c31\u662f(subject, relation, object)\u8fd9\u6837\u7684\u4e09\u5143\u7ec4. \u5177\u4f53\u5b9a\u4e49: \u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50 S\uff0c\u5176\u4e2d\u5305\u542b\u5b9e\u4f53 A \u548c\u5b9e\u4f53 B\uff0c\u9884\u6d4b\u4e24\u4e2a\u5b9e\u4f53\u95f4\u7684\u5173\u7cfbr \u2208 R (R\u4ee3\u8868\u6570\u636e\u96c6\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u96c6\u5408) . \u6216\u8005\u8bf4\uff0c\u62bd\u53d6\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\u5c06\u975e\u7ed3\u6784\u5316\u7684\u6587\u672c\u4fe1\u606f\u8f6c\u5316\u4e3a\u7ed3\u6784\u5316\u7684\u4fe1\u606f\uff0c\u6700\u7ec8\u4ee5\u5173\u7cfb\u4e09\u5143\u7ec4\u3008S\uff0cP\uff0cO\u3009\u7684\u5f62\u5f0f\u6765\u63cf\u8ff0. \u5176\u4e2d\uff0cS \u548cO\u4e3a\u4e3b\u3001\u5ba2\u5b9e\u4f53\uff0cP\u4e3a\u9884\u6d4b\u51fa\u7684\u4e24\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb. \u5173\u7cfb\u62bd\u53d6\u4e24\u5927\u4efb\u52a1: \u8bc6\u522b\u6587\u672c\u4e2d\u7684subject\u548cobject (\u5b9e\u4f53\u8bc6\u522b\u4efb\u52a1) \u5224\u65ad\u8fd9\u4e24\u4e2a\u5b9e\u4f53\u5c5e\u4e8e\u54ea\u79cd\u5173\u7cfb (\u5173\u7cfb\u5206\u7c7b) 2 \u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u7279\u70b9 \u00b6 \u5173\u7cfb\u62bd\u53d6\u662f\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u95ee\u9898\uff0c\u76f8\u6bd4\u4e8e\u60c5\u611f\u5206\u6790\u3001\u65b0\u95fb\u5206\u7c7b\u7b49\u5176\u4ed6\u4efb\u52a1\uff0c\u5173\u7cfb\u62bd\u53d6\u4e3b\u8981\u67093\u4e2a\u7279\u70b9: \u9886\u57df\u4f17\u591a\uff0c\u5173\u7cfb\u6a21\u578b\u6784\u5efa\u590d\u6742. \u9488\u5bf9\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u9650\u5b9a\u9886\u57df\u7684\u5173\u7cfb\u62bd\u53d6\u7684\u7814\u7a76\u65f6\u95f4\u8f83\u957f\uff0c\u7814\u7a76\u8005\u6295\u5165\u7684\u7cbe\u529b\u76f8\u5bf9\u5f00\u53d1\u9886\u57df\u591a\uff0c\u56e0\u6b64\u65b9\u6cd5\u4f17\u591a\uff0c\u6280\u672f\u6210\u719f. \u6570\u636e\u6765\u6e90\u5e7f\uff0c\u4e3b\u8981\u6709\u7ed3\u6784\u5316\u3001\u534a\u7ed3\u6784\u5316\u3001\u65e0\u7ed3\u67843\u7c7b. \u7ed3\u6784\u5316\u6570\u636e\u9488\u5bf9\u8868\u683c\u6587\u6863\u3001\u6570\u636e\u5e93\u7b49\uff1b\u534a\u7ed3\u6784\u5316\u6570\u636e\u9488\u5bf9\u5982\u7ef4\u57fa\u767e\u79d1\u3001\u767e\u5ea6\u767e\u79d1\u7b49\uff1b\u65e0\u7ed3\u6784\u5c5e\u4e8e\u7eaf\u6587\u672c\u6570\u636e. \u5173\u7cfb\u79cd\u7c7b\u7e41\u591a\u4e14\u590d\u6742\uff0c\u566a\u97f3\u6570\u636e\u65e0\u6cd5\u907f\u514d\uff0c\u5b9e\u4f53\u95f4\u7684\u5173\u7cfb\u591a\u6837\uff0c\u6709\u4e00\u79cd\u6216\u8005\u591a\u79cd\u5173\u7cfb. 3 \u5173\u7cfb\u62bd\u53d6\u8bc4\u4ef7\u6307\u6807 \u00b6 \u9488\u5bf9\u7279\u5b9a\u9886\u57df\u7684\u5173\u7cfb\u62bd\u53d6\u7684\u7ed3\u679c\uff0c\u4e00\u822c\u901a\u8fc7\u8ba1\u7b97\u5bf9\u5e94\u7684\u51c6\u786e\u7387 ( Precision ) \u3001\u53ec\u56de\u7387 ( Recall ) \u548c F1 \u503c\u6765\u8bc4\u4ef7\uff0e\u5176\u4e2d\uff0c\u51c6\u786e\u7387\u662f\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\uff0c\u6a21\u578b\u6b63\u786e\u5206\u7c7b\u4e3a\u6b63\u7c7b\u7684\u6837\u672c\u6570\u4e0e\u5168\u90e8\u6b63\u7c7b\u6837\u672c\u6570\u4e4b\u6bd4\uff1b\u53ec\u56de\u7387\u5219\u662f\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\uff0c\u9884\u6d4b\u6b63\u786e\u7684\u6b63\u7c7b\u4e0e\u6240\u6709\u6b63\u7c7b\u6570\u636e\u7684\u6bd4\u503c\uff1b\u800c F1 \u503c\u5219\u662f\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u7684\u8c03\u548c\u5e73\u5747\u503c\uff0c\u53ef\u4ee5\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u8fdb\u884c\u7efc\u5408\u6027\u7684\u8bc4\u4ef7.\u5bf9\u5e94\u7684\u8ba1\u7b97\u4e3a: 4 \u5173\u7cfb\u62bd\u53d6\u7684\u5e38\u7528\u65b9\u6cd5 \u00b6 4.1 \u57fa\u4e8e\u89c4\u5219\u65b9\u5f0f\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6 \u00b6 \u57fa\u4e8e\u89c4\u5219\u7684\u77e5\u8bc6\u62bd\u53d6\u4e3b\u8981\u8fd8\u662f\u901a\u8fc7\u4eba\u5de5\u5b9a\u4e49\u4e00\u4e9b\u62bd\u53d6\u89c4\u5219\uff0c\u4ece\u6587\u672c\u4e2d\u62bd\u53d6\u51fa\u4e09\u5143\u7ec4\u4fe1\u606f (\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53) . \u91cd\u70b9\u5373\u662f\u5b9a\u4e49\u89c4\u5219. \u867d\u7136\u5b9a\u4e49\u89c4\u5219\u8fd9\u79cd\u62bd\u53d6\u65b9\u5f0f\u770b\u8d77\u6765\u6709\u70b9 low\uff0c\u4f46\u5374\u7b80\u5355\u5b9e\u7528\uff0c\u5f88\u591a\u65f6\u5019\uff0c\u6548\u679c\u6bd4\u5f88\u591a\u9ad8\u6df1\u7684\u7b97\u6cd5\u8fd8\u8981\u597d\u4e00\u4e9b (\u975e\u7edd\u5bf9\uff0c\u5177\u4f53\u9886\u57df\u5177\u4f53\u5206\u6790) . \u57fa\u4e8e\u89c4\u5219\u65b9\u6cd5\u7684\u5b9e\u73b0\u5728\u540e\u7eed\u7ae0\u8282\u4ecb\u7ecd 4.2 \u57fa\u4e8ePipeline\u6d41\u6c34\u7ebf\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6 \u00b6 Pipeline\u65b9\u6cd5\u662f\u6307\u5728\u5b9e\u4f53\u8bc6\u522b\u5df2\u7ecf\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u518d\u8fdb\u884c\u5b9e\u4f53\u4e4b\u95f4\u5173\u7cfb\u7684\u62bd\u53d6. \u57fa\u4e8ePipline\u6d41\u6c34\u7ebf\u65b9\u6cd5\u7684\u5b9e\u73b0\u5728\u540e\u7eed\u7ae0\u8282\u4ecb\u7ecd 4.3 \u57fa\u4e8eJoint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6 \u00b6 Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u901a\u8fc7\u4fee\u6539\u6807\u6ce8\u65b9\u6cd5\u548c\u6a21\u578b\u7ed3\u6784\u76f4\u63a5\u8f93\u51fa\u6587\u672c\u4e2d\u5305\u542b\u7684(ei ,rk, ej)\u4e09\u5143\u7ec4. Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u53c8\u5206\u4e3a: \"\u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u6a21\u578b\" \u548c \"\u8054\u5408\u89e3\u7801\u7684\u8054\u5408\u6a21\u578b\": \u57fa\u4e8ejoint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u7684\u5b9e\u73b0\u5728\u540e\u7eed\u7ae0\u8282\u4ecb\u7ecd. 5 \u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u5e38\u89c1\u95ee\u9898 \u00b6 \u6b63\u5e38\u5173\u7cfb (Normal) \u95ee\u9898: \u5373\u4e09\u5143\u7ec4\u4e4b\u95f4\u6ca1\u6709\u91cd\u53e0, \u6570\u636e\u4e2d\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f53\u5bf9\u53ca\u5173\u7cfb \u5982: \u201c\u300a\u4eba\u95f4\u300b\u662f\u738b\u83f2\u6f14\u5531\u6b4c\u66f2\u201c\u4e2d\u5b58\u57281\u79cd\u5173\u7cfb: (\u738b\u83f2-\u6b4c\u624b-\u4eba\u95f4) \u5355\u4e00\u5b9e\u4f53\u5173\u7cfb\u91cd\u53e0\u95ee\u9898 (Single Entity Overlap (SEO) ) \u6570\u636e\u4e2d\u4e00\u4e2a\u5b9e\u4f53\u53c2\u4e0e\u5230\u4e86\u591a\u4e2a\u5173\u7cfb\u4e2d \u5982: \u201c\u53f6\u6625\u53d9\u51fa\u751f\u4e8e\u6d59\u6c5f\uff0c\u6bd5\u4e1a\u4e8e\u9ec4\u57d4\u519b\u6821\u201d\u4e2d\u5b58\u5728\u4e24\u79cd\u5173\u7cfb: (\u53f6\u6625\u53d9-\u6bd5\u4e1a\u9662\u6821-\u9ec4\u57d4\u519b\u6821) \u3001 (\u53f6\u6625\u53d9-\u51fa\u751f\u5730-\u6d59\u6c5f) \u5b9e\u4f53\u5bf9\u91cd\u53e0(Entity Pair Overlap (EPO)): \u6570\u636e\u4e2d\u4e00\u4e2a\u5b9e\u4f53\u5bf9\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u5173\u7cfb\u7c7b\u578b \u5982: \u201c\u5468\u661f\u9a70\u5bfc\u6f14\u4e86\u300a\u529f\u592b\u300b\uff0c\u5e76\u62c5\u4efb\u7537\u4e3b\u89d2\u201d\u4e2d\u5b58\u57282\u79cd\u5173\u7cfb: (\u5468\u661f\u9a70-\u6f14\u5458-\u300a\u529f\u592b\u300b) \u3001 (\u5468\u661f\u9a70-\u5bfc\u6f14-\u300a\u529f\u592b\u300b) < /div ## \u5c0f\u8282\u603b\u7ed3 - \u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5173\u7cfb\u62bd\u53d6\u7684\u6982\u5ff5\u3001\u4efb\u52a1\u7279\u70b9\u3001\u8bc4\u4ef7\u6307\u6807\u3001\u5e38\u7528\u65b9\u6cd5\u4ee5\u53ca\u5e38\u89c1\u95ee\u9898\u7b49\u77e5\u8bc6","title":"4.1 \u5173\u7cfb\u62bd\u53d6\u57fa\u672c\u77e5\u8bc6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#_1","text":"","title":"\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#_2","text":"\u7406\u89e3\u5173\u7cfb\u62bd\u53d6\u6982\u5ff5 \u4e86\u89e3\u5173\u7cfb\u62bd\u53d6\u7684\u4efb\u52a1\u7279\u70b9. \u638c\u63e1\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u7684\u8bc4\u4ef7\u6307\u6807. \u638c\u63e1\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u5e38\u7528\u65b9\u6cd5","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#1","text":"\u5173\u7cfb\u62bd\u53d6\u5c31\u662f\u4ece\u4e00\u6bb5\u6587\u672c\u4e2d\u62bd\u53d6\u51fa (\u4e3b\u4f53\uff0c\u5173\u7cfb\uff0c\u5ba2\u4f53) \u8fd9\u6837\u7684\u4e09\u5143\u7ec4\uff0c\u7528\u82f1\u6587\u8868\u793a\u5c31\u662f(subject, relation, object)\u8fd9\u6837\u7684\u4e09\u5143\u7ec4. \u5177\u4f53\u5b9a\u4e49: \u7ed9\u5b9a\u4e00\u4e2a\u53e5\u5b50 S\uff0c\u5176\u4e2d\u5305\u542b\u5b9e\u4f53 A \u548c\u5b9e\u4f53 B\uff0c\u9884\u6d4b\u4e24\u4e2a\u5b9e\u4f53\u95f4\u7684\u5173\u7cfbr \u2208 R (R\u4ee3\u8868\u6570\u636e\u96c6\u4e2d\u6240\u6709\u5173\u7cfb\u7684\u96c6\u5408) . \u6216\u8005\u8bf4\uff0c\u62bd\u53d6\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\u5c06\u975e\u7ed3\u6784\u5316\u7684\u6587\u672c\u4fe1\u606f\u8f6c\u5316\u4e3a\u7ed3\u6784\u5316\u7684\u4fe1\u606f\uff0c\u6700\u7ec8\u4ee5\u5173\u7cfb\u4e09\u5143\u7ec4\u3008S\uff0cP\uff0cO\u3009\u7684\u5f62\u5f0f\u6765\u63cf\u8ff0. \u5176\u4e2d\uff0cS \u548cO\u4e3a\u4e3b\u3001\u5ba2\u5b9e\u4f53\uff0cP\u4e3a\u9884\u6d4b\u51fa\u7684\u4e24\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb. \u5173\u7cfb\u62bd\u53d6\u4e24\u5927\u4efb\u52a1: \u8bc6\u522b\u6587\u672c\u4e2d\u7684subject\u548cobject (\u5b9e\u4f53\u8bc6\u522b\u4efb\u52a1) \u5224\u65ad\u8fd9\u4e24\u4e2a\u5b9e\u4f53\u5c5e\u4e8e\u54ea\u79cd\u5173\u7cfb (\u5173\u7cfb\u5206\u7c7b)","title":"1 \u5173\u7cfb\u62bd\u53d6\u6982\u5ff5"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#2","text":"\u5173\u7cfb\u62bd\u53d6\u662f\u4e00\u4e2a\u6587\u672c\u5206\u7c7b\u95ee\u9898\uff0c\u76f8\u6bd4\u4e8e\u60c5\u611f\u5206\u6790\u3001\u65b0\u95fb\u5206\u7c7b\u7b49\u5176\u4ed6\u4efb\u52a1\uff0c\u5173\u7cfb\u62bd\u53d6\u4e3b\u8981\u67093\u4e2a\u7279\u70b9: \u9886\u57df\u4f17\u591a\uff0c\u5173\u7cfb\u6a21\u578b\u6784\u5efa\u590d\u6742. \u9488\u5bf9\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u9650\u5b9a\u9886\u57df\u7684\u5173\u7cfb\u62bd\u53d6\u7684\u7814\u7a76\u65f6\u95f4\u8f83\u957f\uff0c\u7814\u7a76\u8005\u6295\u5165\u7684\u7cbe\u529b\u76f8\u5bf9\u5f00\u53d1\u9886\u57df\u591a\uff0c\u56e0\u6b64\u65b9\u6cd5\u4f17\u591a\uff0c\u6280\u672f\u6210\u719f. \u6570\u636e\u6765\u6e90\u5e7f\uff0c\u4e3b\u8981\u6709\u7ed3\u6784\u5316\u3001\u534a\u7ed3\u6784\u5316\u3001\u65e0\u7ed3\u67843\u7c7b. \u7ed3\u6784\u5316\u6570\u636e\u9488\u5bf9\u8868\u683c\u6587\u6863\u3001\u6570\u636e\u5e93\u7b49\uff1b\u534a\u7ed3\u6784\u5316\u6570\u636e\u9488\u5bf9\u5982\u7ef4\u57fa\u767e\u79d1\u3001\u767e\u5ea6\u767e\u79d1\u7b49\uff1b\u65e0\u7ed3\u6784\u5c5e\u4e8e\u7eaf\u6587\u672c\u6570\u636e. \u5173\u7cfb\u79cd\u7c7b\u7e41\u591a\u4e14\u590d\u6742\uff0c\u566a\u97f3\u6570\u636e\u65e0\u6cd5\u907f\u514d\uff0c\u5b9e\u4f53\u95f4\u7684\u5173\u7cfb\u591a\u6837\uff0c\u6709\u4e00\u79cd\u6216\u8005\u591a\u79cd\u5173\u7cfb.","title":"2 \u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u7279\u70b9"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#3","text":"\u9488\u5bf9\u7279\u5b9a\u9886\u57df\u7684\u5173\u7cfb\u62bd\u53d6\u7684\u7ed3\u679c\uff0c\u4e00\u822c\u901a\u8fc7\u8ba1\u7b97\u5bf9\u5e94\u7684\u51c6\u786e\u7387 ( Precision ) \u3001\u53ec\u56de\u7387 ( Recall ) \u548c F1 \u503c\u6765\u8bc4\u4ef7\uff0e\u5176\u4e2d\uff0c\u51c6\u786e\u7387\u662f\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\uff0c\u6a21\u578b\u6b63\u786e\u5206\u7c7b\u4e3a\u6b63\u7c7b\u7684\u6837\u672c\u6570\u4e0e\u5168\u90e8\u6b63\u7c7b\u6837\u672c\u6570\u4e4b\u6bd4\uff1b\u53ec\u56de\u7387\u5219\u662f\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u6d4b\u8bd5\u6570\u636e\u96c6\uff0c\u9884\u6d4b\u6b63\u786e\u7684\u6b63\u7c7b\u4e0e\u6240\u6709\u6b63\u7c7b\u6570\u636e\u7684\u6bd4\u503c\uff1b\u800c F1 \u503c\u5219\u662f\u51c6\u786e\u7387\u548c\u53ec\u56de\u7387\u7684\u8c03\u548c\u5e73\u5747\u503c\uff0c\u53ef\u4ee5\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u8fdb\u884c\u7efc\u5408\u6027\u7684\u8bc4\u4ef7.\u5bf9\u5e94\u7684\u8ba1\u7b97\u4e3a:","title":"3 \u5173\u7cfb\u62bd\u53d6\u8bc4\u4ef7\u6307\u6807"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#4","text":"","title":"4 \u5173\u7cfb\u62bd\u53d6\u7684\u5e38\u7528\u65b9\u6cd5"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#41","text":"\u57fa\u4e8e\u89c4\u5219\u7684\u77e5\u8bc6\u62bd\u53d6\u4e3b\u8981\u8fd8\u662f\u901a\u8fc7\u4eba\u5de5\u5b9a\u4e49\u4e00\u4e9b\u62bd\u53d6\u89c4\u5219\uff0c\u4ece\u6587\u672c\u4e2d\u62bd\u53d6\u51fa\u4e09\u5143\u7ec4\u4fe1\u606f (\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53) . \u91cd\u70b9\u5373\u662f\u5b9a\u4e49\u89c4\u5219. \u867d\u7136\u5b9a\u4e49\u89c4\u5219\u8fd9\u79cd\u62bd\u53d6\u65b9\u5f0f\u770b\u8d77\u6765\u6709\u70b9 low\uff0c\u4f46\u5374\u7b80\u5355\u5b9e\u7528\uff0c\u5f88\u591a\u65f6\u5019\uff0c\u6548\u679c\u6bd4\u5f88\u591a\u9ad8\u6df1\u7684\u7b97\u6cd5\u8fd8\u8981\u597d\u4e00\u4e9b (\u975e\u7edd\u5bf9\uff0c\u5177\u4f53\u9886\u57df\u5177\u4f53\u5206\u6790) . \u57fa\u4e8e\u89c4\u5219\u65b9\u6cd5\u7684\u5b9e\u73b0\u5728\u540e\u7eed\u7ae0\u8282\u4ecb\u7ecd","title":"4.1 \u57fa\u4e8e\u89c4\u5219\u65b9\u5f0f\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#42-pipeline","text":"Pipeline\u65b9\u6cd5\u662f\u6307\u5728\u5b9e\u4f53\u8bc6\u522b\u5df2\u7ecf\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u518d\u8fdb\u884c\u5b9e\u4f53\u4e4b\u95f4\u5173\u7cfb\u7684\u62bd\u53d6. \u57fa\u4e8ePipline\u6d41\u6c34\u7ebf\u65b9\u6cd5\u7684\u5b9e\u73b0\u5728\u540e\u7eed\u7ae0\u8282\u4ecb\u7ecd","title":"4.2 \u57fa\u4e8ePipeline\u6d41\u6c34\u7ebf\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#43-joint","text":"Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u901a\u8fc7\u4fee\u6539\u6807\u6ce8\u65b9\u6cd5\u548c\u6a21\u578b\u7ed3\u6784\u76f4\u63a5\u8f93\u51fa\u6587\u672c\u4e2d\u5305\u542b\u7684(ei ,rk, ej)\u4e09\u5143\u7ec4. Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u53c8\u5206\u4e3a: \"\u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u6a21\u578b\" \u548c \"\u8054\u5408\u89e3\u7801\u7684\u8054\u5408\u6a21\u578b\": \u57fa\u4e8ejoint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u7684\u5b9e\u73b0\u5728\u540e\u7eed\u7ae0\u8282\u4ecb\u7ecd.","title":"4.3 \u57fa\u4e8eJoint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/01-%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html#5","text":"\u6b63\u5e38\u5173\u7cfb (Normal) \u95ee\u9898: \u5373\u4e09\u5143\u7ec4\u4e4b\u95f4\u6ca1\u6709\u91cd\u53e0, \u6570\u636e\u4e2d\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f53\u5bf9\u53ca\u5173\u7cfb \u5982: \u201c\u300a\u4eba\u95f4\u300b\u662f\u738b\u83f2\u6f14\u5531\u6b4c\u66f2\u201c\u4e2d\u5b58\u57281\u79cd\u5173\u7cfb: (\u738b\u83f2-\u6b4c\u624b-\u4eba\u95f4) \u5355\u4e00\u5b9e\u4f53\u5173\u7cfb\u91cd\u53e0\u95ee\u9898 (Single Entity Overlap (SEO) ) \u6570\u636e\u4e2d\u4e00\u4e2a\u5b9e\u4f53\u53c2\u4e0e\u5230\u4e86\u591a\u4e2a\u5173\u7cfb\u4e2d \u5982: \u201c\u53f6\u6625\u53d9\u51fa\u751f\u4e8e\u6d59\u6c5f\uff0c\u6bd5\u4e1a\u4e8e\u9ec4\u57d4\u519b\u6821\u201d\u4e2d\u5b58\u5728\u4e24\u79cd\u5173\u7cfb: (\u53f6\u6625\u53d9-\u6bd5\u4e1a\u9662\u6821-\u9ec4\u57d4\u519b\u6821) \u3001 (\u53f6\u6625\u53d9-\u51fa\u751f\u5730-\u6d59\u6c5f) \u5b9e\u4f53\u5bf9\u91cd\u53e0(Entity Pair Overlap (EPO)): \u6570\u636e\u4e2d\u4e00\u4e2a\u5b9e\u4f53\u5bf9\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u5173\u7cfb\u7c7b\u578b \u5982: \u201c\u5468\u661f\u9a70\u5bfc\u6f14\u4e86\u300a\u529f\u592b\u300b\uff0c\u5e76\u62c5\u4efb\u7537\u4e3b\u89d2\u201d\u4e2d\u5b58\u57282\u79cd\u5173\u7cfb: (\u5468\u661f\u9a70-\u6f14\u5458-\u300a\u529f\u592b\u300b) \u3001 (\u5468\u661f\u9a70-\u5bfc\u6f14-\u300a\u529f\u592b\u300b) < /div ## \u5c0f\u8282\u603b\u7ed3 - \u672c\u5c0f\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5173\u7cfb\u62bd\u53d6\u7684\u6982\u5ff5\u3001\u4efb\u52a1\u7279\u70b9\u3001\u8bc4\u4ef7\u6307\u6807\u3001\u5e38\u7528\u65b9\u6cd5\u4ee5\u53ca\u5e38\u89c1\u95ee\u9898\u7b49\u77e5\u8bc6","title":"5 \u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u5e38\u89c1\u95ee\u9898"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html","text":"\u57fa\u4e8e\u89c4\u5219\u65b9\u5f0f\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6 \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3\u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u6982\u5ff5 \u638c\u63e1\u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406 \u638c\u63e1\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u4ee3\u7801\u5b9e\u73b0 1 \u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u7406\u89e3 \u00b6 \u57fa\u4e8e\u89c4\u5219\u7684\u5173\u7cfb\u62bd\u53d6\u4e3b\u8981\u662f\u901a\u8fc7\u4eba\u5de5\u5b9a\u4e49\u4e00\u4e9b\u62bd\u53d6\u89c4\u5219\uff0c\u4ece\u6587\u672c\u4e2d\u62bd\u53d6\u51fa\u4e09\u5143\u7ec4\u4fe1\u606f (\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53) \uff0c\u8fd9\u4e9b\u89c4\u5219\u901a\u5e38\u57fa\u4e8e\u9886\u57df\u77e5\u8bc6\u548c\u8bed\u8a00\u5b66\u77e5\u8bc6\uff0c\u7531\u4e13\u4e1a\u4eba\u5458\u8bbe\u8ba1\u548c\u4f18\u5316\uff0c\u91cd\u70b9\u5373\u662f\u5b9a\u4e49\u89c4\u5219. \u867d\u7136\u5b9a\u4e49\u89c4\u5219\u8fd9\u79cd\u62bd\u53d6\u65b9\u5f0f\u770b\u8d77\u6765\u6709\u70b9 low\uff0c\u4f46\u5374\u7b80\u5355\u5b9e\u7528\uff0c\u5f88\u591a\u65f6\u5019\uff0c\u6548\u679c\u6bd4\u5f88\u591a\u9ad8\u6df1\u7684\u7b97\u6cd5\u8fd8\u8981\u597d\u4e00\u4e9b (\u975e\u7edd\u5bf9\uff0c\u5177\u4f53\u9886\u57df\u5177\u4f53\u5206\u6790) . 2 \u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406 \u00b6 \u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406 (\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u6b65\u9aa4) \u7b2c\u4e00\u6b65\uff1a\u5b9a\u4e49\u9700\u8981\u62bd\u53d6\u7684\u5173\u7cfb\u96c6\u5408\uff0c\u6bd4\u5982\u3010\u592b\u59bb\u5173\u7cfb\uff0c\u5408\u4f5c\u5173\u7cfb\uff0c\uff0c\u2026\u3011 \u7b2c\u4e8c\u6b65\uff1a\u904d\u5386\u6587\u7ae0\u7684\u6bcf\u4e00\u53e5\u8bdd\uff0c\u5c06\u6bcf\u53e5\u8bdd\u4e2d\u975e\u5b9e\u4f53\u548c\u975e\u5173\u7cfb\u96c6\u5408\u91cc\u9762\u7684\u8bcd\u53bb\u6389 \u7b2c\u4e09\u6b65\uff1a\u5206\u522b\u4ece\u5b9e\u4f53\u96c6\u5408\u548c\u5173\u7cfb\u96c6\u5408\u4e2d\uff0c\u63d0\u53d6\u5173\u7cfb\u4e09\u5143\u7ec4 3 \u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u4ee3\u7801\u5b9e\u73b0 \u00b6 \u6ce8\u610f\uff1a\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u4f8b\u53ea\u4ee3\u8868\u89c4\u5219\u5b9e\u73b0\u65b9\u5f0f\u7684\u4e00\u79cd\uff0c\u5176\u4ed6\u573a\u666f\u4e0b\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4eba\u4e3a\u8bbe\u5b9a. \u4ee3\u7801\u5b9e\u6218\uff1a import jieba.posseg as pseg # \u9700\u8981\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u6837\u672c\u6570\u636e samples = [ \"2014\u5e741\u67088\u65e5\uff0c\u6768\u5e42\u4e0e\u5218\u607a\u5a01\u7684\u5a5a\u793c\u5728\u5370\u5ea6\u5c3c\u897f\u4e9a\u5df4\u5398\u5c9b\u4e3e\u884c\" , \"\u5468\u661f\u9a70\u548c\u5434\u5b5f\u8fbe\u5728\u300a\u9003\u5b66\u5a01\u9f99\u300b\u4e2d\u5408\u4f5c\u51fa\u6f14\" , '\u6210\u9f99\u51fa\u6f14\u4e86\u300a\u8b66\u5bdf\u6545\u4e8b\u300b\u7b49\u591a\u90e8\u7ecf\u5178\u7535\u5f71' ] # \u5b9a\u4e49\u9700\u8981\u62bd\u53d6\u7684\u5173\u7cfb\u96c6\u5408 relations2dict = { '\u592b\u59bb\u5173\u7cfb' :[ '\u7ed3\u5a5a' , '\u9886\u8bc1' , '\u5a5a\u793c' ], '\u5408\u4f5c\u5173\u7cfb' : [ '\u642d\u6863' , '\u5408\u4f5c' , '\u7b7e\u7ea6' ], '\u6f14\u5458\u5173\u7cfb' : [ '\u51fa\u6f14' , '\u89d2\u8272' , '\u4e3b\u6f14' ]} # \u901a\u8fc7jieba\u8bcd\u6027\u8bc6\u522b\u62bd\u53d6\u51fanr\u7684\u5b9e\u4f53\u548c\u5e26\u6709\u5173\u7cfb\u7684\u8bcd\u7ec4 for text in samples : entities = [] # \u5b58\u50a8\u5b9e\u4f53 relations = [] # \u5b58\u50a8\u5173\u7cfb move_name = [] for word , flag in pseg . lcut ( text ): if flag == 'nr' : entities . append ( word ) elif flag == 'x' : if len ( move_name ) == 0 : move_name . append ( text . index ( word )) else : move_name . append ( text . index ( word )) entities . append ( text [ move_name [ 0 ] + 1 : move_name [ 1 ]]) else : for key , value in relations2dict . items (): if word in value : relations . append ( key ) if len ( entities ) >= 2 and len ( relations ) >= 1 : print ( \"\u539f\u59cb\u6587\u672c\uff1a\" , text ) print ( '\u63d0\u53d6\u7ed3\u679c\uff1a' , entities [ 0 ] + '->' + relations [ 0 ] + '->' + entities [ 1 ]) else : print ( \"\u539f\u59cb\u6587\u672c\uff1a\" , text ) print ( '\u4e0d\u597d\u610f\u601d\uff0c\u6682\u65f6\u6ca1\u80fd\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\u51fa\u5173\u7cfb\u7ed3\u679c' ) print ( '*' * 80 ) \u8fd0\u884c\u7ed3\u679c: \u539f\u59cb\u6587\u672c \uff1a 2014 \u5e741\u67088\u65e5 \uff0c \u6768\u5e42\u4e0e\u5218\u607a\u5a01\u7684\u5a5a\u793c\u5728\u5370\u5ea6\u5c3c\u897f\u4e9a\u5df4\u5398\u5c9b\u4e3e\u884c \u63d0\u53d6\u7ed3\u679c \uff1a \u6768\u5e42 -> \u592b\u59bb\u5173\u7cfb -> \u5218\u607a\u5a01 ******************************************************************************** \u539f\u59cb\u6587\u672c \uff1a \u5468\u661f\u9a70\u548c\u5434\u5b5f\u8fbe\u5728 \u300a \u9003\u5b66\u5a01\u9f99 \u300b \u4e2d\u5408\u4f5c\u51fa\u6f14 \u63d0\u53d6\u7ed3\u679c \uff1a \u5468\u661f\u9a70 -> \u5408\u4f5c\u5173\u7cfb -> \u5434\u5b5f\u8fbe ******************************************************************************** \u539f\u59cb\u6587\u672c \uff1a \u6210\u9f99\u51fa\u6f14\u4e86 \u300a \u8b66\u5bdf\u6545\u4e8b \u300b \u7b49\u591a\u90e8\u7ecf\u5178\u7535\u5f71 \u63d0\u53d6\u7ed3\u679c \uff1a \u6210\u9f99 -> \u6f14\u5458\u5173\u7cfb -> \u8b66\u5bdf\u6545\u4e8b ******************************************************************************** 4 \u5229\u7528\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u4f18\u7f3a\u70b9\uff1a \u00b6 \u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\u3001\u65e0\u9700\u8bad\u7ec3\uff0c\u5c0f\u89c4\u6a21\u6570\u636e\u96c6\u5bb9\u6613\u5b9e\u73b0. \u7f3a\u70b9\uff1a\u5bf9\u8de8\u9886\u57df\u7684\u53ef\u79fb\u690d\u6027\u8f83\u5dee\u3001\u4eba\u5de5\u6807\u6ce8\u6210\u672c\u8f83\u9ad8\u4ee5\u53ca\u53ec\u56de\u7387\u8f83\u4f4e. \u5c0f\u8282\u603b\u7ed3\uff1a \u00b6 \u5b66\u4e60\u4e86\u4ec0\u4e48\u662f\u89c4\u5219\u7684\u5173\u7cfb\u62bd\u53d6\u65b9\u5f0f\uff1a \u57fa\u4e8e\u89c4\u5219\u7684\u77e5\u8bc6\u62bd\u53d6\u4e3b\u8981\u8fd8\u662f\u901a\u8fc7\u4eba\u5de5\u5b9a\u4e49\u4e00\u4e9b\u62bd\u53d6\u89c4\u5219\uff0c\u4ece\u6587\u7ae0\u4e2d\u62bd\u53d6\u51fa\u4e09\u5143\u7ec4\u4fe1\u606f (\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53) . \u91cd\u70b9\u5373\u662f\u5b9a\u4e49\u89c4\u5219. \u5b66\u4e60\u4e86\u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406 (\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u6b65\u9aa4) \u7b2c\u4e00\u6b65\uff1a\u5b9a\u4e49\u9700\u8981\u62bd\u53d6\u7684\u5173\u7cfb\u96c6\u5408\uff0c\u6bd4\u5982\u3010\u592b\u59bb\u5173\u7cfb\uff0c\u5408\u4f5c\u5173\u7cfb\uff0c\uff0c\u2026\u3011 \u7b2c\u4e8c\u6b65\uff1a\u904d\u5386\u6587\u7ae0\u7684\u6bcf\u4e00\u53e5\u8bdd\uff0c\u5c06\u6bcf\u53e5\u8bdd\u4e2d\u975e\u5b9e\u4f53\u548c\u975e\u5173\u7cfb\u96c6\u5408\u91cc\u9762\u7684\u8bcd\u53bb\u6389 \u7b2c\u4e09\u6b65\uff1a\u5206\u522b\u4ece\u5b9e\u4f53\u96c6\u5408\u548c\u5173\u7cfb\u96c6\u5408\u4e2d\uff0c\u63d0\u53d6\u5173\u7cfb\u4e09\u5143\u7ec4 \u5b66\u4e60\u4e86\u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u4ee3\u7801\u5b9e\u73b0 \u5229\u7528\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u4f18\u7f3a\u70b9\uff1a \u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\u3001\u65e0\u9700\u8bad\u7ec3\uff0c\u5c0f\u89c4\u6a21\u6570\u636e\u96c6\u5bb9\u6613\u5b9e\u73b0. \u7f3a\u70b9\uff1a\u5bf9\u8de8\u9886\u57df\u7684\u53ef\u79fb\u690d\u6027\u8f83\u5dee\u3001\u4eba\u5de5\u6807\u6ce8\u6210\u672c\u8f83\u9ad8\u4ee5\u53ca\u53ec\u56de\u7387\u8f83\u4f4e.","title":"4.2 \u89c4\u5219\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_1","text":"","title":"\u57fa\u4e8e\u89c4\u5219\u65b9\u5f0f\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_2","text":"\u7406\u89e3\u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u6982\u5ff5 \u638c\u63e1\u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406 \u638c\u63e1\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u4ee3\u7801\u5b9e\u73b0","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#1","text":"\u57fa\u4e8e\u89c4\u5219\u7684\u5173\u7cfb\u62bd\u53d6\u4e3b\u8981\u662f\u901a\u8fc7\u4eba\u5de5\u5b9a\u4e49\u4e00\u4e9b\u62bd\u53d6\u89c4\u5219\uff0c\u4ece\u6587\u672c\u4e2d\u62bd\u53d6\u51fa\u4e09\u5143\u7ec4\u4fe1\u606f (\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53) \uff0c\u8fd9\u4e9b\u89c4\u5219\u901a\u5e38\u57fa\u4e8e\u9886\u57df\u77e5\u8bc6\u548c\u8bed\u8a00\u5b66\u77e5\u8bc6\uff0c\u7531\u4e13\u4e1a\u4eba\u5458\u8bbe\u8ba1\u548c\u4f18\u5316\uff0c\u91cd\u70b9\u5373\u662f\u5b9a\u4e49\u89c4\u5219. \u867d\u7136\u5b9a\u4e49\u89c4\u5219\u8fd9\u79cd\u62bd\u53d6\u65b9\u5f0f\u770b\u8d77\u6765\u6709\u70b9 low\uff0c\u4f46\u5374\u7b80\u5355\u5b9e\u7528\uff0c\u5f88\u591a\u65f6\u5019\uff0c\u6548\u679c\u6bd4\u5f88\u591a\u9ad8\u6df1\u7684\u7b97\u6cd5\u8fd8\u8981\u597d\u4e00\u4e9b (\u975e\u7edd\u5bf9\uff0c\u5177\u4f53\u9886\u57df\u5177\u4f53\u5206\u6790) .","title":"1 \u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u7406\u89e3"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#2","text":"\u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406 (\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u6b65\u9aa4) \u7b2c\u4e00\u6b65\uff1a\u5b9a\u4e49\u9700\u8981\u62bd\u53d6\u7684\u5173\u7cfb\u96c6\u5408\uff0c\u6bd4\u5982\u3010\u592b\u59bb\u5173\u7cfb\uff0c\u5408\u4f5c\u5173\u7cfb\uff0c\uff0c\u2026\u3011 \u7b2c\u4e8c\u6b65\uff1a\u904d\u5386\u6587\u7ae0\u7684\u6bcf\u4e00\u53e5\u8bdd\uff0c\u5c06\u6bcf\u53e5\u8bdd\u4e2d\u975e\u5b9e\u4f53\u548c\u975e\u5173\u7cfb\u96c6\u5408\u91cc\u9762\u7684\u8bcd\u53bb\u6389 \u7b2c\u4e09\u6b65\uff1a\u5206\u522b\u4ece\u5b9e\u4f53\u96c6\u5408\u548c\u5173\u7cfb\u96c6\u5408\u4e2d\uff0c\u63d0\u53d6\u5173\u7cfb\u4e09\u5143\u7ec4","title":"2 \u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#3","text":"\u6ce8\u610f\uff1a\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u4f8b\u53ea\u4ee3\u8868\u89c4\u5219\u5b9e\u73b0\u65b9\u5f0f\u7684\u4e00\u79cd\uff0c\u5176\u4ed6\u573a\u666f\u4e0b\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u4eba\u4e3a\u8bbe\u5b9a. \u4ee3\u7801\u5b9e\u6218\uff1a import jieba.posseg as pseg # \u9700\u8981\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u6837\u672c\u6570\u636e samples = [ \"2014\u5e741\u67088\u65e5\uff0c\u6768\u5e42\u4e0e\u5218\u607a\u5a01\u7684\u5a5a\u793c\u5728\u5370\u5ea6\u5c3c\u897f\u4e9a\u5df4\u5398\u5c9b\u4e3e\u884c\" , \"\u5468\u661f\u9a70\u548c\u5434\u5b5f\u8fbe\u5728\u300a\u9003\u5b66\u5a01\u9f99\u300b\u4e2d\u5408\u4f5c\u51fa\u6f14\" , '\u6210\u9f99\u51fa\u6f14\u4e86\u300a\u8b66\u5bdf\u6545\u4e8b\u300b\u7b49\u591a\u90e8\u7ecf\u5178\u7535\u5f71' ] # \u5b9a\u4e49\u9700\u8981\u62bd\u53d6\u7684\u5173\u7cfb\u96c6\u5408 relations2dict = { '\u592b\u59bb\u5173\u7cfb' :[ '\u7ed3\u5a5a' , '\u9886\u8bc1' , '\u5a5a\u793c' ], '\u5408\u4f5c\u5173\u7cfb' : [ '\u642d\u6863' , '\u5408\u4f5c' , '\u7b7e\u7ea6' ], '\u6f14\u5458\u5173\u7cfb' : [ '\u51fa\u6f14' , '\u89d2\u8272' , '\u4e3b\u6f14' ]} # \u901a\u8fc7jieba\u8bcd\u6027\u8bc6\u522b\u62bd\u53d6\u51fanr\u7684\u5b9e\u4f53\u548c\u5e26\u6709\u5173\u7cfb\u7684\u8bcd\u7ec4 for text in samples : entities = [] # \u5b58\u50a8\u5b9e\u4f53 relations = [] # \u5b58\u50a8\u5173\u7cfb move_name = [] for word , flag in pseg . lcut ( text ): if flag == 'nr' : entities . append ( word ) elif flag == 'x' : if len ( move_name ) == 0 : move_name . append ( text . index ( word )) else : move_name . append ( text . index ( word )) entities . append ( text [ move_name [ 0 ] + 1 : move_name [ 1 ]]) else : for key , value in relations2dict . items (): if word in value : relations . append ( key ) if len ( entities ) >= 2 and len ( relations ) >= 1 : print ( \"\u539f\u59cb\u6587\u672c\uff1a\" , text ) print ( '\u63d0\u53d6\u7ed3\u679c\uff1a' , entities [ 0 ] + '->' + relations [ 0 ] + '->' + entities [ 1 ]) else : print ( \"\u539f\u59cb\u6587\u672c\uff1a\" , text ) print ( '\u4e0d\u597d\u610f\u601d\uff0c\u6682\u65f6\u6ca1\u80fd\u4ece\u6587\u672c\u4e2d\u63d0\u53d6\u51fa\u5173\u7cfb\u7ed3\u679c' ) print ( '*' * 80 ) \u8fd0\u884c\u7ed3\u679c: \u539f\u59cb\u6587\u672c \uff1a 2014 \u5e741\u67088\u65e5 \uff0c \u6768\u5e42\u4e0e\u5218\u607a\u5a01\u7684\u5a5a\u793c\u5728\u5370\u5ea6\u5c3c\u897f\u4e9a\u5df4\u5398\u5c9b\u4e3e\u884c \u63d0\u53d6\u7ed3\u679c \uff1a \u6768\u5e42 -> \u592b\u59bb\u5173\u7cfb -> \u5218\u607a\u5a01 ******************************************************************************** \u539f\u59cb\u6587\u672c \uff1a \u5468\u661f\u9a70\u548c\u5434\u5b5f\u8fbe\u5728 \u300a \u9003\u5b66\u5a01\u9f99 \u300b \u4e2d\u5408\u4f5c\u51fa\u6f14 \u63d0\u53d6\u7ed3\u679c \uff1a \u5468\u661f\u9a70 -> \u5408\u4f5c\u5173\u7cfb -> \u5434\u5b5f\u8fbe ******************************************************************************** \u539f\u59cb\u6587\u672c \uff1a \u6210\u9f99\u51fa\u6f14\u4e86 \u300a \u8b66\u5bdf\u6545\u4e8b \u300b \u7b49\u591a\u90e8\u7ecf\u5178\u7535\u5f71 \u63d0\u53d6\u7ed3\u679c \uff1a \u6210\u9f99 -> \u6f14\u5458\u5173\u7cfb -> \u8b66\u5bdf\u6545\u4e8b ********************************************************************************","title":"3 \u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u4ee3\u7801\u5b9e\u73b0"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#4","text":"\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\u3001\u65e0\u9700\u8bad\u7ec3\uff0c\u5c0f\u89c4\u6a21\u6570\u636e\u96c6\u5bb9\u6613\u5b9e\u73b0. \u7f3a\u70b9\uff1a\u5bf9\u8de8\u9886\u57df\u7684\u53ef\u79fb\u690d\u6027\u8f83\u5dee\u3001\u4eba\u5de5\u6807\u6ce8\u6210\u672c\u8f83\u9ad8\u4ee5\u53ca\u53ec\u56de\u7387\u8f83\u4f4e.","title":"4 \u5229\u7528\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u4f18\u7f3a\u70b9\uff1a"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/02-%E8%A7%84%E5%88%99%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_3","text":"\u5b66\u4e60\u4e86\u4ec0\u4e48\u662f\u89c4\u5219\u7684\u5173\u7cfb\u62bd\u53d6\u65b9\u5f0f\uff1a \u57fa\u4e8e\u89c4\u5219\u7684\u77e5\u8bc6\u62bd\u53d6\u4e3b\u8981\u8fd8\u662f\u901a\u8fc7\u4eba\u5de5\u5b9a\u4e49\u4e00\u4e9b\u62bd\u53d6\u89c4\u5219\uff0c\u4ece\u6587\u7ae0\u4e2d\u62bd\u53d6\u51fa\u4e09\u5143\u7ec4\u4fe1\u606f (\u5b9e\u4f53-\u5173\u7cfb-\u5b9e\u4f53) . \u91cd\u70b9\u5373\u662f\u5b9a\u4e49\u89c4\u5219. \u5b66\u4e60\u4e86\u57fa\u4e8e\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u539f\u7406 (\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u6b65\u9aa4) \u7b2c\u4e00\u6b65\uff1a\u5b9a\u4e49\u9700\u8981\u62bd\u53d6\u7684\u5173\u7cfb\u96c6\u5408\uff0c\u6bd4\u5982\u3010\u592b\u59bb\u5173\u7cfb\uff0c\u5408\u4f5c\u5173\u7cfb\uff0c\uff0c\u2026\u3011 \u7b2c\u4e8c\u6b65\uff1a\u904d\u5386\u6587\u7ae0\u7684\u6bcf\u4e00\u53e5\u8bdd\uff0c\u5c06\u6bcf\u53e5\u8bdd\u4e2d\u975e\u5b9e\u4f53\u548c\u975e\u5173\u7cfb\u96c6\u5408\u91cc\u9762\u7684\u8bcd\u53bb\u6389 \u7b2c\u4e09\u6b65\uff1a\u5206\u522b\u4ece\u5b9e\u4f53\u96c6\u5408\u548c\u5173\u7cfb\u96c6\u5408\u4e2d\uff0c\u63d0\u53d6\u5173\u7cfb\u4e09\u5143\u7ec4 \u5b66\u4e60\u4e86\u5229\u7528\u89c4\u5219\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\u7684\u4ee3\u7801\u5b9e\u73b0 \u5229\u7528\u89c4\u5219\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u4f18\u7f3a\u70b9\uff1a \u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\u3001\u65e0\u9700\u8bad\u7ec3\uff0c\u5c0f\u89c4\u6a21\u6570\u636e\u96c6\u5bb9\u6613\u5b9e\u73b0. \u7f3a\u70b9\uff1a\u5bf9\u8de8\u9886\u57df\u7684\u53ef\u79fb\u690d\u6027\u8f83\u5dee\u3001\u4eba\u5de5\u6807\u6ce8\u6210\u672c\u8f83\u9ad8\u4ee5\u53ca\u53ec\u56de\u7387\u8f83\u4f4e.","title":"\u5c0f\u8282\u603b\u7ed3\uff1a"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html","text":"Pipline\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6 \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3Pipeline\u65b9\u6cd5\u7684\u539f\u7406 \u7406\u89e3BiLSTM+Attention\u6a21\u578b\u7684\u601d\u60f3 \u638c\u63e1BiLSTM+Attention\u6a21\u578b\u4ee3\u7801\u7684\u5b9e\u73b0 \u638c\u63e1Pipeline\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9 1 Pipeline\u65b9\u6cd5\u7684\u539f\u7406 \u00b6 pipeline\u65b9\u6cd5\u662f\u6307\u5728\u5b9e\u4f53\u8bc6\u522b\u5df2\u7ecf\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u518d\u8fdb\u884c\u5b9e\u4f53\u4e4b\u95f4\u5173\u7cfb\u7684\u62bd\u53d6. \u65e9\u671f\u7684\u6d41\u6c34\u7ebf\u5b66\u4e60\u65b9\u6cd5\u4e3b\u8981\u91c7\u7528\u5377\u79ef\u795e\u7ecf\u7f51\u7edc (CNN) \u548c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc (RNN) \u4e24\u5927\u7c7b\u7ed3\u6784\uff0e\u5176\u4e2d\uff0cCNN\u591a\u6837\u6027\u5377\u79ef\u6838\u7684\u7279\u6027\u6709\u5229\u4e8e\u8bc6\u522b\u76ee\u6807\u7684\u7ed3\u6784\u7279\u5f81\uff0c\u800cRNN\u80fd\u5145\u5206\u8003\u8651\u957f\u8ddd\u79bb\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u6027\uff0c\u5176\u8bb0\u5fc6\u529f\u80fd\u6709\u5229\u4e8e\u8bc6\u522b\u5e8f\u5217\uff0e\u968f\u7740\u6df1\u5ea6\u5b66\u4e60\u7684\u4e0d\u65ad\u53d1\u5c55, \u7814\u7a76\u8005\u4e0d\u65ad\u6539\u8fdb\u548c\u5b8c\u5584CNN\u548cRNN\u7684\u65b9\u6cd5\uff0c\u5e76\u4ea7\u751f\u4e86\u8bb8\u591a\u53d8\u4f53\uff0c\u5982\u957f\u77ed\u671f\u8bb0\u5fc6\u7f51\u7edc (LSTM) \u3001\u53cc\u5411\u957f\u77ed\u671f\u8bb0\u5fc6\u7f51 (BI-LSTM) \u3001\u7b49\uff0c\u4ece\u800c\u8fdb\u4e00\u6b65\u4fc3\u8fdb\u4e86\u5173\u7cfb\u62bd\u53d6\u7684\u53d1\u5c55\uff0e pipeline\u65b9\u6cd5\u6d41\u7a0b\uff1a \u5148\u5bf9\u8f93\u5165\u7684\u53e5\u5b50\u8fdb\u884c\u5b9e\u4f53\u62bd\u53d6\uff0c\u5c06\u8bc6\u522b\u51fa\u7684\u5b9e\u4f53\u5206\u522b\u7ec4\u5408\uff1b\u7136\u540e\u518d\u8fdb\u884c\u5173\u7cfb\u5206\u7c7b. \u6ce8\u610f\uff1a\u8fd9\u4e24\u4e2a\u5b50\u8fc7\u7a0b\u662f\u524d\u540e\u4e32\u8054\u7684\uff0c\u5b8c\u5168\u5206\u79bb. 2 BiLSTM+Attention\u7b97\u6cd5\u601d\u60f3 \u00b6 BiLSTM+Attention\u6a21\u578b\u6700\u521d\u7531Zhou\u7b49\u4eba\u57282016\u5e74\u7684\u8bba\u6587\u300aAttention-Based Bidirectional Long Short-Term Memory Networks for Relation Classification\u300b\u4e2d\u63d0\u51fa. \u8be5\u6a21\u578b\u7ed3\u5408\u4e86\u53cc\u5411\u957f\u77ed\u65f6\u8bb0\u5fc6\u7f51\u7edc (Bidirectional LSTM) \u548c\u6ce8\u610f\u529b\u673a\u5236 (Attention) \uff0c\u7528\u4e8e\u5904\u7406\u8f93\u5165\u5e8f\u5217\u5e76\u63d0\u53d6\u5173\u7cfb\u4fe1\u606f. \u8be5\u6a21\u578b\u5e76\u88ab\u5e94\u7528\u4e8e\u5173\u7cfb\u5206\u7c7b\u4efb\u52a1. 3 BiLSTM+Attention\u6a21\u578b\u67b6\u6784 \u00b6 \u57fa\u4e8e\u4e0a\u56fe\u6a21\u578b\u67b6\u6784\u6240\u793a: BiLSTM+Attention\u6a21\u578b\u6574\u4f53\u5206\u4e3a\u4e94\u4e2a\u90e8\u5206: \u8f93\u5165\u5c42 (Input Layer) : \u8f93\u5165\u7684\u662f\u53e5\u5b50\uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u5e8f\u5217\u4e5f\u53ef\u4ee5\u662f\u5355\u8bcd\u5e8f\u5217\uff0c\u6216\u8005\u4e24\u8005\u76f8\u7ed3\u5408. \u6b64\u5916\uff0c\u5bf9\u4e8e\u53e5\u5b50\u4e2d\u7684\u4e24\u4e2a\u5b9e\u4f53\uff0c\u5206\u522b\u8ba1\u7b97\u5404\u4e2a\u5b57\u7b26\u76f8\u5bf9\u4e8e\u5b9e\u4f53\u7684\u4f4d\u7f6e. \u6bd4\u5982\u6709\u5982\u4e0b\u6837\u672c: \u6587\u672c\u63cf\u8ff0: \u201c\u5728\u300a\u9003\u5b66\u5a01\u9f99\u300b\u8fd9\u90e8\u7535\u5f71\u4e2d\u5468\u661f\u9a70\u548c\u5434\u5b5f\u8fbe\u8054\u5408\u51fa\u6f14\u201d \u5728\u8fd9\u4e2a\u6837\u672c\u4e2d\uff0c\u5b9e\u4f531\u4e3a\u5468\u661f\u9a70\uff0c\u5b9e\u4f532\u4e3a\u5434\u5b5f\u8fbe. \u5173\u7cfb\u4e3a\u5408\u4f5c\u5173\u7cfb. \u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u5b57\u7b26\u201c\u5728\u201d\u5b57\u6765\u8bf4\uff0c\u5176\u76f8\u5bf9\u4e8e\u5b9e\u4f531\u7684\u8ddd\u79bb\u4e3a: \u201c\u5728\u201d\u5b57\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15-\u5b9e\u4f531\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15. \u76f8\u5bf9\u4e8e\u5b9e\u4f532\u7684\u8ddd\u79bb\u4e3a: \u201c\u5728\u201d\u5b57\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15-\u5b9e\u4f532\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15. \u56e0\u6b64\uff0c\u6a21\u578b\u7684\u8f93\u5165\u4e3a\u5b50\u5e8f\u5217+\u5b57\u7b26\u7684\u76f8\u5bf9\u4f4d\u7f6e\u7f16\u7801 \u8bcd\u5d4c\u5165\u5c42 (Embedding Layer) : \u5c06\u6bcf\u4e2a\u5355\u8bcd\u6620\u5c04\u5230\u4e00\u4e2a\u9ad8\u7ef4\u5411\u91cf\u8868\u793a\uff0c\u5305\u62ec: \u5b57\u7b26\u6216\u8bcd\u5d4c\u5165\u4ee5\u53ca\u76f8\u5bf9\u4f4d\u7f6e\u7f16\u7801\u7684\u5d4c\u5165\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u6216\u4ece\u5934\u5f00\u59cb\u8bad\u7ec3. \u53cc\u5411LSTM\u5c42 (BiLSTM Layer) : LSTM\u662f\u4e00\u79cd\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff0c\u5b83\u53ef\u4ee5\u5bf9\u5e8f\u5217\u6570\u636e\u8fdb\u884c\u5efa\u6a21\uff0c\u7528\u4e8e\u4ece\u53e5\u5b50\u4e2d\u63d0\u53d6\u7279\u5f81. BiLSTM\u662f\u4e00\u79cd\u53cc\u5411LSTM\uff0c\u5b83\u80fd\u591f\u540c\u65f6\u6355\u6349\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u5305\u62ec\u524d\u5411\u548c\u540e\u5411\u4fe1\u606f\uff0c\u56e0\u6b64\u5728\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u4e2d\u5f97\u5230\u4e86\u5e7f\u6cdb\u5e94\u7528. \u6ce8\u610f\u529b\u673a\u5236\u5c42 (Attention Layer) : \u6ce8\u610f\u529b\u673a\u5236\u53ef\u4ee5\u8ba9\u6a21\u578b\u96c6\u4e2d\u6ce8\u610f\u529b\u4e8e\u5173\u952e\u8bcd\u6216\u7247\u6bb5\uff0c\u6709\u52a9\u4e8e\u63d0\u9ad8\u6a21\u578b\u7684\u6027\u80fd. \u8fd9\u91cc\u6ce8\u610f\u529b\u673a\u5236\u88ab\u7528\u6765\u786e\u5b9a\u6bcf\u4e2a\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u5bf9\u4e8e\u5173\u7cfb\u5206\u7c7b\u7684\u91cd\u8981\u6027. \u5177\u4f53\u6765\u8bf4\uff0c\u5bf9\u4e8e\u8f93\u5165\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6ce8\u610f\u529b\u673a\u5236\u4f1a\u4e3a\u5176\u5206\u914d\u4e00\u4e2a\u6743\u91cd\uff0c\u8868\u793a\u8be5\u5355\u8bcd\u5bf9\u4e8e\u5173\u7cfb\u5206\u7c7b\u7684\u91cd\u8981\u7a0b\u5ea6. \u8fd9\u4e9b\u6743\u91cd\u5c06\u88ab\u7528\u4e8e\u52a0\u6743\u8f93\u5165\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u8868\u793a\uff0c\u4ee5\u8ba1\u7b97\u5173\u7cfb\u5206\u7c7b\u7684\u8f93\u51fa. \u672c\u6b21\u6ce8\u610f\u529b\u673a\u5236\u7684\u5b9e\u73b0\u662f\u91c7\u7528\u7684\u57fa\u4e8e\u6ce8\u610f\u529b\u6743\u91cd\u7684\u52a0\u6743\u5e73\u5747\u6c60\u5316\u65b9\u5f0f. \u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u5c06 BiLSTM \u7f51\u7edc\u7684\u8f93\u51fa H H \u7ecf\u8fc7\u4e00\u4e2a tanh tanh \u6fc0\u6d3b\u51fd\u6570\uff0c\u5f97\u5230\u4e00\u4e2a\u77e9\u9635 M M M = tanh(H) M = tanh(H) \u7b2c\u4e8c\u6b65: \u5c06 M M \u4f5c\u4e3a\u8f93\u5165\uff0c\u901a\u8fc7\u6743\u91cd\u5411\u91cf w^T w^T \u548c\u4e00\u4e2a softmax \u51fd\u6570\uff0c\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u4e8e\u5173\u7cfb\u5206\u7c7b\u7684\u91cd\u8981\u7a0b\u5ea6\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u6743\u91cd\u5411\u91cf \u03b1 \u03b1 . \u03b1 = softmax(w^T*M) \u03b1 = softmax(w^T*M) \u7b2c\u4e09\u6b65: \u5c06BiLSTM\u7f51\u7edc\u7684\u8f93\u51fa H H \u548c\u6ce8\u610f\u529b\u6743\u91cd \u03b1 \u03b1 \u76f8\u4e58\u5f97\u5230\u4e00\u4e2a\u52a0\u6743\u548c r r r = H * \u03b1^T r = H * \u03b1^T \u7b2c\u56db\u6b65: \u5c06\u7b2c\u4e09\u6b65\u5f97\u5230\u7684\u7ed3\u679c r r \uff0c\u7ecf\u8fc7\u4e00\u4e2a tanh tanh \u6fc0\u6d3b\u51fd\u6570\uff0c\u5f97\u5230\u6700\u7ec8\u52a0\u6743\u540e\u7684\u8f93\u5165\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u8868\u793a\uff0c\u4ee5\u65b9\u4fbf\u540e\u7eed\u8ba1\u7b97\u5173\u7cfb\u5206\u7c7b\u7684\u8f93\u51fa h^* = tanh(r) h^* = tanh(r) \u8f93\u51fa\u5c42 (Output Layer) : \u6839\u636e\u4efb\u52a1\u7684\u4e0d\u540c\uff0c\u8f93\u51fa\u5c42\u53ef\u4ee5\u662f\u5206\u7c7b\u5c42\u6216\u56de\u5f52\u5c42. \u5728\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u4e2d\uff0c\u8f93\u51fa\u5c42\u901a\u5e38\u662f\u4e00\u4e2a\u5206\u7c7b\u5c42\uff0c\u7528\u4e8e\u9884\u6d4b\u4e24\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u7c7b\u578b. 4 \u6574\u4f53\u4ee3\u7801\u67b6\u6784\u56fe \u00b6 5 \u6570\u636e\u9884\u5904\u7406 \u00b6 \u672c\u9879\u76ee\u4e2d\u5bf9\u6570\u636e\u90e8\u5206\u7684\u9884\u5904\u7406\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u7b2c\u4e8c\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u7b2c\u4e09\u6b65: \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570 \u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4e0edataloader\u51fd\u6570 \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u00b6 \u672c\u6b21\u9879\u76ee\u6570\u636e\u539f\u59cb\u6765\u6e90\u4e3a\u516c\u5f00\u7684\u5343\u8a00\u6570\u636e\u96c6https:// www.luge.ai/#/ \uff0c\u4f7f\u7528\u5f00\u6e90\u6570\u636e\u7684\u597d\u5904\uff0c\u6211\u4eec\u65e0\u9700\u6807\u6ce8\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff0c\u672c\u6b21\u9879\u76ee\u7684\u4e3b\u8981\u9700\u8981\u5927\u5bb6\u638c\u63e1\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u601d\u60f3\u3002 \u672c\u6b21\u9879\u76ee\u6570\u636e\u7684\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/data \u9879\u76ee\u7684\u6570\u636e\u96c6\u5305\u62ec3\u4e2a\u6587\u4ef6: \u7b2c\u4e00\u4e2a\u5173\u7cfb\u7c7b\u578b\u6587\u4ef6: /home/ec2-user/Bilstm_Attention_RE/data/relation2id.txt \u5bfc\u6f14 0 \u6b4c\u624b 1 \u4f5c\u66f2 2 \u4f5c\u8bcd 3 \u4e3b\u6f14 4 relation2id.txt\u4e2d\u5305\u542b5\u4e2a\u7c7b\u522b\u6807\u7b7e, \u6587\u4ef6\u5171\u5206\u4e3a\u4e24\u5217\uff0c\u7b2c\u4e00\u5217\u662f\u7c7b\u522b\u540d\u79f0\uff0c\u7b2c\u4e8c\u5217\u4e3a\u7c7b\u522b\u5e8f\u53f7\uff0c\u4e2d\u95f4\u7a7a\u683c\u7b26\u53f7\u9694\u5f00 \u7b2c\u4e8c\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6: /home/ec2-user/Bilstm_Attention_RE/data/train.txt \u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765 \u9ec4\u5bb6\u5f3a \u6b4c\u624b \u300a\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\u300b\u662f\u9ec4\u5bb6\u5f3a\u7684\u4e00\u9996\u7ca4\u8bed\u6b4c\u66f2\uff0c\u7531\u4f55\u542f\u5f18\u4f5c\u8bcd\uff0c\u9ec4\u5bb6\u5f3a\u4f5c\u66f2\u7f16\u66f2\u5e76\u6f14\u5531\uff0c\u6536\u5f55\u4e8e2007\u5e7408\u670801\u65e5\u53d1\u884c\u7684\u4e13\u8f91\u300a\u5979\u4ed6\u300b\u4e2d \u4f3c\u6c34\u6d41\u5e74 \u8bb8\u6653\u6770 \u4f5c\u66f2 \u4f3c\u6c34\u6d41\u5e74\uff0c\u7531\u8457\u540d\u4f5c\u8bcd\u5bb6\u95eb\u8083\u4f5c\u8bcd\uff0c\u8457\u540d\u97f3\u4e50\u4eba\u8bb8\u6653\u6770\u4f5c\u66f2\uff0c\u5f20\u70e8\u6f14\u5531 \u4ea4\u6d89\u4eba \u671d\u65e5\u7535\u89c6\u53f0 \u51fa\u54c1\u516c\u53f8 \u300a\u4ea4\u6d89\u4eba\u300b\u662f\u65e5\u672c\u671d\u65e5\u7535\u89c6\u53f0\u5236\u4f5c\u5e76\u64ad\u51fa\u76848\u96c6\u60ac\u7591\u63a8\u7406\u7535\u89c6\u5267 \u751f\u6d3b\u542f\u793a\u5f55 \u95eb\u59ae \u4e3b\u6f14 05\u95eb\u59ae\u63a5\u5230\u300a\u751f\u6d3b\u542f\u793a\u5f55\u300b\u4e4b\u540e\uff0c\u5c31\u5411\u738b\u4e3d\u840d\u63a8\u8350\u4e86\u80e1\u6b4c \u5317\u4eac\u5317\u4eac \u6c6a\u5cf0 \u6b4c\u624b \u201d\u6c6a\u5cf0\u6211\u5370\u8c61\u6700\u6df1\u523b\u7684\u662f\u6c6a\u5cf0\u7684\u300a\u5317\u4eac\u5317\u4eac\u300b\u8680\u9aa8\u5531\u6210\u70db\u9aa8 \u5343\u5c81\u60c5\u4eba \u738b\u83f2 \u4e3b\u6f14 \u96be\u602a\u6625\u665a\u628a\u90a3\u82f1\u79d2\u6210\u4e0d\u4e00\u6837\u5f88\u591a\u4eba\u90fd\u4e0d\u77e5\u9053 \u738b\u83f2\u6f14 \u7684\u8fd9\u90e8\u300a\u5343\u5c81\u60c5\u4eba\u300b\uff0c\u662f1993\u5e74\u7684\u4e00\u90e8\u7a7f\u8d8a\u5267 \u5929\u4f7f\u7684\u5492\u8bed \u9b4f\u96ea\u6f2b \u6b4c\u624b \u9b4f\u96ea\u6f2b\u4e13\u8f91\u300a\u5929\u4f7f\u7684\u5492\u8bed\u300b\u7684\u540c\u540d\u4e3b\u6253\u6b4c\u66f2 \u4e0e\u9752\u6625\u6709\u5173\u7684\u65e5\u5b50 \u767d\u767e\u4f55 \u4e3b\u6f14 \u767d\u767e\u4f55\u7684\u5904\u5973\u5ea7\u662f\u300a\u4e0e\u9752\u6625\u6709\u5173\u7684\u65e5\u5b50\u300b\uff0c\u5408\u4f5c\u7684\u6f14\u5458\u662f\u4f5f\u5927\u4e3a\u3001\u9648\u7fbd\u51e1 \u9ad8\u9ad8\u81f3\u4e0a \u79cb\u8a00 \u4f5c\u8bcd \u4e13\u8f91\u66f2\u76ee\u5e8f\u53f7\u3000\u3000\u66f2\u76ee\u4f5c\u8bcd\u4f5c\u66f2\u7f16\u66f21\u9ad8\u9ad8\u81f3\u4e0a\u79cb\u8a00\u79cb\u8a00\u5f6d\u98de2\u9ad8\u9ad8\u81f3\u4e0a\uff08\u4f34\u594f\uff09\u3000\u3000\u79cb\u8a00\u79cb\u8a00\u5f6d\u98de train.txt \u4e2d\u5305\u542b18267\u884c\u6837\u672c, \u6bcf\u884c\u5206\u4e3a4\u5217\u5143\u7d20\uff0c\u5143\u7d20\u4e2d\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u7b2c\u4e00\u5217\u5143\u7d20\u4e3a\u5b9e\u4f531\u3001\u7b2c\u4e8c\u5217\u5143\u7d20\u4e3a\u5b9e\u4f532\u3001\u7b2c\u4e09\u5217\u5143\u7d20\u4e3a\u5173\u7cfb\u7c7b\u578b\u3001\u7b2c\u56db\u5217\u5143\u7d20\u662f\u539f\u59cb\u6587\u672c \u7b2c\u4e09\u4e2a\u6d4b\u8bd5\u6570\u636e\u96c6:/home/ec2-user/Bilstm_Attention_RE/data/test.txt \u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1 \u5b89\u60a6\u6eaa \u4e3b\u6f14 \u5f53\u300a\u4e09\u751f\u4e09\u4e16\u300b4\u4f4d\u5973\u661f\u6362\u4e0a\u73b0\u4ee3\u88c5: \u7b2c\u56db\uff0c\u5b89\u60a6\u6eaa\u5728\u300a\u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1\u300b\u4e2d\u9970\u6f14\u5c11\u8f9b\uff0c\u5b89\u60a6\u6eaa\u7a7f\u4e0a\u73b0\u4ee3\u88c5\u5341\u5206\u4eae\u773c\uff0c\u6c14\u8d28\u6e05\u65b0\u8131\u4fd7 \u5931\u604b33\u5929 \u767d\u767e\u4f55 \u4e3b\u6f14 2011\u5e74\uff0c\u62c5\u4efb\u7231\u60c5\u7247\u300a\u5931\u604b33\u5929\u300b\u7684\u7f16\u5267\uff0c\u8be5\u7247\u6539\u7f16\u81ea\u9c8d\u9cb8\u9cb8\u7684\u540c\u540d\u5c0f\u8bf4\uff0c\u7531\u6587\u7ae0\u3001\u767d\u767e\u4f55\u5171\u540c\u4e3b\u6f146 \u7231\u4eba\u4eec\u7684\u6545\u4e8b \u88f4\u52c7\u4fca \u4e3b\u6f14 \u300a\u7231\u4eba\u4eec\u7684\u6545\u4e8b\u300b\u662f\u5168\u57fa\u5c1a\u5bfc\u6f14\uff0c\u88f4\u52c7\u4fca\u3001\u674e\u82f1\u7231\u3001\u674e\u6167\u82f1\u7b49\u4e3b\u6f14\u768418\u96c6\u7231\u60c5\u7c7b\u578b\u7684\u7535\u89c6\u5267 \u4e3a\u4f60\u53eb\u597d \u5415\u8587 \u6b4c\u624b \u57fa\u672c\u8d44\u6599\u3000\u3000\u6b4c\u66f2\u540d\u79f0: \u4e3a\u4f60\u53eb\u597d1\u6b4c\u624b: \u5415\u8587\u3000\u3000\u6240\u5c5e\u4e13\u8f91: \u300a\u4f46\u613f\u4eba\u957f\u4e45\u300b\u6b4c\u8bcd\u3000\u3000\u6b4c\u624b: \u5415\u8587\u3000\u3000\u8bcd: \u6e05\u98ce \u66f2: \u5218\u9752 \u5361\u62c9\u662f\u6761\u72d7 \u8def\u5b66\u957f \u5bfc\u6f14 \u4e2a\u4eba\u751f\u6d3b\u674e\u4f73\u7487\u548c\u5bfc\u6f14\u8def\u5b66\u957f\u56e0\u62cd\u6444\u300a\u5361\u62c9\u662f\u6761\u72d7\u300b\u800c\u76f8\u8bc6\uff0c2003\u5e74\u4e24\u4eba\u7ed3\u5a5a \u4e0a\u5e1d\u521b\u9020\u5973\u4eba \u7b80-\u8def\u6613\u65af\u00b7\u7279\u6797\u63d0\u683c\u5357\u7279 \u4e3b\u6f14 \u300a\u4e0a\u5e1d\u521b\u9020\u5973\u4eba\u300b\u662f\u7f57\u6770\u00b7\u74e6\u8fea\u59c6\u6267\u5bfc\u7684\u7c89\u7ea2\u6d6a\u6f2b\u7231\u60c5\u5f71\u7247\uff0c\u7531\u78a7\u59ec\u00b7\u82ad\u94ce\u548c\u7b80-\u8def\u6613\u65af\u00b7\u7279\u6797\u63d0\u683c\u5357\u7279\u53c2\u52a0\u6f14\u51fa \u4e0a\u5e1d\u521b\u9020\u5973\u4eba \u78a7\u59ec\u00b7\u82ad\u94ce \u4e3b\u6f14 \u300a\u4e0a\u5e1d\u521b\u9020\u5973\u4eba\u300b\u662f\u7f57\u6770\u00b7\u74e6\u8fea\u59c6\u6267\u5bfc\u7684\u7c89\u7ea2\u6d6a\u6f2b\u7231\u60c5\u5f71\u7247\uff0c\u7531\u78a7\u59ec\u00b7\u82ad\u94ce\u548c\u7b80-\u8def\u6613\u65af\u00b7\u7279\u6797\u63d0\u683c\u5357\u7279\u53c2\u52a0\u6f14\u51fa test.txt\u4e2d\u5305\u542b5873\u884c\u6837\u672c, \u6bcf\u884c\u5206\u4e3a4\u5217\u5143\u7d20\uff0c\u5143\u7d20\u4e2d\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u7b2c\u4e00\u5217\u5143\u7d20\u4e3a\u5b9e\u4f531\u3001\u7b2c\u4e8c\u5217\u5143\u7d20\u4e3a\u5b9e\u4f532\u3001\u7b2c\u4e09\u5217\u5143\u7d20\u4e3a\u5173\u7cfb\u7c7b\u578b\u3001\u7b2c\u56db\u5217\u5143\u7d20\u662f\u539f\u59cb\u6587\u672c \u7b2c\u4e8c\u6b65:\u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u00b6 Config\u7c7b\u6587\u4ef6\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/config.py config\u6587\u4ef6\u76ee\u7684: \u914d\u7f6e\u9879\u76ee\u5e38\u7528\u53d8\u91cf\uff0c\u4e00\u822c\u8fd9\u4e9b\u53d8\u91cf\u5c5e\u4e8e\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\uff0c\u6bd4\u5982: \u8bad\u7ec3\u6587\u4ef6\u8def\u5f84\u3001\u6a21\u578b\u8bad\u7ec3\u6b21\u6570\u3001\u6a21\u578b\u8d85\u53c2\u6570\u7b49\u7b49 # coding:utf-8 import torch class Config ( object ): def __init__ ( self ): self . device = torch . device ( 'cuda' if torch . cuda . is_available () else 'cpu' ) self . train_data_path = \"\u8bad\u7ec3\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\u540d\u79f0\" self . test_data_path = \"\u6d4b\u8bd5\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\u540d\u79f0\" self . rel_data_path = \"\u5173\u7cfb\u7c7b\u578b\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\u540d\u79f0\" self . embedding_dim = 128 self . pos_dim = 32 self . hidden_dim = 200 self . epochs = 50 self . batch_size = 32 self . max_len = 70 self . learning_rate = 1e-3 \u7b2c\u4e09\u6b65: \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570 \u00b6 \u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570\u7684\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/utils/process.py \u9996\u9009\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 # coding:utf-8 from config import * from itertools import chain from collections import Counter conf = Config () # \u83b7\u53d6\u5173\u7cfb\u7c7b\u578b\u5b57\u5178 relation2id = {} with open ( conf . rel_data_path , 'r' , encoding = 'utf-8' ) as fr : for line in fr . readlines (): word , id = line . rstrip () . split ( ' ' ) if word not in relation2id : relation2id [ word ] = id \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570sent_padding, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def sent_padding ( words , word2id ): \"\"\"\u628a\u53e5\u5b50 words \u8f6c\u4e3a id \u5f62\u5f0f\uff0c\u5e76\u81ea\u52a8\u8865\u5168\u4e3a max_len \u957f\u5ea6\u3002\"\"\" ids = [] for word in words : if word in word2id : ids . append ( word2id [ word ]) else : ids . append ( word2id [ 'UNKNOW' ]) if len ( ids ) >= conf . max_len : return ids [: conf . max_len ] ids . extend ([ word2id [ 'BLANK' ]] * ( conf . max_len - len ( ids ))) return ids \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570pos, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def pos ( num ): ''' \u5c06\u5b9e\u4f53\u4f4d\u7f6e\u4fe1\u606f\u8fdb\u884c\u8f6c\u6362\uff0c\u56e0\u4e3apos_embedding\u4e0d\u80fd\u51fa\u73b0\u8d1f\u6570 ''' if num < - 70 : return 0 if num >= - 70 and num <= 70 : return num + 70 if num > 70 : return 142 \u6784\u5efa\u7b2c\u4e09\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570position_padding, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def position_padding ( pos_ids ): ''' \"\"\"\u628a pos\u4f4d\u7f6e\u4fe1\u606f \u8f6c\u4e3a id \u5f62\u5f0f\uff0c\u5e76\u81ea\u52a8\u8865\u5168\u4e3a max_len \u957f\u5ea6\u3002\"\"\" ''' pos_ids = [ pos ( id ) for id in pos_ids ] if len ( pos_ids ) >= conf . max_len : return pos_ids [: conf . max_len ] pos_ids . extend ([ 142 ] * ( conf . max_len - len ( pos_ids ))) return pos_ids \u6784\u5efa\u7b2c\u56db\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_train_data, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_txt_data ( data_path ): ''' \u7f16\u7801\u8bad\u7ec3\u3001\u6d4b\u8bd5\u6570\u636e\u96c6\u683c\u5f0f ''' datas = [] labels = [] positionE1 = [] positionE2 = [] entities = [] count_dict = { key : 0 for key , value in relation2id . items ()} with open ( data_path , 'r' , encoding = 'utf-8' ) as tfr : for line in tfr . readlines (): line = line . rstrip () . split ( ' ' , maxsplit = 3 ) if line [ 2 ] not in count_dict : continue if count_dict [ line [ 2 ]] > 2000 : continue else : entities . append ([ line [ 0 ], line [ 1 ]]) sentence = [] index1 = line [ 3 ] . index ( line [ 0 ]) position1 = [] index2 = line [ 3 ] . index ( line [ 1 ]) position2 = [] assert len ( line ) == 4 for i , word in enumerate ( line [ 3 ]): sentence . append ( word ) position1 . append ( i - index1 ) position2 . append ( i - index2 ) datas . append ( sentence ) labels . append ( relation2id [ line [ 2 ]]) positionE1 . append ( position1 ) positionE2 . append ( position2 ) count_dict [ line [ 2 ]] += 1 return datas , labels , positionE1 , positionE2 , entities \u6784\u5efa\u7b2c\u4e94\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_word_id, \u4f4d\u4e8e process.py \u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_word_id ( data_path ): ''' \u6587\u672c\u6570\u5b57\u5316\u8868\u793a\u5904\u7406\uff0c\u5f97\u5230word2id, id2word ''' datas , labels , positionE1 , positionE2 , entities = get_txt_data ( data_path ) data_list = list ( set ( chain ( * datas ))) word2id = { word : id for id , word in enumerate ( data_list )} id2word = { id : word for id , word in enumerate ( data_list )} word2id [ \"BLANK\" ] = len ( word2id ) word2id [ \"UNKNOW\" ] = len ( word2id ) id2word [ len ( id2word )] = \"BLANK\" id2word [ len ( id2word )] = \"UNKNOW\" return word2id , id2word \u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4ee5\u53caDataloader\u51fd\u6570 \u00b6 \u4ee3\u7801\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/utils/data_loader.py \u9996\u5148\u5bfc\u5165\u76f8\u5e94\u7684\u5de5\u5177\u5305 # coding:utf-8 import os from torch.utils.data import DataLoader , Dataset from utils.process import * import torch \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u7c7bMyDataset, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u7c7b. class MyDataset ( Dataset ): def __init__ ( self , data_path ): self . data = get_txt_data ( data_path ) def __len__ ( self ): return len ( self . data [ 0 ]) def __getitem__ ( self , index ): sequence = self . data [ 0 ][ index ] label = int ( self . data [ 1 ][ index ]) positionE1 = self . data [ 2 ][ index ] positionE2 = self . data [ 3 ][ index ] entites = self . data [ 4 ][ index ] return sequence , label , positionE1 , positionE2 , entites \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570collate_fn, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def collate_fn ( datas ): sequences = [ data [ 0 ] for data in datas ] labels = [ data [ 1 ] for data in datas ] positionE1 = [ data [ 2 ] for data in datas ] positionE2 = [ data [ 3 ] for data in datas ] entities = [ data [ 4 ] for data in datas ] word2id , id2word = get_word_id ( conf . train_data_path ) sequences_ids = [] for words in sequences : ids = sent_padding ( words , word2id ) sequences_ids . append ( ids ) positionE1_ids = [] positionE2_ids = [] for pos_ids in positionE1 : pos1_ids = position_padding ( pos_ids ) positionE1_ids . append ( pos1_ids ) for pos_ids in positionE2 : pos2_ids = position_padding ( pos_ids ) positionE2_ids . append ( pos2_ids ) datas_tensor = torch . tensor ( sequences_ids , dtype = torch . long , device = conf . device ) positionE1_tensor = torch . tensor ( positionE1_ids , dtype = torch . long , device = conf . device ) positionE2_tensor = torch . tensor ( positionE2_ids , dtype = torch . long , device = conf . device ) labels_tensor = torch . tensor ( labels , dtype = torch . long , device = conf . device ) return datas_tensor , positionE1_tensor , positionE2_tensor , labels_tensor , sequences , labels , entities \u6784\u5efa\u7b2c\u4e09\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_loader_data, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_loader_data (): train_data = MyDataset ( conf . train_data_path ) train_dataloader = DataLoader ( dataset = train_data , batch_size = conf . batch_size , shuffle = False , collate_fn = collate_fn , drop_last = True ) test_data = MyDataset ( conf . test_data_path ) test_dataloader = DataLoader ( dataset = test_data , batch_size = conf . batch_size , shuffle = False , collate_fn = collate_fn , drop_last = True ) return train_dataloader , test_dataloader 6 BiLSTM+Attention\u6a21\u578b\u642d\u5efa \u00b6 \u672c\u9879\u76ee\u4e2dBiLSTN+Attention\u6a21\u578b\u642d\u5efa\u7684\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570 \u7b2c\u4e09\u6b65: \u7f16\u5199\u4f7f\u7528\u6a21\u578b\u9884\u6d4b\u4ee3\u7801\u7684\u5b9e\u73b0. \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u00b6 \u6784\u5efaBiLSTM_ATT\u6a21\u578b\u7c7b \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Bilstm_Attention_RE/model/bilstm_atten.py # coding:utf8 import torch import torch.nn as nn import torch.nn.functional as F class BiLSTM_ATT ( nn . Module ): def __init__ ( self , conf , vocab_size , pos_size , tag_size ): super ( BiLSTM_ATT , self ) . __init__ () self . batch = conf . batch_size self . device = conf . device self . vocab_size = vocab_size self . embedding_dim = conf . embedding_dim self . hidden_dim = conf . hidden_dim self . pos_size = pos_size self . pos_dim = conf . pos_dim self . tag_size = tag_size self . word_embeds = nn . Embedding ( self . vocab_size , self . embedding_dim ) self . pos1_embeds = nn . Embedding ( self . pos_size , self . pos_dim ) self . pos2_embeds = nn . Embedding ( self . pos_size , self . pos_dim ) self . lstm = nn . LSTM ( input_size = self . embedding_dim + self . pos_dim * 2 , hidden_size = self . hidden_dim // 2 , num_layers = 1 , bidirectional = True ) self . linear = nn . Linear ( self . hidden_dim , self . tag_size ) self . dropout_emb = nn . Dropout ( p = 0.2 ) self . dropout_lstm = nn . Dropout ( p = 0.2 ) self . dropout_att = nn . Dropout ( p = 0.2 ) self . att_weight = nn . Parameter ( torch . randn ( self . batch , 1 , self . hidden_dim ) . to ( self . device )) def init_hidden_lstm ( self ): return ( torch . randn ( 2 , self . batch , self . hidden_dim // 2 ) . to ( self . device ), torch . randn ( 2 , self . batch , self . hidden_dim // 2 ) . to ( self . device )) def attention ( self , H ): M = F . tanh ( H ) a = F . softmax ( torch . bmm ( self . att_weight , M ), dim =- 1 ) a = torch . transpose ( a , 1 , 2 ) return torch . bmm ( H , a ) def forward ( self , sentence , pos1 , pos2 ): init_hidden = self . init_hidden_lstm () embeds = torch . cat (( self . word_embeds ( sentence ), self . pos1_embeds ( pos1 ), self . pos2_embeds ( pos2 )), 2 ) embeds = self . dropout_emb ( embeds ) embeds = torch . transpose ( embeds , 0 , 1 ) lstm_out , lstm_hidden = self . lstm ( embeds , init_hidden ) lstm_out = lstm_out . permute ( 1 , 2 , 0 ) lstm_out = self . dropout_lstm ( lstm_out ) att_out = F . tanh ( self . attention ( lstm_out )) att_out = self . dropout_att ( att_out ) . squeeze () result = self . linear ( att_out ) return result \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570 \u00b6 \u5b9e\u73b0\u8bad\u7ec3\u51fd\u6570train.py \u4ee3\u7801\u4f4d\u7f6e: /home/ec2-user/Bilstm_Attention_RE/train.py # coding:utf-8 from model.bilstm_atten import * from utils.data_loader import * from utils.process import * import torch import torch.nn as nn import torch.optim as optim import time from tqdm import tqdm def train ( conf , vocab_size , pos_size , tag_size ): # \u52a0\u8f7d\u6570\u636e\u96c6 train_iter , test_iter = get_loader_data () print ( '\u8bad\u7ec3\u6570\u636e\u96c6\u957f\u5ea6' , len ( train_iter )) # \u5b9e\u4f8b\u5316Bilstm+attention\u6a21\u578b ba_model = BiLSTM_ATT ( conf , vocab_size , pos_size , tag_size ) . to ( conf . device ) print ( ba_model ) # \u5b9e\u4f8b\u5316\u4f18\u5316\u5668 optimizer = optim . Adam ( ba_model . parameters (), lr = conf . learning_rate ) # \u5b9e\u4f8b\u5316\u635f\u5931\u51fd\u6570 criterion = nn . CrossEntropyLoss () # \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3 # \u5b9a\u4e49\u8bad\u7ec3\u6a21\u578b\u53c2\u6570 start_time = time . time () train_loss = 0 # \u5df2\u7ecf\u8bad\u7ec3\u6837\u672c\u7684\u635f\u5931 train_acc = 0 # \u5df2\u7ecf\u8bad\u7ec3\u6837\u672c\u7684\u51c6\u786e\u7387 total_iter_num = 0 # \u8bad\u7ec3\u8fed\u4ee3\u6b21\u6570 total_sample = 0 # \u5df2\u7ecf\u8bad\u7ec3\u7684\u6837\u672c\u6570 # \u5f00\u59cb\u6a21\u578b\u7684\u8bad\u7ec3 for epoch in range ( conf . epochs ): for sentence , pos1 , pos2 , label , _ , _ , _ in tqdm ( train_iter ): # \u5c06\u6570\u636e\u8f93\u5165\u6a21\u578b output = ba_model ( sentence , pos1 , pos2 ) # \u8ba1\u7b97\u635f\u5931 loss = criterion ( output , label ) # \u68af\u5ea6\u6e05\u96f6 optimizer . zero_grad () # \u53cd\u5411\u4f20\u64ad loss . backward () # \u68af\u5ea6\u66f4\u65b0 optimizer . step () # \u8ba1\u7b97\u603b\u635f\u5931 total_iter_num += 1 train_loss += loss . item () # \u8ba1\u7b97\u603b\u51c6\u786e\u7387 train_acc = train_acc + sum ( torch . argmax ( output , dim = 1 ) == label ) . item () total_sample = total_sample + label . size ()[ 0 ] # print(f'total_sample--->{total_sample}') # \u6bcf25\u6b21\u8bad\u7ec3\uff0c\u6253\u5370\u65e5\u5fd7 if total_iter_num % 25 == 0 : tmploss = train_loss / total_iter_num tmpacc = train_acc / total_sample end_time = time . time () print ( '\u8f6e\u6b21: %d , \u635f\u5931: %.6f , \u65f6\u95f4: %d , \u51c6\u786e\u7387: %.3f ' % ( epoch + 1 , tmploss , end_time - start_time , tmpacc )) if epoch % 10 == 0 : torch . save ( ba_model . state_dict (), './save_model/20230228_new_model_ %d .bin' % epoch ) if __name__ == '__main__' : word2id , id2word = get_word_id ( conf . train_data_path ) vocab_size = len ( word2id ) print ( vocab_size ) pos_size = 143 tag_size = len ( relation2id ) train ( conf , vocab_size , pos_size , tag_size ) \u6a21\u578b\u8bad\u7ec3\u7ed3\u679c\u5c55\u793a: \u7ed3\u8bba: BiLSTM+Attention\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u7684\u6700\u7ec8\u8868\u73b0\u662fACC:80% \u7b2c\u4e09\u6b65: \u7f16\u5199\u6a21\u578b\u9884\u6d4b\u51fd\u6570 \u00b6 \u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u968f\u673a\u62bd\u53d6\u6587\u672c\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6 \u4ee3\u7801\u4f4d\u7f6e: /home/ec2-user/Bilstm_Attention_RE/predict.py # coding:utf-8 from model.bilstm_atten import * from utils.data_loader import * from utils.process import * import torch from tqdm import tqdm # \u5bfc\u5165\u914d\u7f6e\u6587\u4ef6 conf = Config () # \u83b7\u53d6\u6216\u5b9a\u4e49\u6a21\u578b\u53c2\u6570 word2id , id2word = get_word_id ( conf . train_data_path ) vocab_size = len ( word2id ) pos_size = 143 tag_size = len ( relation2id ) print ( tag_size ) # \u83b7\u53d6id2relation\u7684\u6620\u5c04 id2relation = { int ( value ): key for key , value in relation2id . items ()} # \u52a0\u8f7d\u6570\u636e\u96c6 _ , test_iter = get_loader_data () # \u5b9e\u4f8b\u5316Bilstm+attention\u6a21\u578b ba_model = BiLSTM_ATT ( conf , vocab_size , pos_size , tag_size ) . to ( conf . device ) # \u52a0\u8f7d\u6a21\u578b ba_model . load_state_dict ( torch . load ( './save_model/20230228_new_model_40.bin' )) # \u5f00\u59cb\u6a21\u578b\u7684\u9884\u6d4b def model2predict (): ba_model . eval () with torch . no_grad (): for sentence , pos1 , pos2 , label , original_sequences , original_labels , entites in tqdm ( test_iter ): print ( label ) print ( original_labels ) print ( 'original_sequences' , len ( original_sequences )) print ( 'original_labels' , len ( original_labels )) # \u5c06\u6570\u636e\u8f93\u5165\u6a21\u578b output = ba_model ( sentence , pos1 , pos2 ) # \u5b9e\u73b0\u6a21\u578b\u7684\u9884\u6d4b predict_ids = torch . argmax ( output , dim = 1 ) . tolist () for i in range ( len ( original_sequences )): original_sequence = '' . join ( original_sequences [ i ]) original_label = id2relation [ original_labels [ i ]] entity = entites [ i ] predict_label = id2relation [ predict_ids [ i ]] print ( '\u539f\u59cb\u53e5\u5b50: ' , original_sequence ) print ( '\u539f\u59cb\u5173\u7cfb\u7c7b\u522b: ' , original_label ) print ( '\u5b9e\u4f53\u5217\u8868' , entity ) print ( '\u6a21\u578b\u9884\u6d4b\u7684\u5173\u7cfb\u7c7b\u522b: ' , predict_label ) print ( '*' * 80 ) if __name__ == '__main__' : model2predict () \u9884\u6d4b\u7ed3\u679c\u5c55\u793a: 7 Pipeline\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9 \u00b6 \u4f18\u70b9\uff1a \u6613\u4e8e\u5b9e\u73b0\uff0c\u5b9e\u4f53\u6a21\u578b\u548c\u5173\u7cfb\u6a21\u578b\u4f7f\u7528\u72ec\u7acb\u7684\u6570\u636e\u96c6\uff0c\u4e0d\u9700\u8981\u540c\u65f6\u6807\u6ce8\u5b9e\u4f53\u548c\u5173\u7cfb\u7684\u6570\u636e\u96c6. \u4e24\u8005\u76f8\u4e92\u72ec\u7acb\uff0c\u82e5\u5173\u7cfb\u62bd\u53d6\u6a21\u578b\u6ca1\u8bad\u7ec3\u597d\u4e0d\u4f1a\u5f71\u54cd\u5230\u5b9e\u4f53\u62bd\u53d6. \u7f3a\u70b9\uff1a \u5173\u7cfb\u548c\u5b9e\u4f53\u4e24\u8005\u662f\u7d27\u5bc6\u76f8\u8fde\u7684\uff0c\u4e92\u76f8\u4e4b\u95f4\u7684\u8054\u7cfb\u6ca1\u6709\u6355\u6349\u5230. \u5bb9\u6613\u9020\u6210\u8bef\u5dee\u79ef\u7d2f\u3001\u5b9e\u4f53\u5197\u4f59\u3001\u4ea4\u4e92\u7f3a\u5931. \u5c0f\u8282\u603b\u7ed3 \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3\u4e86\u4ec0\u4e48\u662fPipeline\u65b9\u6cd5\uff0c\u5e76\u57fa\u4e8eBiLSTM+Attention\u6a21\u578b\u5b9e\u73b0\u4e86\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u7684\u8bad\u7ec3\u548c\u8bc4\u4f30.","title":"4.3 Pipeline\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#pipline","text":"","title":"Pipline\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_1","text":"\u7406\u89e3Pipeline\u65b9\u6cd5\u7684\u539f\u7406 \u7406\u89e3BiLSTM+Attention\u6a21\u578b\u7684\u601d\u60f3 \u638c\u63e1BiLSTM+Attention\u6a21\u578b\u4ee3\u7801\u7684\u5b9e\u73b0 \u638c\u63e1Pipeline\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#1-pipeline","text":"pipeline\u65b9\u6cd5\u662f\u6307\u5728\u5b9e\u4f53\u8bc6\u522b\u5df2\u7ecf\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u518d\u8fdb\u884c\u5b9e\u4f53\u4e4b\u95f4\u5173\u7cfb\u7684\u62bd\u53d6. \u65e9\u671f\u7684\u6d41\u6c34\u7ebf\u5b66\u4e60\u65b9\u6cd5\u4e3b\u8981\u91c7\u7528\u5377\u79ef\u795e\u7ecf\u7f51\u7edc (CNN) \u548c\u5faa\u73af\u795e\u7ecf\u7f51\u7edc (RNN) \u4e24\u5927\u7c7b\u7ed3\u6784\uff0e\u5176\u4e2d\uff0cCNN\u591a\u6837\u6027\u5377\u79ef\u6838\u7684\u7279\u6027\u6709\u5229\u4e8e\u8bc6\u522b\u76ee\u6807\u7684\u7ed3\u6784\u7279\u5f81\uff0c\u800cRNN\u80fd\u5145\u5206\u8003\u8651\u957f\u8ddd\u79bb\u8bcd\u4e4b\u95f4\u7684\u4f9d\u8d56\u6027\uff0c\u5176\u8bb0\u5fc6\u529f\u80fd\u6709\u5229\u4e8e\u8bc6\u522b\u5e8f\u5217\uff0e\u968f\u7740\u6df1\u5ea6\u5b66\u4e60\u7684\u4e0d\u65ad\u53d1\u5c55, \u7814\u7a76\u8005\u4e0d\u65ad\u6539\u8fdb\u548c\u5b8c\u5584CNN\u548cRNN\u7684\u65b9\u6cd5\uff0c\u5e76\u4ea7\u751f\u4e86\u8bb8\u591a\u53d8\u4f53\uff0c\u5982\u957f\u77ed\u671f\u8bb0\u5fc6\u7f51\u7edc (LSTM) \u3001\u53cc\u5411\u957f\u77ed\u671f\u8bb0\u5fc6\u7f51 (BI-LSTM) \u3001\u7b49\uff0c\u4ece\u800c\u8fdb\u4e00\u6b65\u4fc3\u8fdb\u4e86\u5173\u7cfb\u62bd\u53d6\u7684\u53d1\u5c55\uff0e pipeline\u65b9\u6cd5\u6d41\u7a0b\uff1a \u5148\u5bf9\u8f93\u5165\u7684\u53e5\u5b50\u8fdb\u884c\u5b9e\u4f53\u62bd\u53d6\uff0c\u5c06\u8bc6\u522b\u51fa\u7684\u5b9e\u4f53\u5206\u522b\u7ec4\u5408\uff1b\u7136\u540e\u518d\u8fdb\u884c\u5173\u7cfb\u5206\u7c7b. \u6ce8\u610f\uff1a\u8fd9\u4e24\u4e2a\u5b50\u8fc7\u7a0b\u662f\u524d\u540e\u4e32\u8054\u7684\uff0c\u5b8c\u5168\u5206\u79bb.","title":"1 Pipeline\u65b9\u6cd5\u7684\u539f\u7406"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#2-bilstmattention","text":"BiLSTM+Attention\u6a21\u578b\u6700\u521d\u7531Zhou\u7b49\u4eba\u57282016\u5e74\u7684\u8bba\u6587\u300aAttention-Based Bidirectional Long Short-Term Memory Networks for Relation Classification\u300b\u4e2d\u63d0\u51fa. \u8be5\u6a21\u578b\u7ed3\u5408\u4e86\u53cc\u5411\u957f\u77ed\u65f6\u8bb0\u5fc6\u7f51\u7edc (Bidirectional LSTM) \u548c\u6ce8\u610f\u529b\u673a\u5236 (Attention) \uff0c\u7528\u4e8e\u5904\u7406\u8f93\u5165\u5e8f\u5217\u5e76\u63d0\u53d6\u5173\u7cfb\u4fe1\u606f. \u8be5\u6a21\u578b\u5e76\u88ab\u5e94\u7528\u4e8e\u5173\u7cfb\u5206\u7c7b\u4efb\u52a1.","title":"2 BiLSTM+Attention\u7b97\u6cd5\u601d\u60f3"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#3-bilstmattention","text":"\u57fa\u4e8e\u4e0a\u56fe\u6a21\u578b\u67b6\u6784\u6240\u793a: BiLSTM+Attention\u6a21\u578b\u6574\u4f53\u5206\u4e3a\u4e94\u4e2a\u90e8\u5206: \u8f93\u5165\u5c42 (Input Layer) : \u8f93\u5165\u7684\u662f\u53e5\u5b50\uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u5e8f\u5217\u4e5f\u53ef\u4ee5\u662f\u5355\u8bcd\u5e8f\u5217\uff0c\u6216\u8005\u4e24\u8005\u76f8\u7ed3\u5408. \u6b64\u5916\uff0c\u5bf9\u4e8e\u53e5\u5b50\u4e2d\u7684\u4e24\u4e2a\u5b9e\u4f53\uff0c\u5206\u522b\u8ba1\u7b97\u5404\u4e2a\u5b57\u7b26\u76f8\u5bf9\u4e8e\u5b9e\u4f53\u7684\u4f4d\u7f6e. \u6bd4\u5982\u6709\u5982\u4e0b\u6837\u672c: \u6587\u672c\u63cf\u8ff0: \u201c\u5728\u300a\u9003\u5b66\u5a01\u9f99\u300b\u8fd9\u90e8\u7535\u5f71\u4e2d\u5468\u661f\u9a70\u548c\u5434\u5b5f\u8fbe\u8054\u5408\u51fa\u6f14\u201d \u5728\u8fd9\u4e2a\u6837\u672c\u4e2d\uff0c\u5b9e\u4f531\u4e3a\u5468\u661f\u9a70\uff0c\u5b9e\u4f532\u4e3a\u5434\u5b5f\u8fbe. \u5173\u7cfb\u4e3a\u5408\u4f5c\u5173\u7cfb. \u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u5b57\u7b26\u201c\u5728\u201d\u5b57\u6765\u8bf4\uff0c\u5176\u76f8\u5bf9\u4e8e\u5b9e\u4f531\u7684\u8ddd\u79bb\u4e3a: \u201c\u5728\u201d\u5b57\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15-\u5b9e\u4f531\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15. \u76f8\u5bf9\u4e8e\u5b9e\u4f532\u7684\u8ddd\u79bb\u4e3a: \u201c\u5728\u201d\u5b57\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15-\u5b9e\u4f532\u5728\u5b57\u7b26\u5e8f\u5217\u4e2d\u7684\u7d22\u5f15. \u56e0\u6b64\uff0c\u6a21\u578b\u7684\u8f93\u5165\u4e3a\u5b50\u5e8f\u5217+\u5b57\u7b26\u7684\u76f8\u5bf9\u4f4d\u7f6e\u7f16\u7801 \u8bcd\u5d4c\u5165\u5c42 (Embedding Layer) : \u5c06\u6bcf\u4e2a\u5355\u8bcd\u6620\u5c04\u5230\u4e00\u4e2a\u9ad8\u7ef4\u5411\u91cf\u8868\u793a\uff0c\u5305\u62ec: \u5b57\u7b26\u6216\u8bcd\u5d4c\u5165\u4ee5\u53ca\u76f8\u5bf9\u4f4d\u7f6e\u7f16\u7801\u7684\u5d4c\u5165\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u8bad\u7ec3\u7684\u8bcd\u5411\u91cf\u6216\u4ece\u5934\u5f00\u59cb\u8bad\u7ec3. \u53cc\u5411LSTM\u5c42 (BiLSTM Layer) : LSTM\u662f\u4e00\u79cd\u9012\u5f52\u795e\u7ecf\u7f51\u7edc\uff0c\u5b83\u53ef\u4ee5\u5bf9\u5e8f\u5217\u6570\u636e\u8fdb\u884c\u5efa\u6a21\uff0c\u7528\u4e8e\u4ece\u53e5\u5b50\u4e2d\u63d0\u53d6\u7279\u5f81. BiLSTM\u662f\u4e00\u79cd\u53cc\u5411LSTM\uff0c\u5b83\u80fd\u591f\u540c\u65f6\u6355\u6349\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u5305\u62ec\u524d\u5411\u548c\u540e\u5411\u4fe1\u606f\uff0c\u56e0\u6b64\u5728\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u4e2d\u5f97\u5230\u4e86\u5e7f\u6cdb\u5e94\u7528. \u6ce8\u610f\u529b\u673a\u5236\u5c42 (Attention Layer) : \u6ce8\u610f\u529b\u673a\u5236\u53ef\u4ee5\u8ba9\u6a21\u578b\u96c6\u4e2d\u6ce8\u610f\u529b\u4e8e\u5173\u952e\u8bcd\u6216\u7247\u6bb5\uff0c\u6709\u52a9\u4e8e\u63d0\u9ad8\u6a21\u578b\u7684\u6027\u80fd. \u8fd9\u91cc\u6ce8\u610f\u529b\u673a\u5236\u88ab\u7528\u6765\u786e\u5b9a\u6bcf\u4e2a\u53e5\u5b50\u4e2d\u7684\u5355\u8bcd\u5bf9\u4e8e\u5173\u7cfb\u5206\u7c7b\u7684\u91cd\u8981\u6027. \u5177\u4f53\u6765\u8bf4\uff0c\u5bf9\u4e8e\u8f93\u5165\u53e5\u5b50\u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\uff0c\u6ce8\u610f\u529b\u673a\u5236\u4f1a\u4e3a\u5176\u5206\u914d\u4e00\u4e2a\u6743\u91cd\uff0c\u8868\u793a\u8be5\u5355\u8bcd\u5bf9\u4e8e\u5173\u7cfb\u5206\u7c7b\u7684\u91cd\u8981\u7a0b\u5ea6. \u8fd9\u4e9b\u6743\u91cd\u5c06\u88ab\u7528\u4e8e\u52a0\u6743\u8f93\u5165\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u8868\u793a\uff0c\u4ee5\u8ba1\u7b97\u5173\u7cfb\u5206\u7c7b\u7684\u8f93\u51fa. \u672c\u6b21\u6ce8\u610f\u529b\u673a\u5236\u7684\u5b9e\u73b0\u662f\u91c7\u7528\u7684\u57fa\u4e8e\u6ce8\u610f\u529b\u6743\u91cd\u7684\u52a0\u6743\u5e73\u5747\u6c60\u5316\u65b9\u5f0f. \u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u5c06 BiLSTM \u7f51\u7edc\u7684\u8f93\u51fa H H \u7ecf\u8fc7\u4e00\u4e2a tanh tanh \u6fc0\u6d3b\u51fd\u6570\uff0c\u5f97\u5230\u4e00\u4e2a\u77e9\u9635 M M M = tanh(H) M = tanh(H) \u7b2c\u4e8c\u6b65: \u5c06 M M \u4f5c\u4e3a\u8f93\u5165\uff0c\u901a\u8fc7\u6743\u91cd\u5411\u91cf w^T w^T \u548c\u4e00\u4e2a softmax \u51fd\u6570\uff0c\u8ba1\u7b97\u6bcf\u4e2a\u5355\u8bcd\u5bf9\u4e8e\u5173\u7cfb\u5206\u7c7b\u7684\u91cd\u8981\u7a0b\u5ea6\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u6743\u91cd\u5411\u91cf \u03b1 \u03b1 . \u03b1 = softmax(w^T*M) \u03b1 = softmax(w^T*M) \u7b2c\u4e09\u6b65: \u5c06BiLSTM\u7f51\u7edc\u7684\u8f93\u51fa H H \u548c\u6ce8\u610f\u529b\u6743\u91cd \u03b1 \u03b1 \u76f8\u4e58\u5f97\u5230\u4e00\u4e2a\u52a0\u6743\u548c r r r = H * \u03b1^T r = H * \u03b1^T \u7b2c\u56db\u6b65: \u5c06\u7b2c\u4e09\u6b65\u5f97\u5230\u7684\u7ed3\u679c r r \uff0c\u7ecf\u8fc7\u4e00\u4e2a tanh tanh \u6fc0\u6d3b\u51fd\u6570\uff0c\u5f97\u5230\u6700\u7ec8\u52a0\u6743\u540e\u7684\u8f93\u5165\u53e5\u5b50\u4e2d\u6bcf\u4e2a\u5355\u8bcd\u7684\u8868\u793a\uff0c\u4ee5\u65b9\u4fbf\u540e\u7eed\u8ba1\u7b97\u5173\u7cfb\u5206\u7c7b\u7684\u8f93\u51fa h^* = tanh(r) h^* = tanh(r) \u8f93\u51fa\u5c42 (Output Layer) : \u6839\u636e\u4efb\u52a1\u7684\u4e0d\u540c\uff0c\u8f93\u51fa\u5c42\u53ef\u4ee5\u662f\u5206\u7c7b\u5c42\u6216\u56de\u5f52\u5c42. \u5728\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u4e2d\uff0c\u8f93\u51fa\u5c42\u901a\u5e38\u662f\u4e00\u4e2a\u5206\u7c7b\u5c42\uff0c\u7528\u4e8e\u9884\u6d4b\u4e24\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb\u7c7b\u578b.","title":"3 BiLSTM+Attention\u6a21\u578b\u67b6\u6784"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#4","text":"","title":"4 \u6574\u4f53\u4ee3\u7801\u67b6\u6784\u56fe"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#5","text":"\u672c\u9879\u76ee\u4e2d\u5bf9\u6570\u636e\u90e8\u5206\u7684\u9884\u5904\u7406\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u7b2c\u4e8c\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u7b2c\u4e09\u6b65: \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570 \u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4e0edataloader\u51fd\u6570","title":"5 \u6570\u636e\u9884\u5904\u7406"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_2","text":"\u672c\u6b21\u9879\u76ee\u6570\u636e\u539f\u59cb\u6765\u6e90\u4e3a\u516c\u5f00\u7684\u5343\u8a00\u6570\u636e\u96c6https:// www.luge.ai/#/ \uff0c\u4f7f\u7528\u5f00\u6e90\u6570\u636e\u7684\u597d\u5904\uff0c\u6211\u4eec\u65e0\u9700\u6807\u6ce8\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff0c\u672c\u6b21\u9879\u76ee\u7684\u4e3b\u8981\u9700\u8981\u5927\u5bb6\u638c\u63e1\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u601d\u60f3\u3002 \u672c\u6b21\u9879\u76ee\u6570\u636e\u7684\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/data \u9879\u76ee\u7684\u6570\u636e\u96c6\u5305\u62ec3\u4e2a\u6587\u4ef6: \u7b2c\u4e00\u4e2a\u5173\u7cfb\u7c7b\u578b\u6587\u4ef6: /home/ec2-user/Bilstm_Attention_RE/data/relation2id.txt \u5bfc\u6f14 0 \u6b4c\u624b 1 \u4f5c\u66f2 2 \u4f5c\u8bcd 3 \u4e3b\u6f14 4 relation2id.txt\u4e2d\u5305\u542b5\u4e2a\u7c7b\u522b\u6807\u7b7e, \u6587\u4ef6\u5171\u5206\u4e3a\u4e24\u5217\uff0c\u7b2c\u4e00\u5217\u662f\u7c7b\u522b\u540d\u79f0\uff0c\u7b2c\u4e8c\u5217\u4e3a\u7c7b\u522b\u5e8f\u53f7\uff0c\u4e2d\u95f4\u7a7a\u683c\u7b26\u53f7\u9694\u5f00 \u7b2c\u4e8c\u4e2a\u8bad\u7ec3\u6570\u636e\u96c6: /home/ec2-user/Bilstm_Attention_RE/data/train.txt \u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765 \u9ec4\u5bb6\u5f3a \u6b4c\u624b \u300a\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\u300b\u662f\u9ec4\u5bb6\u5f3a\u7684\u4e00\u9996\u7ca4\u8bed\u6b4c\u66f2\uff0c\u7531\u4f55\u542f\u5f18\u4f5c\u8bcd\uff0c\u9ec4\u5bb6\u5f3a\u4f5c\u66f2\u7f16\u66f2\u5e76\u6f14\u5531\uff0c\u6536\u5f55\u4e8e2007\u5e7408\u670801\u65e5\u53d1\u884c\u7684\u4e13\u8f91\u300a\u5979\u4ed6\u300b\u4e2d \u4f3c\u6c34\u6d41\u5e74 \u8bb8\u6653\u6770 \u4f5c\u66f2 \u4f3c\u6c34\u6d41\u5e74\uff0c\u7531\u8457\u540d\u4f5c\u8bcd\u5bb6\u95eb\u8083\u4f5c\u8bcd\uff0c\u8457\u540d\u97f3\u4e50\u4eba\u8bb8\u6653\u6770\u4f5c\u66f2\uff0c\u5f20\u70e8\u6f14\u5531 \u4ea4\u6d89\u4eba \u671d\u65e5\u7535\u89c6\u53f0 \u51fa\u54c1\u516c\u53f8 \u300a\u4ea4\u6d89\u4eba\u300b\u662f\u65e5\u672c\u671d\u65e5\u7535\u89c6\u53f0\u5236\u4f5c\u5e76\u64ad\u51fa\u76848\u96c6\u60ac\u7591\u63a8\u7406\u7535\u89c6\u5267 \u751f\u6d3b\u542f\u793a\u5f55 \u95eb\u59ae \u4e3b\u6f14 05\u95eb\u59ae\u63a5\u5230\u300a\u751f\u6d3b\u542f\u793a\u5f55\u300b\u4e4b\u540e\uff0c\u5c31\u5411\u738b\u4e3d\u840d\u63a8\u8350\u4e86\u80e1\u6b4c \u5317\u4eac\u5317\u4eac \u6c6a\u5cf0 \u6b4c\u624b \u201d\u6c6a\u5cf0\u6211\u5370\u8c61\u6700\u6df1\u523b\u7684\u662f\u6c6a\u5cf0\u7684\u300a\u5317\u4eac\u5317\u4eac\u300b\u8680\u9aa8\u5531\u6210\u70db\u9aa8 \u5343\u5c81\u60c5\u4eba \u738b\u83f2 \u4e3b\u6f14 \u96be\u602a\u6625\u665a\u628a\u90a3\u82f1\u79d2\u6210\u4e0d\u4e00\u6837\u5f88\u591a\u4eba\u90fd\u4e0d\u77e5\u9053 \u738b\u83f2\u6f14 \u7684\u8fd9\u90e8\u300a\u5343\u5c81\u60c5\u4eba\u300b\uff0c\u662f1993\u5e74\u7684\u4e00\u90e8\u7a7f\u8d8a\u5267 \u5929\u4f7f\u7684\u5492\u8bed \u9b4f\u96ea\u6f2b \u6b4c\u624b \u9b4f\u96ea\u6f2b\u4e13\u8f91\u300a\u5929\u4f7f\u7684\u5492\u8bed\u300b\u7684\u540c\u540d\u4e3b\u6253\u6b4c\u66f2 \u4e0e\u9752\u6625\u6709\u5173\u7684\u65e5\u5b50 \u767d\u767e\u4f55 \u4e3b\u6f14 \u767d\u767e\u4f55\u7684\u5904\u5973\u5ea7\u662f\u300a\u4e0e\u9752\u6625\u6709\u5173\u7684\u65e5\u5b50\u300b\uff0c\u5408\u4f5c\u7684\u6f14\u5458\u662f\u4f5f\u5927\u4e3a\u3001\u9648\u7fbd\u51e1 \u9ad8\u9ad8\u81f3\u4e0a \u79cb\u8a00 \u4f5c\u8bcd \u4e13\u8f91\u66f2\u76ee\u5e8f\u53f7\u3000\u3000\u66f2\u76ee\u4f5c\u8bcd\u4f5c\u66f2\u7f16\u66f21\u9ad8\u9ad8\u81f3\u4e0a\u79cb\u8a00\u79cb\u8a00\u5f6d\u98de2\u9ad8\u9ad8\u81f3\u4e0a\uff08\u4f34\u594f\uff09\u3000\u3000\u79cb\u8a00\u79cb\u8a00\u5f6d\u98de train.txt \u4e2d\u5305\u542b18267\u884c\u6837\u672c, \u6bcf\u884c\u5206\u4e3a4\u5217\u5143\u7d20\uff0c\u5143\u7d20\u4e2d\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u7b2c\u4e00\u5217\u5143\u7d20\u4e3a\u5b9e\u4f531\u3001\u7b2c\u4e8c\u5217\u5143\u7d20\u4e3a\u5b9e\u4f532\u3001\u7b2c\u4e09\u5217\u5143\u7d20\u4e3a\u5173\u7cfb\u7c7b\u578b\u3001\u7b2c\u56db\u5217\u5143\u7d20\u662f\u539f\u59cb\u6587\u672c \u7b2c\u4e09\u4e2a\u6d4b\u8bd5\u6570\u636e\u96c6:/home/ec2-user/Bilstm_Attention_RE/data/test.txt \u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1 \u5b89\u60a6\u6eaa \u4e3b\u6f14 \u5f53\u300a\u4e09\u751f\u4e09\u4e16\u300b4\u4f4d\u5973\u661f\u6362\u4e0a\u73b0\u4ee3\u88c5: \u7b2c\u56db\uff0c\u5b89\u60a6\u6eaa\u5728\u300a\u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1\u300b\u4e2d\u9970\u6f14\u5c11\u8f9b\uff0c\u5b89\u60a6\u6eaa\u7a7f\u4e0a\u73b0\u4ee3\u88c5\u5341\u5206\u4eae\u773c\uff0c\u6c14\u8d28\u6e05\u65b0\u8131\u4fd7 \u5931\u604b33\u5929 \u767d\u767e\u4f55 \u4e3b\u6f14 2011\u5e74\uff0c\u62c5\u4efb\u7231\u60c5\u7247\u300a\u5931\u604b33\u5929\u300b\u7684\u7f16\u5267\uff0c\u8be5\u7247\u6539\u7f16\u81ea\u9c8d\u9cb8\u9cb8\u7684\u540c\u540d\u5c0f\u8bf4\uff0c\u7531\u6587\u7ae0\u3001\u767d\u767e\u4f55\u5171\u540c\u4e3b\u6f146 \u7231\u4eba\u4eec\u7684\u6545\u4e8b \u88f4\u52c7\u4fca \u4e3b\u6f14 \u300a\u7231\u4eba\u4eec\u7684\u6545\u4e8b\u300b\u662f\u5168\u57fa\u5c1a\u5bfc\u6f14\uff0c\u88f4\u52c7\u4fca\u3001\u674e\u82f1\u7231\u3001\u674e\u6167\u82f1\u7b49\u4e3b\u6f14\u768418\u96c6\u7231\u60c5\u7c7b\u578b\u7684\u7535\u89c6\u5267 \u4e3a\u4f60\u53eb\u597d \u5415\u8587 \u6b4c\u624b \u57fa\u672c\u8d44\u6599\u3000\u3000\u6b4c\u66f2\u540d\u79f0: \u4e3a\u4f60\u53eb\u597d1\u6b4c\u624b: \u5415\u8587\u3000\u3000\u6240\u5c5e\u4e13\u8f91: \u300a\u4f46\u613f\u4eba\u957f\u4e45\u300b\u6b4c\u8bcd\u3000\u3000\u6b4c\u624b: \u5415\u8587\u3000\u3000\u8bcd: \u6e05\u98ce \u66f2: \u5218\u9752 \u5361\u62c9\u662f\u6761\u72d7 \u8def\u5b66\u957f \u5bfc\u6f14 \u4e2a\u4eba\u751f\u6d3b\u674e\u4f73\u7487\u548c\u5bfc\u6f14\u8def\u5b66\u957f\u56e0\u62cd\u6444\u300a\u5361\u62c9\u662f\u6761\u72d7\u300b\u800c\u76f8\u8bc6\uff0c2003\u5e74\u4e24\u4eba\u7ed3\u5a5a \u4e0a\u5e1d\u521b\u9020\u5973\u4eba \u7b80-\u8def\u6613\u65af\u00b7\u7279\u6797\u63d0\u683c\u5357\u7279 \u4e3b\u6f14 \u300a\u4e0a\u5e1d\u521b\u9020\u5973\u4eba\u300b\u662f\u7f57\u6770\u00b7\u74e6\u8fea\u59c6\u6267\u5bfc\u7684\u7c89\u7ea2\u6d6a\u6f2b\u7231\u60c5\u5f71\u7247\uff0c\u7531\u78a7\u59ec\u00b7\u82ad\u94ce\u548c\u7b80-\u8def\u6613\u65af\u00b7\u7279\u6797\u63d0\u683c\u5357\u7279\u53c2\u52a0\u6f14\u51fa \u4e0a\u5e1d\u521b\u9020\u5973\u4eba \u78a7\u59ec\u00b7\u82ad\u94ce \u4e3b\u6f14 \u300a\u4e0a\u5e1d\u521b\u9020\u5973\u4eba\u300b\u662f\u7f57\u6770\u00b7\u74e6\u8fea\u59c6\u6267\u5bfc\u7684\u7c89\u7ea2\u6d6a\u6f2b\u7231\u60c5\u5f71\u7247\uff0c\u7531\u78a7\u59ec\u00b7\u82ad\u94ce\u548c\u7b80-\u8def\u6613\u65af\u00b7\u7279\u6797\u63d0\u683c\u5357\u7279\u53c2\u52a0\u6f14\u51fa test.txt\u4e2d\u5305\u542b5873\u884c\u6837\u672c, \u6bcf\u884c\u5206\u4e3a4\u5217\u5143\u7d20\uff0c\u5143\u7d20\u4e2d\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u7b2c\u4e00\u5217\u5143\u7d20\u4e3a\u5b9e\u4f531\u3001\u7b2c\u4e8c\u5217\u5143\u7d20\u4e3a\u5b9e\u4f532\u3001\u7b2c\u4e09\u5217\u5143\u7d20\u4e3a\u5173\u7cfb\u7c7b\u578b\u3001\u7b2c\u56db\u5217\u5143\u7d20\u662f\u539f\u59cb\u6587\u672c","title":"\u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#config","text":"Config\u7c7b\u6587\u4ef6\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/config.py config\u6587\u4ef6\u76ee\u7684: \u914d\u7f6e\u9879\u76ee\u5e38\u7528\u53d8\u91cf\uff0c\u4e00\u822c\u8fd9\u4e9b\u53d8\u91cf\u5c5e\u4e8e\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\uff0c\u6bd4\u5982: \u8bad\u7ec3\u6587\u4ef6\u8def\u5f84\u3001\u6a21\u578b\u8bad\u7ec3\u6b21\u6570\u3001\u6a21\u578b\u8d85\u53c2\u6570\u7b49\u7b49 # coding:utf-8 import torch class Config ( object ): def __init__ ( self ): self . device = torch . device ( 'cuda' if torch . cuda . is_available () else 'cpu' ) self . train_data_path = \"\u8bad\u7ec3\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\u540d\u79f0\" self . test_data_path = \"\u6d4b\u8bd5\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\u540d\u79f0\" self . rel_data_path = \"\u5173\u7cfb\u7c7b\u578b\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\u540d\u79f0\" self . embedding_dim = 128 self . pos_dim = 32 self . hidden_dim = 200 self . epochs = 50 self . batch_size = 32 self . max_len = 70 self . learning_rate = 1e-3","title":"\u7b2c\u4e8c\u6b65:\u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_3","text":"\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570\u7684\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/utils/process.py \u9996\u9009\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 # coding:utf-8 from config import * from itertools import chain from collections import Counter conf = Config () # \u83b7\u53d6\u5173\u7cfb\u7c7b\u578b\u5b57\u5178 relation2id = {} with open ( conf . rel_data_path , 'r' , encoding = 'utf-8' ) as fr : for line in fr . readlines (): word , id = line . rstrip () . split ( ' ' ) if word not in relation2id : relation2id [ word ] = id \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570sent_padding, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def sent_padding ( words , word2id ): \"\"\"\u628a\u53e5\u5b50 words \u8f6c\u4e3a id \u5f62\u5f0f\uff0c\u5e76\u81ea\u52a8\u8865\u5168\u4e3a max_len \u957f\u5ea6\u3002\"\"\" ids = [] for word in words : if word in word2id : ids . append ( word2id [ word ]) else : ids . append ( word2id [ 'UNKNOW' ]) if len ( ids ) >= conf . max_len : return ids [: conf . max_len ] ids . extend ([ word2id [ 'BLANK' ]] * ( conf . max_len - len ( ids ))) return ids \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570pos, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def pos ( num ): ''' \u5c06\u5b9e\u4f53\u4f4d\u7f6e\u4fe1\u606f\u8fdb\u884c\u8f6c\u6362\uff0c\u56e0\u4e3apos_embedding\u4e0d\u80fd\u51fa\u73b0\u8d1f\u6570 ''' if num < - 70 : return 0 if num >= - 70 and num <= 70 : return num + 70 if num > 70 : return 142 \u6784\u5efa\u7b2c\u4e09\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570position_padding, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def position_padding ( pos_ids ): ''' \"\"\"\u628a pos\u4f4d\u7f6e\u4fe1\u606f \u8f6c\u4e3a id \u5f62\u5f0f\uff0c\u5e76\u81ea\u52a8\u8865\u5168\u4e3a max_len \u957f\u5ea6\u3002\"\"\" ''' pos_ids = [ pos ( id ) for id in pos_ids ] if len ( pos_ids ) >= conf . max_len : return pos_ids [: conf . max_len ] pos_ids . extend ([ 142 ] * ( conf . max_len - len ( pos_ids ))) return pos_ids \u6784\u5efa\u7b2c\u56db\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_train_data, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_txt_data ( data_path ): ''' \u7f16\u7801\u8bad\u7ec3\u3001\u6d4b\u8bd5\u6570\u636e\u96c6\u683c\u5f0f ''' datas = [] labels = [] positionE1 = [] positionE2 = [] entities = [] count_dict = { key : 0 for key , value in relation2id . items ()} with open ( data_path , 'r' , encoding = 'utf-8' ) as tfr : for line in tfr . readlines (): line = line . rstrip () . split ( ' ' , maxsplit = 3 ) if line [ 2 ] not in count_dict : continue if count_dict [ line [ 2 ]] > 2000 : continue else : entities . append ([ line [ 0 ], line [ 1 ]]) sentence = [] index1 = line [ 3 ] . index ( line [ 0 ]) position1 = [] index2 = line [ 3 ] . index ( line [ 1 ]) position2 = [] assert len ( line ) == 4 for i , word in enumerate ( line [ 3 ]): sentence . append ( word ) position1 . append ( i - index1 ) position2 . append ( i - index2 ) datas . append ( sentence ) labels . append ( relation2id [ line [ 2 ]]) positionE1 . append ( position1 ) positionE2 . append ( position2 ) count_dict [ line [ 2 ]] += 1 return datas , labels , positionE1 , positionE2 , entities \u6784\u5efa\u7b2c\u4e94\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_word_id, \u4f4d\u4e8e process.py \u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_word_id ( data_path ): ''' \u6587\u672c\u6570\u5b57\u5316\u8868\u793a\u5904\u7406\uff0c\u5f97\u5230word2id, id2word ''' datas , labels , positionE1 , positionE2 , entities = get_txt_data ( data_path ) data_list = list ( set ( chain ( * datas ))) word2id = { word : id for id , word in enumerate ( data_list )} id2word = { id : word for id , word in enumerate ( data_list )} word2id [ \"BLANK\" ] = len ( word2id ) word2id [ \"UNKNOW\" ] = len ( word2id ) id2word [ len ( id2word )] = \"BLANK\" id2word [ len ( id2word )] = \"UNKNOW\" return word2id , id2word","title":"\u7b2c\u4e09\u6b65:  \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#datasetdataloader","text":"\u4ee3\u7801\u8def\u5f84\u4e3a: /home/ec2-user/Bilstm_Attention_RE/utils/data_loader.py \u9996\u5148\u5bfc\u5165\u76f8\u5e94\u7684\u5de5\u5177\u5305 # coding:utf-8 import os from torch.utils.data import DataLoader , Dataset from utils.process import * import torch \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u7c7bMyDataset, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u7c7b. class MyDataset ( Dataset ): def __init__ ( self , data_path ): self . data = get_txt_data ( data_path ) def __len__ ( self ): return len ( self . data [ 0 ]) def __getitem__ ( self , index ): sequence = self . data [ 0 ][ index ] label = int ( self . data [ 1 ][ index ]) positionE1 = self . data [ 2 ][ index ] positionE2 = self . data [ 3 ][ index ] entites = self . data [ 4 ][ index ] return sequence , label , positionE1 , positionE2 , entites \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570collate_fn, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def collate_fn ( datas ): sequences = [ data [ 0 ] for data in datas ] labels = [ data [ 1 ] for data in datas ] positionE1 = [ data [ 2 ] for data in datas ] positionE2 = [ data [ 3 ] for data in datas ] entities = [ data [ 4 ] for data in datas ] word2id , id2word = get_word_id ( conf . train_data_path ) sequences_ids = [] for words in sequences : ids = sent_padding ( words , word2id ) sequences_ids . append ( ids ) positionE1_ids = [] positionE2_ids = [] for pos_ids in positionE1 : pos1_ids = position_padding ( pos_ids ) positionE1_ids . append ( pos1_ids ) for pos_ids in positionE2 : pos2_ids = position_padding ( pos_ids ) positionE2_ids . append ( pos2_ids ) datas_tensor = torch . tensor ( sequences_ids , dtype = torch . long , device = conf . device ) positionE1_tensor = torch . tensor ( positionE1_ids , dtype = torch . long , device = conf . device ) positionE2_tensor = torch . tensor ( positionE2_ids , dtype = torch . long , device = conf . device ) labels_tensor = torch . tensor ( labels , dtype = torch . long , device = conf . device ) return datas_tensor , positionE1_tensor , positionE2_tensor , labels_tensor , sequences , labels , entities \u6784\u5efa\u7b2c\u4e09\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_loader_data, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_loader_data (): train_data = MyDataset ( conf . train_data_path ) train_dataloader = DataLoader ( dataset = train_data , batch_size = conf . batch_size , shuffle = False , collate_fn = collate_fn , drop_last = True ) test_data = MyDataset ( conf . test_data_path ) test_dataloader = DataLoader ( dataset = test_data , batch_size = conf . batch_size , shuffle = False , collate_fn = collate_fn , drop_last = True ) return train_dataloader , test_dataloader","title":"\u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4ee5\u53caDataloader\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#6-bilstmattention","text":"\u672c\u9879\u76ee\u4e2dBiLSTN+Attention\u6a21\u578b\u642d\u5efa\u7684\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570 \u7b2c\u4e09\u6b65: \u7f16\u5199\u4f7f\u7528\u6a21\u578b\u9884\u6d4b\u4ee3\u7801\u7684\u5b9e\u73b0.","title":"6 BiLSTM+Attention\u6a21\u578b\u642d\u5efa"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_4","text":"\u6784\u5efaBiLSTM_ATT\u6a21\u578b\u7c7b \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Bilstm_Attention_RE/model/bilstm_atten.py # coding:utf8 import torch import torch.nn as nn import torch.nn.functional as F class BiLSTM_ATT ( nn . Module ): def __init__ ( self , conf , vocab_size , pos_size , tag_size ): super ( BiLSTM_ATT , self ) . __init__ () self . batch = conf . batch_size self . device = conf . device self . vocab_size = vocab_size self . embedding_dim = conf . embedding_dim self . hidden_dim = conf . hidden_dim self . pos_size = pos_size self . pos_dim = conf . pos_dim self . tag_size = tag_size self . word_embeds = nn . Embedding ( self . vocab_size , self . embedding_dim ) self . pos1_embeds = nn . Embedding ( self . pos_size , self . pos_dim ) self . pos2_embeds = nn . Embedding ( self . pos_size , self . pos_dim ) self . lstm = nn . LSTM ( input_size = self . embedding_dim + self . pos_dim * 2 , hidden_size = self . hidden_dim // 2 , num_layers = 1 , bidirectional = True ) self . linear = nn . Linear ( self . hidden_dim , self . tag_size ) self . dropout_emb = nn . Dropout ( p = 0.2 ) self . dropout_lstm = nn . Dropout ( p = 0.2 ) self . dropout_att = nn . Dropout ( p = 0.2 ) self . att_weight = nn . Parameter ( torch . randn ( self . batch , 1 , self . hidden_dim ) . to ( self . device )) def init_hidden_lstm ( self ): return ( torch . randn ( 2 , self . batch , self . hidden_dim // 2 ) . to ( self . device ), torch . randn ( 2 , self . batch , self . hidden_dim // 2 ) . to ( self . device )) def attention ( self , H ): M = F . tanh ( H ) a = F . softmax ( torch . bmm ( self . att_weight , M ), dim =- 1 ) a = torch . transpose ( a , 1 , 2 ) return torch . bmm ( H , a ) def forward ( self , sentence , pos1 , pos2 ): init_hidden = self . init_hidden_lstm () embeds = torch . cat (( self . word_embeds ( sentence ), self . pos1_embeds ( pos1 ), self . pos2_embeds ( pos2 )), 2 ) embeds = self . dropout_emb ( embeds ) embeds = torch . transpose ( embeds , 0 , 1 ) lstm_out , lstm_hidden = self . lstm ( embeds , init_hidden ) lstm_out = lstm_out . permute ( 1 , 2 , 0 ) lstm_out = self . dropout_lstm ( lstm_out ) att_out = F . tanh ( self . attention ( lstm_out )) att_out = self . dropout_att ( att_out ) . squeeze () result = self . linear ( att_out ) return result","title":"\u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_5","text":"\u5b9e\u73b0\u8bad\u7ec3\u51fd\u6570train.py \u4ee3\u7801\u4f4d\u7f6e: /home/ec2-user/Bilstm_Attention_RE/train.py # coding:utf-8 from model.bilstm_atten import * from utils.data_loader import * from utils.process import * import torch import torch.nn as nn import torch.optim as optim import time from tqdm import tqdm def train ( conf , vocab_size , pos_size , tag_size ): # \u52a0\u8f7d\u6570\u636e\u96c6 train_iter , test_iter = get_loader_data () print ( '\u8bad\u7ec3\u6570\u636e\u96c6\u957f\u5ea6' , len ( train_iter )) # \u5b9e\u4f8b\u5316Bilstm+attention\u6a21\u578b ba_model = BiLSTM_ATT ( conf , vocab_size , pos_size , tag_size ) . to ( conf . device ) print ( ba_model ) # \u5b9e\u4f8b\u5316\u4f18\u5316\u5668 optimizer = optim . Adam ( ba_model . parameters (), lr = conf . learning_rate ) # \u5b9e\u4f8b\u5316\u635f\u5931\u51fd\u6570 criterion = nn . CrossEntropyLoss () # \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3 # \u5b9a\u4e49\u8bad\u7ec3\u6a21\u578b\u53c2\u6570 start_time = time . time () train_loss = 0 # \u5df2\u7ecf\u8bad\u7ec3\u6837\u672c\u7684\u635f\u5931 train_acc = 0 # \u5df2\u7ecf\u8bad\u7ec3\u6837\u672c\u7684\u51c6\u786e\u7387 total_iter_num = 0 # \u8bad\u7ec3\u8fed\u4ee3\u6b21\u6570 total_sample = 0 # \u5df2\u7ecf\u8bad\u7ec3\u7684\u6837\u672c\u6570 # \u5f00\u59cb\u6a21\u578b\u7684\u8bad\u7ec3 for epoch in range ( conf . epochs ): for sentence , pos1 , pos2 , label , _ , _ , _ in tqdm ( train_iter ): # \u5c06\u6570\u636e\u8f93\u5165\u6a21\u578b output = ba_model ( sentence , pos1 , pos2 ) # \u8ba1\u7b97\u635f\u5931 loss = criterion ( output , label ) # \u68af\u5ea6\u6e05\u96f6 optimizer . zero_grad () # \u53cd\u5411\u4f20\u64ad loss . backward () # \u68af\u5ea6\u66f4\u65b0 optimizer . step () # \u8ba1\u7b97\u603b\u635f\u5931 total_iter_num += 1 train_loss += loss . item () # \u8ba1\u7b97\u603b\u51c6\u786e\u7387 train_acc = train_acc + sum ( torch . argmax ( output , dim = 1 ) == label ) . item () total_sample = total_sample + label . size ()[ 0 ] # print(f'total_sample--->{total_sample}') # \u6bcf25\u6b21\u8bad\u7ec3\uff0c\u6253\u5370\u65e5\u5fd7 if total_iter_num % 25 == 0 : tmploss = train_loss / total_iter_num tmpacc = train_acc / total_sample end_time = time . time () print ( '\u8f6e\u6b21: %d , \u635f\u5931: %.6f , \u65f6\u95f4: %d , \u51c6\u786e\u7387: %.3f ' % ( epoch + 1 , tmploss , end_time - start_time , tmpacc )) if epoch % 10 == 0 : torch . save ( ba_model . state_dict (), './save_model/20230228_new_model_ %d .bin' % epoch ) if __name__ == '__main__' : word2id , id2word = get_word_id ( conf . train_data_path ) vocab_size = len ( word2id ) print ( vocab_size ) pos_size = 143 tag_size = len ( relation2id ) train ( conf , vocab_size , pos_size , tag_size ) \u6a21\u578b\u8bad\u7ec3\u7ed3\u679c\u5c55\u793a: \u7ed3\u8bba: BiLSTM+Attention\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u7684\u6700\u7ec8\u8868\u73b0\u662fACC:80%","title":"\u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_6","text":"\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u968f\u673a\u62bd\u53d6\u6587\u672c\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6 \u4ee3\u7801\u4f4d\u7f6e: /home/ec2-user/Bilstm_Attention_RE/predict.py # coding:utf-8 from model.bilstm_atten import * from utils.data_loader import * from utils.process import * import torch from tqdm import tqdm # \u5bfc\u5165\u914d\u7f6e\u6587\u4ef6 conf = Config () # \u83b7\u53d6\u6216\u5b9a\u4e49\u6a21\u578b\u53c2\u6570 word2id , id2word = get_word_id ( conf . train_data_path ) vocab_size = len ( word2id ) pos_size = 143 tag_size = len ( relation2id ) print ( tag_size ) # \u83b7\u53d6id2relation\u7684\u6620\u5c04 id2relation = { int ( value ): key for key , value in relation2id . items ()} # \u52a0\u8f7d\u6570\u636e\u96c6 _ , test_iter = get_loader_data () # \u5b9e\u4f8b\u5316Bilstm+attention\u6a21\u578b ba_model = BiLSTM_ATT ( conf , vocab_size , pos_size , tag_size ) . to ( conf . device ) # \u52a0\u8f7d\u6a21\u578b ba_model . load_state_dict ( torch . load ( './save_model/20230228_new_model_40.bin' )) # \u5f00\u59cb\u6a21\u578b\u7684\u9884\u6d4b def model2predict (): ba_model . eval () with torch . no_grad (): for sentence , pos1 , pos2 , label , original_sequences , original_labels , entites in tqdm ( test_iter ): print ( label ) print ( original_labels ) print ( 'original_sequences' , len ( original_sequences )) print ( 'original_labels' , len ( original_labels )) # \u5c06\u6570\u636e\u8f93\u5165\u6a21\u578b output = ba_model ( sentence , pos1 , pos2 ) # \u5b9e\u73b0\u6a21\u578b\u7684\u9884\u6d4b predict_ids = torch . argmax ( output , dim = 1 ) . tolist () for i in range ( len ( original_sequences )): original_sequence = '' . join ( original_sequences [ i ]) original_label = id2relation [ original_labels [ i ]] entity = entites [ i ] predict_label = id2relation [ predict_ids [ i ]] print ( '\u539f\u59cb\u53e5\u5b50: ' , original_sequence ) print ( '\u539f\u59cb\u5173\u7cfb\u7c7b\u522b: ' , original_label ) print ( '\u5b9e\u4f53\u5217\u8868' , entity ) print ( '\u6a21\u578b\u9884\u6d4b\u7684\u5173\u7cfb\u7c7b\u522b: ' , predict_label ) print ( '*' * 80 ) if __name__ == '__main__' : model2predict () \u9884\u6d4b\u7ed3\u679c\u5c55\u793a:","title":"\u7b2c\u4e09\u6b65: \u7f16\u5199\u6a21\u578b\u9884\u6d4b\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#7-pipeline","text":"\u4f18\u70b9\uff1a \u6613\u4e8e\u5b9e\u73b0\uff0c\u5b9e\u4f53\u6a21\u578b\u548c\u5173\u7cfb\u6a21\u578b\u4f7f\u7528\u72ec\u7acb\u7684\u6570\u636e\u96c6\uff0c\u4e0d\u9700\u8981\u540c\u65f6\u6807\u6ce8\u5b9e\u4f53\u548c\u5173\u7cfb\u7684\u6570\u636e\u96c6. \u4e24\u8005\u76f8\u4e92\u72ec\u7acb\uff0c\u82e5\u5173\u7cfb\u62bd\u53d6\u6a21\u578b\u6ca1\u8bad\u7ec3\u597d\u4e0d\u4f1a\u5f71\u54cd\u5230\u5b9e\u4f53\u62bd\u53d6. \u7f3a\u70b9\uff1a \u5173\u7cfb\u548c\u5b9e\u4f53\u4e24\u8005\u662f\u7d27\u5bc6\u76f8\u8fde\u7684\uff0c\u4e92\u76f8\u4e4b\u95f4\u7684\u8054\u7cfb\u6ca1\u6709\u6355\u6349\u5230. \u5bb9\u6613\u9020\u6210\u8bef\u5dee\u79ef\u7d2f\u3001\u5b9e\u4f53\u5197\u4f59\u3001\u4ea4\u4e92\u7f3a\u5931.","title":"7 Pipeline\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/03-Pipeline%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_7","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3\u4e86\u4ec0\u4e48\u662fPipeline\u65b9\u6cd5\uff0c\u5e76\u57fa\u4e8eBiLSTM+Attention\u6a21\u578b\u5b9e\u73b0\u4e86\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u7684\u8bad\u7ec3\u548c\u8bc4\u4f30.","title":"\u5c0f\u8282\u603b\u7ed3"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html","text":"Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u4ecb\u7ecd \u00b6 \u5b66\u4e60\u76ee\u6807 \u00b6 \u7406\u89e3Joint\u65b9\u6cd5\u7684\u539f\u7406 \u638c\u63e1Casrel\u6a21\u578b\u7684\u539f\u7406\u53ca\u67b6\u6784\u7ec4\u6210 \u638c\u63e1Casrel\u6a21\u578b\u7684\u4ee3\u7801\u5b9e\u73b0 \u638c\u63e1Joint\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9 1 Joint\u65b9\u6cd5\u7684\u539f\u7406 \u00b6 joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u662f\u901a\u8fc7\u4fee\u6539\u6807\u6ce8\u65b9\u6cd5\u548c\u6a21\u578b\u7ed3\u6784\u76f4\u63a5\u8f93\u51fa\u6587\u672c\u4e2d\u5305\u542b\u7684(ei,rk,ej)\u4e09\u5143\u7ec4. Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u53c8\u5206\u4e3a: \"\u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u6a21\u578b\" \u548c \"\u8054\u5408\u89e3\u7801\u7684\u8054\u5408\u6a21\u578b\": \u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u6a21\u578b: \u4e3b\u4f53\u3001\u5ba2\u4f53\u548c\u5173\u7cfb\u7684\u62bd\u53d6\u4e0d\u662f\u540c\u6b65\u7684 (\u4e00\u822c\u60c5\u51b5\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u5176\u4e2d\u4e24\u4e2a\u4efb\u52a1\u4e00\u8d77\u8fdb\u884c) \uff0c\u5404\u4e2a\u8fc7\u7a0b\u90fd\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2aloss\u503c\uff0c\u6574\u4e2a\u6a21\u578b\u7684loss\u662f\u5404\u8fc7\u7a0bloss\u503c\u4e4b\u548c. \u8054\u5408\u89e3\u7801\u7684\u8054\u5408\u6a21\u578b: \u4e3b\u4f53\u3001\u5ba2\u4f53\u548c\u5173\u7cfb\u7684\u62bd\u53d6\u662f\u540c\u6b65\u7684\uff0c\u901a\u8fc7\u4e00\u4e2a\u6a21\u578b\u76f4\u63a5\u5f97\u5230SPO\u4e09\u5143\u7ec4. \u5982: \u91c7\u7528\u5e8f\u5217\u6807\u6ce8\u5f62\u5f0f\u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\uff0c\u5982\u679c\u6709N\u79cd\u5173\u7cfb\uff0c\u5bf9\u4e8e\u6bcf\u79cd\u5173\u7cfb\uff0c\u5c06\u5176\u4e0eBIOS\u4ee5\u53ca\u4e3b\u5b9e\u4f53\u548c\u5ba2\u5b9e\u4f53\u7684\u5e8f\u53f7 (1\uff0c2) \u7ec4\u5408\u8d77\u6765\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\uff0c\u5e76\u6839\u636e\u6700\u540e\u7684\u6807\u6ce8\u7ed3\u679c\u8fdb\u884c\u89e3\u7801\uff0c\u4e00\u5171\u6d89\u53ca 2\u00d73\u00d7N+1\u200b\u4e2a\u6807\u7b7e (\u5176\u4e2d1\u4ee3\u8868\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u4e00\u79cd\u5173\u7cfb) . 2 Casrel\u7b97\u6cd5\u601d\u60f3 \u00b6 Casrel\u662f2020 ACL \u4e0a\u7684\u5b9e\u4f53\u5173\u7cfb\u62bd\u53d6\u7684\u4e00\u7bc7\u8bba\u6587\uff0c\u8be5\u8bba\u6587\u7684\u4e3b\u8981\u89e3\u51b3\u7684\u95ee\u9898\u4e3a\u5173\u7cfb\u4e09\u5143\u7ec4\u91cd\u53e0\u95ee\u9898. CasRel \u672c\u8d28\u4e0a\u662f\u57fa\u4e8e\u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u5b9e\u4f53\u5173\u7cfb\u62bd\u53d6\u65b9\u6cd5. 3 Casrel\u6a21\u578b\u67b6\u6784 \u00b6 CASREL\u6846\u67b6\u62bd\u53d6\u4e09\u5143\u7ec4(subject, relation, object)\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u6b65\u9aa4\uff0c\u4e09\u4e2a\u90e8\u5206 \u4e24\u4e2a\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\u8981\u8bc6\u522b\u51fa\u53e5\u5b50\u4e2d\u7684 subject . \u7b2c\u4e8c\u90e8\u8981\u6839\u636e\u8bc6\u522b\u51fa\u7684 subject, \u8bc6\u522b\u51fa\u6240\u6709\u6709\u53ef\u80fd\u7684 relation \u4ee5\u53ca\u5bf9\u5e94\u7684 object. \u4e09\u4e2a\u90e8\u5206\uff1a \u7f16\u7801\u5668\u90e8\u5206: \u53ef\u4ee5\u66ff\u6362\u4e3a\u4e0d\u540c\u7684\u7f16\u7801\u6846\u67b6\uff0c\u4e3b\u8981\u5bf9\u53e5\u5b50\u4e2d\u7684\u8bcd\u8fdb\u884c\u7f16\u7801\uff0c\u8bba\u6587\u6700\u7ec8\u4ee5BERT\u4e3a\u4e3b\uff0c\u6548\u679c\u4e0d\u9519. \u89e3\u7801\u5668\u2014-\u5934\u5b9e\u4f53\u8bc6\u522b\u90e8\u5206\uff1a\u76ee\u7684\u662f\u8bc6\u522b\u51fa\u53e5\u5b50\u4e2d\u7684 subject. \u89e3\u7801\u5668\u2014-\u5173\u7cfb\u4e0e\u5c3e\u5b9e\u4f53\u8054\u5408\u8bc6\u522b\u90e8\u5206\uff1a\u6839\u636e subject\uff0c\u5bfb\u627e\u53ef\u80fd\u7684 relation \u548c object. 3.1 \u6a21\u578b\u7ec6\u8282 \u00b6 \u5934\u5b9e\u4f53\u8bc6\u522b\u90e8\u5206 \u00b6 CasRel\u7684\u5934\u5b9e\u4f53\u8bc6\u522b\u5c42\u76f4\u63a5\u5bf9\u7f16\u7801\u5c42\u7684\u7ed3\u679c\u8fdb\u884c\u89e3\u7801\uff0c\u53bb\u8bc6\u522b\u6240\u6709\u53ef\u80fd\u7684\u5934\u5b9e\u4f53. \u8fd9\u91ccCasRel\u662f\u8bc6\u522b\u5934\u5b9e\u4f53span\uff0c\u4e5f\u5c31\u662fstart\u548cend\u4f4d\u7f6e\uff0c\u6240\u4ee5\u5b83\u91c7\u7528\u7684\u662f\u4e8c\u5206\u7c7b. \u56e0\u6b64\uff0c\u6a21\u578b\u672c\u8eab\u5f88\u7b80\u5355\uff1a \u9996\u5148\uff0c\u5229\u7528\u4e00\u4e2a\u7ebf\u6027\u5c42\u2795\u4e00\u4e2asigmoid\u6fc0\u6d3b\u51fd\u6570\u5224\u65ad\u6bcf\u4e2atoken\u662f\u4e0d\u662f\u5934\u5b9e\u4f53\u7684\u5f00\u59cbtoken\u6216\u7ed3\u675ftoken \u7136\u540e\uff0c\u5229\u7528\u6700\u8fd1\u5339\u914d\u539f\u5219\u5c06\u8bc6\u522b\u5230\u7684start\u548cend\u914d\u5bf9\u83b7\u5f97\u5019\u9009\u5934\u5b9e\u4f53\u96c6\u5408. \u5173\u7cfb\u3001\u5c3e\u5b9e\u4f53\u8054\u5408\u8bc6\u522b\u90e8\u5206 \u00b6 \u8bc6\u522b\u5934\u5b9e\u4f53\u540e\u5c31\u8981\u8fdb\u884c\u5173\u7cfb\u548c\u5c3e\u5b9e\u4f53\u7684\u8054\u5408\u8bc6\u522b\u4e86. \u8fd9\u91cc\u6bcf\u4e00\u5c42\u5c3e\u5b9e\u4f53\u8bc6\u522b\u5c42\u7684\u7ed3\u6784\u5176\u5b9e\u4e0e\u5934\u5b9e\u4f53\u8bc6\u522b\u5c42\u662f\u4e00\u6837\u7684\uff0c\u4e0d\u540c\u4e3b\u8981\u5728\u4e8e\u8f93\u5165\uff1a \u89e3\u7801\u7684\u65f6\u5019\u6bd4subject\u4e0d\u4ec5\u4ec5\u8003\u8651\u4e86BERT\u7f16\u7801\u7684\u9690\u5c42\u5411\u91cf\uff0c \u8fd8\u8003\u8651\u4e86\u8bc6\u522b\u51fa\u6765\u7684subject\u7279\u5f81\uff0c\u5373\u4e0b\u56fe. vsub \u4ee3\u8868 subject \u7279\u5f81\u5411\u91cf\uff0c\u82e5\u5b58\u5728\u591a\u4e2a\u8bcd\uff0c\u5c06\u5176\u53d6\u5411\u91cf\u5e73\u5747\uff0chn\u4ee3\u8868 BERT \u7f16\u7801\u5411\u91cf. \u5bf9\u4e8e\u8bc6\u522b\u51fa\u6765\u7684\u6bcf\u4e00\u4e2asubject, \u5bf9\u5e94\u7684\u6bcf\u4e00\u79cd\u5173\u7cfb\u4f1a\u89e3\u7801\u51fa\u5176 object \u7684 start \u548c end \u7d22\u5f15\u4f4d\u7f6e\uff0c\u4e0e Subject \u7c7b\u4f3c\uff0c\u516c\u5f0f\u5982\u4e0b\uff1a \u6a21\u578b\u7ed3\u679c\uff1a \u00b6 \u4ee5\u56fe\u4e2d\u7684\u4f8b\u5b50\u89e3\u6790\u4e0b\u6a21\u578b\u6700\u7ec8\u7684\u9884\u6d4b\u7ed3\u679c\uff0c\u56fe\u4e2d\u7684\u7b2c\u4e00\u4e2a subject \u7684\u8fc7\u7a0b\uff0c\u5373 Jackie R. Brown\uff0c\u5bf9\u4e8e\u8fd9\u4e2asubject\uff0c\u5728\u5173\u7cfb Birth_place \u4e2d\u8bc6\u522b\u51fa\u4e86\u4e24\u4e2a object\uff0c\u5373 Washington \u548c United States Of America\uff0c\u800c\u5728\u5176\u4ed6\u7684\u5173\u7cfb\u4e2d\u672a\u66fe\u8bc6\u522b\u51fa\u76f8\u5e94\u7684 object. \u5f53\u5bf9 Washington \u8fd9\u4e2a subject \u89e3\u7801\u65f6\uff0c\u4ec5\u4ec5\u5728 Capital_of \u7684\u5173\u7cfb\u4e2d\u8bc6\u522b\u51fa\u5bf9\u5e94\u7684 object: United States Of America. 3.2 Casrel\u6a21\u578b\u89e3\u51b3\u7684\u95ee\u9898 \u00b6 \u7531\u4e0a\u8ff0\u6a21\u578b\u7ed3\u679c\u5f97\u51fa\u7ed3\u8bba\uff1aCasrel\u6a21\u578b\u53ef\u4ee5\u89e3\u51b3\u6700\u5f00\u59cb\u63d0\u5230\u5173\u7cfb\u62bd\u53d6\u4e2d\u7684 SEO \u548c EPO \u7684\u91cd\u53e0\u95ee\u9898. \u8fd9\u4e5f\u662f\u6211\u4eec\u672c\u6b21\u9879\u76ee\u7814\u7a76\u95ee\u9898\u7684\u91cd\u70b9\uff0c\u89e3\u51b3\u6587\u672c\u4e2d\u591a\u5143\u5173\u7cfb\u95ee\u9898. 4 \u9879\u76ee\u4ee3\u7801\u67b6\u6784\u56fe \u00b6 5 \u6570\u636e\u9884\u5904\u7406 \u00b6 \u672c\u9879\u76ee\u4e2d\u5bf9\u6570\u636e\u90e8\u5206\u7684\u9884\u5904\u7406\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u7b2c\u4e8c\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u7b2c\u4e09\u6b65: \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570 \u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4e0edataloader\u51fd\u6570 \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u00b6 \u672c\u6b21\u9879\u76ee\u6570\u636e\u6765\u6e90\u4e3a\u516c\u5f00\u7684\u5343\u8a00\u6570\u636e\u96c6https:// www.luge.ai/#/ \uff0c\u4f7f\u7528\u5f00\u6e90\u6570\u636e\u7684\u597d\u5904\uff0c\u6211\u4eec\u65e0\u9700\u6807\u6ce8\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff0c\u672c\u6b21\u9879\u76ee\u7684\u4e3b\u8981\u76ee\u7684, \u9700\u8981\u5927\u5bb6\u638c\u63e1\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u601d\u60f3. \u6ce8\u610f\uff1a\u5b9e\u9645\u5de5\u4f5c\u4e2d\uff0c\u6570\u636e\u4e00\u822c\u9700\u8981\u4eba\u5de5\u624b\u52a8\u6807\u6ce8. \u9879\u76ee\u6570\u636e\u7684\u8def\u5f84\u4e3a\uff1a/home/ec2-user/Casrel_RE/relationship_extract/data \u9879\u76ee\u7684\u6570\u636e\u96c6\u5305\u62ec6\u4e2ajson\u6587\u4ef6\uff08\u5176\u4e2dpredict_spo.json\u662f\u6a21\u578b\u9884\u6d4b\u7ed3\u679c\uff0crel_type.json\u662f\u5e26\u6709\u5b9e\u4f53\u7c7b\u578b\u7684\u5173\u7cfb\u6587\u4ef6\uff09, \u6211\u4eec\u8fd9\u91cc\u53ea\u5148\u9488\u5bf9train.json\u3001dev.json\u3001test.json\u3001relation.json\u8fdb\u884c\u4ecb\u7ecd: \u5173\u7cfb\u7c7b\u578b\u6587\u4ef6: /home/ec2-user/Casrel_RE/relationship_extract/data/relation.json { \"0\" : \"\u51fa\u54c1\u516c\u53f8\" , \"1\" : \"\u56fd\u7c4d\" , \"2\" : \"\u51fa\u751f\u5730\" , \"3\" : \"\u6c11\u65cf\" , \"4\" : \"\u51fa\u751f\u65e5\u671f\" , \"5\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"6\" : \"\u6b4c\u624b\" , \"7\" : \"\u6240\u5c5e\u4e13\u8f91\" , \"8\" : \"\u4f5c\u8bcd\" , \"9\" : \"\u4f5c\u66f2\" , \"10\" : \"\u8fde\u8f7d\u7f51\u7ad9\" , \"11\" : \"\u4f5c\u8005\" , \"12\" : \"\u51fa\u7248\u793e\" , \"13\" : \"\u4e3b\u6f14\" , \"14\" : \"\u5bfc\u6f14\" , \"15\" : \"\u7f16\u5267\" , \"16\" : \"\u4e0a\u6620\u65f6\u95f4\" , \"17\" : \"\u6210\u7acb\u65e5\u671f\" } rel.json\u4e2d\u5305\u542b18\u4e2a\u7c7b\u522b\u6807\u7b7e, json\u6587\u4ef6\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5b57\u5178\uff0ckey\u5bf9\u5e94\u5173\u7cfb\u7684id\uff0cvalue\u5bf9\u5e94\u5173\u7cfb\u7c7b\u578b. \u8bad\u7ec3\u6570\u636e\u96c6: /home/ec2-user/Casrel_RE/relationship_extract/data/train.json { \"text\" : \"\u7b14 \u540d\uff1a\u6728\u65a7\u539f \u540d\uff1a\u6768\u8386\u66fe \u7528 \u540d\uff1a\u7a46\u65b0\u6587\u3001\u7267\u7f8a\u3001\u5bd2\u767d\u3001\u6d0b\u6f3e\u51fa\u751f\u65e5\u671f\uff1a1931\u2014\u804c \u4e1a\uff1a\u4f5c\u5bb6\u3001\u8bd7\u4eba\u6027 \u522b\uff1a \u7537\u6c11 \u65cf\uff1a \u56de\u65cf\u653f\u6cbb\u9762\u8c8c\uff1a\u4e2d\u5171\u515a\u5458 \u7956 \u7c4d\uff1a\u56fa\u539f\u53bf\u51fa \u751f \u5730\uff1a\u6210\u90fd\" , \"spo_list\" : [{ \"predicate\" : \"\u6c11\u65cf\" , \"object_type\" : \"\u6587\u672c\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u56de\u65cf\" , \"subject\" : \"\u6728\u65a7\" }, { \"predicate\" : \"\u51fa\u751f\u65e5\u671f\" , \"object_type\" : \"\u65e5\u671f\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"1931\" , \"subject\" : \"\u6728\u65a7\" }, { \"predicate\" : \"\u51fa\u751f\u5730\" , \"object_type\" : \"\u5730\u70b9\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u6210\u90fd\" , \"subject\" : \"\u6728\u65a7\" }]} { \"text\" : \"\u300a\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\u300b\u662f\u9ec4\u5bb6\u5f3a\u7684\u4e00\u9996\u7ca4\u8bed\u6b4c\u66f2\uff0c\u7531\u4f55\u542f\u5f18\u4f5c\u8bcd\uff0c\u9ec4\u5bb6\u5f3a\u4f5c\u66f2\u7f16\u66f2\u5e76\u6f14\u5531\uff0c\u6536\u5f55\u4e8e2007\u5e7408\u670801\u65e5\u53d1\u884c\u7684\u4e13\u8f91\u300a\u5979\u4ed6\u300b\u4e2d\" , \"spo_list\" : [{ \"predicate\" : \"\u4f5c\u66f2\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u9ec4\u5bb6\u5f3a\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }, { \"predicate\" : \"\u6240\u5c5e\u4e13\u8f91\" , \"object_type\" : \"\u97f3\u4e50\u4e13\u8f91\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u5979\u4ed6\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }, { \"predicate\" : \"\u6b4c\u624b\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u9ec4\u5bb6\u5f3a\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }, { \"predicate\" : \"\u4f5c\u8bcd\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u4f55\u542f\u5f18\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }]} { \"text\" : \"2003\u5e7412\u670826\u65e5\uff0c\u516c\u53f82003\u5e74\u7b2c\u56db\u6b21\u4e34\u65f6\u80a1\u4e1c\u5927\u4f1a\u6279\u51c6\uff0c\u516c\u53f8\u540d\u79f0\u53d8\u66f4\u4e3a\u201c\u534e\u590f\u5efa\u901a\u79d1\u6280\u5f00\u53d1\u80a1\u4efd\u6709\u9650\u516c\u53f8\u201d\uff0c\u5e76\u4e8e2004\u5e746\u67083\u65e5\u53d6\u5f97\u6cb3\u5317\u7701\u5de5\u5546\u884c\u653f\u7ba1\u7406\u5c40\u6362\u53d1\u7684\u300a\u4f01\u4e1a\u6cd5\u4eba\u8425\u4e1a\u6267\u7167\u300b\uff0c\u6cd5\u5b9a\u4ee3\u8868\u4eba\uff1a\u4f55\u5f3a\" , \"spo_list\" : [{ \"predicate\" : \"\u6210\u7acb\u65e5\u671f\" , \"object_type\" : \"\u65e5\u671f\" , \"subject_type\" : \"\u4f01\u4e1a\" , \"object\" : \"2004\u5e746\u67083\u65e5\" , \"subject\" : \"\u534e\u590f\u5efa\u901a\u79d1\u6280\u5f00\u53d1\u80a1\u4efd\u6709\u9650\u516c\u53f8\" }]} { \"text\" : \"\u6f58\u60df\u5357\uff0c\u9655\u897f\u5927\u8354\u53bf\u6ea2\u6e21\u6751\u4eba\" , \"spo_list\" : [{ \"predicate\" : \"\u51fa\u751f\u5730\" , \"object_type\" : \"\u5730\u70b9\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u9655\u897f\u5927\u8354\" , \"subject\" : \"\u6f58\u60df\u5357\" }]} train.json\u4e2d\u5305\u542b55433\u884c\u6837\u672c, \u6bcf\u884c\u4e3a\u4e00\u4e2a\u5b57\u5178\u6837\u5f0f, \u7b2c\u4e00\u4e2akey\u4e3a\"text\", \u5bf9\u5e94\u7684value\u4e3a\u5f85\u62bd\u53d6\u5173\u7cfb\u7684\u4e2d\u6587\u6587\u672c, \u7b2c\u4e8c\u4e2akey\u4e3a\"spo_list\", \u5bf9\u5e94\u7684value\u4e3a\u53e5\u5b50\u4e2d\u771f\u5b9e\u7684spo\u5173\u7cfb\u4e09\u5143\u7ec4\u5217\u8868 (\u5217\u8868\u4e2d\u542b\u6709\u591a\u4e2aspo\u4e09\u5143\u7ec4) \u4ee5spo_list\u7684\u5176\u4e2d\u4e00\u4e2a\u5143\u7d20\u4e3a\u4f8b\uff1a\u5143\u7d20\u683c\u5f0f\u4e3a\u5b57\u5178\uff0c\u5176\u4e2d\"predictate\"\u4ee3\u8868\u4e3a\u5173\u7cfb\u7c7b\u578b; \"object_type\"\u4ee3\u8868\u5c3e\u5b9e\u4f53\u7684\u7c7b\u578b; \"subject_type\"\u4ee3\u8868\u4e3b\u5b9e\u4f53\u7684\u7c7b\u578b; \"object\"\u4ee3\u8868\u5c3e\u5b9e\u4f53; \"subject\" \u4ee3\u8868\u4e3b\u5b9e\u4f53. \u9a8c\u8bc1\u6570\u636e\u96c6: /home/ec2-user/Casrel_RE/relationship_extract/data/dev.json { \"text\" : \"\u8521\u5fd7\u575a\u5728\u5357\u4eac\u827a\u672f\u5b66\u9662\u6c42\u5b66\u65f6\u53d7\u8fc7\u7cfb\u7edf\u3001\u6b63\u89c4\u7684\u827a\u672f\u6559\u80b2\u548c\u4e13\u4e1a\u8bad\u7ec3\uff0c\u6df1\u5f97\u5218\u6d77\u7c9f\u3001\u7f57\u53d4\u5b50\u3001\u9648\u4e4b\u4f5b\u3001\u8c22\u6d77\u71d5\u3001\u9648\u5927\u7fbd\u7b49\u8457\u540d\u4e2d\u56fd\u753b\u5927\u5e08\u7684\u6307\u6388\uff0c\u57fa\u672c\u529f\u624e\u5b9e\uff0c\u52a0\u4e0a\u4ed6\u575a\u6301\u4ece\u751f\u6d3b\u4e2d\u6c72\u53d6\u521b\u4f5c\u6e90\u6cc9\uff0c\u7528\u5fc3\u6355\u6349\u751f\u6d3b\u4e2d\u6700\u7f8e\u6700\u611f\u4eba\u7684\u77ac\u95f4\u5f62\u8c61\uff0c\u56e0\u800c\u4ed6\u7684\u4f5c\u54c1\uff0c\u4e0d\u8bba\u662f\u5c71\u6c34\u3001\u82b1\u9e1f\u3001\u98de\u79bd\u3001\u8d70\u517d\uff0c\u65e0\u4e0d\u5145\u6ee1\u4e86\u751f\u547d\u7684\u7075\u6c14\uff0c\u5bc4\u6258\u7740\u753b\u5bb6\u7684\u60c5\u6000\uff0c\u9887\u5f97\u81ea\u7136\u4e4b\u771f\u8da3\" , \"spo_list\" : [{ \"predicate\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"object_type\" : \"\u5b66\u6821\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u5357\u4eac\u827a\u672f\u5b66\u9662\" , \"subject\" : \"\u8521\u5fd7\u575a\" }]} { \"text\" : \"\u4eba\u7269\u7b80\u4ecb1974\u5e741\u6708\u51fa\u751f\uff0c\u526f\u6559\u6388 \uff0c\u5b66\u5386\u7855\u58eb \u8d75\u660e\uff0c\u51fa\u751f\u4e8e1974\u5e741\u6708\uff0c\u6bd5\u4e1a\u4e8e\u6b66\u6c49\u97f3\u4e50\u5b66\u9662\u7ba1\u5f26\u7cfb\uff0c\u662f\u6d1b\u9633\u5e08\u8303\u5b66\u9662\u97f3\u4e50\u5b66\u9662\u6559\u6388\" , \"spo_list\" : [{ \"predicate\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"object_type\" : \"\u5b66\u6821\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u6b66\u6c49\u97f3\u4e50\u5b66\u9662\" , \"subject\" : \"\u8d75\u660e\" }]} { \"text\" : \"\u97e9\u56fd\u7535\u89c6\u5267\u300a\u4e00\u679d\u6885\u5f52\u6765\u300b\uff08\u53c8\u540d\u300a\u7f8e\u8d3c\u4e00\u679d\u6885\u4f20\u300b\uff09\uff0c\u6539\u7f16\u81ea\u97e9\u56fd\u6f2b\u753b\u4f5c\u5bb6\u9ad8\u7fbd\u8363\u7684\u6f2b\u753b\uff0c\u7531\u9ec4\u4ec1\u96f7\u6267\u5bfc\uff0c\u4e01\u4e00\u5b87\u548c\u5c39\u73cd\u5e8f\u7b49\u8054\u8882\u51fa\u6f14\" , \"spo_list\" : [{ \"predicate\" : \"\u4e3b\u6f14\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u5f71\u89c6\u4f5c\u54c1\" , \"object\" : \"\u4e01\u4e00\u5b87\" , \"subject\" : \"\u4e00\u679d\u6885\u5f52\u6765\" }, { \"predicate\" : \"\u5bfc\u6f14\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u5f71\u89c6\u4f5c\u54c1\" , \"object\" : \"\u9ec4\u4ec1\u96f7\" , \"subject\" : \"\u4e00\u679d\u6885\u5f52\u6765\" }]} { \"text\" : \"\u300a\u7ed3\u4e86\u300b\u662f\u4e00\u9996\u7531\u90dd\u4e91\u6f14\u5531\u7684\u6b4c\u66f2\uff0c\u7531\u90dd\u4e91\u586b\u8bcd\uff0c\u66f2\u6539\u7f16\u81ea\u534e\u76db\u987f\u5e7f\u573a\uff0c\u6536\u5f55\u4e8e\u4e13\u8f91\u300a\u7a81\u7136\u60f3\u5230\u7406\u60f3\u8fd9\u4e2a\u8bcd\u300b\u4e2d\" , \"spo_list\" : [{ \"predicate\" : \"\u4f5c\u66f2\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u6539\u7f16\u81ea\u534e\u76db\u987f\u5e7f\u573a\" , \"subject\" : \"\u7ed3\u4e86\" }]} dev.json\u4e2d\u5305\u542b11191\u884c\u6837\u672c, \u6bcf\u884c\u4e3a\u4e00\u4e2a\u5b57\u5178\u6837\u5f0f, \u7b2c\u4e00\u4e2akey\u4e3a\"text\", \u5bf9\u5e94\u7684value\u4e3a\u5f85\u62bd\u53d6\u5173\u7cfb\u7684\u4e2d\u6587\u6587\u672c, \u7b2c\u4e8c\u4e2akey\u4e3a\"spo_list\", \u5bf9\u5e94\u7684value\u4e3a\u53e5\u5b50\u4e2d\u771f\u5b9e\u7684spo\u5173\u7cfb\u4e09\u5143\u7ec4\u5217\u8868 (\u5217\u8868\u4e2d\u542b\u6709\u591a\u4e2aspo\u4e09\u5143\u7ec4) \u4ee5spo_list\u7684\u5176\u4e2d\u4e00\u4e2a\u5143\u7d20\u4e3a\u4f8b\uff1a\u5143\u7d20\u683c\u5f0f\u4e3a\u5b57\u5178\uff0c\u5176\u4e2d\"predictate\"\u4ee3\u8868\u4e3a\u5173\u7cfb\u7c7b\u578b; \"object_type\"\u4ee3\u8868\u5c3e\u5b9e\u4f53\u7684\u7c7b\u578b; \"subject_type\"\u4ee3\u8868\u4e3b\u5b9e\u4f53\u7684\u7c7b\u578b; \"object\"\u4ee3\u8868\u5c3e\u5b9e\u4f53; \"subject\" \u4ee3\u8868\u4e3b\u5b9e\u4f53. \u6d4b\u8bd5\u6570\u636e\u96c6: /home/ec2-user/Casrel_RE/relationship_extract/data/test.json { \"text\" : \"1997\u5e74\uff0c\u674e\u67cf\u5149\u4ece\u5317\u4eac\u5927\u5b66\u6cd5\u5f8b\u7cfb\u535a\u58eb\u6bd5\u4e1a\" , \"spo_list\" : [{ \"predicate\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"object_type\" : \"\u5b66\u6821\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u5317\u4eac\u5927\u5b66\" , \"subject\" : \"\u674e\u67cf\u5149\" }]} { \"text\" : \"\u5f53\u300a\u4e09\u751f\u4e09\u4e16\u300b4\u4f4d\u5973\u661f\u6362\u4e0a\u73b0\u4ee3\u88c5\uff1a\u7b2c\u56db\uff0c\u5b89\u60a6\u6eaa\u5728\u300a\u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1\u300b\u4e2d\u9970\u6f14\u5c11\u8f9b\uff0c\u5b89\u60a6\u6eaa\u7a7f\u4e0a\u73b0\u4ee3\u88c5\u5341\u5206\u4eae\u773c\uff0c\u6c14\u8d28\u6e05\u65b0\u8131\u4fd7\" , \"spo_list\" : [{ \"predicate\" : \"\u4e3b\u6f14\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u5f71\u89c6\u4f5c\u54c1\" , \"object\" : \"\u5b89\u60a6\u6eaa\" , \"subject\" : \"\u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1\" }]} { \"text\" : \"\u5c71\u4e1c\u6d77\u76ca\u5b9d\u6c34\u4ea7\u80a1\u4efd\u6709\u9650\u516c\u53f8\u6210\u7acb\u4e8e2002\u5e74\uff0c\u5750\u843d\u5728\u98ce\u666f\u79c0\u4e3d\u7684\u4e2d\u56fd\u80f6\u4e1c\u534a\u5c9b\uff0c\u662f\u4e00\u5bb6\u4ee5\u9ad8\u79d1\u6280\u6d77\u4ea7\u54c1\u7684\u80b2\u82d7\u3001\u517b\u6b96\u3001\u7814\u53d1\u3001\u52a0\u5de5\u3001\u9500\u552e\u4e3a\u4e00\u4f53\u7684\u7efc\u5408\u6027\u65b0\u578b\u4ea7\u4e1a\u5316\u6c34\u4ea7\u4f01\u4e1a\uff0c\u62e5\u6709\u6807\u51c6\u5316\u6df1\u6d77\u56f4\u5830\u57fa\u5730\uff0c\u662f\u5c71\u4e1c\u7701\u6c34\u4ea7\u517b\u6b96\u884c\u4e1a\u7684\u9f99\u5934\u4f01\u4e1a\u4e4b\u4e00\uff0c\u540c\u65f6\u4e5f\u662f\u56fd\u5185\u65e5\u672c\u7ea2\u53c2\u4e0e\u80f6\u4e1c\u53c2\u6742\u4ea4\u53c2\u79cd\u4ea7\u4e1a\u5316\u751f\u4ea7\u57fa\u5730\" , \"spo_list\" : [{ \"predicate\" : \"\u6210\u7acb\u65e5\u671f\" , \"object_type\" : \"\u65e5\u671f\" , \"subject_type\" : \"\u673a\u6784\" , \"object\" : \"2002\u5e74\" , \"subject\" : \"\u5c71\u4e1c\u6d77\u76ca\u5b9d\u6c34\u4ea7\u80a1\u4efd\u6709\u9650\u516c\u53f8\" }]} { \"text\" : \"\u300a\u9a91\u58eb\u4e4b\u7231\u4e0e\u6e38\u541f\u8bd7\u4eba\u300b\u662f\u4e0a\u6d77\u793e\u4f1a\u79d1\u5b66\u9662\u51fa\u7248\u793e2012\u5e74\u51fa\u7248\u7684\u56fe\u4e66\uff0c\u4f5c\u8005\u662f\u82f1\u56fd\u7684 \u83f2\u5965\u5a1c\u00b7\u65af\u6c83\u6bd4\" , \"spo_list\" : [{ \"predicate\" : \"\u51fa\u7248\u793e\" , \"object_type\" : \"\u51fa\u7248\u793e\" , \"subject_type\" : \"\u56fe\u4e66\u4f5c\u54c1\" , \"object\" : \"\u4e0a\u6d77\u793e\u4f1a\u79d1\u5b66\u9662\u51fa\u7248\u793e\" , \"subject\" : \"\u9a91\u58eb\u4e4b\u7231\u4e0e\u6e38\u541f\u8bd7\u4eba\" }, { \"predicate\" : \"\u4f5c\u8005\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u56fe\u4e66\u4f5c\u54c1\" , \"object\" : \"\u83f2\u5965\u5a1c\u00b7\u65af\u6c83\u6bd4\" , \"subject\" : \"\u9a91\u58eb\u4e4b\u7231\u4e0e\u6e38\u541f\u8bd7\u4eba\" }]} test.json\u4e2d\u5305\u542b13417\u884c\u6837\u672c, \u6bcf\u884c\u4e3a\u4e00\u4e2a\u5b57\u5178\u6837\u5f0f, \u7b2c\u4e00\u4e2akey\u4e3a\"text\", \u5bf9\u5e94\u7684value\u4e3a\u5f85\u62bd\u53d6\u5173\u7cfb\u7684\u4e2d\u6587\u6587\u672c, \u7b2c\u4e8c\u4e2akey\u4e3a\"spo_list\", \u5bf9\u5e94\u7684value\u4e3a\u53e5\u5b50\u4e2d\u771f\u5b9e\u7684spo\u5173\u7cfb\u4e09\u5143\u7ec4\u5217\u8868 (\u5217\u8868\u4e2d\u542b\u6709\u591a\u4e2aspo\u4e09\u5143\u7ec4) \u4ee5spo_list\u7684\u5176\u4e2d\u4e00\u4e2a\u5143\u7d20\u4e3a\u4f8b\uff1a\u5143\u7d20\u683c\u5f0f\u4e3a\u5b57\u5178\uff0c\u5176\u4e2d\"predictate\"\u4ee3\u8868\u4e3a\u5173\u7cfb\u7c7b\u578b; \"object_type\"\u4ee3\u8868\u5c3e\u5b9e\u4f53\u7684\u7c7b\u578b; \"subject_type\"\u4ee3\u8868\u4e3b\u5b9e\u4f53\u7684\u7c7b\u578b; \"object\"\u4ee3\u8868\u5c3e\u5b9e\u4f53; \"subject\" \u4ee3\u8868\u4e3b\u5b9e\u4f53. \u7b2c\u4e8c\u6b65:\u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u00b6 Config\u7c7b\u6587\u4ef6\u8def\u5f84\u4e3a: /home/ec2-user/Casrel_RE/relationship_extract/codes/config.py config\u6587\u4ef6\u76ee\u7684\uff1a\u914d\u7f6e\u9879\u76ee\u5e38\u7528\u53d8\u91cf\uff0c\u4e00\u822c\u8fd9\u4e9b\u53d8\u91cf\u5c5e\u4e8e\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\uff0c\u6bd4\u5982\uff1a\u8bad\u7ec3\u6587\u4ef6\u8def\u5f84\u3001\u6a21\u578b\u8bad\u7ec3\u6b21\u6570\u3001\u6a21\u578b\u8d85\u53c2\u6570\u7b49\u7b49 # \u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 import torch # \u5bfc\u5165Vocabulary\uff0c\u76ee\u7684\uff1a\u7528\u4e8e\u6784\u5efa, \u5b58\u50a8\u548c\u4f7f\u7528 `str` \u5230 `int` \u7684\u4e00\u4e00\u6620\u5c04 from fastNLP import Vocabulary from transformers import BertTokenizer , AdamW import json # \u6784\u5efa\u914d\u7f6e\u6587\u4ef6Config\u7c7b class Config ( object ): def __init__ ( self ): # \u8bbe\u7f6e\u662f\u5426\u4f7f\u7528GPU\u6765\u8fdb\u884c\u6a21\u578b\u8bad\u7ec3 self . device = torch . device ( 'cuda' if torch . cuda . is_available () else 'cpu' ) self . bert_path = \"\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u7edd\u5bf9\u8def\u5f84\" self . num_rel = 18 # \u5173\u7cfb\u7684\u79cd\u7c7b\u6570 self . batch_size = 8 self . train_data_path = \"\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u7edd\u5bf9\u8def\u5f84\" self . dev_data_path = \"\u9a8c\u8bc1\u6570\u636e\u96c6\u7684\u7edd\u5bf9\u8def\u5f84\" self . test_data_path = \"\u6d4b\u8bd5\u6570\u636e\u96c6\u7684\u7edd\u5bf9\u8def\u5f84\" self . rel_dict_path = \"\u5173\u7cfb\u6570\u636e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\" id2rel = json . load ( open ( self . rel_dict_path , encoding = 'utf8' )) self . rel_vocab = Vocabulary ( padding = None , unknown = None ) # vocab\u66f4\u65b0\u81ea\u5df1\u7684\u5b57\u5178\uff0c\u8f93\u5165\u4e3alist\u5217\u8868 self . rel_vocab . add_word_lst ( list ( id2rel . values ())) self . tokenizer = BertTokenizer . from_pretrained ( self . bert_path ) self . learning_rate = 1e-5 self . bert_dim = 768 self . epochs = 10 \u7b2c\u4e09\u6b65\uff1a \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570 \u00b6 \u51fd\u6570\u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/utils/process.py \u9996\u9009\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 # coding:utf-8 from codes.config import * import torch from random import choice from collections import defaultdict conf = Config () \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570find_head_idx, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def find_head_idx ( source , target ): # # \u83b7\u53d6\u5b9e\u4f53\u7684\u5f00\u59cb\u7d22\u5f15\u4f4d\u7f6e target_len = len ( target ) for i in range ( len ( source )): if source [ i : i + target_len ] == target : return i return - 1 \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570create_label, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def create_label ( inner_triples , inner_input_ids , seq_len ): # \u83b7\u53d6\u6bcf\u4e2a\u6837\u672c\u7684\uff1a\u4e3b\u5b9e\u4f53\u957f\u5ea6\u3001\u4e3b\u5b9e\u4f53\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u5f20\u91cf\u8868\u793a\u3001\u5ba2\u5b9e\u4f53\u4ee5\u53ca\u5bf9\u5e94\u5173\u7cfb\u5b9e\u73b0\u5f20\u91cf\u8868\u793a inner_sub_heads , inner_sub_tails = torch . zeros ( seq_len ), torch . zeros ( seq_len ) inner_obj_heads = torch . zeros (( seq_len , conf . num_rel )) inner_obj_tails = torch . zeros (( seq_len , conf . num_rel )) inner_sub_head2tail = torch . zeros ( seq_len ) # \u968f\u673a\u62bd\u53d6\u4e00\u4e2a\u5b9e\u4f53\uff0c\u4ece\u5f00\u5934\u4e00\u4e2a\u8bcd\u5230\u672b\u5c3e\u8bcd\u7684\u7d22\u5f15 # \u56e0\u4e3a\u6570\u636e\u9884\u5904\u7406\u4ee3\u7801\u8fd8\u5f85\u4f18\u5316,\u4f1a\u6709\u4e0d\u5b58\u5728\u5173\u7cfb\u4e09\u5143\u7ec4\u7684\u60c5\u51b5\uff0c # \u521d\u59cb\u5316\u4e00\u4e2a\u4e3b\u8bcd\u7684\u957f\u5ea6\u4e3a1\uff0c\u5373\u6ca1\u6709\u4e3b\u8bcd\u9ed8\u8ba4\u4e3b\u8bcd\u957f\u5ea6\u4e3a1\uff0c # \u9632\u6b62\u96f6\u9664\u62a5\u9519,\u521d\u59cb\u5316\u4efb\u4f55\u975e\u96f6\u6570\u5b57\u90fd\u53ef\u4ee5\uff0c\u6ca1\u6709\u4e3b\u8bcd\u5206\u5b50\u662f\u5168\u96f6\u77e9\u9635 inner_sub_len = torch . tensor ([ 1 ], dtype = torch . float ) # \u4e3b\u8bcd\u5230\u8c13\u8bcd\u7684\u6620\u5c04 s2ro_map = defaultdict ( list ) # print(s2ro_map) for inner_triple in inner_triples : # print(inner_triple) inner_triple = ( conf . tokenizer ( inner_triple [ 'subject' ], add_special_tokens = False )[ 'input_ids' ], conf . rel_vocab . to_index ( inner_triple [ 'predicate' ]), conf . tokenizer ( inner_triple [ 'object' ], add_special_tokens = False )[ 'input_ids' ] ) sub_head_idx = find_head_idx ( inner_input_ids , inner_triple [ 0 ]) obj_head_idx = find_head_idx ( inner_input_ids , inner_triple [ 2 ]) if sub_head_idx != - 1 and obj_head_idx != - 1 : sub = ( sub_head_idx , sub_head_idx + len ( inner_triple [ 0 ]) - 1 ) # s2ro_map\u4fdd\u5b58\u4e3b\u8bed\u5230\u8c13\u8bed\u7684\u6620\u5c04 s2ro_map [ sub ] . append ( ( obj_head_idx , obj_head_idx + len ( inner_triple [ 2 ]) - 1 , inner_triple [ 1 ])) # {(3,5):[(7,8,0)]} 0\u662f\u5173\u7cfb if s2ro_map : for s in s2ro_map : inner_sub_heads [ s [ 0 ]] = 1 inner_sub_tails [ s [ 1 ]] = 1 sub_head_idx , sub_tail_idx = choice ( list ( s2ro_map . keys ())) inner_sub_head2tail [ sub_head_idx : sub_tail_idx + 1 ] = 1 inner_sub_len = torch . tensor ([ sub_tail_idx + 1 - sub_head_idx ], dtype = torch . float ) for ro in s2ro_map . get (( sub_head_idx , sub_tail_idx ), []): inner_obj_heads [ ro [ 0 ]][ ro [ 2 ]] = 1 inner_obj_tails [ ro [ 1 ]][ ro [ 2 ]] = 1 return inner_sub_len , inner_sub_head2tail , inner_sub_heads , inner_sub_tails , inner_obj_heads , inner_obj_tails \u6784\u5efa\u7b2c\u4e09\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570collate_fn, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def collate_fn ( data ): text_list = [ value [ 0 ] for value in data ] triple = [ value [ 1 ] for value in data ] # \u6309\u7167batch\u4e2d\u6700\u957f\u53e5\u5b50\u8865\u9f50 text = conf . tokenizer . batch_encode_plus ( text_list , padding = True ) batch_size = len ( text [ 'input_ids' ]) seq_len = len ( text [ 'input_ids' ][ 0 ]) sub_heads = [] sub_tails = [] obj_heads = [] obj_tails = [] sub_len = [] sub_head2tail = [] # \u5faa\u73af\u904d\u5386\u6bcf\u4e2a\u6837\u672c\uff0c\u5c06\u5b9e\u4f53\u4fe1\u606f\u8fdb\u884c\u5f20\u91cf\u7684\u8f6c\u5316 for batch_index in range ( batch_size ): inner_input_ids = text [ 'input_ids' ][ batch_index ] # \u5355\u4e2a\u53e5\u5b50\u53d8\u6210\u7d22\u5f15\u540e inner_triples = triple [ batch_index ] # \u83b7\u53d6\u6bcf\u4e2a\u6837\u672c\u7684\uff1a\u4e3b\u5b9e\u4f53\u957f\u5ea6\u3001\u4e3b\u5b9e\u4f53\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u5f20\u91cf\u8868\u793a\u3001\u5ba2\u5b9e\u4f53\u4ee5\u53ca\u5bf9\u5e94\u5173\u7cfb\u5b9e\u73b0\u5f20\u91cf\u8868\u793a results = create_label ( inner_triples , inner_input_ids , seq_len ) sub_len . append ( results [ 0 ]) sub_head2tail . append ( results [ 1 ]) sub_heads . append ( results [ 2 ]) sub_tails . append ( results [ 3 ]) obj_heads . append ( results [ 4 ]) obj_tails . append ( results [ 5 ]) input_ids = torch . tensor ( text [ 'input_ids' ]) . to ( conf . device ) mask = torch . tensor ( text [ 'attention_mask' ]) . to ( conf . device ) # \u501f\u52a9torch.stack()\u51fd\u6570\u6cbf\u4e00\u4e2a\u65b0\u7ef4\u5ea6\u5bf9\u8f93\u5165batch_size\u5f20\u91cf\u5e8f\u5217\u8fdb\u884c\u8fde\u63a5\uff0c\u5e8f\u5217\u4e2d\u6240\u6709\u5f20\u91cf\u5e94\u4e3a\u76f8\u540c\u5f62\u72b6\uff1bstack \u51fd\u6570\u8fd4\u56de\u7684\u7ed3\u679c\u4f1a\u65b0\u589e\u4e00\u4e2a\u7ef4\u5ea6, sub_heads = torch . stack ( sub_heads ) . to ( conf . device ) sub_tails = torch . stack ( sub_tails ) . to ( conf . device ) sub_len = torch . stack ( sub_len ) . to ( conf . device ) sub_head2tail = torch . stack ( sub_head2tail ) . to ( conf . device ) obj_heads = torch . stack ( obj_heads ) . to ( conf . device ) obj_tails = torch . stack ( obj_tails ) . to ( conf . device ) inputs = { 'input_ids' : input_ids , 'mask' : mask , 'sub_head2tail' : sub_head2tail , 'sub_len' : sub_len } labels = { 'sub_heads' : sub_heads , 'sub_tails' : sub_tails , 'obj_heads' : obj_heads , 'obj_tails' : obj_tails } return inputs , labels \u7b2c\u56db\u6b65\uff1a\u6784\u5efaDataSet\u7c7b\u4ee5\u53caDataloader\u51fd\u6570 \u00b6 \u4ee3\u7801\u8def\u5f84\u4e3a: /home/ec2-user/Casrel_RE/relationship_extract/codes/utils/data_loader.py \u9996\u5148\u5bfc\u5165\u76f8\u5e94\u7684\u5de5\u5177\u5305 # coding:utf-8 from torch.utils.data import DataLoader , Dataset from utils.process import * conf = Config () \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u7c7bMyDataset, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u7c7b. # \u81ea\u5b9a\u4e49Dataset class MyDataset ( Dataset ): def __init__ ( self , data_path ): super ( MyDataset , self ) . __init__ () self . dataset = [ json . loads ( line ) for line in open ( data_path , encoding = 'utf8' )] def __len__ ( self ): return len ( self . dataset ) def __getitem__ ( self , index ): content = self . dataset [ index ] text = content [ 'text' ] spo_list = content [ 'spo_list' ] return text , spo_list \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_data, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_data (): # \u5b9e\u4f8b\u5316\u8bad\u7ec3\u6570\u636e\u96c6Dataset\u5bf9\u8c61 train_data = MyDataset ( conf . train_data_path ) # \u5b9e\u4f8b\u5316\u9a8c\u8bc1\u6570\u636e\u96c6Dataset\u5bf9\u8c61 dev_data = MyDataset ( conf . dev_data_path ) # \u5b9e\u4f8b\u5316\u6d4b\u8bd5\u6570\u636e\u96c6Dataset\u5bf9\u8c61 test_data = MyDataset ( conf . test_data_path ) # \u5b9e\u4f8b\u5316\u8bad\u7ec3\u6570\u636e\u96c6Dataloader\u5bf9\u8c61 train_dataloader = DataLoader ( dataset = train_data , batch_size = conf . batch_size , shuffle = True , collate_fn = collate_fn , drop_last = True ) # \u5b9e\u4f8b\u5316\u9a8c\u8bc1\u6570\u636e\u96c6Dataloader\u5bf9\u8c61 dev_dataloader = DataLoader ( dataset = dev_data , batch_size = conf . batch_size , shuffle = True , collate_fn = collate_fn , drop_last = True ) # \u5b9e\u4f8b\u5316\u6d4b\u8bd5\u6570\u636e\u96c6Dataloader\u5bf9\u8c61 test_dataloader = DataLoader ( dataset = test_data , batch_size = conf . batch_size , shuffle = True , collate_fn = collate_fn , drop_last = True ) return train_dataloader , dev_dataloader , test_dataloader 6 Casrel\u6a21\u578b\u642d\u5efa \u00b6 \u672c\u9879\u76ee\u4e2dCasrel\u6a21\u578b\u642d\u5efa\u7684\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u7b2c\u4e8c\u6b65: \u7f16\u5199\u5de5\u5177\u7c7b\u51fd\u6570,\u8bad\u7ec3\u51fd\u6570,\u9a8c\u8bc1\u51fd\u6570,\u6d4b\u8bd5\u51fd\u6570 \u7b2c\u4e09\u6b65: \u7f16\u5199\u4f7f\u7528\u6a21\u578b\u9884\u6d4b\u4ee3\u7801\u7684\u5b9e\u73b0. \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u00b6 \u6587\u672c\u7f16\u7801\u91c7\u7528\u7684\u662fBERT\u9884\u8bad\u7ec3\u6a21\u578b \u7b2c\u4e00\u6b65: \u5b9e\u73b0CasRel\u7c7b\u4ee3\u7801. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/model/CasrelModel.py # coding:utf-8 import torch import torch.nn as nn from transformers import BertModel , AdamW from codes.config import * class CasRel ( nn . Module ): def __init__ ( self , conf ): super () . __init__ () self . bert = BertModel . from_pretrained ( conf . bert_path ) # \u5b9a\u4e49\u7b2c\u4e00\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u4e3b\u5b9e\u4f53\u7684\u5934\u90e8\u4f4d\u7f6e self . sub_heads_linear = nn . Linear ( conf . bert_dim , 1 ) # \u5b9a\u4e49\u7b2c\u4e8c\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u4e3b\u5b9e\u4f53\u7684\u5c3e\u90e8\u4f4d\u7f6e self . sub_tails_linear = nn . Linear ( conf . bert_dim , 1 ) # \u5b9a\u4e49\u7b2c\u4e09\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u5ba2\u5b9e\u4f53\u7684\u5934\u90e8\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b self . obj_heads_linear = nn . Linear ( conf . bert_dim , conf . num_rel ) # \u5b9a\u4e49\u7b2c\u56db\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u5ba2\u5b9e\u4f53\u7684\u5c3e\u90e8\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b self . obj_tails_linear = nn . Linear ( conf . bert_dim , conf . num_rel ) def get_encoded_text ( self , token_ids , mask ): encoded_text = self . bert ( token_ids , attention_mask = mask )[ 0 ] return encoded_text def get_subs ( self , encoded_text ): pre_sub_heads = torch . sigmoid ( self . sub_heads_linear ( encoded_text )) pre_sub_tails = torch . sigmoid ( self . sub_tails_linear ( encoded_text )) return pre_sub_heads , pre_sub_tails def get_objs_for_specific_sub ( self , sub_head2tail , sub_len , encoded_text ): ''' \u5c06subject\u5b9e\u4f53\u4fe1\u606f\u878d\u5408\u539f\u59cb\u53e5\u5b50\u4e2d\uff1a\u5c06\u4e3b\u5b9e\u4f53\u5b57\u5411\u91cf\u5b9e\u73b0\u5e73\u5747\uff0c\u7136\u540e\u52a0\u5728\u5f53\u524d\u53e5\u5b50\u7684\u6bcf\u4e00\u4e2a\u5b57\u5411\u91cf\u4e0a\uff0c\u8fdb\u884c\u8ba1\u7b97 :param sub_head2tail:shape-->\u301016\uff0c1, 200\u3011 :param sub_len:shape--->[16,1] :param encoded_text:.shape[16\uff0c200\uff0c768] :return: pred_obj_heads-->shape [] pre_obj_tails-->shape [] ''' sub = torch . matmul ( sub_head2tail , encoded_text ) # \u5c06\u4e3b\u5b9e\u4f53\u7279\u5f81\u548c\u7f16\u7801\u540e\u7684\u6587\u672c\u8fdb\u884c\u878d\u5408 sub_len = sub_len . unsqueeze ( 1 ) # \u4e3b\u5b9e\u4f53\u957f\u5ea6\uff08\u6269\u7ef4\uff09 sub = sub / sub_len # \u5e73\u5747\u4e3b\u5b9e\u4f53\u4fe1\u606f encoded_text = encoded_text + sub #\u5c06\u5904\u7406\u540e\u7684\u5b9e\u4f53\u7279\u5f81\u548c\u539f\u59cb\u7f16\u7801\u540e\u7684\u6587\u672c\u8fdb\u884c\u878d\u5408 pred_obj_heads = torch . sigmoid ( self . obj_heads_linear ( encoded_text )) pre_obj_tails = torch . sigmoid ( self . obj_tails_linear ( encoded_text )) return pred_obj_heads , pre_obj_tails def forward ( self , input_ids , mask , sub_head2tail , sub_len ): ''' :param input_ids: shape-->[16, 200] :param mask: shape-->[16, 200] :param sub_head2tail: shape-->[16, 200] :param sub_len: shape-->[16, 1] :return: ''' # todo: encode_text.shape--->[16,200,768] encoded_text = self . get_encoded_text ( input_ids , mask ) pred_sub_heads , pre_sub_tails = self . get_subs ( encoded_text ) sub_head2tail = sub_head2tail . unsqueeze ( 1 ) pred_obj_heads , pre_obj_tails = self . get_objs_for_specific_sub ( sub_head2tail , sub_len , encoded_text ) result_dict = { 'pred_sub_heads' : pred_sub_heads , 'pred_sub_tails' : pre_sub_tails , 'pred_obj_heads' : pred_obj_heads , 'pred_obj_tails' : pre_obj_tails , 'mask' : mask } return result_dict def compute_loss ( self , pred_sub_heads , pred_sub_tails , pred_obj_heads , pred_obj_tails , mask , sub_heads , sub_tails , obj_heads , obj_tails ): ''' \u8ba1\u7b97\u635f\u5931 :param pred_sub_heads:[16, 200, 1] :param pred_sub_tails:[16, 200, 1] :param pred_obj_heads:[16, 200, 18] :param pred_obj_tails:[16, 200, 18] :param mask: shape-->[16, 200] :param sub_heads: shape-->[16, 200] :param sub_tails: shape-->[16, 200] :param obj_heads: shape-->[16, 200, 18] :param obj_tails: shape-->[16, 200, 18] :return: ''' # todo:sub_heads.shape,sub_tails.shape, mask-->[16, 200] # todo:obj_heads.shape,obj_tails.shape-->[16, 200, 18] rel_count = obj_heads . shape [ - 1 ] rel_mask = mask . unsqueeze ( - 1 ) . repeat ( 1 , 1 , rel_count ) loss_1 = self . loss ( pred_sub_heads , sub_heads , mask ) loss_2 = self . loss ( pred_sub_tails , sub_tails , mask ) loss_3 = self . loss ( pred_obj_heads , obj_heads , rel_mask ) loss_4 = self . loss ( pred_obj_tails , obj_tails , rel_mask ) return loss_1 + loss_2 + loss_3 + loss_4 def loss ( self , pred , gold , mask ): pred = pred . squeeze ( - 1 ) los = nn . BCELoss ( reduction = 'none' )( pred , gold ) if los . shape != mask . shape : mask = mask . unsqueeze ( - 1 ) los = torch . sum ( los * mask ) / torch . sum ( mask ) return los def load_model ( conf ): device = conf . device model = CasRel ( conf ) model . to ( device ) # \u56e0\u4e3a\u672c\u6b21\u6a21\u578b\u501f\u52a9BERT\u505afine_tuning\uff0c \u56e0\u6b64\u9700\u8981\u5bf9\u6a21\u578b\u4e2d\u7684\u5927\u90e8\u5206\u53c2\u6570\u8fdb\u884cL2\u6b63\u5219\u5904\u7406\u9632\u6b62\u8fc7\u62df\u5408\uff0c\u5305\u62ec\u6743\u91cdw\u548c\u504f\u7f6eb # prepare optimzier # named_parameters()\u83b7\u53d6\u6a21\u578b\u4e2d\u7684\u53c2\u6570\u548c\u53c2\u6570\u540d\u5b57 param_optimizer = list ( model . named_parameters ()) print ( f 'param_optimizer---> { param_optimizer } ' ) no_decay = [ \"bias\" , \"LayerNorm.bias\" , \"LayerNorm.weight\" ] # no_decay\u4e2d\u5b58\u653e\u4e0d\u8fdb\u884c\u6743\u91cd\u8870\u51cf\u7684\u53c2\u6570{\u56e0\u4e3abert\u5b98\u65b9\u4ee3\u7801\u5bf9\u8fd9\u4e09\u9879\u514d\u4e8e\u6b63\u5219\u5316} # any()\u51fd\u6570\u7528\u4e8e\u5224\u65ad\u7ed9\u5b9a\u7684\u53ef\u8fed\u4ee3\u53c2\u6570iterable\u662f\u5426\u5168\u90e8\u4e3aFalse\uff0c\u5219\u8fd4\u56deFalse\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u4e3aTrue\uff0c\u5219\u8fd4\u56deTrue # \u5224\u65adparam_optimizer\u4e2d\u6240\u6709\u7684\u53c2\u6570\u3002\u5982\u679c\u4e0d\u5728no_decay\u4e2d\uff0c\u5219\u8fdb\u884c\u6743\u91cd\u8870\u51cf;\u5982\u679c\u5728no_decay\u4e2d\uff0c\u5219\u4e0d\u8fdb\u884c\u6743\u91cd\u8870\u51cf optimizer_grouped_parameters = [ { \"params\" : [ p for n , p in param_optimizer if not any ( nd in n for nd in no_decay )], \"weight_decay\" : 0.01 }, { \"params\" : [ p for n , p in param_optimizer if any ( nd in n for nd in no_decay )], \"weight_decay\" : 0.0 }] optimizer = AdamW ( optimizer_grouped_parameters , lr = conf . learning_rate , eps = 10e-8 ) # \u662f\u5426\u9700\u8981\u5bf9bert\u8fdb\u884cwarm_up\u3002\u8fd9\u91cc\u9ed8\u8ba4\u4e0d\u8fdb\u884c sheduler = None return model , optimizer , sheduler , device if __name__ == '__main__' : conf = Config () # casrel = CasRel(conf) # print(f'\u6a21\u578b\u7684\u67b6\u6784--->{casrel}') load_model ( conf ) \u7b2c\u4e8c\u6b65: \u7f16\u5199\u5de5\u5177\u7c7b\u51fd\u6570,\u8bad\u7ec3\u51fd\u6570,\u9a8c\u8bc1\u51fd\u6570,\u6d4b\u8bd5\u51fd\u6570 \u00b6 \u6ce8\u610f\uff1a\u5de5\u5177\u7c7b\u51fd\u6570\u9700\u8981\u5728\u8bad\u7ec3\u3001\u6d4b\u8bd5\u3001\u8bc4\u4f30\u8fc7\u7a0b\u4e2d\u4f7f\u7528\uff1b\u8bad\u7ec3\u51fd\u6570, \u9a8c\u8bc1\u51fd\u6570\u4e24\u8005\u5728\u4e00\u4e2a\u811a\u672c\uff0c\u6d4b\u8bd5\u51fd\u6570\u5355\u72ec\u4e00\u4e2a\u811a\u672c. \u6b64\u5916, \u56e0\u4e3a\u9a8c\u8bc1\u51fd\u6570\u548c\u6d4b\u8bd5\u51fd\u6570\u4e00\u81f4\uff0c\u56e0\u6b64\u53ea\u5199\u4e00\u4e2a\u5373\u53ef. \u7b2c\u4e00\u6b65: \u5b9e\u73b0utils\u51fd\u6570. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/utils/process.py # coding:utf-8 from codes.config import * import torch from random import choice from collections import defaultdict conf = Config () def extract_sub ( pred_sub_heads , pred_sub_tails ): ''' :param pred_sub_heads: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4e3b\u5b9e\u4f53\u5f00\u5934\u4f4d\u7f6e :param pred_sub_tails: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4e3b\u5b9e\u4f53\u5c3e\u90e8\u4f4d\u7f6e :return: subs\u5217\u8868\u91cc\u9762\u5bf9\u5e94\u7684\u6240\u6709\u5b9e\u4f53\u3010head, tail\u3011 ''' subs = [] # \u7edf\u8ba1\u9884\u6d4b\u51fa\u6240\u6709\u503c\u4e3a1\u7684\u5143\u7d20\u7d22\u5f15\u4f4d\u7f6e heads = torch . arange ( 0 , len ( pred_sub_heads ), device = conf . device )[ pred_sub_heads == 1 ] tails = torch . arange ( 0 , len ( pred_sub_tails ), device = conf . device )[ pred_sub_tails == 1 ] for head , tail in zip ( heads , tails ): if tail >= head : subs . append (( head . item (), tail . item ())) return subs def extract_obj_and_rel ( obj_heads , obj_tails ): ''' :param obj_heads: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4ece\u5b9e\u4f53\u5f00\u5934\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b :param obj_tails: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4ece\u5b9e\u4f53\u5c3e\u90e8\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b :return: obj_and_rels\uff1a\u5143\u7d20\u5f62\u72b6\uff1a(rel_index, start_index, end_index) ''' obj_heads = obj_heads . T obj_tails = obj_tails . T rel_count = obj_heads . shape [ 0 ] obj_and_rels = [] for rel_index in range ( rel_count ): obj_head = obj_heads [ rel_index ] obj_tail = obj_tails [ rel_index ] objs = extract_sub ( obj_head , obj_tail ) if objs : for obj in objs : start_index , end_index = obj obj_and_rels . append (( rel_index , start_index , end_index )) return obj_and_rels def convert_score_to_zero_one ( tensor ): ''' \u4ee50.5\u4e3a\u9608\u503c\uff0c\u5927\u4e8e0.5\u7684\u8bbe\u7f6e\u4e3a1\uff0c\u5c0f\u4e8e0.5\u7684\u8bbe\u7f6e\u4e3a0 ''' tensor [ tensor >= 0.5 ] = 1 tensor [ tensor < 0.5 ] = 0 return tensor \u5bfc\u5165\u5b9e\u73b0\u8bad\u7ec3\u51fd\u6570,\u9a8c\u8bc1\u51fd\u6570,\u6d4b\u8bd5\u51fd\u6570\u7684\u5de5\u5177\u5305 # coding:utf-8 from model.CasrelModel import * from utils.process import * from utils.data_loader import * from config import * import pandas as pd from tqdm import tqdm \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u4e0e\u9a8c\u8bc1\u51fd\u6570. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/train.py \u6ce8\u610f: \u9a8c\u8bc1\u51fd\u6570\u7684\u76ee\u7684\u662f\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u4fdd\u5b58F1\u503c\u6700\u597d\u7684\u6a21\u578b\u72b6\u6001\uff0c\u56e0\u6b64\u5d4c\u5957\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d def model2train ( model , train_iter , dev_iter , optimizer , conf ): epochs = conf . epochs best_triple_f1 = 0 for epoch in range ( epochs ): train_epoch ( model , train_iter , dev_iter , optimizer , best_triple_f1 , epoch ) torch . save ( model . state_dict (), '../save_model/last_model.pth' ) def train_epoch ( model , train_iter , dev_iter , optimizer , best_triple_f1 , epoch ): for step , ( inputs , labels ) in enumerate ( tqdm ( train_iter )): model . train () logist = model ( ** inputs ) loss = model . compute_loss ( ** logist , ** labels ) model . zero_grad () loss . backward () optimizer . step () if step % 1500 == 0 : torch . save ( model . state_dict (), '../save_model/epoch_ %s _model_ %s .pth' % ( epoch , step )) results = model2dev ( model , dev_iter ) print ( results [ - 1 ]) if results [ - 2 ] > best_triple_f1 : best_triple_f1 = results [ - 2 ] torch . save ( model . state_dict (), '../save_model/best_f1.pth' ) print ( 'epoch: {} ,' 'step: {} ,' 'sub_precision: {:.4f} , ' 'sub_recall: {:.4f} , ' 'sub_f1: {:.4f} , ' 'triple_precision: {:.4f} , ' 'triple_recall: {:.4f} , ' 'triple_f1: {:.4f} ,' 'train loss: {:.4f} ' . format ( epoch , step , results [ 0 ], results [ 1 ], results [ 2 ], results [ 3 ], results [ 4 ], results [ 5 ], loss . item ())) return best_triple_f1 \u7b2c\u4e09\u6b65: \u7f16\u5199\u9a8c\u8bc1\u51fd\u6570. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/train.py def model2dev ( model , dev_iter ): ''' \u9a8c\u8bc1\u6a21\u578b\u6548\u679c :param model: :param dev_iter: :return: ''' model . eval () # \u5b9a\u4e49\u4e00\u4e2adf\uff0c\u6765\u5c55\u793a\u6a21\u578b\u7684\u6307\u6807\u3002 df = pd . DataFrame ( columns = [ 'TP' , 'PRED' , \"REAL\" , 'p' , 'r' , 'f1' ], index = [ 'sub' , 'triple' ]) df . fillna ( 0 , inplace = True ) for inputs , labels in tqdm ( dev_iter ): logist = model ( ** inputs ) pred_sub_heads = convert_score_to_zero_one ( logist [ 'pred_sub_heads' ]) pred_sub_tails = convert_score_to_zero_one ( logist [ 'pred_sub_tails' ]) sub_heads = convert_score_to_zero_one ( labels [ 'sub_heads' ]) sub_tails = convert_score_to_zero_one ( labels [ 'sub_tails' ]) batch_size = inputs [ 'input_ids' ] . shape [ 0 ] obj_heads = convert_score_to_zero_one ( labels [ 'obj_heads' ]) obj_tails = convert_score_to_zero_one ( labels [ 'obj_tails' ]) pred_obj_heads = convert_score_to_zero_one ( logist [ 'pred_obj_heads' ]) pred_obj_tails = convert_score_to_zero_one ( logist [ 'pred_obj_tails' ]) for batch_index in range ( batch_size ): pred_subs = extract_sub ( pred_sub_heads [ batch_index ] . squeeze (), pred_sub_tails [ batch_index ] . squeeze ()) true_subs = extract_sub ( sub_heads [ batch_index ] . squeeze (), sub_tails [ batch_index ] . squeeze ()) pred_ojbs = extract_obj_and_rel ( pred_obj_heads [ batch_index ], pred_obj_tails [ batch_index ]) true_objs = extract_obj_and_rel ( obj_heads [ batch_index ], obj_tails [ batch_index ]) df [ 'PRED' ][ 'sub' ] += len ( pred_subs ) df [ 'REAL' ][ 'sub' ] += len ( true_subs ) for true_sub in true_subs : if true_sub in pred_subs : df [ 'TP' ][ 'sub' ] += 1 df [ 'PRED' ][ 'triple' ] += len ( pred_ojbs ) df [ 'REAL' ][ 'triple' ] += len ( true_objs ) for true_obj in true_objs : if true_obj in pred_ojbs : df [ 'TP' ][ 'triple' ] += 1 df . loc [ 'sub' , 'p' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'PRED' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'r' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'REAL' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'f1' ] = 2 * df [ 'p' ][ 'sub' ] * df [ 'r' ][ 'sub' ] / ( df [ 'p' ][ 'sub' ] + df [ 'r' ][ 'sub' ] + 1e-9 ) sub_precision = df [ 'TP' ][ 'sub' ] / ( df [ 'PRED' ][ 'sub' ] + 1e-9 ) sub_recall = df [ 'TP' ][ 'sub' ] / ( df [ 'REAL' ][ 'sub' ] + 1e-9 ) sub_f1 = 2 * sub_precision * sub_recall / ( sub_precision + sub_recall + 1e-9 ) df . loc [ 'triple' , 'p' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'PRED' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'r' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'REAL' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'f1' ] = 2 * df [ 'p' ][ 'triple' ] * df [ 'r' ][ 'triple' ] / ( df [ 'p' ][ 'triple' ] + df [ 'r' ][ 'triple' ] + 1e-9 ) triple_precision = df [ 'TP' ][ 'triple' ] / ( df [ 'PRED' ][ 'triple' ] + 1e-9 ) triple_recall = df [ 'TP' ][ 'triple' ] / ( df [ 'REAL' ][ 'triple' ] + 1e-9 ) triple_f1 = 2 * triple_precision * triple_recall / ( triple_precision + triple_recall + 1e-9 ) return sub_precision , sub_recall , sub_f1 , triple_precision , triple_recall , triple_f1 , df \u7b2c\u56db\u6b65: \u7f16\u5199\u6d4b\u8bd5\u51fd\u6570. \u4ee3\u7801\u8def\u5f84\uff1a/home/ec2-user/Casrel_RE/relationship_extract/codes/test.py def model2test ( model , test_iter ): ''' \u6d4b\u8bd5\u6a21\u578b\u6548\u679c :param model: :param test_iter: :return: ''' model . eval () # \u5b9a\u4e49\u4e00\u4e2adf\uff0c\u6765\u5c55\u793a\u6a21\u578b\u7684\u6307\u6807\u3002 df = pd . DataFrame ( columns = [ 'TP' , 'PRED' , \"REAL\" , 'p' , 'r' , 'f1' ], index = [ 'sub' , 'triple' ]) df . fillna ( 0 , inplace = True ) with torch . no_grad (): for inputs , labels in tqdm ( test_iter ): logist = model ( ** inputs ) pred_sub_heads = convert_score_to_zero_one ( logist [ 'pred_sub_heads' ]) pred_sub_tails = convert_score_to_zero_one ( logist [ 'pred_sub_tails' ]) sub_heads = convert_score_to_zero_one ( labels [ 'sub_heads' ]) sub_tails = convert_score_to_zero_one ( labels [ 'sub_tails' ]) batch_size = inputs [ 'input_ids' ] . shape [ 0 ] obj_heads = convert_score_to_zero_one ( labels [ 'obj_heads' ]) obj_tails = convert_score_to_zero_one ( labels [ 'obj_tails' ]) pred_obj_heads = convert_score_to_zero_one ( logist [ 'pred_obj_heads' ]) pred_obj_tails = convert_score_to_zero_one ( logist [ 'pred_obj_tails' ]) for batch_index in range ( batch_size ): pred_subs = extract_sub ( pred_sub_heads [ batch_index ] . squeeze (), pred_sub_tails [ batch_index ] . squeeze ()) true_subs = extract_sub ( sub_heads [ batch_index ] . squeeze (), sub_tails [ batch_index ] . squeeze ()) pred_ojbs = extract_obj_and_rel ( pred_obj_heads [ batch_index ], pred_obj_tails [ batch_index ]) true_objs = extract_obj_and_rel ( obj_heads [ batch_index ], obj_tails [ batch_index ]) df [ 'PRED' ][ 'sub' ] += len ( pred_subs ) df [ 'REAL' ][ 'sub' ] += len ( true_subs ) for true_sub in true_subs : if true_sub in pred_subs : df [ 'TP' ][ 'sub' ] += 1 df [ 'PRED' ][ 'triple' ] += len ( pred_ojbs ) df [ 'REAL' ][ 'triple' ] += len ( true_objs ) for true_obj in true_objs : if true_obj in pred_ojbs : df [ 'TP' ][ 'triple' ] += 1 df . loc [ 'sub' , 'p' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'PRED' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'r' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'REAL' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'f1' ] = 2 * df [ 'p' ][ 'sub' ] * df [ 'r' ][ 'sub' ] / ( df [ 'p' ][ 'sub' ] + df [ 'r' ][ 'sub' ] + 1e-9 ) df . loc [ 'triple' , 'p' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'PRED' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'r' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'REAL' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'f1' ] = 2 * df [ 'p' ][ 'triple' ] * df [ 'r' ][ 'triple' ] / ( df [ 'p' ][ 'triple' ] + df [ 'r' ][ 'triple' ] + 1e-9 ) return df \u7b2c\u4e09\u6b65: \u7f16\u5199\u6a21\u578b\u9884\u6d4b\u51fd\u6570 \u00b6 \u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u968f\u673a\u62bd\u53d6\u6587\u672c\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6 \u4ee3\u7801\u4f4d\u7f6e: /home/ec2-user/Casrel_RE/relationship_extract/codes/predict.py # coding:utf-8 from model.CasrelModel import * from utils.process import * conf = Config () def load_model ( model_path ): # \u5b9e\u4f8b\u5316\u6a21\u578b mymodel = CasRel ( conf ) . to ( conf . device ) mymodel . load_state_dict ( torch . load ( model_path )) return mymodel def get_inputs ( sample , model ): text = conf . tokenizer ( sample ) input_ids = torch . tensor ([ text [ 'input_ids' ]]) . to ( conf . device ) mask = torch . tensor ([ text [ 'attention_mask' ]]) . to ( conf . device ) # \u521d\u59cb\u5316\u503c seq_len = len ( text [ 'input_ids' ]) inner_sub_head2tail = torch . zeros ( seq_len ) inner_sub_len = torch . tensor ([ 1 ], dtype = torch . float ) # \u83b7\u53d6\u6a21\u578b\u9884\u6d4b\u7684\u5b9e\u4f53\u4f4d\u7f6e\u4fe1\u606f model . eval () with torch . no_grad (): # \u5148\u5229\u7528\u6a21\u578b\u83b7\u53d6\u4e3b\u5b9e\u4f53\u7684\u4f4d\u7f6e\u4fe1\u606f encoded_text = model . get_encoded_text ( input_ids , mask ) sub_heads , sub_tails = model . get_subs ( encoded_text ) pred_sub_heads = convert_score_to_zero_one ( sub_heads ) pred_sub_tails = convert_score_to_zero_one ( sub_tails ) # \u83b7\u53d6\u4e3b\u5b9e\u4f53\u7d22\u5f15\u4f4d\u7f6e\u4fe1\u606f pred_subs = extract_sub ( pred_sub_heads . squeeze (), pred_sub_tails . squeeze ()) # \u6a21\u578b\u53ef\u80fd\u6ca1\u8bc6\u522b\u51fa\u5b9e\u4f53 if len ( pred_subs ) != 0 : sub_head_idx = pred_subs [ 0 ][ 0 ] sub_tail_idx = pred_subs [ 0 ][ 1 ] # \u83b7\u53d6\u4e3b\u4f53\u957f\u5ea6\u4ee5\u53ca\u5bf9\u4e3b\u4f53\u4f4d\u7f6e\u5168\u90e8\u8d4b\u503c\u4e3a1 inner_sub_head2tail [ sub_head_idx : sub_tail_idx + 1 ] = 1 inner_sub_len = torch . tensor ([ sub_tail_idx + 1 - sub_head_idx ], dtype = torch . float ) sub_len = inner_sub_len . unsqueeze ( 0 ) . to ( conf . device ) sub_head2tail = inner_sub_head2tail . unsqueeze ( 0 ) . to ( conf . device ) inputs = { 'input_ids' : input_ids , 'mask' : mask , 'sub_head2tail' : sub_head2tail , 'sub_len' : sub_len } return inputs , model def model2predict ( sample , model ): with open ( conf . rel_dict_path , 'r' , encoding = 'utf-8' ) as fr : rel_id2word = json . load ( fr ) inputs , model = get_inputs ( sample , model ) logist = model ( ** inputs ) print ( f \"logist['pred_sub_heads']--> { logist [ 'pred_sub_heads' ] . shape } \" ) print ( f \"logist['pred_obj_heads']--> { logist [ 'pred_obj_heads' ] . shape } \" ) pred_sub_heads = convert_score_to_zero_one ( logist [ 'pred_sub_heads' ]) pred_sub_tails = convert_score_to_zero_one ( logist [ 'pred_sub_tails' ]) pred_obj_heads = convert_score_to_zero_one ( logist [ 'pred_obj_heads' ]) pred_obj_tails = convert_score_to_zero_one ( logist [ 'pred_obj_tails' ]) new_dict = {} spo_list = [] ids = inputs [ 'input_ids' ][ 0 ] text_list = conf . tokenizer . convert_ids_to_tokens ( ids ) sentence = '' . join ( text_list [ 1 : - 1 ]) pred_subs = extract_sub ( pred_sub_heads [ 0 ] . squeeze (), pred_sub_tails [ 0 ] . squeeze ()) pred_objs = extract_obj_and_rel ( pred_obj_heads [ 0 ], pred_obj_tails [ 0 ]) if len ( pred_subs ) == 0 or len ( pred_objs ) == 0 : print ( '\u6ca1\u6709\u8bc6\u522b\u51fa\u7ed3\u679c' ) return {} if len ( pred_objs ) > len ( pred_subs ): pred_subs = pred_subs * len ( pred_objs ) for sub , rel_obj in zip ( pred_subs , pred_objs ): sub_spo = {} sub_head , sub_tail = sub sub = '' . join ( text_list [ sub_head : sub_tail + 1 ]) if '[PAD]' in sub : continue sub_spo [ 'subject' ] = sub relation = rel_id2word [ str ( rel_obj [ 0 ])] obj_head , obj_tail = rel_obj [ 1 ], rel_obj [ 2 ] obj = '' . join ( text_list [ obj_head : obj_tail + 1 ]) if '[PAD]' in obj : continue sub_spo [ 'predicate' ] = relation sub_spo [ 'object' ] = obj spo_list . append ( sub_spo ) new_dict [ 'text' ] = sentence new_dict [ 'spo_list' ] = spo_list return new_dict if __name__ == '__main__' : sample = \"\u300a\u4eba\u95f4\u300b\u662f\u738b\u83f2\u6f14\u5531\u6b4c\u66f2\" model_path = '../save_model/last_model.pth' mymodel = load_model ( model_path ) model2predict ( sample , mymodel ) \u8c03\u7528: cd /home/Desktop/relationship_extract/codes/ # \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3 python train.py \u8f93\u51fa\u7ed3\u679c: \u7ed3\u8bba: Casrel\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u7684\u8868\u73b0\u662fF1: 72.7% 7 Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9 \u00b6 \u4f18\u70b9: \u4e24\u4e2a\u4efb\u52a1\u7684\u8868\u5f81\u6709\u4ea4\u4e92\u4f5c\u7528\u53ef\u80fd\u8f85\u52a9\u4efb\u52a1\u7684\u5b66\u4e60. \u4e0d\u7528\u8bad\u7ec3\u591a\u4e2a\u6a21\u578b\uff0c\u4e00\u4e2a\u6a21\u578b\u89e3\u51b3\u95ee\u9898\uff0c\u51cf\u5c11\u8bad\u7ec3\u4e0e\u9884\u6d4b\u7684gap. \u7f3a\u70b9: \u66f4\u590d\u6742\u7684\u6a21\u578b\u7ed3\u6784. Joint\u65b9\u6cd5\u63d0\u53d6\u7684\u7279\u5f81\u53ef\u80fd\u4e00\u81f4\uff0c\u4e5f\u53ef\u80fd\u51b2\u7a81\u4f1a\u4f7f\u6a21\u578b\u5b66\u4e60\u53d8\u5f97\u6df7\u4e71. \u5c0f\u8282\u603b\u7ed3: \u00b6 \u672c\u7ae0\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u4ec0\u4e48\u662fJoint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\uff0c\u5e76\u57fa\u4e8eCasrel\u6a21\u578b\u4ece0\u52301\u5b9e\u73b0\u4e86\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u3002","title":"4.4 Joint\u65b9\u6cd5\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#joint","text":"","title":"Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u4ecb\u7ecd"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_1","text":"\u7406\u89e3Joint\u65b9\u6cd5\u7684\u539f\u7406 \u638c\u63e1Casrel\u6a21\u578b\u7684\u539f\u7406\u53ca\u67b6\u6784\u7ec4\u6210 \u638c\u63e1Casrel\u6a21\u578b\u7684\u4ee3\u7801\u5b9e\u73b0 \u638c\u63e1Joint\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9","title":"\u5b66\u4e60\u76ee\u6807"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#1-joint","text":"joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u662f\u901a\u8fc7\u4fee\u6539\u6807\u6ce8\u65b9\u6cd5\u548c\u6a21\u578b\u7ed3\u6784\u76f4\u63a5\u8f93\u51fa\u6587\u672c\u4e2d\u5305\u542b\u7684(ei,rk,ej)\u4e09\u5143\u7ec4. Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u53c8\u5206\u4e3a: \"\u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u6a21\u578b\" \u548c \"\u8054\u5408\u89e3\u7801\u7684\u8054\u5408\u6a21\u578b\": \u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u6a21\u578b: \u4e3b\u4f53\u3001\u5ba2\u4f53\u548c\u5173\u7cfb\u7684\u62bd\u53d6\u4e0d\u662f\u540c\u6b65\u7684 (\u4e00\u822c\u60c5\u51b5\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u5176\u4e2d\u4e24\u4e2a\u4efb\u52a1\u4e00\u8d77\u8fdb\u884c) \uff0c\u5404\u4e2a\u8fc7\u7a0b\u90fd\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2aloss\u503c\uff0c\u6574\u4e2a\u6a21\u578b\u7684loss\u662f\u5404\u8fc7\u7a0bloss\u503c\u4e4b\u548c. \u8054\u5408\u89e3\u7801\u7684\u8054\u5408\u6a21\u578b: \u4e3b\u4f53\u3001\u5ba2\u4f53\u548c\u5173\u7cfb\u7684\u62bd\u53d6\u662f\u540c\u6b65\u7684\uff0c\u901a\u8fc7\u4e00\u4e2a\u6a21\u578b\u76f4\u63a5\u5f97\u5230SPO\u4e09\u5143\u7ec4. \u5982: \u91c7\u7528\u5e8f\u5217\u6807\u6ce8\u5f62\u5f0f\u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3\uff0c\u5982\u679c\u6709N\u79cd\u5173\u7cfb\uff0c\u5bf9\u4e8e\u6bcf\u79cd\u5173\u7cfb\uff0c\u5c06\u5176\u4e0eBIOS\u4ee5\u53ca\u4e3b\u5b9e\u4f53\u548c\u5ba2\u5b9e\u4f53\u7684\u5e8f\u53f7 (1\uff0c2) \u7ec4\u5408\u8d77\u6765\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6\uff0c\u5e76\u6839\u636e\u6700\u540e\u7684\u6807\u6ce8\u7ed3\u679c\u8fdb\u884c\u89e3\u7801\uff0c\u4e00\u5171\u6d89\u53ca 2\u00d73\u00d7N+1\u200b\u4e2a\u6807\u7b7e (\u5176\u4e2d1\u4ee3\u8868\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u4e00\u79cd\u5173\u7cfb) .","title":"1 Joint\u65b9\u6cd5\u7684\u539f\u7406"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#2-casrel","text":"Casrel\u662f2020 ACL \u4e0a\u7684\u5b9e\u4f53\u5173\u7cfb\u62bd\u53d6\u7684\u4e00\u7bc7\u8bba\u6587\uff0c\u8be5\u8bba\u6587\u7684\u4e3b\u8981\u89e3\u51b3\u7684\u95ee\u9898\u4e3a\u5173\u7cfb\u4e09\u5143\u7ec4\u91cd\u53e0\u95ee\u9898. CasRel \u672c\u8d28\u4e0a\u662f\u57fa\u4e8e\u53c2\u6570\u5171\u4eab\u7684\u8054\u5408\u5b9e\u4f53\u5173\u7cfb\u62bd\u53d6\u65b9\u6cd5.","title":"2 Casrel\u7b97\u6cd5\u601d\u60f3"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#3-casrel","text":"CASREL\u6846\u67b6\u62bd\u53d6\u4e09\u5143\u7ec4(subject, relation, object)\u4e3b\u8981\u5305\u542b\u4e24\u4e2a\u6b65\u9aa4\uff0c\u4e09\u4e2a\u90e8\u5206 \u4e24\u4e2a\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\u8981\u8bc6\u522b\u51fa\u53e5\u5b50\u4e2d\u7684 subject . \u7b2c\u4e8c\u90e8\u8981\u6839\u636e\u8bc6\u522b\u51fa\u7684 subject, \u8bc6\u522b\u51fa\u6240\u6709\u6709\u53ef\u80fd\u7684 relation \u4ee5\u53ca\u5bf9\u5e94\u7684 object. \u4e09\u4e2a\u90e8\u5206\uff1a \u7f16\u7801\u5668\u90e8\u5206: \u53ef\u4ee5\u66ff\u6362\u4e3a\u4e0d\u540c\u7684\u7f16\u7801\u6846\u67b6\uff0c\u4e3b\u8981\u5bf9\u53e5\u5b50\u4e2d\u7684\u8bcd\u8fdb\u884c\u7f16\u7801\uff0c\u8bba\u6587\u6700\u7ec8\u4ee5BERT\u4e3a\u4e3b\uff0c\u6548\u679c\u4e0d\u9519. \u89e3\u7801\u5668\u2014-\u5934\u5b9e\u4f53\u8bc6\u522b\u90e8\u5206\uff1a\u76ee\u7684\u662f\u8bc6\u522b\u51fa\u53e5\u5b50\u4e2d\u7684 subject. \u89e3\u7801\u5668\u2014-\u5173\u7cfb\u4e0e\u5c3e\u5b9e\u4f53\u8054\u5408\u8bc6\u522b\u90e8\u5206\uff1a\u6839\u636e subject\uff0c\u5bfb\u627e\u53ef\u80fd\u7684 relation \u548c object.","title":"3 Casrel\u6a21\u578b\u67b6\u6784"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#31","text":"","title":"3.1 \u6a21\u578b\u7ec6\u8282"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_2","text":"CasRel\u7684\u5934\u5b9e\u4f53\u8bc6\u522b\u5c42\u76f4\u63a5\u5bf9\u7f16\u7801\u5c42\u7684\u7ed3\u679c\u8fdb\u884c\u89e3\u7801\uff0c\u53bb\u8bc6\u522b\u6240\u6709\u53ef\u80fd\u7684\u5934\u5b9e\u4f53. \u8fd9\u91ccCasRel\u662f\u8bc6\u522b\u5934\u5b9e\u4f53span\uff0c\u4e5f\u5c31\u662fstart\u548cend\u4f4d\u7f6e\uff0c\u6240\u4ee5\u5b83\u91c7\u7528\u7684\u662f\u4e8c\u5206\u7c7b. \u56e0\u6b64\uff0c\u6a21\u578b\u672c\u8eab\u5f88\u7b80\u5355\uff1a \u9996\u5148\uff0c\u5229\u7528\u4e00\u4e2a\u7ebf\u6027\u5c42\u2795\u4e00\u4e2asigmoid\u6fc0\u6d3b\u51fd\u6570\u5224\u65ad\u6bcf\u4e2atoken\u662f\u4e0d\u662f\u5934\u5b9e\u4f53\u7684\u5f00\u59cbtoken\u6216\u7ed3\u675ftoken \u7136\u540e\uff0c\u5229\u7528\u6700\u8fd1\u5339\u914d\u539f\u5219\u5c06\u8bc6\u522b\u5230\u7684start\u548cend\u914d\u5bf9\u83b7\u5f97\u5019\u9009\u5934\u5b9e\u4f53\u96c6\u5408.","title":"\u5934\u5b9e\u4f53\u8bc6\u522b\u90e8\u5206"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_3","text":"\u8bc6\u522b\u5934\u5b9e\u4f53\u540e\u5c31\u8981\u8fdb\u884c\u5173\u7cfb\u548c\u5c3e\u5b9e\u4f53\u7684\u8054\u5408\u8bc6\u522b\u4e86. \u8fd9\u91cc\u6bcf\u4e00\u5c42\u5c3e\u5b9e\u4f53\u8bc6\u522b\u5c42\u7684\u7ed3\u6784\u5176\u5b9e\u4e0e\u5934\u5b9e\u4f53\u8bc6\u522b\u5c42\u662f\u4e00\u6837\u7684\uff0c\u4e0d\u540c\u4e3b\u8981\u5728\u4e8e\u8f93\u5165\uff1a \u89e3\u7801\u7684\u65f6\u5019\u6bd4subject\u4e0d\u4ec5\u4ec5\u8003\u8651\u4e86BERT\u7f16\u7801\u7684\u9690\u5c42\u5411\u91cf\uff0c \u8fd8\u8003\u8651\u4e86\u8bc6\u522b\u51fa\u6765\u7684subject\u7279\u5f81\uff0c\u5373\u4e0b\u56fe. vsub \u4ee3\u8868 subject \u7279\u5f81\u5411\u91cf\uff0c\u82e5\u5b58\u5728\u591a\u4e2a\u8bcd\uff0c\u5c06\u5176\u53d6\u5411\u91cf\u5e73\u5747\uff0chn\u4ee3\u8868 BERT \u7f16\u7801\u5411\u91cf. \u5bf9\u4e8e\u8bc6\u522b\u51fa\u6765\u7684\u6bcf\u4e00\u4e2asubject, \u5bf9\u5e94\u7684\u6bcf\u4e00\u79cd\u5173\u7cfb\u4f1a\u89e3\u7801\u51fa\u5176 object \u7684 start \u548c end \u7d22\u5f15\u4f4d\u7f6e\uff0c\u4e0e Subject \u7c7b\u4f3c\uff0c\u516c\u5f0f\u5982\u4e0b\uff1a","title":"\u5173\u7cfb\u3001\u5c3e\u5b9e\u4f53\u8054\u5408\u8bc6\u522b\u90e8\u5206"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_4","text":"\u4ee5\u56fe\u4e2d\u7684\u4f8b\u5b50\u89e3\u6790\u4e0b\u6a21\u578b\u6700\u7ec8\u7684\u9884\u6d4b\u7ed3\u679c\uff0c\u56fe\u4e2d\u7684\u7b2c\u4e00\u4e2a subject \u7684\u8fc7\u7a0b\uff0c\u5373 Jackie R. Brown\uff0c\u5bf9\u4e8e\u8fd9\u4e2asubject\uff0c\u5728\u5173\u7cfb Birth_place \u4e2d\u8bc6\u522b\u51fa\u4e86\u4e24\u4e2a object\uff0c\u5373 Washington \u548c United States Of America\uff0c\u800c\u5728\u5176\u4ed6\u7684\u5173\u7cfb\u4e2d\u672a\u66fe\u8bc6\u522b\u51fa\u76f8\u5e94\u7684 object. \u5f53\u5bf9 Washington \u8fd9\u4e2a subject \u89e3\u7801\u65f6\uff0c\u4ec5\u4ec5\u5728 Capital_of \u7684\u5173\u7cfb\u4e2d\u8bc6\u522b\u51fa\u5bf9\u5e94\u7684 object: United States Of America.","title":"\u6a21\u578b\u7ed3\u679c\uff1a"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#32-casrel","text":"\u7531\u4e0a\u8ff0\u6a21\u578b\u7ed3\u679c\u5f97\u51fa\u7ed3\u8bba\uff1aCasrel\u6a21\u578b\u53ef\u4ee5\u89e3\u51b3\u6700\u5f00\u59cb\u63d0\u5230\u5173\u7cfb\u62bd\u53d6\u4e2d\u7684 SEO \u548c EPO \u7684\u91cd\u53e0\u95ee\u9898. \u8fd9\u4e5f\u662f\u6211\u4eec\u672c\u6b21\u9879\u76ee\u7814\u7a76\u95ee\u9898\u7684\u91cd\u70b9\uff0c\u89e3\u51b3\u6587\u672c\u4e2d\u591a\u5143\u5173\u7cfb\u95ee\u9898.","title":"3.2 Casrel\u6a21\u578b\u89e3\u51b3\u7684\u95ee\u9898"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#4","text":"","title":"4 \u9879\u76ee\u4ee3\u7801\u67b6\u6784\u56fe"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#5","text":"\u672c\u9879\u76ee\u4e2d\u5bf9\u6570\u636e\u90e8\u5206\u7684\u9884\u5904\u7406\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6 \u7b2c\u4e8c\u6b65: \u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801 \u7b2c\u4e09\u6b65: \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570 \u7b2c\u56db\u6b65: \u6784\u5efaDataSet\u7c7b\u4e0edataloader\u51fd\u6570","title":"5 \u6570\u636e\u9884\u5904\u7406"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_5","text":"\u672c\u6b21\u9879\u76ee\u6570\u636e\u6765\u6e90\u4e3a\u516c\u5f00\u7684\u5343\u8a00\u6570\u636e\u96c6https:// www.luge.ai/#/ \uff0c\u4f7f\u7528\u5f00\u6e90\u6570\u636e\u7684\u597d\u5904\uff0c\u6211\u4eec\u65e0\u9700\u6807\u6ce8\u76f4\u63a5\u4f7f\u7528\u5373\u53ef\uff0c\u672c\u6b21\u9879\u76ee\u7684\u4e3b\u8981\u76ee\u7684, \u9700\u8981\u5927\u5bb6\u638c\u63e1\u5b9e\u73b0\u5173\u7cfb\u62bd\u53d6\u7684\u601d\u60f3. \u6ce8\u610f\uff1a\u5b9e\u9645\u5de5\u4f5c\u4e2d\uff0c\u6570\u636e\u4e00\u822c\u9700\u8981\u4eba\u5de5\u624b\u52a8\u6807\u6ce8. \u9879\u76ee\u6570\u636e\u7684\u8def\u5f84\u4e3a\uff1a/home/ec2-user/Casrel_RE/relationship_extract/data \u9879\u76ee\u7684\u6570\u636e\u96c6\u5305\u62ec6\u4e2ajson\u6587\u4ef6\uff08\u5176\u4e2dpredict_spo.json\u662f\u6a21\u578b\u9884\u6d4b\u7ed3\u679c\uff0crel_type.json\u662f\u5e26\u6709\u5b9e\u4f53\u7c7b\u578b\u7684\u5173\u7cfb\u6587\u4ef6\uff09, \u6211\u4eec\u8fd9\u91cc\u53ea\u5148\u9488\u5bf9train.json\u3001dev.json\u3001test.json\u3001relation.json\u8fdb\u884c\u4ecb\u7ecd: \u5173\u7cfb\u7c7b\u578b\u6587\u4ef6: /home/ec2-user/Casrel_RE/relationship_extract/data/relation.json { \"0\" : \"\u51fa\u54c1\u516c\u53f8\" , \"1\" : \"\u56fd\u7c4d\" , \"2\" : \"\u51fa\u751f\u5730\" , \"3\" : \"\u6c11\u65cf\" , \"4\" : \"\u51fa\u751f\u65e5\u671f\" , \"5\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"6\" : \"\u6b4c\u624b\" , \"7\" : \"\u6240\u5c5e\u4e13\u8f91\" , \"8\" : \"\u4f5c\u8bcd\" , \"9\" : \"\u4f5c\u66f2\" , \"10\" : \"\u8fde\u8f7d\u7f51\u7ad9\" , \"11\" : \"\u4f5c\u8005\" , \"12\" : \"\u51fa\u7248\u793e\" , \"13\" : \"\u4e3b\u6f14\" , \"14\" : \"\u5bfc\u6f14\" , \"15\" : \"\u7f16\u5267\" , \"16\" : \"\u4e0a\u6620\u65f6\u95f4\" , \"17\" : \"\u6210\u7acb\u65e5\u671f\" } rel.json\u4e2d\u5305\u542b18\u4e2a\u7c7b\u522b\u6807\u7b7e, json\u6587\u4ef6\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5b57\u5178\uff0ckey\u5bf9\u5e94\u5173\u7cfb\u7684id\uff0cvalue\u5bf9\u5e94\u5173\u7cfb\u7c7b\u578b. \u8bad\u7ec3\u6570\u636e\u96c6: /home/ec2-user/Casrel_RE/relationship_extract/data/train.json { \"text\" : \"\u7b14 \u540d\uff1a\u6728\u65a7\u539f \u540d\uff1a\u6768\u8386\u66fe \u7528 \u540d\uff1a\u7a46\u65b0\u6587\u3001\u7267\u7f8a\u3001\u5bd2\u767d\u3001\u6d0b\u6f3e\u51fa\u751f\u65e5\u671f\uff1a1931\u2014\u804c \u4e1a\uff1a\u4f5c\u5bb6\u3001\u8bd7\u4eba\u6027 \u522b\uff1a \u7537\u6c11 \u65cf\uff1a \u56de\u65cf\u653f\u6cbb\u9762\u8c8c\uff1a\u4e2d\u5171\u515a\u5458 \u7956 \u7c4d\uff1a\u56fa\u539f\u53bf\u51fa \u751f \u5730\uff1a\u6210\u90fd\" , \"spo_list\" : [{ \"predicate\" : \"\u6c11\u65cf\" , \"object_type\" : \"\u6587\u672c\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u56de\u65cf\" , \"subject\" : \"\u6728\u65a7\" }, { \"predicate\" : \"\u51fa\u751f\u65e5\u671f\" , \"object_type\" : \"\u65e5\u671f\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"1931\" , \"subject\" : \"\u6728\u65a7\" }, { \"predicate\" : \"\u51fa\u751f\u5730\" , \"object_type\" : \"\u5730\u70b9\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u6210\u90fd\" , \"subject\" : \"\u6728\u65a7\" }]} { \"text\" : \"\u300a\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\u300b\u662f\u9ec4\u5bb6\u5f3a\u7684\u4e00\u9996\u7ca4\u8bed\u6b4c\u66f2\uff0c\u7531\u4f55\u542f\u5f18\u4f5c\u8bcd\uff0c\u9ec4\u5bb6\u5f3a\u4f5c\u66f2\u7f16\u66f2\u5e76\u6f14\u5531\uff0c\u6536\u5f55\u4e8e2007\u5e7408\u670801\u65e5\u53d1\u884c\u7684\u4e13\u8f91\u300a\u5979\u4ed6\u300b\u4e2d\" , \"spo_list\" : [{ \"predicate\" : \"\u4f5c\u66f2\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u9ec4\u5bb6\u5f3a\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }, { \"predicate\" : \"\u6240\u5c5e\u4e13\u8f91\" , \"object_type\" : \"\u97f3\u4e50\u4e13\u8f91\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u5979\u4ed6\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }, { \"predicate\" : \"\u6b4c\u624b\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u9ec4\u5bb6\u5f3a\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }, { \"predicate\" : \"\u4f5c\u8bcd\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u4f55\u542f\u5f18\" , \"subject\" : \"\u4eca\u665a\u4f1a\u5728\u54ea\u91cc\u9192\u6765\" }]} { \"text\" : \"2003\u5e7412\u670826\u65e5\uff0c\u516c\u53f82003\u5e74\u7b2c\u56db\u6b21\u4e34\u65f6\u80a1\u4e1c\u5927\u4f1a\u6279\u51c6\uff0c\u516c\u53f8\u540d\u79f0\u53d8\u66f4\u4e3a\u201c\u534e\u590f\u5efa\u901a\u79d1\u6280\u5f00\u53d1\u80a1\u4efd\u6709\u9650\u516c\u53f8\u201d\uff0c\u5e76\u4e8e2004\u5e746\u67083\u65e5\u53d6\u5f97\u6cb3\u5317\u7701\u5de5\u5546\u884c\u653f\u7ba1\u7406\u5c40\u6362\u53d1\u7684\u300a\u4f01\u4e1a\u6cd5\u4eba\u8425\u4e1a\u6267\u7167\u300b\uff0c\u6cd5\u5b9a\u4ee3\u8868\u4eba\uff1a\u4f55\u5f3a\" , \"spo_list\" : [{ \"predicate\" : \"\u6210\u7acb\u65e5\u671f\" , \"object_type\" : \"\u65e5\u671f\" , \"subject_type\" : \"\u4f01\u4e1a\" , \"object\" : \"2004\u5e746\u67083\u65e5\" , \"subject\" : \"\u534e\u590f\u5efa\u901a\u79d1\u6280\u5f00\u53d1\u80a1\u4efd\u6709\u9650\u516c\u53f8\" }]} { \"text\" : \"\u6f58\u60df\u5357\uff0c\u9655\u897f\u5927\u8354\u53bf\u6ea2\u6e21\u6751\u4eba\" , \"spo_list\" : [{ \"predicate\" : \"\u51fa\u751f\u5730\" , \"object_type\" : \"\u5730\u70b9\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u9655\u897f\u5927\u8354\" , \"subject\" : \"\u6f58\u60df\u5357\" }]} train.json\u4e2d\u5305\u542b55433\u884c\u6837\u672c, \u6bcf\u884c\u4e3a\u4e00\u4e2a\u5b57\u5178\u6837\u5f0f, \u7b2c\u4e00\u4e2akey\u4e3a\"text\", \u5bf9\u5e94\u7684value\u4e3a\u5f85\u62bd\u53d6\u5173\u7cfb\u7684\u4e2d\u6587\u6587\u672c, \u7b2c\u4e8c\u4e2akey\u4e3a\"spo_list\", \u5bf9\u5e94\u7684value\u4e3a\u53e5\u5b50\u4e2d\u771f\u5b9e\u7684spo\u5173\u7cfb\u4e09\u5143\u7ec4\u5217\u8868 (\u5217\u8868\u4e2d\u542b\u6709\u591a\u4e2aspo\u4e09\u5143\u7ec4) \u4ee5spo_list\u7684\u5176\u4e2d\u4e00\u4e2a\u5143\u7d20\u4e3a\u4f8b\uff1a\u5143\u7d20\u683c\u5f0f\u4e3a\u5b57\u5178\uff0c\u5176\u4e2d\"predictate\"\u4ee3\u8868\u4e3a\u5173\u7cfb\u7c7b\u578b; \"object_type\"\u4ee3\u8868\u5c3e\u5b9e\u4f53\u7684\u7c7b\u578b; \"subject_type\"\u4ee3\u8868\u4e3b\u5b9e\u4f53\u7684\u7c7b\u578b; \"object\"\u4ee3\u8868\u5c3e\u5b9e\u4f53; \"subject\" \u4ee3\u8868\u4e3b\u5b9e\u4f53. \u9a8c\u8bc1\u6570\u636e\u96c6: /home/ec2-user/Casrel_RE/relationship_extract/data/dev.json { \"text\" : \"\u8521\u5fd7\u575a\u5728\u5357\u4eac\u827a\u672f\u5b66\u9662\u6c42\u5b66\u65f6\u53d7\u8fc7\u7cfb\u7edf\u3001\u6b63\u89c4\u7684\u827a\u672f\u6559\u80b2\u548c\u4e13\u4e1a\u8bad\u7ec3\uff0c\u6df1\u5f97\u5218\u6d77\u7c9f\u3001\u7f57\u53d4\u5b50\u3001\u9648\u4e4b\u4f5b\u3001\u8c22\u6d77\u71d5\u3001\u9648\u5927\u7fbd\u7b49\u8457\u540d\u4e2d\u56fd\u753b\u5927\u5e08\u7684\u6307\u6388\uff0c\u57fa\u672c\u529f\u624e\u5b9e\uff0c\u52a0\u4e0a\u4ed6\u575a\u6301\u4ece\u751f\u6d3b\u4e2d\u6c72\u53d6\u521b\u4f5c\u6e90\u6cc9\uff0c\u7528\u5fc3\u6355\u6349\u751f\u6d3b\u4e2d\u6700\u7f8e\u6700\u611f\u4eba\u7684\u77ac\u95f4\u5f62\u8c61\uff0c\u56e0\u800c\u4ed6\u7684\u4f5c\u54c1\uff0c\u4e0d\u8bba\u662f\u5c71\u6c34\u3001\u82b1\u9e1f\u3001\u98de\u79bd\u3001\u8d70\u517d\uff0c\u65e0\u4e0d\u5145\u6ee1\u4e86\u751f\u547d\u7684\u7075\u6c14\uff0c\u5bc4\u6258\u7740\u753b\u5bb6\u7684\u60c5\u6000\uff0c\u9887\u5f97\u81ea\u7136\u4e4b\u771f\u8da3\" , \"spo_list\" : [{ \"predicate\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"object_type\" : \"\u5b66\u6821\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u5357\u4eac\u827a\u672f\u5b66\u9662\" , \"subject\" : \"\u8521\u5fd7\u575a\" }]} { \"text\" : \"\u4eba\u7269\u7b80\u4ecb1974\u5e741\u6708\u51fa\u751f\uff0c\u526f\u6559\u6388 \uff0c\u5b66\u5386\u7855\u58eb \u8d75\u660e\uff0c\u51fa\u751f\u4e8e1974\u5e741\u6708\uff0c\u6bd5\u4e1a\u4e8e\u6b66\u6c49\u97f3\u4e50\u5b66\u9662\u7ba1\u5f26\u7cfb\uff0c\u662f\u6d1b\u9633\u5e08\u8303\u5b66\u9662\u97f3\u4e50\u5b66\u9662\u6559\u6388\" , \"spo_list\" : [{ \"predicate\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"object_type\" : \"\u5b66\u6821\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u6b66\u6c49\u97f3\u4e50\u5b66\u9662\" , \"subject\" : \"\u8d75\u660e\" }]} { \"text\" : \"\u97e9\u56fd\u7535\u89c6\u5267\u300a\u4e00\u679d\u6885\u5f52\u6765\u300b\uff08\u53c8\u540d\u300a\u7f8e\u8d3c\u4e00\u679d\u6885\u4f20\u300b\uff09\uff0c\u6539\u7f16\u81ea\u97e9\u56fd\u6f2b\u753b\u4f5c\u5bb6\u9ad8\u7fbd\u8363\u7684\u6f2b\u753b\uff0c\u7531\u9ec4\u4ec1\u96f7\u6267\u5bfc\uff0c\u4e01\u4e00\u5b87\u548c\u5c39\u73cd\u5e8f\u7b49\u8054\u8882\u51fa\u6f14\" , \"spo_list\" : [{ \"predicate\" : \"\u4e3b\u6f14\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u5f71\u89c6\u4f5c\u54c1\" , \"object\" : \"\u4e01\u4e00\u5b87\" , \"subject\" : \"\u4e00\u679d\u6885\u5f52\u6765\" }, { \"predicate\" : \"\u5bfc\u6f14\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u5f71\u89c6\u4f5c\u54c1\" , \"object\" : \"\u9ec4\u4ec1\u96f7\" , \"subject\" : \"\u4e00\u679d\u6885\u5f52\u6765\" }]} { \"text\" : \"\u300a\u7ed3\u4e86\u300b\u662f\u4e00\u9996\u7531\u90dd\u4e91\u6f14\u5531\u7684\u6b4c\u66f2\uff0c\u7531\u90dd\u4e91\u586b\u8bcd\uff0c\u66f2\u6539\u7f16\u81ea\u534e\u76db\u987f\u5e7f\u573a\uff0c\u6536\u5f55\u4e8e\u4e13\u8f91\u300a\u7a81\u7136\u60f3\u5230\u7406\u60f3\u8fd9\u4e2a\u8bcd\u300b\u4e2d\" , \"spo_list\" : [{ \"predicate\" : \"\u4f5c\u66f2\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u6b4c\u66f2\" , \"object\" : \"\u6539\u7f16\u81ea\u534e\u76db\u987f\u5e7f\u573a\" , \"subject\" : \"\u7ed3\u4e86\" }]} dev.json\u4e2d\u5305\u542b11191\u884c\u6837\u672c, \u6bcf\u884c\u4e3a\u4e00\u4e2a\u5b57\u5178\u6837\u5f0f, \u7b2c\u4e00\u4e2akey\u4e3a\"text\", \u5bf9\u5e94\u7684value\u4e3a\u5f85\u62bd\u53d6\u5173\u7cfb\u7684\u4e2d\u6587\u6587\u672c, \u7b2c\u4e8c\u4e2akey\u4e3a\"spo_list\", \u5bf9\u5e94\u7684value\u4e3a\u53e5\u5b50\u4e2d\u771f\u5b9e\u7684spo\u5173\u7cfb\u4e09\u5143\u7ec4\u5217\u8868 (\u5217\u8868\u4e2d\u542b\u6709\u591a\u4e2aspo\u4e09\u5143\u7ec4) \u4ee5spo_list\u7684\u5176\u4e2d\u4e00\u4e2a\u5143\u7d20\u4e3a\u4f8b\uff1a\u5143\u7d20\u683c\u5f0f\u4e3a\u5b57\u5178\uff0c\u5176\u4e2d\"predictate\"\u4ee3\u8868\u4e3a\u5173\u7cfb\u7c7b\u578b; \"object_type\"\u4ee3\u8868\u5c3e\u5b9e\u4f53\u7684\u7c7b\u578b; \"subject_type\"\u4ee3\u8868\u4e3b\u5b9e\u4f53\u7684\u7c7b\u578b; \"object\"\u4ee3\u8868\u5c3e\u5b9e\u4f53; \"subject\" \u4ee3\u8868\u4e3b\u5b9e\u4f53. \u6d4b\u8bd5\u6570\u636e\u96c6: /home/ec2-user/Casrel_RE/relationship_extract/data/test.json { \"text\" : \"1997\u5e74\uff0c\u674e\u67cf\u5149\u4ece\u5317\u4eac\u5927\u5b66\u6cd5\u5f8b\u7cfb\u535a\u58eb\u6bd5\u4e1a\" , \"spo_list\" : [{ \"predicate\" : \"\u6bd5\u4e1a\u9662\u6821\" , \"object_type\" : \"\u5b66\u6821\" , \"subject_type\" : \"\u4eba\u7269\" , \"object\" : \"\u5317\u4eac\u5927\u5b66\" , \"subject\" : \"\u674e\u67cf\u5149\" }]} { \"text\" : \"\u5f53\u300a\u4e09\u751f\u4e09\u4e16\u300b4\u4f4d\u5973\u661f\u6362\u4e0a\u73b0\u4ee3\u88c5\uff1a\u7b2c\u56db\uff0c\u5b89\u60a6\u6eaa\u5728\u300a\u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1\u300b\u4e2d\u9970\u6f14\u5c11\u8f9b\uff0c\u5b89\u60a6\u6eaa\u7a7f\u4e0a\u73b0\u4ee3\u88c5\u5341\u5206\u4eae\u773c\uff0c\u6c14\u8d28\u6e05\u65b0\u8131\u4fd7\" , \"spo_list\" : [{ \"predicate\" : \"\u4e3b\u6f14\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u5f71\u89c6\u4f5c\u54c1\" , \"object\" : \"\u5b89\u60a6\u6eaa\" , \"subject\" : \"\u4e09\u751f\u4e09\u4e16\u5341\u91cc\u6843\u82b1\" }]} { \"text\" : \"\u5c71\u4e1c\u6d77\u76ca\u5b9d\u6c34\u4ea7\u80a1\u4efd\u6709\u9650\u516c\u53f8\u6210\u7acb\u4e8e2002\u5e74\uff0c\u5750\u843d\u5728\u98ce\u666f\u79c0\u4e3d\u7684\u4e2d\u56fd\u80f6\u4e1c\u534a\u5c9b\uff0c\u662f\u4e00\u5bb6\u4ee5\u9ad8\u79d1\u6280\u6d77\u4ea7\u54c1\u7684\u80b2\u82d7\u3001\u517b\u6b96\u3001\u7814\u53d1\u3001\u52a0\u5de5\u3001\u9500\u552e\u4e3a\u4e00\u4f53\u7684\u7efc\u5408\u6027\u65b0\u578b\u4ea7\u4e1a\u5316\u6c34\u4ea7\u4f01\u4e1a\uff0c\u62e5\u6709\u6807\u51c6\u5316\u6df1\u6d77\u56f4\u5830\u57fa\u5730\uff0c\u662f\u5c71\u4e1c\u7701\u6c34\u4ea7\u517b\u6b96\u884c\u4e1a\u7684\u9f99\u5934\u4f01\u4e1a\u4e4b\u4e00\uff0c\u540c\u65f6\u4e5f\u662f\u56fd\u5185\u65e5\u672c\u7ea2\u53c2\u4e0e\u80f6\u4e1c\u53c2\u6742\u4ea4\u53c2\u79cd\u4ea7\u4e1a\u5316\u751f\u4ea7\u57fa\u5730\" , \"spo_list\" : [{ \"predicate\" : \"\u6210\u7acb\u65e5\u671f\" , \"object_type\" : \"\u65e5\u671f\" , \"subject_type\" : \"\u673a\u6784\" , \"object\" : \"2002\u5e74\" , \"subject\" : \"\u5c71\u4e1c\u6d77\u76ca\u5b9d\u6c34\u4ea7\u80a1\u4efd\u6709\u9650\u516c\u53f8\" }]} { \"text\" : \"\u300a\u9a91\u58eb\u4e4b\u7231\u4e0e\u6e38\u541f\u8bd7\u4eba\u300b\u662f\u4e0a\u6d77\u793e\u4f1a\u79d1\u5b66\u9662\u51fa\u7248\u793e2012\u5e74\u51fa\u7248\u7684\u56fe\u4e66\uff0c\u4f5c\u8005\u662f\u82f1\u56fd\u7684 \u83f2\u5965\u5a1c\u00b7\u65af\u6c83\u6bd4\" , \"spo_list\" : [{ \"predicate\" : \"\u51fa\u7248\u793e\" , \"object_type\" : \"\u51fa\u7248\u793e\" , \"subject_type\" : \"\u56fe\u4e66\u4f5c\u54c1\" , \"object\" : \"\u4e0a\u6d77\u793e\u4f1a\u79d1\u5b66\u9662\u51fa\u7248\u793e\" , \"subject\" : \"\u9a91\u58eb\u4e4b\u7231\u4e0e\u6e38\u541f\u8bd7\u4eba\" }, { \"predicate\" : \"\u4f5c\u8005\" , \"object_type\" : \"\u4eba\u7269\" , \"subject_type\" : \"\u56fe\u4e66\u4f5c\u54c1\" , \"object\" : \"\u83f2\u5965\u5a1c\u00b7\u65af\u6c83\u6bd4\" , \"subject\" : \"\u9a91\u58eb\u4e4b\u7231\u4e0e\u6e38\u541f\u8bd7\u4eba\" }]} test.json\u4e2d\u5305\u542b13417\u884c\u6837\u672c, \u6bcf\u884c\u4e3a\u4e00\u4e2a\u5b57\u5178\u6837\u5f0f, \u7b2c\u4e00\u4e2akey\u4e3a\"text\", \u5bf9\u5e94\u7684value\u4e3a\u5f85\u62bd\u53d6\u5173\u7cfb\u7684\u4e2d\u6587\u6587\u672c, \u7b2c\u4e8c\u4e2akey\u4e3a\"spo_list\", \u5bf9\u5e94\u7684value\u4e3a\u53e5\u5b50\u4e2d\u771f\u5b9e\u7684spo\u5173\u7cfb\u4e09\u5143\u7ec4\u5217\u8868 (\u5217\u8868\u4e2d\u542b\u6709\u591a\u4e2aspo\u4e09\u5143\u7ec4) \u4ee5spo_list\u7684\u5176\u4e2d\u4e00\u4e2a\u5143\u7d20\u4e3a\u4f8b\uff1a\u5143\u7d20\u683c\u5f0f\u4e3a\u5b57\u5178\uff0c\u5176\u4e2d\"predictate\"\u4ee3\u8868\u4e3a\u5173\u7cfb\u7c7b\u578b; \"object_type\"\u4ee3\u8868\u5c3e\u5b9e\u4f53\u7684\u7c7b\u578b; \"subject_type\"\u4ee3\u8868\u4e3b\u5b9e\u4f53\u7684\u7c7b\u578b; \"object\"\u4ee3\u8868\u5c3e\u5b9e\u4f53; \"subject\" \u4ee3\u8868\u4e3b\u5b9e\u4f53.","title":"\u7b2c\u4e00\u6b65: \u67e5\u770b\u9879\u76ee\u6570\u636e\u96c6"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#config","text":"Config\u7c7b\u6587\u4ef6\u8def\u5f84\u4e3a: /home/ec2-user/Casrel_RE/relationship_extract/codes/config.py config\u6587\u4ef6\u76ee\u7684\uff1a\u914d\u7f6e\u9879\u76ee\u5e38\u7528\u53d8\u91cf\uff0c\u4e00\u822c\u8fd9\u4e9b\u53d8\u91cf\u5c5e\u4e8e\u4e0d\u7ecf\u5e38\u6539\u53d8\u7684\uff0c\u6bd4\u5982\uff1a\u8bad\u7ec3\u6587\u4ef6\u8def\u5f84\u3001\u6a21\u578b\u8bad\u7ec3\u6b21\u6570\u3001\u6a21\u578b\u8d85\u53c2\u6570\u7b49\u7b49 # \u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 import torch # \u5bfc\u5165Vocabulary\uff0c\u76ee\u7684\uff1a\u7528\u4e8e\u6784\u5efa, \u5b58\u50a8\u548c\u4f7f\u7528 `str` \u5230 `int` \u7684\u4e00\u4e00\u6620\u5c04 from fastNLP import Vocabulary from transformers import BertTokenizer , AdamW import json # \u6784\u5efa\u914d\u7f6e\u6587\u4ef6Config\u7c7b class Config ( object ): def __init__ ( self ): # \u8bbe\u7f6e\u662f\u5426\u4f7f\u7528GPU\u6765\u8fdb\u884c\u6a21\u578b\u8bad\u7ec3 self . device = torch . device ( 'cuda' if torch . cuda . is_available () else 'cpu' ) self . bert_path = \"\u9884\u8bad\u7ec3\u6a21\u578b\u7684\u7edd\u5bf9\u8def\u5f84\" self . num_rel = 18 # \u5173\u7cfb\u7684\u79cd\u7c7b\u6570 self . batch_size = 8 self . train_data_path = \"\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u7edd\u5bf9\u8def\u5f84\" self . dev_data_path = \"\u9a8c\u8bc1\u6570\u636e\u96c6\u7684\u7edd\u5bf9\u8def\u5f84\" self . test_data_path = \"\u6d4b\u8bd5\u6570\u636e\u96c6\u7684\u7edd\u5bf9\u8def\u5f84\" self . rel_dict_path = \"\u5173\u7cfb\u6570\u636e\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\" id2rel = json . load ( open ( self . rel_dict_path , encoding = 'utf8' )) self . rel_vocab = Vocabulary ( padding = None , unknown = None ) # vocab\u66f4\u65b0\u81ea\u5df1\u7684\u5b57\u5178\uff0c\u8f93\u5165\u4e3alist\u5217\u8868 self . rel_vocab . add_word_lst ( list ( id2rel . values ())) self . tokenizer = BertTokenizer . from_pretrained ( self . bert_path ) self . learning_rate = 1e-5 self . bert_dim = 768 self . epochs = 10","title":"\u7b2c\u4e8c\u6b65:\u7f16\u5199Config\u7c7b\u9879\u76ee\u6587\u4ef6\u914d\u7f6e\u4ee3\u7801"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_6","text":"\u51fd\u6570\u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/utils/process.py \u9996\u9009\u5bfc\u5165\u5fc5\u5907\u7684\u5de5\u5177\u5305 # coding:utf-8 from codes.config import * import torch from random import choice from collections import defaultdict conf = Config () \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570find_head_idx, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def find_head_idx ( source , target ): # # \u83b7\u53d6\u5b9e\u4f53\u7684\u5f00\u59cb\u7d22\u5f15\u4f4d\u7f6e target_len = len ( target ) for i in range ( len ( source )): if source [ i : i + target_len ] == target : return i return - 1 \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570create_label, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def create_label ( inner_triples , inner_input_ids , seq_len ): # \u83b7\u53d6\u6bcf\u4e2a\u6837\u672c\u7684\uff1a\u4e3b\u5b9e\u4f53\u957f\u5ea6\u3001\u4e3b\u5b9e\u4f53\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u5f20\u91cf\u8868\u793a\u3001\u5ba2\u5b9e\u4f53\u4ee5\u53ca\u5bf9\u5e94\u5173\u7cfb\u5b9e\u73b0\u5f20\u91cf\u8868\u793a inner_sub_heads , inner_sub_tails = torch . zeros ( seq_len ), torch . zeros ( seq_len ) inner_obj_heads = torch . zeros (( seq_len , conf . num_rel )) inner_obj_tails = torch . zeros (( seq_len , conf . num_rel )) inner_sub_head2tail = torch . zeros ( seq_len ) # \u968f\u673a\u62bd\u53d6\u4e00\u4e2a\u5b9e\u4f53\uff0c\u4ece\u5f00\u5934\u4e00\u4e2a\u8bcd\u5230\u672b\u5c3e\u8bcd\u7684\u7d22\u5f15 # \u56e0\u4e3a\u6570\u636e\u9884\u5904\u7406\u4ee3\u7801\u8fd8\u5f85\u4f18\u5316,\u4f1a\u6709\u4e0d\u5b58\u5728\u5173\u7cfb\u4e09\u5143\u7ec4\u7684\u60c5\u51b5\uff0c # \u521d\u59cb\u5316\u4e00\u4e2a\u4e3b\u8bcd\u7684\u957f\u5ea6\u4e3a1\uff0c\u5373\u6ca1\u6709\u4e3b\u8bcd\u9ed8\u8ba4\u4e3b\u8bcd\u957f\u5ea6\u4e3a1\uff0c # \u9632\u6b62\u96f6\u9664\u62a5\u9519,\u521d\u59cb\u5316\u4efb\u4f55\u975e\u96f6\u6570\u5b57\u90fd\u53ef\u4ee5\uff0c\u6ca1\u6709\u4e3b\u8bcd\u5206\u5b50\u662f\u5168\u96f6\u77e9\u9635 inner_sub_len = torch . tensor ([ 1 ], dtype = torch . float ) # \u4e3b\u8bcd\u5230\u8c13\u8bcd\u7684\u6620\u5c04 s2ro_map = defaultdict ( list ) # print(s2ro_map) for inner_triple in inner_triples : # print(inner_triple) inner_triple = ( conf . tokenizer ( inner_triple [ 'subject' ], add_special_tokens = False )[ 'input_ids' ], conf . rel_vocab . to_index ( inner_triple [ 'predicate' ]), conf . tokenizer ( inner_triple [ 'object' ], add_special_tokens = False )[ 'input_ids' ] ) sub_head_idx = find_head_idx ( inner_input_ids , inner_triple [ 0 ]) obj_head_idx = find_head_idx ( inner_input_ids , inner_triple [ 2 ]) if sub_head_idx != - 1 and obj_head_idx != - 1 : sub = ( sub_head_idx , sub_head_idx + len ( inner_triple [ 0 ]) - 1 ) # s2ro_map\u4fdd\u5b58\u4e3b\u8bed\u5230\u8c13\u8bed\u7684\u6620\u5c04 s2ro_map [ sub ] . append ( ( obj_head_idx , obj_head_idx + len ( inner_triple [ 2 ]) - 1 , inner_triple [ 1 ])) # {(3,5):[(7,8,0)]} 0\u662f\u5173\u7cfb if s2ro_map : for s in s2ro_map : inner_sub_heads [ s [ 0 ]] = 1 inner_sub_tails [ s [ 1 ]] = 1 sub_head_idx , sub_tail_idx = choice ( list ( s2ro_map . keys ())) inner_sub_head2tail [ sub_head_idx : sub_tail_idx + 1 ] = 1 inner_sub_len = torch . tensor ([ sub_tail_idx + 1 - sub_head_idx ], dtype = torch . float ) for ro in s2ro_map . get (( sub_head_idx , sub_tail_idx ), []): inner_obj_heads [ ro [ 0 ]][ ro [ 2 ]] = 1 inner_obj_tails [ ro [ 1 ]][ ro [ 2 ]] = 1 return inner_sub_len , inner_sub_head2tail , inner_sub_heads , inner_sub_tails , inner_obj_heads , inner_obj_tails \u6784\u5efa\u7b2c\u4e09\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570collate_fn, \u4f4d\u4e8eprocess.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def collate_fn ( data ): text_list = [ value [ 0 ] for value in data ] triple = [ value [ 1 ] for value in data ] # \u6309\u7167batch\u4e2d\u6700\u957f\u53e5\u5b50\u8865\u9f50 text = conf . tokenizer . batch_encode_plus ( text_list , padding = True ) batch_size = len ( text [ 'input_ids' ]) seq_len = len ( text [ 'input_ids' ][ 0 ]) sub_heads = [] sub_tails = [] obj_heads = [] obj_tails = [] sub_len = [] sub_head2tail = [] # \u5faa\u73af\u904d\u5386\u6bcf\u4e2a\u6837\u672c\uff0c\u5c06\u5b9e\u4f53\u4fe1\u606f\u8fdb\u884c\u5f20\u91cf\u7684\u8f6c\u5316 for batch_index in range ( batch_size ): inner_input_ids = text [ 'input_ids' ][ batch_index ] # \u5355\u4e2a\u53e5\u5b50\u53d8\u6210\u7d22\u5f15\u540e inner_triples = triple [ batch_index ] # \u83b7\u53d6\u6bcf\u4e2a\u6837\u672c\u7684\uff1a\u4e3b\u5b9e\u4f53\u957f\u5ea6\u3001\u4e3b\u5b9e\u4f53\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u5f20\u91cf\u8868\u793a\u3001\u5ba2\u5b9e\u4f53\u4ee5\u53ca\u5bf9\u5e94\u5173\u7cfb\u5b9e\u73b0\u5f20\u91cf\u8868\u793a results = create_label ( inner_triples , inner_input_ids , seq_len ) sub_len . append ( results [ 0 ]) sub_head2tail . append ( results [ 1 ]) sub_heads . append ( results [ 2 ]) sub_tails . append ( results [ 3 ]) obj_heads . append ( results [ 4 ]) obj_tails . append ( results [ 5 ]) input_ids = torch . tensor ( text [ 'input_ids' ]) . to ( conf . device ) mask = torch . tensor ( text [ 'attention_mask' ]) . to ( conf . device ) # \u501f\u52a9torch.stack()\u51fd\u6570\u6cbf\u4e00\u4e2a\u65b0\u7ef4\u5ea6\u5bf9\u8f93\u5165batch_size\u5f20\u91cf\u5e8f\u5217\u8fdb\u884c\u8fde\u63a5\uff0c\u5e8f\u5217\u4e2d\u6240\u6709\u5f20\u91cf\u5e94\u4e3a\u76f8\u540c\u5f62\u72b6\uff1bstack \u51fd\u6570\u8fd4\u56de\u7684\u7ed3\u679c\u4f1a\u65b0\u589e\u4e00\u4e2a\u7ef4\u5ea6, sub_heads = torch . stack ( sub_heads ) . to ( conf . device ) sub_tails = torch . stack ( sub_tails ) . to ( conf . device ) sub_len = torch . stack ( sub_len ) . to ( conf . device ) sub_head2tail = torch . stack ( sub_head2tail ) . to ( conf . device ) obj_heads = torch . stack ( obj_heads ) . to ( conf . device ) obj_tails = torch . stack ( obj_tails ) . to ( conf . device ) inputs = { 'input_ids' : input_ids , 'mask' : mask , 'sub_head2tail' : sub_head2tail , 'sub_len' : sub_len } labels = { 'sub_heads' : sub_heads , 'sub_tails' : sub_tails , 'obj_heads' : obj_heads , 'obj_tails' : obj_tails } return inputs , labels","title":"\u7b2c\u4e09\u6b65\uff1a \u7f16\u5199\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#datasetdataloader","text":"\u4ee3\u7801\u8def\u5f84\u4e3a: /home/ec2-user/Casrel_RE/relationship_extract/codes/utils/data_loader.py \u9996\u5148\u5bfc\u5165\u76f8\u5e94\u7684\u5de5\u5177\u5305 # coding:utf-8 from torch.utils.data import DataLoader , Dataset from utils.process import * conf = Config () \u6784\u5efa\u7b2c\u4e00\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u7c7bMyDataset, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u7c7b. # \u81ea\u5b9a\u4e49Dataset class MyDataset ( Dataset ): def __init__ ( self , data_path ): super ( MyDataset , self ) . __init__ () self . dataset = [ json . loads ( line ) for line in open ( data_path , encoding = 'utf8' )] def __len__ ( self ): return len ( self . dataset ) def __getitem__ ( self , index ): content = self . dataset [ index ] text = content [ 'text' ] spo_list = content [ 'spo_list' ] return text , spo_list \u6784\u5efa\u7b2c\u4e8c\u4e2a\u6570\u636e\u5904\u7406\u76f8\u5173\u51fd\u6570get_data, \u4f4d\u4e8edata_loader.py\u4e2d\u7684\u72ec\u7acb\u51fd\u6570. def get_data (): # \u5b9e\u4f8b\u5316\u8bad\u7ec3\u6570\u636e\u96c6Dataset\u5bf9\u8c61 train_data = MyDataset ( conf . train_data_path ) # \u5b9e\u4f8b\u5316\u9a8c\u8bc1\u6570\u636e\u96c6Dataset\u5bf9\u8c61 dev_data = MyDataset ( conf . dev_data_path ) # \u5b9e\u4f8b\u5316\u6d4b\u8bd5\u6570\u636e\u96c6Dataset\u5bf9\u8c61 test_data = MyDataset ( conf . test_data_path ) # \u5b9e\u4f8b\u5316\u8bad\u7ec3\u6570\u636e\u96c6Dataloader\u5bf9\u8c61 train_dataloader = DataLoader ( dataset = train_data , batch_size = conf . batch_size , shuffle = True , collate_fn = collate_fn , drop_last = True ) # \u5b9e\u4f8b\u5316\u9a8c\u8bc1\u6570\u636e\u96c6Dataloader\u5bf9\u8c61 dev_dataloader = DataLoader ( dataset = dev_data , batch_size = conf . batch_size , shuffle = True , collate_fn = collate_fn , drop_last = True ) # \u5b9e\u4f8b\u5316\u6d4b\u8bd5\u6570\u636e\u96c6Dataloader\u5bf9\u8c61 test_dataloader = DataLoader ( dataset = test_data , batch_size = conf . batch_size , shuffle = True , collate_fn = collate_fn , drop_last = True ) return train_dataloader , dev_dataloader , test_dataloader","title":"\u7b2c\u56db\u6b65\uff1a\u6784\u5efaDataSet\u7c7b\u4ee5\u53caDataloader\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#6-casrel","text":"\u672c\u9879\u76ee\u4e2dCasrel\u6a21\u578b\u642d\u5efa\u7684\u6b65\u9aa4\u5982\u4e0b: \u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801 \u7b2c\u4e8c\u6b65: \u7f16\u5199\u5de5\u5177\u7c7b\u51fd\u6570,\u8bad\u7ec3\u51fd\u6570,\u9a8c\u8bc1\u51fd\u6570,\u6d4b\u8bd5\u51fd\u6570 \u7b2c\u4e09\u6b65: \u7f16\u5199\u4f7f\u7528\u6a21\u578b\u9884\u6d4b\u4ee3\u7801\u7684\u5b9e\u73b0.","title":"6 Casrel\u6a21\u578b\u642d\u5efa"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_7","text":"\u6587\u672c\u7f16\u7801\u91c7\u7528\u7684\u662fBERT\u9884\u8bad\u7ec3\u6a21\u578b \u7b2c\u4e00\u6b65: \u5b9e\u73b0CasRel\u7c7b\u4ee3\u7801. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/model/CasrelModel.py # coding:utf-8 import torch import torch.nn as nn from transformers import BertModel , AdamW from codes.config import * class CasRel ( nn . Module ): def __init__ ( self , conf ): super () . __init__ () self . bert = BertModel . from_pretrained ( conf . bert_path ) # \u5b9a\u4e49\u7b2c\u4e00\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u4e3b\u5b9e\u4f53\u7684\u5934\u90e8\u4f4d\u7f6e self . sub_heads_linear = nn . Linear ( conf . bert_dim , 1 ) # \u5b9a\u4e49\u7b2c\u4e8c\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u4e3b\u5b9e\u4f53\u7684\u5c3e\u90e8\u4f4d\u7f6e self . sub_tails_linear = nn . Linear ( conf . bert_dim , 1 ) # \u5b9a\u4e49\u7b2c\u4e09\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u5ba2\u5b9e\u4f53\u7684\u5934\u90e8\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b self . obj_heads_linear = nn . Linear ( conf . bert_dim , conf . num_rel ) # \u5b9a\u4e49\u7b2c\u56db\u4e2a\u7ebf\u6027\u5c42\uff0c\u6765\u5224\u65ad\u5ba2\u5b9e\u4f53\u7684\u5c3e\u90e8\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b self . obj_tails_linear = nn . Linear ( conf . bert_dim , conf . num_rel ) def get_encoded_text ( self , token_ids , mask ): encoded_text = self . bert ( token_ids , attention_mask = mask )[ 0 ] return encoded_text def get_subs ( self , encoded_text ): pre_sub_heads = torch . sigmoid ( self . sub_heads_linear ( encoded_text )) pre_sub_tails = torch . sigmoid ( self . sub_tails_linear ( encoded_text )) return pre_sub_heads , pre_sub_tails def get_objs_for_specific_sub ( self , sub_head2tail , sub_len , encoded_text ): ''' \u5c06subject\u5b9e\u4f53\u4fe1\u606f\u878d\u5408\u539f\u59cb\u53e5\u5b50\u4e2d\uff1a\u5c06\u4e3b\u5b9e\u4f53\u5b57\u5411\u91cf\u5b9e\u73b0\u5e73\u5747\uff0c\u7136\u540e\u52a0\u5728\u5f53\u524d\u53e5\u5b50\u7684\u6bcf\u4e00\u4e2a\u5b57\u5411\u91cf\u4e0a\uff0c\u8fdb\u884c\u8ba1\u7b97 :param sub_head2tail:shape-->\u301016\uff0c1, 200\u3011 :param sub_len:shape--->[16,1] :param encoded_text:.shape[16\uff0c200\uff0c768] :return: pred_obj_heads-->shape [] pre_obj_tails-->shape [] ''' sub = torch . matmul ( sub_head2tail , encoded_text ) # \u5c06\u4e3b\u5b9e\u4f53\u7279\u5f81\u548c\u7f16\u7801\u540e\u7684\u6587\u672c\u8fdb\u884c\u878d\u5408 sub_len = sub_len . unsqueeze ( 1 ) # \u4e3b\u5b9e\u4f53\u957f\u5ea6\uff08\u6269\u7ef4\uff09 sub = sub / sub_len # \u5e73\u5747\u4e3b\u5b9e\u4f53\u4fe1\u606f encoded_text = encoded_text + sub #\u5c06\u5904\u7406\u540e\u7684\u5b9e\u4f53\u7279\u5f81\u548c\u539f\u59cb\u7f16\u7801\u540e\u7684\u6587\u672c\u8fdb\u884c\u878d\u5408 pred_obj_heads = torch . sigmoid ( self . obj_heads_linear ( encoded_text )) pre_obj_tails = torch . sigmoid ( self . obj_tails_linear ( encoded_text )) return pred_obj_heads , pre_obj_tails def forward ( self , input_ids , mask , sub_head2tail , sub_len ): ''' :param input_ids: shape-->[16, 200] :param mask: shape-->[16, 200] :param sub_head2tail: shape-->[16, 200] :param sub_len: shape-->[16, 1] :return: ''' # todo: encode_text.shape--->[16,200,768] encoded_text = self . get_encoded_text ( input_ids , mask ) pred_sub_heads , pre_sub_tails = self . get_subs ( encoded_text ) sub_head2tail = sub_head2tail . unsqueeze ( 1 ) pred_obj_heads , pre_obj_tails = self . get_objs_for_specific_sub ( sub_head2tail , sub_len , encoded_text ) result_dict = { 'pred_sub_heads' : pred_sub_heads , 'pred_sub_tails' : pre_sub_tails , 'pred_obj_heads' : pred_obj_heads , 'pred_obj_tails' : pre_obj_tails , 'mask' : mask } return result_dict def compute_loss ( self , pred_sub_heads , pred_sub_tails , pred_obj_heads , pred_obj_tails , mask , sub_heads , sub_tails , obj_heads , obj_tails ): ''' \u8ba1\u7b97\u635f\u5931 :param pred_sub_heads:[16, 200, 1] :param pred_sub_tails:[16, 200, 1] :param pred_obj_heads:[16, 200, 18] :param pred_obj_tails:[16, 200, 18] :param mask: shape-->[16, 200] :param sub_heads: shape-->[16, 200] :param sub_tails: shape-->[16, 200] :param obj_heads: shape-->[16, 200, 18] :param obj_tails: shape-->[16, 200, 18] :return: ''' # todo:sub_heads.shape,sub_tails.shape, mask-->[16, 200] # todo:obj_heads.shape,obj_tails.shape-->[16, 200, 18] rel_count = obj_heads . shape [ - 1 ] rel_mask = mask . unsqueeze ( - 1 ) . repeat ( 1 , 1 , rel_count ) loss_1 = self . loss ( pred_sub_heads , sub_heads , mask ) loss_2 = self . loss ( pred_sub_tails , sub_tails , mask ) loss_3 = self . loss ( pred_obj_heads , obj_heads , rel_mask ) loss_4 = self . loss ( pred_obj_tails , obj_tails , rel_mask ) return loss_1 + loss_2 + loss_3 + loss_4 def loss ( self , pred , gold , mask ): pred = pred . squeeze ( - 1 ) los = nn . BCELoss ( reduction = 'none' )( pred , gold ) if los . shape != mask . shape : mask = mask . unsqueeze ( - 1 ) los = torch . sum ( los * mask ) / torch . sum ( mask ) return los def load_model ( conf ): device = conf . device model = CasRel ( conf ) model . to ( device ) # \u56e0\u4e3a\u672c\u6b21\u6a21\u578b\u501f\u52a9BERT\u505afine_tuning\uff0c \u56e0\u6b64\u9700\u8981\u5bf9\u6a21\u578b\u4e2d\u7684\u5927\u90e8\u5206\u53c2\u6570\u8fdb\u884cL2\u6b63\u5219\u5904\u7406\u9632\u6b62\u8fc7\u62df\u5408\uff0c\u5305\u62ec\u6743\u91cdw\u548c\u504f\u7f6eb # prepare optimzier # named_parameters()\u83b7\u53d6\u6a21\u578b\u4e2d\u7684\u53c2\u6570\u548c\u53c2\u6570\u540d\u5b57 param_optimizer = list ( model . named_parameters ()) print ( f 'param_optimizer---> { param_optimizer } ' ) no_decay = [ \"bias\" , \"LayerNorm.bias\" , \"LayerNorm.weight\" ] # no_decay\u4e2d\u5b58\u653e\u4e0d\u8fdb\u884c\u6743\u91cd\u8870\u51cf\u7684\u53c2\u6570{\u56e0\u4e3abert\u5b98\u65b9\u4ee3\u7801\u5bf9\u8fd9\u4e09\u9879\u514d\u4e8e\u6b63\u5219\u5316} # any()\u51fd\u6570\u7528\u4e8e\u5224\u65ad\u7ed9\u5b9a\u7684\u53ef\u8fed\u4ee3\u53c2\u6570iterable\u662f\u5426\u5168\u90e8\u4e3aFalse\uff0c\u5219\u8fd4\u56deFalse\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u4e3aTrue\uff0c\u5219\u8fd4\u56deTrue # \u5224\u65adparam_optimizer\u4e2d\u6240\u6709\u7684\u53c2\u6570\u3002\u5982\u679c\u4e0d\u5728no_decay\u4e2d\uff0c\u5219\u8fdb\u884c\u6743\u91cd\u8870\u51cf;\u5982\u679c\u5728no_decay\u4e2d\uff0c\u5219\u4e0d\u8fdb\u884c\u6743\u91cd\u8870\u51cf optimizer_grouped_parameters = [ { \"params\" : [ p for n , p in param_optimizer if not any ( nd in n for nd in no_decay )], \"weight_decay\" : 0.01 }, { \"params\" : [ p for n , p in param_optimizer if any ( nd in n for nd in no_decay )], \"weight_decay\" : 0.0 }] optimizer = AdamW ( optimizer_grouped_parameters , lr = conf . learning_rate , eps = 10e-8 ) # \u662f\u5426\u9700\u8981\u5bf9bert\u8fdb\u884cwarm_up\u3002\u8fd9\u91cc\u9ed8\u8ba4\u4e0d\u8fdb\u884c sheduler = None return model , optimizer , sheduler , device if __name__ == '__main__' : conf = Config () # casrel = CasRel(conf) # print(f'\u6a21\u578b\u7684\u67b6\u6784--->{casrel}') load_model ( conf )","title":"\u7b2c\u4e00\u6b65: \u7f16\u5199\u6a21\u578b\u7c7b\u7684\u4ee3\u7801"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_8","text":"\u6ce8\u610f\uff1a\u5de5\u5177\u7c7b\u51fd\u6570\u9700\u8981\u5728\u8bad\u7ec3\u3001\u6d4b\u8bd5\u3001\u8bc4\u4f30\u8fc7\u7a0b\u4e2d\u4f7f\u7528\uff1b\u8bad\u7ec3\u51fd\u6570, \u9a8c\u8bc1\u51fd\u6570\u4e24\u8005\u5728\u4e00\u4e2a\u811a\u672c\uff0c\u6d4b\u8bd5\u51fd\u6570\u5355\u72ec\u4e00\u4e2a\u811a\u672c. \u6b64\u5916, \u56e0\u4e3a\u9a8c\u8bc1\u51fd\u6570\u548c\u6d4b\u8bd5\u51fd\u6570\u4e00\u81f4\uff0c\u56e0\u6b64\u53ea\u5199\u4e00\u4e2a\u5373\u53ef. \u7b2c\u4e00\u6b65: \u5b9e\u73b0utils\u51fd\u6570. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/utils/process.py # coding:utf-8 from codes.config import * import torch from random import choice from collections import defaultdict conf = Config () def extract_sub ( pred_sub_heads , pred_sub_tails ): ''' :param pred_sub_heads: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4e3b\u5b9e\u4f53\u5f00\u5934\u4f4d\u7f6e :param pred_sub_tails: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4e3b\u5b9e\u4f53\u5c3e\u90e8\u4f4d\u7f6e :return: subs\u5217\u8868\u91cc\u9762\u5bf9\u5e94\u7684\u6240\u6709\u5b9e\u4f53\u3010head, tail\u3011 ''' subs = [] # \u7edf\u8ba1\u9884\u6d4b\u51fa\u6240\u6709\u503c\u4e3a1\u7684\u5143\u7d20\u7d22\u5f15\u4f4d\u7f6e heads = torch . arange ( 0 , len ( pred_sub_heads ), device = conf . device )[ pred_sub_heads == 1 ] tails = torch . arange ( 0 , len ( pred_sub_tails ), device = conf . device )[ pred_sub_tails == 1 ] for head , tail in zip ( heads , tails ): if tail >= head : subs . append (( head . item (), tail . item ())) return subs def extract_obj_and_rel ( obj_heads , obj_tails ): ''' :param obj_heads: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4ece\u5b9e\u4f53\u5f00\u5934\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b :param obj_tails: \u6a21\u578b\u9884\u6d4b\u51fa\u7684\u4ece\u5b9e\u4f53\u5c3e\u90e8\u4f4d\u7f6e\u4ee5\u53ca\u5173\u7cfb\u7c7b\u578b :return: obj_and_rels\uff1a\u5143\u7d20\u5f62\u72b6\uff1a(rel_index, start_index, end_index) ''' obj_heads = obj_heads . T obj_tails = obj_tails . T rel_count = obj_heads . shape [ 0 ] obj_and_rels = [] for rel_index in range ( rel_count ): obj_head = obj_heads [ rel_index ] obj_tail = obj_tails [ rel_index ] objs = extract_sub ( obj_head , obj_tail ) if objs : for obj in objs : start_index , end_index = obj obj_and_rels . append (( rel_index , start_index , end_index )) return obj_and_rels def convert_score_to_zero_one ( tensor ): ''' \u4ee50.5\u4e3a\u9608\u503c\uff0c\u5927\u4e8e0.5\u7684\u8bbe\u7f6e\u4e3a1\uff0c\u5c0f\u4e8e0.5\u7684\u8bbe\u7f6e\u4e3a0 ''' tensor [ tensor >= 0.5 ] = 1 tensor [ tensor < 0.5 ] = 0 return tensor \u5bfc\u5165\u5b9e\u73b0\u8bad\u7ec3\u51fd\u6570,\u9a8c\u8bc1\u51fd\u6570,\u6d4b\u8bd5\u51fd\u6570\u7684\u5de5\u5177\u5305 # coding:utf-8 from model.CasrelModel import * from utils.process import * from utils.data_loader import * from config import * import pandas as pd from tqdm import tqdm \u7b2c\u4e8c\u6b65: \u7f16\u5199\u8bad\u7ec3\u4e0e\u9a8c\u8bc1\u51fd\u6570. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/train.py \u6ce8\u610f: \u9a8c\u8bc1\u51fd\u6570\u7684\u76ee\u7684\u662f\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0c\u4fdd\u5b58F1\u503c\u6700\u597d\u7684\u6a21\u578b\u72b6\u6001\uff0c\u56e0\u6b64\u5d4c\u5957\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d def model2train ( model , train_iter , dev_iter , optimizer , conf ): epochs = conf . epochs best_triple_f1 = 0 for epoch in range ( epochs ): train_epoch ( model , train_iter , dev_iter , optimizer , best_triple_f1 , epoch ) torch . save ( model . state_dict (), '../save_model/last_model.pth' ) def train_epoch ( model , train_iter , dev_iter , optimizer , best_triple_f1 , epoch ): for step , ( inputs , labels ) in enumerate ( tqdm ( train_iter )): model . train () logist = model ( ** inputs ) loss = model . compute_loss ( ** logist , ** labels ) model . zero_grad () loss . backward () optimizer . step () if step % 1500 == 0 : torch . save ( model . state_dict (), '../save_model/epoch_ %s _model_ %s .pth' % ( epoch , step )) results = model2dev ( model , dev_iter ) print ( results [ - 1 ]) if results [ - 2 ] > best_triple_f1 : best_triple_f1 = results [ - 2 ] torch . save ( model . state_dict (), '../save_model/best_f1.pth' ) print ( 'epoch: {} ,' 'step: {} ,' 'sub_precision: {:.4f} , ' 'sub_recall: {:.4f} , ' 'sub_f1: {:.4f} , ' 'triple_precision: {:.4f} , ' 'triple_recall: {:.4f} , ' 'triple_f1: {:.4f} ,' 'train loss: {:.4f} ' . format ( epoch , step , results [ 0 ], results [ 1 ], results [ 2 ], results [ 3 ], results [ 4 ], results [ 5 ], loss . item ())) return best_triple_f1 \u7b2c\u4e09\u6b65: \u7f16\u5199\u9a8c\u8bc1\u51fd\u6570. \u4ee3\u7801\u8def\u5f84: /home/ec2-user/Casrel_RE/relationship_extract/codes/train.py def model2dev ( model , dev_iter ): ''' \u9a8c\u8bc1\u6a21\u578b\u6548\u679c :param model: :param dev_iter: :return: ''' model . eval () # \u5b9a\u4e49\u4e00\u4e2adf\uff0c\u6765\u5c55\u793a\u6a21\u578b\u7684\u6307\u6807\u3002 df = pd . DataFrame ( columns = [ 'TP' , 'PRED' , \"REAL\" , 'p' , 'r' , 'f1' ], index = [ 'sub' , 'triple' ]) df . fillna ( 0 , inplace = True ) for inputs , labels in tqdm ( dev_iter ): logist = model ( ** inputs ) pred_sub_heads = convert_score_to_zero_one ( logist [ 'pred_sub_heads' ]) pred_sub_tails = convert_score_to_zero_one ( logist [ 'pred_sub_tails' ]) sub_heads = convert_score_to_zero_one ( labels [ 'sub_heads' ]) sub_tails = convert_score_to_zero_one ( labels [ 'sub_tails' ]) batch_size = inputs [ 'input_ids' ] . shape [ 0 ] obj_heads = convert_score_to_zero_one ( labels [ 'obj_heads' ]) obj_tails = convert_score_to_zero_one ( labels [ 'obj_tails' ]) pred_obj_heads = convert_score_to_zero_one ( logist [ 'pred_obj_heads' ]) pred_obj_tails = convert_score_to_zero_one ( logist [ 'pred_obj_tails' ]) for batch_index in range ( batch_size ): pred_subs = extract_sub ( pred_sub_heads [ batch_index ] . squeeze (), pred_sub_tails [ batch_index ] . squeeze ()) true_subs = extract_sub ( sub_heads [ batch_index ] . squeeze (), sub_tails [ batch_index ] . squeeze ()) pred_ojbs = extract_obj_and_rel ( pred_obj_heads [ batch_index ], pred_obj_tails [ batch_index ]) true_objs = extract_obj_and_rel ( obj_heads [ batch_index ], obj_tails [ batch_index ]) df [ 'PRED' ][ 'sub' ] += len ( pred_subs ) df [ 'REAL' ][ 'sub' ] += len ( true_subs ) for true_sub in true_subs : if true_sub in pred_subs : df [ 'TP' ][ 'sub' ] += 1 df [ 'PRED' ][ 'triple' ] += len ( pred_ojbs ) df [ 'REAL' ][ 'triple' ] += len ( true_objs ) for true_obj in true_objs : if true_obj in pred_ojbs : df [ 'TP' ][ 'triple' ] += 1 df . loc [ 'sub' , 'p' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'PRED' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'r' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'REAL' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'f1' ] = 2 * df [ 'p' ][ 'sub' ] * df [ 'r' ][ 'sub' ] / ( df [ 'p' ][ 'sub' ] + df [ 'r' ][ 'sub' ] + 1e-9 ) sub_precision = df [ 'TP' ][ 'sub' ] / ( df [ 'PRED' ][ 'sub' ] + 1e-9 ) sub_recall = df [ 'TP' ][ 'sub' ] / ( df [ 'REAL' ][ 'sub' ] + 1e-9 ) sub_f1 = 2 * sub_precision * sub_recall / ( sub_precision + sub_recall + 1e-9 ) df . loc [ 'triple' , 'p' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'PRED' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'r' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'REAL' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'f1' ] = 2 * df [ 'p' ][ 'triple' ] * df [ 'r' ][ 'triple' ] / ( df [ 'p' ][ 'triple' ] + df [ 'r' ][ 'triple' ] + 1e-9 ) triple_precision = df [ 'TP' ][ 'triple' ] / ( df [ 'PRED' ][ 'triple' ] + 1e-9 ) triple_recall = df [ 'TP' ][ 'triple' ] / ( df [ 'REAL' ][ 'triple' ] + 1e-9 ) triple_f1 = 2 * triple_precision * triple_recall / ( triple_precision + triple_recall + 1e-9 ) return sub_precision , sub_recall , sub_f1 , triple_precision , triple_recall , triple_f1 , df \u7b2c\u56db\u6b65: \u7f16\u5199\u6d4b\u8bd5\u51fd\u6570. \u4ee3\u7801\u8def\u5f84\uff1a/home/ec2-user/Casrel_RE/relationship_extract/codes/test.py def model2test ( model , test_iter ): ''' \u6d4b\u8bd5\u6a21\u578b\u6548\u679c :param model: :param test_iter: :return: ''' model . eval () # \u5b9a\u4e49\u4e00\u4e2adf\uff0c\u6765\u5c55\u793a\u6a21\u578b\u7684\u6307\u6807\u3002 df = pd . DataFrame ( columns = [ 'TP' , 'PRED' , \"REAL\" , 'p' , 'r' , 'f1' ], index = [ 'sub' , 'triple' ]) df . fillna ( 0 , inplace = True ) with torch . no_grad (): for inputs , labels in tqdm ( test_iter ): logist = model ( ** inputs ) pred_sub_heads = convert_score_to_zero_one ( logist [ 'pred_sub_heads' ]) pred_sub_tails = convert_score_to_zero_one ( logist [ 'pred_sub_tails' ]) sub_heads = convert_score_to_zero_one ( labels [ 'sub_heads' ]) sub_tails = convert_score_to_zero_one ( labels [ 'sub_tails' ]) batch_size = inputs [ 'input_ids' ] . shape [ 0 ] obj_heads = convert_score_to_zero_one ( labels [ 'obj_heads' ]) obj_tails = convert_score_to_zero_one ( labels [ 'obj_tails' ]) pred_obj_heads = convert_score_to_zero_one ( logist [ 'pred_obj_heads' ]) pred_obj_tails = convert_score_to_zero_one ( logist [ 'pred_obj_tails' ]) for batch_index in range ( batch_size ): pred_subs = extract_sub ( pred_sub_heads [ batch_index ] . squeeze (), pred_sub_tails [ batch_index ] . squeeze ()) true_subs = extract_sub ( sub_heads [ batch_index ] . squeeze (), sub_tails [ batch_index ] . squeeze ()) pred_ojbs = extract_obj_and_rel ( pred_obj_heads [ batch_index ], pred_obj_tails [ batch_index ]) true_objs = extract_obj_and_rel ( obj_heads [ batch_index ], obj_tails [ batch_index ]) df [ 'PRED' ][ 'sub' ] += len ( pred_subs ) df [ 'REAL' ][ 'sub' ] += len ( true_subs ) for true_sub in true_subs : if true_sub in pred_subs : df [ 'TP' ][ 'sub' ] += 1 df [ 'PRED' ][ 'triple' ] += len ( pred_ojbs ) df [ 'REAL' ][ 'triple' ] += len ( true_objs ) for true_obj in true_objs : if true_obj in pred_ojbs : df [ 'TP' ][ 'triple' ] += 1 df . loc [ 'sub' , 'p' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'PRED' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'r' ] = df [ 'TP' ][ 'sub' ] / ( df [ 'REAL' ][ 'sub' ] + 1e-9 ) df . loc [ 'sub' , 'f1' ] = 2 * df [ 'p' ][ 'sub' ] * df [ 'r' ][ 'sub' ] / ( df [ 'p' ][ 'sub' ] + df [ 'r' ][ 'sub' ] + 1e-9 ) df . loc [ 'triple' , 'p' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'PRED' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'r' ] = df [ 'TP' ][ 'triple' ] / ( df [ 'REAL' ][ 'triple' ] + 1e-9 ) df . loc [ 'triple' , 'f1' ] = 2 * df [ 'p' ][ 'triple' ] * df [ 'r' ][ 'triple' ] / ( df [ 'p' ][ 'triple' ] + df [ 'r' ][ 'triple' ] + 1e-9 ) return df","title":"\u7b2c\u4e8c\u6b65: \u7f16\u5199\u5de5\u5177\u7c7b\u51fd\u6570,\u8bad\u7ec3\u51fd\u6570,\u9a8c\u8bc1\u51fd\u6570,\u6d4b\u8bd5\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_9","text":"\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u968f\u673a\u62bd\u53d6\u6587\u672c\u8fdb\u884c\u5173\u7cfb\u62bd\u53d6 \u4ee3\u7801\u4f4d\u7f6e: /home/ec2-user/Casrel_RE/relationship_extract/codes/predict.py # coding:utf-8 from model.CasrelModel import * from utils.process import * conf = Config () def load_model ( model_path ): # \u5b9e\u4f8b\u5316\u6a21\u578b mymodel = CasRel ( conf ) . to ( conf . device ) mymodel . load_state_dict ( torch . load ( model_path )) return mymodel def get_inputs ( sample , model ): text = conf . tokenizer ( sample ) input_ids = torch . tensor ([ text [ 'input_ids' ]]) . to ( conf . device ) mask = torch . tensor ([ text [ 'attention_mask' ]]) . to ( conf . device ) # \u521d\u59cb\u5316\u503c seq_len = len ( text [ 'input_ids' ]) inner_sub_head2tail = torch . zeros ( seq_len ) inner_sub_len = torch . tensor ([ 1 ], dtype = torch . float ) # \u83b7\u53d6\u6a21\u578b\u9884\u6d4b\u7684\u5b9e\u4f53\u4f4d\u7f6e\u4fe1\u606f model . eval () with torch . no_grad (): # \u5148\u5229\u7528\u6a21\u578b\u83b7\u53d6\u4e3b\u5b9e\u4f53\u7684\u4f4d\u7f6e\u4fe1\u606f encoded_text = model . get_encoded_text ( input_ids , mask ) sub_heads , sub_tails = model . get_subs ( encoded_text ) pred_sub_heads = convert_score_to_zero_one ( sub_heads ) pred_sub_tails = convert_score_to_zero_one ( sub_tails ) # \u83b7\u53d6\u4e3b\u5b9e\u4f53\u7d22\u5f15\u4f4d\u7f6e\u4fe1\u606f pred_subs = extract_sub ( pred_sub_heads . squeeze (), pred_sub_tails . squeeze ()) # \u6a21\u578b\u53ef\u80fd\u6ca1\u8bc6\u522b\u51fa\u5b9e\u4f53 if len ( pred_subs ) != 0 : sub_head_idx = pred_subs [ 0 ][ 0 ] sub_tail_idx = pred_subs [ 0 ][ 1 ] # \u83b7\u53d6\u4e3b\u4f53\u957f\u5ea6\u4ee5\u53ca\u5bf9\u4e3b\u4f53\u4f4d\u7f6e\u5168\u90e8\u8d4b\u503c\u4e3a1 inner_sub_head2tail [ sub_head_idx : sub_tail_idx + 1 ] = 1 inner_sub_len = torch . tensor ([ sub_tail_idx + 1 - sub_head_idx ], dtype = torch . float ) sub_len = inner_sub_len . unsqueeze ( 0 ) . to ( conf . device ) sub_head2tail = inner_sub_head2tail . unsqueeze ( 0 ) . to ( conf . device ) inputs = { 'input_ids' : input_ids , 'mask' : mask , 'sub_head2tail' : sub_head2tail , 'sub_len' : sub_len } return inputs , model def model2predict ( sample , model ): with open ( conf . rel_dict_path , 'r' , encoding = 'utf-8' ) as fr : rel_id2word = json . load ( fr ) inputs , model = get_inputs ( sample , model ) logist = model ( ** inputs ) print ( f \"logist['pred_sub_heads']--> { logist [ 'pred_sub_heads' ] . shape } \" ) print ( f \"logist['pred_obj_heads']--> { logist [ 'pred_obj_heads' ] . shape } \" ) pred_sub_heads = convert_score_to_zero_one ( logist [ 'pred_sub_heads' ]) pred_sub_tails = convert_score_to_zero_one ( logist [ 'pred_sub_tails' ]) pred_obj_heads = convert_score_to_zero_one ( logist [ 'pred_obj_heads' ]) pred_obj_tails = convert_score_to_zero_one ( logist [ 'pred_obj_tails' ]) new_dict = {} spo_list = [] ids = inputs [ 'input_ids' ][ 0 ] text_list = conf . tokenizer . convert_ids_to_tokens ( ids ) sentence = '' . join ( text_list [ 1 : - 1 ]) pred_subs = extract_sub ( pred_sub_heads [ 0 ] . squeeze (), pred_sub_tails [ 0 ] . squeeze ()) pred_objs = extract_obj_and_rel ( pred_obj_heads [ 0 ], pred_obj_tails [ 0 ]) if len ( pred_subs ) == 0 or len ( pred_objs ) == 0 : print ( '\u6ca1\u6709\u8bc6\u522b\u51fa\u7ed3\u679c' ) return {} if len ( pred_objs ) > len ( pred_subs ): pred_subs = pred_subs * len ( pred_objs ) for sub , rel_obj in zip ( pred_subs , pred_objs ): sub_spo = {} sub_head , sub_tail = sub sub = '' . join ( text_list [ sub_head : sub_tail + 1 ]) if '[PAD]' in sub : continue sub_spo [ 'subject' ] = sub relation = rel_id2word [ str ( rel_obj [ 0 ])] obj_head , obj_tail = rel_obj [ 1 ], rel_obj [ 2 ] obj = '' . join ( text_list [ obj_head : obj_tail + 1 ]) if '[PAD]' in obj : continue sub_spo [ 'predicate' ] = relation sub_spo [ 'object' ] = obj spo_list . append ( sub_spo ) new_dict [ 'text' ] = sentence new_dict [ 'spo_list' ] = spo_list return new_dict if __name__ == '__main__' : sample = \"\u300a\u4eba\u95f4\u300b\u662f\u738b\u83f2\u6f14\u5531\u6b4c\u66f2\" model_path = '../save_model/last_model.pth' mymodel = load_model ( model_path ) model2predict ( sample , mymodel ) \u8c03\u7528: cd /home/Desktop/relationship_extract/codes/ # \u5b9e\u73b0\u6a21\u578b\u8bad\u7ec3 python train.py \u8f93\u51fa\u7ed3\u679c: \u7ed3\u8bba: Casrel\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u7684\u8868\u73b0\u662fF1: 72.7%","title":"\u7b2c\u4e09\u6b65: \u7f16\u5199\u6a21\u578b\u9884\u6d4b\u51fd\u6570"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#7-joint","text":"\u4f18\u70b9: \u4e24\u4e2a\u4efb\u52a1\u7684\u8868\u5f81\u6709\u4ea4\u4e92\u4f5c\u7528\u53ef\u80fd\u8f85\u52a9\u4efb\u52a1\u7684\u5b66\u4e60. \u4e0d\u7528\u8bad\u7ec3\u591a\u4e2a\u6a21\u578b\uff0c\u4e00\u4e2a\u6a21\u578b\u89e3\u51b3\u95ee\u9898\uff0c\u51cf\u5c11\u8bad\u7ec3\u4e0e\u9884\u6d4b\u7684gap. \u7f3a\u70b9: \u66f4\u590d\u6742\u7684\u6a21\u578b\u7ed3\u6784. Joint\u65b9\u6cd5\u63d0\u53d6\u7684\u7279\u5f81\u53ef\u80fd\u4e00\u81f4\uff0c\u4e5f\u53ef\u80fd\u51b2\u7a81\u4f1a\u4f7f\u6a21\u578b\u5b66\u4e60\u53d8\u5f97\u6df7\u4e71.","title":"7 Joint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\u7684\u4f18\u7f3a\u70b9"},{"location":"%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96/04-Joint%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html#_10","text":"\u672c\u7ae0\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u4ec0\u4e48\u662fJoint\u8054\u5408\u62bd\u53d6\u65b9\u6cd5\uff0c\u5e76\u57fa\u4e8eCasrel\u6a21\u578b\u4ece0\u52301\u5b9e\u73b0\u4e86\u5173\u7cfb\u62bd\u53d6\u4efb\u52a1\u3002","title":"\u5c0f\u8282\u603b\u7ed3:"}]}